(function(){const A=document.createElement("link").relList;if(A&&A.supports&&A.supports("modulepreload"))return;for(const I of document.querySelectorAll('link[rel="modulepreload"]'))R(I);new MutationObserver(I=>{for(const G of I)if(G.type==="childList")for(const H of G.addedNodes)H.tagName==="LINK"&&H.rel==="modulepreload"&&R(H)}).observe(document,{childList:!0,subtree:!0});function L(I){const G={};return I.integrity&&(G.integrity=I.integrity),I.referrerPolicy&&(G.referrerPolicy=I.referrerPolicy),I.crossOrigin==="use-credentials"?G.credentials="include":I.crossOrigin==="anonymous"?G.credentials="omit":G.credentials="same-origin",G}function R(I){if(I.ep)return;I.ep=!0;const G=L(I);fetch(I.href,G)}})();const nC="data.json";let fr=null;function wE(j){fr&&(fr.classList.remove("text-white"),fr.classList.add("text-black")),fr=j,fr&&(fr.classList.add("text-white"),fr.classList.remove("text-black"))}function iC(j){document.querySelectorAll(".category-container").forEach(L=>{L.style.display=L.id.toLowerCase()===j.toLowerCase()?"":"none",L.id.toLowerCase()===j.toLowerCase()&&L.querySelectorAll("section").forEach(I=>I.style.display="")}),wE(document.querySelector(`button[data-category='${j}']`))}fetch(nC).then(j=>j.json()).then(j=>{const A=rC(j),L=document.getElementById("menu");Object.entries(A).forEach(([R,I])=>{const G=document.createElement("button");G.innerText=R.toUpperCase(),G.dataset.category=R,G.classList.add("p-2","text-black","font-bold","hover:text-white"),G.onclick=()=>iC(R);const H=document.createElement("div");H.classList.add("hidden","absolute","z-10","text-black"),I.forEach(me=>{const re=document.createElement("a");re.href="#",re.innerText=me.title,re.classList.add("block","px-2","py-1","text-sm","text-black","hover:text-white"),H.appendChild(re),re.onclick=function(Z){Z.preventDefault(),Z.stopPropagation(),oC(R,me.title)}});const h=document.createElement("div");h.classList.add("relative","inline-block"),h.appendChild(G),h.appendChild(H),h.onmouseenter=()=>H.classList.remove("hidden"),h.onmouseleave=()=>H.classList.add("hidden"),L.appendChild(h)})}).catch(j=>console.error("Error loading the data:",j));function rC(j){return j.reduce((A,L)=>{const R=L.category||"uncategorized";return A[R]||(A[R]=[]),A[R].push(L),A},{})}function oC(j,A){document.querySelectorAll(".category-container").forEach(I=>{const G=I.id.toLowerCase()===j.toLowerCase();I.style.display=G?"":"none",G&&I.querySelectorAll("section").forEach(h=>{const me=h.getAttribute("data-title").toLowerCase()===A.toLowerCase();h.style.display=me?"":"none"})});const R=document.querySelector(`button[data-category="${j}"]`);R?wE(R):console.error("Could not find category button for:",j)}var sC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uC(j){return j&&j.__esModule&&Object.prototype.hasOwnProperty.call(j,"default")?j.default:j}var AE={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(j){(function(){var A=typeof window<"u"?window:sC,L={};(function(I,G,H){var h;function me(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var re=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function Z(e){e=[typeof globalThis=="object"&&globalThis,e,typeof I=="object"&&I,typeof self=="object"&&self,typeof G=="object"&&G];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var xe=Z(this);function ie(e,t){if(t)e:{var n=xe;e=e.split(".");for(var i=0;i<e.length-1;i++){var r=e[i];if(!(r in n))break e;n=n[r]}e=e[e.length-1],i=n[e],t=t(i),t!=i&&t!=null&&re(n,e,{configurable:!0,writable:!0,value:t})}}ie("Symbol",function(e){function t(o){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(i+(o||"")+"_"+r++,o)}function n(o,s){this.g=o,re(this,"description",{configurable:!0,writable:!0,value:s})}if(e)return e;n.prototype.toString=function(){return this.g};var i="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return t}),ie("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var i=xe[t[n]];typeof i=="function"&&typeof i.prototype[e]!="function"&&re(i.prototype,e,{configurable:!0,writable:!0,value:function(){return Fe(me(this))}})}return e});function Fe(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function g(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:me(e)}}function F(e){if(!(e instanceof Array)){e=g(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var St=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},et;if(typeof Object.setPrototypeOf=="function")et=Object.setPrototypeOf;else{var ke;e:{var mn={a:!0},Vt={};try{Vt.__proto__=mn,ke=Vt.a;break e}catch{}ke=!1}et=ke?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var zn=et;function pe(e,t){if(e.prototype=St(t.prototype),e.prototype.constructor=e,zn)zn(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.Bk=t.prototype}function Ln(){this.s=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.C=this.i=null}function Qn(e){if(e.s)throw new TypeError("Generator is already running");e.s=!0}Ln.prototype.u=function(e){this.h=e};function Jn(e,t){e.i={Qg:t,$g:!0},e.g=e.m||e.j}Ln.prototype.return=function(e){this.i={return:e},this.g=this.j};function y(e,t,n){return e.g=n,{value:t}}Ln.prototype.F=function(e){this.g=e};function K(e){e.g=0}function le(e,t,n){e.m=t,n!=null&&(e.j=n)}function Zn(e,t){e.m=0,e.j=t||0}function Ee(e,t,n){e.g=t,e.m=n||0}function ce(e,t){return e.m=t||0,t=e.i.Qg,e.i=null,t}function Zt(e){e.C=[e.i],e.m=0,e.j=0}function en(e,t){var n=e.C.splice(0)[0];(n=e.i=e.i||n)?n.$g?e.g=e.m||e.j:n.F!=null&&e.j<n.F?(e.g=n.F,e.i=null):e.g=e.j:e.g=t}function xE(e){this.g=new Ln,this.h=e}function IE(e,t){Qn(e.g);var n=e.g.l;return n?Tl(e,"return"in n?n.return:function(i){return{value:i,done:!0}},t,e.g.return):(e.g.return(t),Lo(e))}function Tl(e,t,n,i){try{var r=t.call(e.g.l,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.s=!1,r;var o=r.value}catch(s){return e.g.l=null,Jn(e.g,s),Lo(e)}return e.g.l=null,i.call(e.g,o),Lo(e)}function Lo(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.s=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,Jn(e.g,n)}if(e.g.s=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.$g)throw t.Qg;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function CE(e){this.next=function(t){return Qn(e.g),e.g.l?t=Tl(e,e.g.l.next,t,e.g.u):(e.g.u(t),t=Lo(e)),t},this.throw=function(t){return Qn(e.g),e.g.l?t=Tl(e,e.g.l.throw,t,e.g.u):(Jn(e.g,t),t=Lo(e)),t},this.return=function(t){return IE(e,t)},this[Symbol.iterator]=function(){return this}}function ME(e){function t(i){return e.next(i)}function n(i){return e.throw(i)}return new Promise(function(i,r){function o(s){s.done?i(s.value):Promise.resolve(s.value).then(t,n).then(o,r)}o(e.next())})}function k(e){return ME(new CE(new xE(e)))}function vn(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}ie("Promise",function(e){function t(s){this.h=0,this.i=void 0,this.g=[],this.s=!1;var u=this.j();try{s(u.resolve,u.reject)}catch(a){u.reject(a)}}function n(){this.g=null}function i(s){return s instanceof t?s:new t(function(u){u(s)})}if(e)return e;n.prototype.h=function(s){if(this.g==null){this.g=[];var u=this;this.i(function(){u.l()})}this.g.push(s)};var r=xe.setTimeout;n.prototype.i=function(s){r(s,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var s=this.g;this.g=[];for(var u=0;u<s.length;++u){var a=s[u];s[u]=null;try{a()}catch(l){this.j(l)}}}this.g=null},n.prototype.j=function(s){this.i(function(){throw s})},t.prototype.j=function(){function s(l){return function(c){a||(a=!0,l.call(u,c))}}var u=this,a=!1;return{resolve:s(this.H),reject:s(this.l)}},t.prototype.H=function(s){if(s===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(s instanceof t)this.J(s);else{e:switch(typeof s){case"object":var u=s!=null;break e;case"function":u=!0;break e;default:u=!1}u?this.G(s):this.m(s)}},t.prototype.G=function(s){var u=void 0;try{u=s.then}catch(a){this.l(a);return}typeof u=="function"?this.K(u,s):this.m(s)},t.prototype.l=function(s){this.u(2,s)},t.prototype.m=function(s){this.u(1,s)},t.prototype.u=function(s,u){if(this.h!=0)throw Error("Cannot settle("+s+", "+u+"): Promise already settled in state"+this.h);this.h=s,this.i=u,this.h===2&&this.I(),this.C()},t.prototype.I=function(){var s=this;r(function(){if(s.D()){var u=xe.console;typeof u<"u"&&u.error(s.i)}},1)},t.prototype.D=function(){if(this.s)return!1;var s=xe.CustomEvent,u=xe.Event,a=xe.dispatchEvent;return typeof a>"u"?!0:(typeof s=="function"?s=new s("unhandledrejection",{cancelable:!0}):typeof u=="function"?s=new u("unhandledrejection",{cancelable:!0}):(s=xe.document.createEvent("CustomEvent"),s.initCustomEvent("unhandledrejection",!1,!0,s)),s.promise=this,s.reason=this.i,a(s))},t.prototype.C=function(){if(this.g!=null){for(var s=0;s<this.g.length;++s)o.h(this.g[s]);this.g=null}};var o=new n;return t.prototype.J=function(s){var u=this.j();s.Zd(u.resolve,u.reject)},t.prototype.K=function(s,u){var a=this.j();try{s.call(u,a.resolve,a.reject)}catch(l){a.reject(l)}},t.prototype.then=function(s,u){function a(f,p){return typeof f=="function"?function(m){try{l(f(m))}catch(v){c(v)}}:p}var l,c,d=new t(function(f,p){l=f,c=p});return this.Zd(a(s,l),a(u,c)),d},t.prototype.catch=function(s){return this.then(void 0,s)},t.prototype.Zd=function(s,u){function a(){switch(l.h){case 1:s(l.i);break;case 2:u(l.i);break;default:throw Error("Unexpected state: "+l.h)}}var l=this;this.g==null?o.h(a):this.g.push(a),this.s=!0},t.resolve=i,t.reject=function(s){return new t(function(u,a){a(s)})},t.race=function(s){return new t(function(u,a){for(var l=g(s),c=l.next();!c.done;c=l.next())i(c.value).Zd(u,a)})},t.all=function(s){var u=g(s),a=u.next();return a.done?i([]):new t(function(l,c){function d(m){return function(v){f[m]=v,p--,p==0&&l(f)}}var f=[],p=0;do f.push(void 0),p++,i(a.value).Zd(d(f.length-1),c),a=u.next();while(!a.done)})},t});function Dn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}ie("WeakMap",function(e){function t(a){if(this.g=(u+=Math.random()+1).toString(),a){a=g(a);for(var l;!(l=a.next()).done;)l=l.value,this.set(l[0],l[1])}}function n(){}function i(a){var l=typeof a;return l==="object"&&a!==null||l==="function"}function r(a){if(!Dn(a,s)){var l=new n;re(a,s,{value:l})}}function o(a){var l=Object[a];l&&(Object[a]=function(c){return c instanceof n?c:(Object.isExtensible(c)&&r(c),l(c))})}if(function(){if(!e||!Object.seal)return!1;try{var a=Object.seal({}),l=Object.seal({}),c=new e([[a,2],[l,3]]);return c.get(a)!=2||c.get(l)!=3?!1:(c.delete(a),c.set(l,4),!c.has(a)&&c.get(l)==4)}catch{return!1}}())return e;var s="$jscomp_hidden_"+Math.random();o("freeze"),o("preventExtensions"),o("seal");var u=0;return t.prototype.set=function(a,l){if(!i(a))throw Error("Invalid WeakMap key");if(r(a),!Dn(a,s))throw Error("WeakMap key fail: "+a);return a[s][this.g]=l,this},t.prototype.get=function(a){return i(a)&&Dn(a,s)?a[s][this.g]:void 0},t.prototype.has=function(a){return i(a)&&Dn(a,s)&&Dn(a[s],this.g)},t.prototype.delete=function(a){return i(a)&&Dn(a,s)&&Dn(a[s],this.g)?delete a[s][this.g]:!1},t}),ie("Map",function(e){function t(){var u={};return u.Rb=u.next=u.head=u}function n(u,a){var l=u.g;return Fe(function(){if(l){for(;l.head!=u.g;)l=l.Rb;for(;l.next!=l.head;)return l=l.next,{done:!1,value:a(l)};l=null}return{done:!0,value:void 0}})}function i(u,a){var l=a&&typeof a;l=="object"||l=="function"?o.has(a)?l=o.get(a):(l=""+ ++s,o.set(a,l)):l="p_"+a;var c=u.h[l];if(c&&Dn(u.h,l))for(u=0;u<c.length;u++){var d=c[u];if(a!==a&&d.key!==d.key||a===d.key)return{id:l,list:c,index:u,entry:d}}return{id:l,list:c,index:-1,entry:void 0}}function r(u){if(this.h={},this.g=t(),this.size=0,u){u=g(u);for(var a;!(a=u.next()).done;)a=a.value,this.set(a[0],a[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var u=Object.seal({x:4}),a=new e(g([[u,"s"]]));if(a.get(u)!="s"||a.size!=1||a.get({x:4})||a.set({x:4},"t")!=a||a.size!=2)return!1;var l=a.entries(),c=l.next();return c.done||c.value[0]!=u||c.value[1]!="s"?!1:(c=l.next(),!(c.done||c.value[0].x!=4||c.value[1]!="t"||!l.next().done))}catch{return!1}}())return e;var o=new WeakMap;r.prototype.set=function(u,a){u=u===0?0:u;var l=i(this,u);return l.list||(l.list=this.h[l.id]=[]),l.entry?l.entry.value=a:(l.entry={next:this.g,Rb:this.g.Rb,head:this.g,key:u,value:a},l.list.push(l.entry),this.g.Rb.next=l.entry,this.g.Rb=l.entry,this.size++),this},r.prototype.delete=function(u){return u=i(this,u),u.entry&&u.list?(u.list.splice(u.index,1),u.list.length||delete this.h[u.id],u.entry.Rb.next=u.entry.next,u.entry.next.Rb=u.entry.Rb,u.entry.head=null,this.size--,!0):!1},r.prototype.clear=function(){this.h={},this.g=this.g.Rb=t(),this.size=0},r.prototype.has=function(u){return!!i(this,u).entry},r.prototype.get=function(u){return(u=i(this,u).entry)&&u.value},r.prototype.entries=function(){return n(this,function(u){return[u.key,u.value]})},r.prototype.keys=function(){return n(this,function(u){return u.key})},r.prototype.values=function(){return n(this,function(u){return u.value})},r.prototype.forEach=function(u,a){for(var l=this.entries(),c;!(c=l.next()).done;)c=c.value,u.call(a,c[1],c[0],this)},r.prototype[Symbol.iterator]=r.prototype.entries;var s=0;return r});function wl(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var o=n++;return{value:t(o,e[o]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}ie("Array.prototype.keys",function(e){return e||function(){return wl(this,function(t){return t})}}),ie("Set",function(e){function t(n){if(this.g=new Map,n){n=g(n);for(var i;!(i=n.next()).done;)this.add(i.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),i=new e(g([n]));if(!i.has(n)||i.size!=1||i.add(n)!=i||i.size!=1||i.add({x:4})!=i||i.size!=2)return!1;var r=i.entries(),o=r.next();return o.done||o.value[0]!=n||o.value[1]!=n?!1:(o=r.next(),o.done||o.value[0]==n||o.value[0].x!=4||o.value[1]!=o.value[0]?!1:r.next().done)}catch{return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,i){var r=this;this.g.forEach(function(o){return n.call(i,o,o,r)})},t)}),ie("Array.from",function(e){return e||function(t,n,i){n=n??function(u){return u};var r=[],o=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof o=="function"){t=o.call(t);for(var s=0;!(o=t.next()).done;)r.push(n.call(i,o.value,s++))}else for(o=t.length,s=0;s<o;s++)r.push(n.call(i,t[s],s));return r}});function wp(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var o=e[r];if(t.call(n,o,r,e))return{Xg:r,v:o}}return{Xg:-1,v:void 0}}ie("Array.prototype.findIndex",function(e){return e||function(t,n){return wp(this,t,n).Xg}}),ie("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),ie("Array.prototype.includes",function(e){return e||function(t,n){var i=this;i instanceof String&&(i=String(i));var r=i.length;for(n=n||0,0>n&&(n=Math.max(n+r,0));n<r;n++){var o=i[n];if(o===t||Object.is(o,t))return!0}return!1}});function Al(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}ie("String.prototype.includes",function(e){return e||function(t,n){return Al(this,t,"includes").indexOf(t,n||0)!==-1}}),ie("Array.prototype.find",function(e){return e||function(t,n){return wp(this,t,n).v}}),ie("String.prototype.startsWith",function(e){return e||function(t,n){var i=Al(this,t,"startsWith"),r=i.length,o=t.length;n=Math.max(0,Math.min(n|0,i.length));for(var s=0;s<o&&n<r;)if(i[n++]!=t[s++])return!1;return s>=o}}),ie("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=g(n);for(var i;!(i=n.next()).done;)this.add(i.value)}}return function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),i=Object.seal({}),r=new e([n]);return!r.has(n)||r.has(i)?!1:(r.delete(n),r.add(i),!r.has(n)&&r.has(i))}catch{return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)});var kE=typeof Object.assign=="function"?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)Dn(i,r)&&(e[r]=i[r])}return e};ie("Object.assign",function(e){return e||kE}),ie("Array.prototype.values",function(e){return e||function(){return wl(this,function(t,n){return n})}}),ie("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),ie("Array.prototype.entries",function(e){return e||function(){return wl(this,function(t,n){return[t,n]})}}),ie("String.prototype.repeat",function(e){return e||function(t){var n=Al(this,null,"repeat");if(0>t||1342177279<t)throw new RangeError("Invalid count value");t|=0;for(var i="";t;)t&1&&(i+=n),(t>>>=1)&&(n+=n);return i}}),ie("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),ie("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),ie("Object.values",function(e){return e||function(t){var n=[],i;for(i in t)Dn(t,i)&&n.push(t[i]);return n}}),ie("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),ie("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),ie("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return 0>t?-n:n}}),ie("Object.entries",function(e){return e||function(t){var n=[],i;for(i in t)Dn(t,i)&&n.push([i,t[i]]);return n}});var LE=this||self;function O(e,t){e=e.split(".");var n=LE;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var i;e.length&&(i=e.shift());)e.length||t===void 0?n[i]&&n[i]!==Object.prototype[i]?n=n[i]:n=n[i]={}:n[i]=t}function X(e,t){if(t)if(t instanceof Map)for(var n=g(t.keys()),i=n.next();!i.done;i=n.next())i=i.value,Object.defineProperty(this,i,{value:t.get(i),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=I.performance&&I.performance.now?I.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function Ap(e){var t=new X(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}X.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},X.prototype.stopImmediatePropagation=function(){this.g=!0},X.prototype.stopPropagation=function(){},O("shaka.util.FakeEvent",X);var Js={Aj:"abrstatuschanged",Bj:"adaptation",Cj:"buffering",Dj:"complete",Ej:"downloadfailed",Fj:"downloadheadersreceived",Gj:"drmsessionupdate",Ij:"emsg",Yj:"prft",Error:"error",Jj:"expirationupdated",Kj:"firstquartile",Lj:"gapjumped",Oj:"keystatuschanged",Qj:"loaded",Rj:"loading",Tj:"manifestparsed",Uj:"manifestupdated",Vj:"mediaqualitychanged",Metadata:"metadata",Wj:"midpoint",Xj:"onstatechange",$j:"ratechange",bk:"segmentappended",ck:"sessiondata",dk:"stalldetected",ek:"started",fk:"statechanged",gk:"streaming",hk:"textchanged",ik:"texttrackvisibility",jk:"thirdquartile",kk:"timelineregionadded",lk:"timelineregionenter",nk:"timelineregionexit",pk:"trackschanged",rk:"unloading",vk:"variantchanged"};function DE(){}function Ti(){}function Ae(){}function Oi(e){var t=vn.apply(1,arguments);Sp.has(e)||(Sp.add(e),Ae.apply(DE,F(t)))}function RE(){}function yC(){}function EC(){}function TC(){}var Sp=new Set;I.console&&(Ae=function(){return console.warn.apply(console,F(vn.apply(0,arguments)))},Ti=function(){console.error.apply(console,F(vn.apply(0,arguments)))});function Zs(){this.g={}}h=Zs.prototype,h.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},h.get=function(e){return(e=this.g[e])?e.slice():null},h.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter(function(n){return n!=t}),this.g[e].length==0&&delete this.g[e])},h.forEach=function(e){for(var t in this.g)e(t,this.g[t])},h.size=function(){return Object.keys(this.g).length},h.keys=function(){return Object.keys(this.g)};function Ie(){this.Aa=new Zs,this.we=this}Ie.prototype.addEventListener=function(e,t){this.Aa&&this.Aa.push(e,t)},Ie.prototype.removeEventListener=function(e,t){this.Aa&&this.Aa.remove(e,t)},Ie.prototype.dispatchEvent=function(e){if(!this.Aa)return!0;var t=this.Aa.get(e.type)||[],n=this.Aa.get("All");for(n&&(t=t.concat(n)),t=g(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.we,e.currentTarget=this.we;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch{}if(e.g)break}return e.defaultPrevented},Ie.prototype.release=function(){this.Aa=null};function Sl(e,t){var n=[];e=g(e);for(var i=e.next();!i.done;i=e.next())n.push(t(i.value));return n}function PE(e,t){e=g(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function xp(e,t){e=g(e);for(var n=e.next();!n.done;n=e.next())if(t(n.value))return!0;return!1}function gr(e,t){var n=[];e=g(e);for(var i=e.next();!i.done;i=e.next())i=i.value,t(i)&&n.push(i);return n}var NE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function Je(e){var t;e instanceof Je?(eu(this,e.wb),this.Bc=e.Bc,tu(this,e.Kb),xl(this,e.Tc),this.Ya=e.Ya,Do(this,e.g.clone()),this.pc=e.pc):e&&(t=String(e).match(NE))?(eu(this,t[1]||"",!0),this.Bc=Ro(t[2]||""),tu(this,t[3]||"",!0),xl(this,t[4]),this.Ya=Ro(t[5]||"",!0),Do(this,t[6]||"",!0),this.pc=Ro(t[7]||"")):this.g=new No(null)}h=Je.prototype,h.wb="",h.Bc="",h.Kb="",h.Tc=null,h.Ya="",h.pc="",h.toString=function(){var e=[],t=this.wb;if(t&&e.push(Po(t,Ip,!0),":"),t=this.Kb){e.push("//");var n=this.Bc;n&&e.push(Po(n,Ip,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Tc,t!=null&&e.push(":",String(t))}return(t=this.Ya)&&(this.Kb&&t.charAt(0)!="/"&&e.push("/"),e.push(Po(t,t.charAt(0)=="/"?UE:_E,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.pc)&&e.push("#",Po(t,jE)),e.join("")},h.resolve=function(e){var t=this.clone();t.wb==="data"&&(t=new Je);var n=!!e.wb;n?eu(t,e.wb):n=!!e.Bc,n?t.Bc=e.Bc:n=!!e.Kb,n?tu(t,e.Kb):n=e.Tc!=null;var i=e.Ya;if(n)xl(t,e.Tc);else if(n=!!e.Ya){if(i.charAt(0)!="/")if(this.Kb&&!this.Ya)i="/"+i;else{var r=t.Ya.lastIndexOf("/");r!=-1&&(i=t.Ya.substr(0,r+1)+i)}if(i==".."||i==".")i="";else if(i.indexOf("./")!=-1||i.indexOf("/.")!=-1){r=i.lastIndexOf("/",0)==0,i=i.split("/");for(var o=[],s=0;s<i.length;){var u=i[s++];u=="."?r&&s==i.length&&o.push(""):u==".."?((1<o.length||o.length==1&&o[0]!="")&&o.pop(),r&&s==i.length&&o.push("")):(o.push(u),r=!0)}i=o.join("/")}}return n?t.Ya=i:n=e.g.toString()!=="",n?Do(t,e.g.clone()):n=!!e.pc,n&&(t.pc=e.pc),t},h.clone=function(){return new Je(this)};function eu(e,t,n){e.wb=n?Ro(t,!0):t,e.wb&&(e.wb=e.wb.replace(/:$/,""))}function tu(e,t,n){e.Kb=n?Ro(t,!0):t}function xl(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Tc=t}else e.Tc=null}function Do(e,t,n){t instanceof No?e.g=t:(n||(t=Po(t,OE)),e.g=new No(t))}function Ro(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Po(e,t,n){return e!=null?(e=encodeURI(e).replace(t,bE),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function bE(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var Ip=/[#\/\?@]/g,_E=/[#\?:]/g,UE=/[#\?]/g,OE=/[#\?@]/g,jE=/#/g;function No(e){this.g=e||null}function nu(e){if(!e.Oa&&(e.Oa={},e.rd=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];o=decodeURIComponent(o.replace(/\+/g," ")),r=r||"",e.add(o,decodeURIComponent(r.replace(/\+/g," ")))}}h=No.prototype,h.Oa=null,h.rd=null;function Cp(e){return nu(e),e.rd}h.add=function(e,t){nu(this),this.g=null;var n=this.Oa.hasOwnProperty(e)?this.Oa[e]:null;return n||(this.Oa[e]=n=[]),n.push(t),this.rd++,this},h.set=function(e,t){return nu(this),this.g=null,this.Oa.hasOwnProperty(e)?this.Oa[e]=[t]:this.add(e,t),this},h.get=function(e){return nu(this),this.Oa[e]||[]},h.toString=function(){if(this.g)return this.g;if(!this.Oa)return"";var e=[],t;for(t in this.Oa)for(var n=encodeURIComponent(t),i=this.Oa[t],r=0;r<i.length;r++){var o=n;i[r]!==""&&(o+="="+encodeURIComponent(i[r])),e.push(o)}return this.g=e.join("&")},h.clone=function(){var e=new No;if(e.g=this.g,this.Oa){var t={},n;for(n in this.Oa)t[n]=this.Oa[n].concat();e.Oa=t,e.rd=this.rd}return e};function M(e,t,n){var i=vn.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=i,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(r){this.stack=r.stack}}M.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},O("shaka.util.Error",M),M.Severity={RECOVERABLE:1,CRITICAL:2},M.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},M.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_CODEC_UNKNOWN:3021,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005};function Tt(e,t){if(t.length==0)return e;if(e.length==1&&t.length==1){var n=new Je(e[0]);return t=new Je(t[0]),[n.resolve(t).toString()]}t=t.map(function(s){return new Je(s)}),n=[],e=g(e);for(var i=e.next();!i.done;i=e.next()){i=new Je(i.value);for(var r=g(t),o=r.next();!o.done;o=r.next())n.push(i.resolve(o.value).toString())}return n}function wi(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:t||[],keyIds:new Set}}function mr(e,t){if(t.length==1)return t[0];if(e=_t(e,t),e!=null)return e;throw new M(2,4,4025,t)}function _t(e,t){for(var n=g(BE[e]),i=n.next();!i.done;i=n.next()){i=i.value;for(var r=g(t),o=r.next();!o.done;o=r.next())if(o=o.value,i.test(o.trim()))return o.trim()}return e==Ce?"":null}var Ce="text",at={ia:"video",U:"audio",Da:Ce,cf:"image",yj:"application"},BE={audio:[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cex]$/],video:[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function yn(){}function iu(e,t){return e=Le(e),t=Le(t),e.split("-")[0]==t.split("-")[0]}function bo(e,t){return e=Le(e),t=Le(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function Il(e,t){return e=Le(e),t=Le(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function Le(e){e=g(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=g(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=kp.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function Mp(e,t){var n=vr(e),i=vr(t);return e!=n&&t!=i&&n==i}function ji(e,t){return e=Le(e),t=Le(t),t==e?4:bo(t,e)?3:Il(t,e)?2:bo(e,t)?1:0}function vr(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),e=kp.get(e)||e}function Cl(e){return e.language?Le(e.language):e.audio&&e.audio.language?Le(e.audio.language):e.video&&e.video.language?Le(e.video.language):"und"}function ru(e,t){e=Le(e);var n=new Set,i=g(t);for(t=i.next();!t.done;t=i.next())n.add(Le(t.value));for(i=g(n),t=i.next();!t.done;t=i.next())if(t=t.value,t==e)return t;for(i=g(n),t=i.next();!t.done;t=i.next())if(t=t.value,bo(t,e))return t;for(i=g(n),t=i.next();!t.done;t=i.next())if(t=t.value,Il(t,e))return t;for(n=g(n),t=n.next();!t.done;t=n.next())if(t=t.value,bo(e,t))return t;return null}O("shaka.util.LanguageUtils",yn),yn.findClosestLocale=ru,yn.getLocaleForVariant=Cl,yn.getLocaleForText=function(e){return Le(e.language||"und")},yn.getBase=vr,yn.relatedness=ji,yn.areSiblings=Mp,yn.normalize=Le,yn.isSiblingOf=Il,yn.isParentOf=bo,yn.areLanguageCompatible=iu,yn.areLocaleCompatible=function(e,t){return e=Le(e),t=Le(t),e==t};var kp=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function rt(e){Ie.call(this),this.j=Le(e),this.i=new Map,this.g=new Set,this.h=new Map}pe(rt,Ie),h=rt.prototype,h.release=function(){Ie.prototype.release.call(this)},h.Ig=function(e){var t=this;this.g.clear(),e=g(e);for(var n=e.next();!n.done;n=e.next())this.g.add(Le(n.value));Lp(this),e=gr(this.g,function(i){return!t.h.has(i)}),e.length&&this.dispatchEvent(new X("unknown-locales",new Map().set("locales",e))),e=gr(this.g,function(i){return t.h.has(i)}),e=new Map().set("locales",e.length?e:[this.j]),this.dispatchEvent(new X("locale-changed",e))},h.ya=function(e,t,n){e=Le(e),n===void 0&&(n=Ml);var i=this.h.get(e)||new Map;return t.forEach(function(r,o){i.has(o)&&n!=Ml||i.set(o,r)}),this.h.set(e,i),Lp(this),this.dispatchEvent(new X("locale-updated")),this},h.ij=function(e){for(var t=g(e.keys()),n=t.next();!n.done;n=t.next())n=n.value,e.set(n,this.resolve(n))},h.resolve=function(e){var t=this.i.get(e);return t||(e=new Map().set("locales",Array.from(this.g)).set("missing",e),this.dispatchEvent(new X("unknown-localization",e)),"")},h.bi=function(){return this.g};function Lp(e){for(var t=e.h,n=e.j,i=e.g,r=new Set,o={},s=g(i),u=s.next();!u.done;o={Fc:o.Fc},u=s.next()){o.Fc=u.value,r.add(o.Fc),r.add(vr(o.Fc)),u=gr(t.keys(),function(l){return function(c){return Mp(c,l.Fc)}}(o)),u.sort();var a=g(u);for(u=a.next();!u.done;u=a.next())r.add(u.value);for(u=gr(t.keys(),function(l){return function(c){return vr(c)==l.Fc}}(o)),u.sort(),a=g(u),u=a.next();!u.done;u=a.next())r.add(u.value)}for(r.add(n),n=[],r=g(r),u=r.next();!u.done;u=r.next())(u=t.get(u.value))&&n.push(u);for(n.reverse(),e.i.clear(),t=g(n),u=t.next();!u.done;u=t.next())u.value.forEach(function(l,c){e.i.set(c,l)});for(t=e.i.keys(),r=new Set,n=g(e.g),u=n.next();!u.done;u=n.next())u=e.h.get(u.value)||new Map,FE(u,t,r);0<r.size&&(i=new Map().set("locales",Array.from(i)).set("missing",Array.from(r)),e.dispatchEvent(new X("missing-localizations",i)))}function FE(e,t,n){t=g(t);for(var i=t.next();!i.done;i=t.next())i=i.value,e.get(i)||n.add(i)}O("shaka.ui.Localization",rt),rt.prototype.getCurrentLocales=rt.prototype.bi,rt.prototype.resolve=rt.prototype.resolve,rt.prototype.resolveDictionary=rt.prototype.ij,rt.prototype.insert=rt.prototype.ya,rt.prototype.changeLocale=rt.prototype.Ig,rt.prototype.release=rt.prototype.release;var Ml=1;rt.ConflictResolution={USE_OLD:0,USE_NEW:Ml},rt.UNKNOWN_LOCALES="unknown-locales",rt.UNKNOWN_LOCALIZATION="unknown-localization",rt.MISSING_LOCALIZATIONS="missing-localizations",rt.LOCALE_CHANGED="locale-changed",rt.LOCALE_UPDATED="locale-updated";function yr(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}yr.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function ou(e){return e.h/(1-Math.pow(e.g,e.i))}function _o(){this.h=new yr(2),this.j=new yr(5),this.g=0,this.i=128e3,this.l=16e3}_o.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},_o.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},_o.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(ou(this.h),ou(this.j))};function nt(e){if(su.has(e))return su.get(e);if(I.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported(e);return su.set(e,t),t}return I.MediaSource?(t=MediaSource.isTypeSupported(e),su.set(e,t),t):!1}function Bi(){return!!I.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType}var su=new Map;function Uo(){}Uo.prototype.extract=function(){},Uo.prototype.decode=function(){return[]},Uo.prototype.clear=function(){},Uo.prototype.getStreams=function(){return[]};function kl(){}kl.prototype.init=function(){},kl.prototype.parse=function(){return[]};function Er(){}function Ai(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(Ll(e)==Ll(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=ge(e);t=ge(t);for(var i=0;i<e.byteLength;i++)if(n[i]!=t[i])return!1;return!0}function Ll(e){return e instanceof ArrayBuffer?e:e.buffer}function tn(e){return e instanceof ArrayBuffer?e:e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function ge(e,t,n){return n=n===void 0?1/0:n,Dl(e,t===void 0?0:t,n,Uint8Array)}function Dp(e,t,n){return n=n===void 0?1/0:n,Dl(e,t===void 0?0:t,n,Uint16Array)}function Ut(e,t,n){return n=n===void 0?1/0:n,Dl(e,t===void 0?0:t,n,DataView)}function Dl(e,t,n,i){var r=Ll(e),o=1;"BYTES_PER_ELEMENT"in i&&(o=i.BYTES_PER_ELEMENT);var s=((e.byteOffset||0)+e.byteLength)/o;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/o,s))),new i(r,e,Math.floor(Math.min(e+Math.max(n,0),s))-e)}O("shaka.util.BufferUtils",Er),Er.toDataView=Ut,Er.toUint16=Dp,Er.toUint8=ge,Er.toArrayBuffer=tn,Er.equal=Ai;function Oo(){}Oo.prototype.init=function(){},Oo.prototype.i=function(){},Oo.prototype.h=function(){},Oo.prototype.j=function(){},O("shaka.media.IClosedCaptionParser",Oo);function zt(e){this.l=new kl,(e=Tr[e.toLowerCase()])&&(this.l=e()),this.g=new Uo,(e=wr)&&(this.g=e())}zt.prototype.init=function(e){this.l.init(e)},zt.prototype.i=function(e){e=this.l.parse(e),e=g(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=ge(t.packet);0<n.length&&this.g.extract(n,t.pts)}return this.g.decode()},zt.prototype.h=function(){this.g.clear()},zt.prototype.j=function(){return this.g.getStreams()},O("shaka.media.ClosedCaptionParser",zt),zt.findDecoder=function(){return wr},zt.unregisterDecoder=function(){wr=null},zt.registerDecoder=function(e){wr=e},zt.findParser=function(e){return Tr[e]},zt.unregisterParser=function(e){delete Tr[e]},zt.registerParser=function(e,t){Tr[e]=t};var Tr={},wr=null;function Rp(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function Rn(e,t){t=e.indexOf(t),-1<t&&e.splice(t,1)}function Pp(e,t,n){if(n||(n=Rp),e.length!=t.length)return!1;t=t.slice();var i={};e=g(e);for(var r=e.next();!r.done;i={Ue:i.Ue},r=e.next()){if(i.Ue=r.value,r=t.findIndex(function(o){return function(s){return n(o.Ue,s)}}(i)),r==-1)return!1;t[r]=t[t.length-1],t.pop()}return t.length==0}function Rl(e,t,n){if(n||(n=Rp),e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function je(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Gi,this.position=null,this.positionAlign=uu,this.size=0,this.textAlign=ei,this.direction=Bo,this.writingMode=Fo,this.lineInterpretation=au,this.line=null,this.lineHeight="",this.lineAlign=Fi,this.displayAlign=jo,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Op,this.fontStyle=_l,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={mc:32,rows:15}}function Np(e,t){return e=new je(e,t,""),e.lineBreak=!0,e}je.prototype.clone=function(){var e=new je(0,0,""),t;for(t in this)e[t]=this[t],e[t]&&e[t].constructor==Array&&(e[t]=e[t].slice());return e};function Pl(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!Rl(e.nestedCues,t.nestedCues,Pl))return!1}else if(n=="region"||n=="cellResolution"){for(var i in e[n])if(e[n][i]!=t[n][i])return!1}else if(Array.isArray(e[n])){if(!Rl(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}O("shaka.text.Cue",je),je.equal=Pl,je.prototype.clone=je.prototype.clone;var uu="auto";je.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:uu};var ei="center",Nl={LEFT:"left",RIGHT:"right",CENTER:ei,START:"start",END:"end"};je.textAlign=Nl;var jo="after",bp={BEFORE:"before",CENTER:"center",AFTER:jo};je.displayAlign=bp;var Bo="ltr";je.direction={HORIZONTAL_LEFT_TO_RIGHT:Bo,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Fo="horizontal-tb";je.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Fo,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var au=0;je.lineInterpretation={LINE_NUMBER:au,PERCENTAGE:1};var Fi="start",bl={CENTER:"center",START:Fi,END:"end"};je.lineAlign=bl;var _p={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};je.defaultTextColor=_p;var Up={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};je.defaultTextBackgroundColor=Up;var Op=400;je.fontWeight={NORMAL:Op,BOLD:700};var _l="normal",jp={NORMAL:_l,ITALIC:"italic",OBLIQUE:"oblique"};je.fontStyle=jp,je.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function Gi(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=nn,this.scroll=Bp}O("shaka.text.CueRegion",Gi);var nn=1;Gi.units={PX:0,PERCENTAGE:nn,LINES:2};var Bp="";Gi.scrollMode={NONE:Bp,UP:"up"};function Si(){}Si.prototype.destroy=function(){};function ti(e,t,n){Ul[e.toLowerCase().split(";")[0]+"-"+n]={priority:n,Ge:t}}function Vi(e,t){for(var n=e.toLowerCase().split(";")[0],i=g([Fp,jl,Ol,xi]),r=i.next();!r.done;r=i.next())if(r=Ul[n+"-"+r.value]){var o=r.Ge(),s=o.isSupported(e,t);if(o.destroy(),s)return r.Ge}return null}O("shaka.transmuxer.TransmuxerEngine",Si),Si.findTransmuxer=Vi,Si.unregisterTransmuxer=function(e,t){delete Ul[e.toLowerCase().split(";")[0]+"-"+t]},Si.registerTransmuxer=ti,Si.prototype.destroy=Si.prototype.destroy;var Ul={},xi=1,Ol=2,jl=3,Fp=4;Si.PluginPriority={FALLBACK:xi,PREFERRED_SECONDARY:Ol,PREFERRED:jl,APPLICATION:Fp};function Bl(){}function Kt(e,t){var n=e;return t&&!xr.includes(e)&&(n+='; codecs="'+t+'"'),n}function Ar(e,t){return t&&(e+='; codecs="'+t+'"'),e}function Sr(e,t,n){var i=Kt(e,t);return t=Ar(e,t),Vi(t)?(e=Vi(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?i.replace("video","audio"):i,n}function En(e){var t=Gp(e);switch(e=t[0],t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):return"ac-3";case(e==="mp4a"&&t==="a6"):return"ec-3";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="dvh1":case e==="dvhe":return"dovi"}return e}function Pn(e){var t=[];e=g(e.split(","));for(var n=e.next();!n.done;n=e.next())n=Gp(n.value),t.push(n[0]);return t.sort().join(",")}function ni(e){return e.split(";")[0]}function Tn(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function Gp(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}O("shaka.util.MimeUtils",Bl),Bl.getFullTypeWithAllCodecs=Ar,Bl.getFullType=Kt,new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");var xr=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function ii(e){this.i=null,this.j=e,this.C=!1,this.l=this.u=0,this.m=1/0,this.h=this.g=null,this.D="",this.s=new Map}function lu(e){return ht[e]?!0:e=="application/cea-608"||e=="application/cea-708"?!!wr:!1}ii.prototype.destroy=function(){return this.j=this.i=null,this.s.clear(),Promise.resolve()};function GE(e,t,n,i,r){var o,s,u,a;return k(function(l){if(l.g==1)return y(l,Promise.resolve(),2);if(!e.i||!e.j)return l.return();if(n==null||i==null)return e.i.parseInit(ge(t)),l.return();o=e.C?n:e.u,s={periodStart:e.u,segmentStart:n,segmentEnd:i,vttOffset:o},u=e.i.parseMedia(ge(t),s,r),a=u.filter(function(c){return c.startTime>=e.l&&c.startTime<e.m}),e.j.append(a),e.g==null&&(e.g=Math.max(n,e.l)),e.h=Math.min(i,e.m),K(l)})}ii.prototype.remove=function(e,t){var n=this;return k(function(i){if(i.g==1)return y(i,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||n.g==null||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),K(i)})};function VE(e,t,n){e.l=t,e.m=n}function Vp(e,t,n){if(e.D=t,t=e.s.get(t))for(var i=g(t.keys()),r=i.next();!r.done;r=i.next())(r=t.get(r.value).filter(function(o){return o.endTime<=n}))&&e.j.append(r)}function zp(e,t,n){t.startTime+=n,t.endTime+=n,t=g(t.nestedCues);for(var i=t.next();!i.done;i=t.next())zp(e,i.value,n)}function zE(e,t,n,i,r){var o=n+" "+i,s=new Map;t=g(t);for(var u=t.next();!u.done;u=t.next()){var a=u.value;u=a.stream,a=a.cue,s.has(u)||s.set(u,new Map),s.get(u).has(o)||s.get(u).set(o,[]),zp(e,a,r),a.startTime>=e.l&&a.startTime<e.m&&(s.get(u).get(o).push(a),u==e.D&&e.j.append([a]))}for(r=g(s.keys()),o=r.next();!o.done;o=r.next())for(o=o.value,e.s.has(o)||e.s.set(o,new Map),t=g(s.get(o).keys()),u=t.next();!u.done;u=t.next())u=u.value,a=s.get(o).get(u),e.s.get(o).set(u,a);e.g=e.g==null?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(i,e.m))}O("shaka.text.TextEngine",ii),ii.prototype.destroy=ii.prototype.destroy,ii.findParser=function(e){return ht[e]},ii.unregisterParser=function(e){delete ht[e]},ii.registerParser=function(e,t){ht[e]=t};var ht={};function KE(e,t){return e.concat(t)}function Kp(){}function Ir(e){return e!=null}function zi(e){function t(i){switch(typeof i){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return i;default:if(!i||i.buffer&&i.buffer.constructor==ArrayBuffer)return i;if(n.has(i))return null;var r=i.constructor==Array;if(i.constructor!=Object&&!r)return null;n.add(i);var o=r?[]:{},s;for(s in i)o[s]=t(i[s]);return r&&(o.length=i.length),o}}var n=new WeakSet;return t(e)}function Hp(e){var t={},n;for(n in e)t[n]=e[n];return t}function Go(e){this.h=e,this.g=null}Go.prototype.S=function(e){var t=this;this.stop();var n=!0,i=null;return this.g=function(){I.clearTimeout(i),n=!1},i=I.setTimeout(function(){n&&t.h()},1e3*e),this},Go.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function fe(e){this.h=e,this.g=null}fe.prototype.Qa=function(){return this.stop(),this.h(),this},fe.prototype.S=function(e){var t=this;return this.stop(),this.g=new Go(function(){t.h()}).S(e),this},fe.prototype.za=function(e){var t=this;return this.stop(),this.g=new Go(function(){t.g.S(e),t.h()}).S(e),this},fe.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},O("shaka.util.Timer",fe),fe.prototype.stop=fe.prototype.stop,fe.prototype.tickEvery=fe.prototype.za,fe.prototype.tickAfter=fe.prototype.S,fe.prototype.tickNow=fe.prototype.Qa;function Nn(){var e=I.ManagedMediaSource||I.MediaSource;return!!(e&&e.isTypeSupported)}function Vo(e){return Wp().canPlayType(e)!=""}function Fl(){return!!navigator.userAgent.match(/Edge?\//)}function zo(){return Xe("Xbox One")}function Ki(){return Xe("Tizen")}function cu(){return Xe("Tizen 3")}function hu(){return Xe("Tizen 2")}function Gl(){return Xe("Web0S")&&Xe("Chrome/38.0.2125.122 Safari/537.36")}function Cr(){return Xe("CrKey")}function Ko(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!Ki()&&!Xe("PC=EOS")&&!Xe("PC=APL")&&!Xe("VirginMedia")&&!Xe("SOPOpenBrowser")&&!Mr()&&!Xe("AFT")&&!Xe("WPE")}function Mr(){return Xe("PlayStation 4")}function kr(){if(!Ko())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Xe(e){return(navigator.userAgent||"").includes(e)}function Wp(){return Lr||(Vl||(Vl=new fe(function(){Lr=null})),(Lr=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Lr=document.createElement("video")),Vl.S(1),Lr)}var Vl=null,Lr=null;function Xp(){}function Yp(e,t,n,i){var r=e.variants;if((t.length||n.length)&&(r=HE(r,t,n)),i.length){for(t=new Zs,n=g(r),r=n.next();!r.done;r=n.next())r=r.value,t.push(String(r.video.width||0),r);var o=[];t.forEach(function(m,v){m=0;var E=[],w={};v=g(v);for(var T=v.next();!T.done;w={md:w.md},T=v.next())w.md=T.value,T=i.filter(function(x){return function(S){return x.md.decodingInfos[0][S]}}(w)).length,T>m?(m=T,E=[w.md]):T==m&&E.push(w.md);o.push.apply(o,F(E))}),r=o}n=new Set,t=new Set;var s=g(r);for(r=s.next();!r.done;r=s.next())r=r.value,r.audio&&n.add(r.audio),r.video&&t.add(r.video);n=Array.from(n).sort(function(m,v){return m.bandwidth-v.bandwidth});var u=[];for(r=new Map,n=g(n),s=n.next();!s.done;s=n.next()){s=s.value;var a=s.language+(s.channelsCount||0)+(s.audioSamplingRate||0)+s.roles.join(",")+s.label+s.groupId+s.fastSwitching,l=r.get(a)||[];if(l.length){var c=l[l.length-1],d=En(c.codecs),f=En(s.codecs);d==f&&s.bandwidth>c.bandwidth&&(l.push(s),u.push(s.id))}else l.push(s),u.push(s.id);r.set(a,l)}n=Array.from(t).sort(function(m,v){return m.bandwidth&&v.bandwidth?m.bandwidth-v.bandwidth:m.width-v.width}),t=Bi();var p=[];for(r=new Map,n=g(n),s=n.next();!s.done;s=n.next()){if(s=s.value,a=Math.round(s.frameRate||0)+(s.hdr||"")+s.fastSwitching,l=r.get(a)||[],l.length){if(c=l[l.length-1],!t&&(d=En(c.codecs),f=En(s.codecs),d!==f))continue;s.width>c.width||s.height>c.height?(l.push(s),p.push(s.id)):s.width==c.width&&s.height==c.height&&(d=En(c.codecs),f=En(s.codecs),d==f&&s.bandwidth>c.bandwidth&&(l.push(s),p.push(s.id)))}else l.push(s),p.push(s.id);r.set(a,l)}e.variants=e.variants.filter(function(m){var v=m.audio;return m=m.video,!(v&&!u.includes(v.id)||m&&!p.includes(m.id))})}function HE(e,t,n){var i={};t=g(t);for(var r=t.next();!r.done;i={bf:i.bf},r=t.next())if(i.bf=r.value,r=e.filter(function(o){return function(s){return s.video&&s.video.codecs.startsWith(o.bf)}}(i)),r.length){e=r;break}for(i={},n=g(n),t=n.next();!t.done;i={Se:i.Se},t=n.next())if(i.Se=t.value,t=e.filter(function(o){return function(s){return s.audio&&s.audio.codecs.startsWith(o.Se)}}(i)),t.length){e=t;break}return e}function WE(e,t,n){e.variants=e.variants.filter(function(i){return du(i,t,n)})}function du(e,t,n){function i(o,s,u){return o>=s&&o<=u}var r=e.video;return!(r&&r.width&&r.height&&(!i(r.width,t.minWidth,Math.min(t.maxWidth,n.width))||!i(r.height,t.minHeight,Math.min(t.maxHeight,n.height))||!i(r.width*r.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function qp(e,t,n){var i=!1;e=g(e);for(var r=e.next();!r.done;r=e.next()){r=r.value;var o=r.allowedByApplication;r.allowedByApplication=du(r,t,n),o!=r.allowedByApplication&&(i=!0)}return i}function XE(e,t){return k(function(n){return n.g==1?y(n,$p(e,t,0<t.offlineSessionIds.length),2):(qE(t),y(n,$E(t),0))})}function $p(e,t,n){var i,r,o,s,u;return k(function(a){if(a.g==1)return y(a,Zp(t.variants,n,!1,[]),2);i=null,e&&(r=e.g)&&(i=r.keySystem),o=at,s=zo(),u=Xe("Firefox")&&Xe("Android"),t.variants=t.variants.filter(function(l){var c=l.video,d=c&&c.width||0,f=c&&c.height||0;if(s&&c&&(1920<d||1080<f)&&(c.codecs.includes("avc1.")||c.codecs.includes("avc3.")))return Xl(l),!1;if(c){if(d=fu(c.codecs),c.codecs.includes(",")){f=c.codecs.split(","),d=mr(o.ia,f),d=fu(d),f=mr(o.U,f),f=pu(f);var p=Sr(c.mimeType,f,o.U);if(!nt(p))return!1;d=[d,f].join()}if(f=Sr(c.mimeType,d,o.ia),!nt(f))return!1;c.codecs=d}if(c=l.audio,u&&c&&c.encrypted&&c.codecs.toLowerCase().includes("opus"))return Xl(l),!1;if(c){if(d=pu(c.codecs),f=Sr(c.mimeType,d,o.U),!nt(f))return!1;c.codecs=d}return(c=l.decodingInfos.some(function(m){return!(!m.supported||i&&(m=m.keySystemAccess)&&m.keySystem!=i)}))||(Xl(l),void 0),c}),K(a)})}function Qp(e){var t=[];for(n in e)t.push(n);t.sort();var n=[];t=g(t);for(var i=t.next();!i.done;i=t.next()){var r=i.value;i=JSON.stringify(r),r=e[r],r instanceof Object?(r=Qp(r),n.push(i+":"+r)):(r=JSON.stringify(r),n.push(i+":"+r))}return"{"+n.join(",")+"}"}function Jp(e,t){var n,i,r,o,s,u,a;return k(function(l){if(l.g==1)return n=Qp(t),i=JE,i[n]?(e.decodingInfos.push(i[n]),l.F(0)):y(l,YE(t),3);if((r=l.h)&&r.length){for(o=null,s=g(r),u=s.next();!u.done;u=s.next())a=u.value,o?(o.supported=o.supported&&a.supported,o.powerEfficient=o.powerEfficient&&a.powerEfficient,o.smooth=o.smooth&&a.smooth,a.keySystemAccess||(o.keySystemAccess=null)):o=a;o&&(i[n]=o,e.decodingInfos.push(o))}K(l)})}function YE(e){var t=[""];e.video&&(t=Tn(e.video.contentType).split(","));var n=[""];e.audio&&(n=Tn(e.audio.contentType).split(","));var i=[];t=g(t);for(var r=t.next();!r.done;r=t.next()){r=r.value;for(var o={},s=g(n),u=s.next();!u.done;o={ic:o.ic},u=s.next())u=u.value,o.ic=zi(e),e.video&&(o.ic.video.contentType=Kt(ni(o.ic.video.contentType),r)),e.audio&&(o.ic.audio.contentType=Kt(ni(o.ic.audio.contentType),u)),i.push(new Promise(function(a){return function(l,c){navigator.mediaCapabilities.decodingInfo(a.ic).then(function(d){l(d)}).catch(c)}}(o)))}return Promise.all(i).catch(function(){return JSON.stringify(e),null})}function Zp(e,t,n,i){var r,o,s,u,a,l,c,d,f,p,m,v,E,w,T,x;return k(function(S){switch(S.g){case 1:if(e.some(function(C){return C.decodingInfos.length}))return S.return();r={},o=g(i),s=o.next();case 2:if(s.done){S.F(4);break}r.We=s.value,u=!1,a=g(e),l=a.next();case 5:if(l.done){S.F(7);break}c=l.value,d=ef(c,t,n).filter(function(C){return function(D){return(D.keySystemConfiguration&&D.keySystemConfiguration.keySystem)===C.We}}(r)),f=g(d),p=f.next();case 8:if(p.done){S.F(10);break}return m=p.value,y(S,Jp(c,m),9);case 9:p=f.next(),S.F(8);break;case 10:c.decodingInfos.length&&(u=!0),l=a.next(),S.F(5);break;case 7:if(u)return S.return();r={We:r.We},s=o.next(),S.F(2);break;case 4:v=g(e),l=v.next();case 12:if(l.done){S.F(0);break}E=l.value,w=ef(E,t,n).filter(function(C){return C=C.keySystemConfiguration&&C.keySystemConfiguration.keySystem,!C||!i.includes(C)}),T=g(w),p=T.next();case 15:if(p.done){l=v.next(),S.F(12);break}return x=p.value,y(S,Jp(E,x),16);case 16:p=T.next(),S.F(15)}})}function ef(e,t,n){var i=e.audio,r=e.video;if(n={type:n?"file":"media-source"},r){var o=r.codecs;if(r.codecs.includes(",")){var s=r.codecs.split(",");o=mr("video",s),o=fu(o),s=mr("audio",s),s=pu(s),s=Sr(r.mimeType,s,"audio"),n.audio={contentType:s,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1}}if(o=fu(o),o=Sr(r.mimeType,o,"video"),n.video={contentType:o,width:r.width||64,height:r.height||64,bitrate:r.bandwidth||e.bandwidth||1,framerate:r.frameRate||1},r.hdr)switch(r.hdr){case"SDR":n.video.transferFunction="srgb";break;case"PQ":n.video.transferFunction="pq";break;case"HLG":n.video.transferFunction="hlg"}}if(i&&(o=pu(i.codecs),o=Sr(i.mimeType,o,"audio"),n.audio={contentType:o,channels:i.channelsCount||2,bitrate:i.bandwidth||e.bandwidth||1,samplerate:i.audioSamplingRate||1,spatialRendering:i.spatialAudio}),s=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!s.length)return[n];e=[],o=new Map,s=g(s);for(var u=s.next();!u.done;u=s.next()){var a=u.value;o.get(a.keySystem)||o.set(a.keySystem,[]),o.get(a.keySystem).push(a)}s=t?"required":"optional",t=t?["persistent-license"]:["temporary"],a=g(o.keys());for(var l=a.next();!l.done;l=a.next()){var c=l.value;l=Object.assign({},n);var d=o.get(c);for(c={keySystem:c,initDataType:"cenc",persistentState:s,distinctiveIdentifier:"optional",sessionTypes:t},d=g(d),u=d.next();!u.done;u=d.next()){if(u=u.value,u.initData&&u.initData.length){for(var f=new Set,p=g(u.initData),m=p.next();!m.done;m=p.next())f.add(m.value.initDataType);c.initDataType=u.initData[0].initDataType}u.distinctiveIdentifierRequired&&(c.distinctiveIdentifier="required"),u.persistentStateRequired&&(c.persistentState="required"),u.sessionType&&(c.sessionTypes=[u.sessionType]),i&&(u.audioRobustness!=""?c.audio?c.audio.robustness=c.audio.robustness||u.audioRobustness:c.audio={robustness:u.audioRobustness}:c.audio||(c.audio={})),r&&(u.videoRobustness!=""?c.video?c.video.robustness=c.video.robustness||u.videoRobustness:c.video={robustness:u.videoRobustness}:c.video||(c.video={}))}l.keySystemConfiguration=c,e.push(l)}return e}function pu(e){return e!=="fLaC"||kr()?e==="Opus"?"opus":e:"flac"}function fu(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function qE(e){e.textStreams=e.textStreams.filter(function(t){return t=Kt(t.mimeType,t.codecs),lu(t)})}function $E(e){var t,n,i,r,o,s,u;return k(function(a){switch(a.g){case 1:t=[],n=g(e.imageStreams),i=n.next();case 2:if(i.done){a.F(4);break}if(r=i.value,o=r.mimeType,o=="application/mp4"&&r.codecs=="mjpg"&&(o="image/jpg"),vu.has(o)){a.F(5);break}if(s=eT.get(o),!s){vu.set(o,!1),a.F(5);break}return y(a,QE(s),7);case 7:u=a.h,vu.set(o,u);case 5:vu.get(o)&&t.push(r),i=n.next(),a.F(2);break;case 4:e.imageStreams=t,K(a)}})}function QE(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function Dr(e){var t=e.audio,n=e.video,i=t?t.mimeType:null,r=n?n.mimeType:null,o=t?t.codecs:null,s=n?n.codecs:null,u=[];s&&u.push(s),o&&u.push(o);var a=[];n&&a.push(n.mimeType),t&&a.push(t.mimeType),a=a[0]||null;var l=[];t&&l.push(t.kind),n&&l.push(n.kind),l=l[0]||null;var c=new Set;if(t)for(var d=g(t.roles),f=d.next();!f.done;f=d.next())c.add(f.value);if(n)for(d=g(n.roles),f=d.next();!f.done;f=d.next())c.add(f.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:l,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:a,audioMimeType:i,videoMimeType:r,codecs:u.join(", "),audioCodec:o,videoCodec:s,primary:e.primary,roles:Array.from(c),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.videoLayout=n.videoLayout||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage),e}function gu(e){return{id:e.id,active:!1,type:Ce,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function zl(e){var t=e.width||null,n=e.height||null,i=null;e.segmentIndex&&(i=e.segmentIndex.get(0));var r=e.tilesLayout;return i&&(r=i.tilesLayout||r),r&&t!=null&&(t/=Number(r.split("x")[0])),r&&n!=null&&(n/=Number(r.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:t,height:n,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:r||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function Kl(e){return e.__shaka_id||(e.__shaka_id=ZE++),e.__shaka_id}function tf(e){var t=nf(e);return t.active=e.mode!="disabled",t.type="text",t.originalTextId=e.id,e.kind=="captions"&&(t.mimeType="application/cea-608"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),e.kind=="forced"&&(t.forced=!0),t}function Hl(e){var t=nf(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,e.kind=="main"&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function nf(e){var t=e.language;return{id:Kl(e),active:!1,type:"",bandwidth:0,language:Le(t||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:t}}function mu(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function Wl(e){return e.filter(function(t){return mu(t)})}function Ho(e,t,n,i){var r=e,o=e.filter(function(a){return a.primary});o.length&&(r=o);var s=r.length?r[0].language:"";if(r=r.filter(function(a){return a.language==s}),t){var u=ru(Le(t),e.map(function(a){return a.language}));u&&(r=e.filter(function(a){return Le(a.language)==u}))}if(r=r.filter(function(a){return a.forced==i}),n){if(e=rf(r,n),e.length)return e}else if(e=r.filter(function(a){return a.roles.length==0}),e.length)return e;return e=r.map(function(a){return a.roles}).reduce(KE,[]),e.length?rf(r,e[0]):r}function rf(e,t){return e.filter(function(n){return n.roles.includes(t)})}function Xl(e){var t=[];return e.audio&&t.push(of(e.audio)),e.video&&t.push(of(e.video)),t.join(", ")}function of(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}O("shaka.util.StreamUtils",Xp),Xp.meetsRestrictions=du;var JE={},ZE=0,vu=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),eT=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Ge(){var e=this;this.u=null,this.l=!1,this.i=new _o,this.D=null,navigator.connection&&navigator.connection.addEventListener&&(this.D=function(){if(e.l&&e.g.useNetworkInformation){e.i=new _o,e.g&&e.i.configure(e.g.advanced);var t=e.chooseVariant();t&&navigator.onLine&&e.u(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}},navigator.connection.addEventListener("change",this.D)),this.s=[],this.G=1,this.I=!1,this.h=this.m=this.g=this.C=null,this.H=new fe(function(){if(e.g.restrictToElementSize){var t=e.chooseVariant();t&&e.u(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.j=null}h=Ge.prototype,h.stop=function(){this.u=null,this.l=!1,this.s=[],this.G=1,this.m=this.C=null,this.h&&(this.h.disconnect(),this.h=null),this.H.stop(),this.j=null},h.release=function(){navigator.connection&&navigator.connection.removeEventListener&&(navigator.connection.removeEventListener("change",this.D),this.D=null),this.H=null},h.init=function(e){this.u=e},h.chooseVariant=function(e){e=e===void 0?!1:e;var t=1/0,n=1/0;if(this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:I.devicePixelRatio,t=I.screen.height*n,n*=I.screen.width),this.h&&this.g.restrictToElementSize){var i=this.g.ignoreDevicePixelRatio?1:I.devicePixelRatio;t=Math.min(t,this.m.clientHeight*i),n=Math.min(n,this.m.clientWidth*i)}var r=this.s.filter(function(l){return!(l.audio&&l.audio.fastSwitching||l.video&&l.video.fastSwitching)});if(r.length||(r=this.s),i=r,e&&r.length!=this.s.length&&(i=this.s.filter(function(l){return!!(l.audio&&l.audio.fastSwitching||l.video&&l.video.fastSwitching)})),e=Yl(this,this.g.restrictions,i,1/0,1/0),t!=1/0||n!=1/0){for(e=tT(e),e=g(e),r=e.next();!r.done;r=e.next())if(r=r.value,r.height>=t&&r.width>=n){t=r.height,n=r.width;break}e=Yl(this,this.g.restrictions,i,t,n)}for(t=this.getBandwidthEstimate(),i.length&&!e.length&&(e=Yl(this,null,i,1/0,1/0),e=[e[0]]),n=e[0]||null,i=0;i<e.length;i++){r=e[i];for(var o=isNaN(this.G)?1:Math.abs(this.G),s=o*r.bandwidth/this.g.bandwidthDowngradeTarget,u={bandwidth:1/0},a=i+1;a<e.length;a++)if(r.bandwidth!=e[a].bandwidth){u=e[a];break}o=o*u.bandwidth/this.g.bandwidthUpgradeTarget,t>=s&&t<=o&&n.bandwidth!=r.bandwidth&&(n=r)}return this.C=Date.now(),n},h.enable=function(){this.l=!0},h.disable=function(){this.l=!1},h.segmentDownloaded=function(e,t,n){this.i.sample(e,t),n&&this.C!=null&&this.l&&sf(this)},h.trySuggestStreams=function(){this.C!=null&&this.l&&sf(this)},h.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),e=this.i.getBandwidthEstimate(e),this.j?this.j.getBandwidthEstimate(e):e},h.setVariants=function(e){this.s=e},h.playbackRateChanged=function(e){this.G=e},h.setMediaElement=function(e){var t=this;this.m=e,this.h&&(this.h.disconnect(),this.h=null),this.m&&"ResizeObserver"in I&&(this.h=new ResizeObserver(function(){t.H.S(nT)}),this.h.observe(this.m))},h.setCmsdManager=function(e){this.j=e},h.configure=function(e){this.g=e,this.i&&this.g&&this.i.configure(this.g.advanced)};function sf(e){if(e.I){if(Date.now()-e.C<1e3*e.g.switchInterval)return}else{var t=e.i;if(!(t.g>=t.i))return;e.I=!0}t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.u(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}function Yl(e,t,n,i,r){if(e.j){var o=e.j.Ug();o&&(n=n.filter(function(s){return s.bandwidth&&o?s.bandwidth<=o:!0}))}return t&&(n=n.filter(function(s){return du(s,t,{width:r,height:i})})),n.sort(function(s,u){return s.bandwidth-u.bandwidth})}function tT(e){var t=[];e=g(e);for(var n=e.next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(i,r){return i.width-r.width})}O("shaka.abr.SimpleAbrManager",Ge),Ge.prototype.configure=Ge.prototype.configure,Ge.prototype.setCmsdManager=Ge.prototype.setCmsdManager,Ge.prototype.setMediaElement=Ge.prototype.setMediaElement,Ge.prototype.playbackRateChanged=Ge.prototype.playbackRateChanged,Ge.prototype.setVariants=Ge.prototype.setVariants,Ge.prototype.getBandwidthEstimate=Ge.prototype.getBandwidthEstimate,Ge.prototype.trySuggestStreams=Ge.prototype.trySuggestStreams,Ge.prototype.segmentDownloaded=Ge.prototype.segmentDownloaded,Ge.prototype.disable=Ge.prototype.disable,Ge.prototype.enable=Ge.prototype.enable,Ge.prototype.chooseVariant=Ge.prototype.chooseVariant,Ge.prototype.init=Ge.prototype.init,Ge.prototype.release=Ge.prototype.release,Ge.prototype.stop=Ge.prototype.stop;var nT=1;function ql(e,t){this.g=e,this.h=t}ql.prototype.toString=function(){return"v"+this.g+"."+this.h};function wn(e,t){var n=new ql(5,0),i=uf,r=i.g,o=n.h-r.h;(0<(n.g-r.g||o)?i.i:i.h)(i.g,n,e,t)}function iT(e,t,n,i){Ae([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function rT(e,t,n,i){Ti([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(" "))}var uf=null;O("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),O("shaka.config.CodecSwitchingStrategy",{Zj:"reload",Eh:"smooth"});function yu(e,t,n,i){for(n=n===void 0?!0:n,i=i===void 0?!1:i,this.h=e,this.g=new Set([e]),t=t||[],e=g(t),t=e.next();!t.done;t=e.next())this.add(t.value,n,i)}yu.prototype.add=function(e,t,n){return af(this.h,e,t===void 0?!0:t,n===void 0?!1:n)?(this.g.add(e),!0):!1};function af(e,t,n,i){var r;if(!(r=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(r=e.audio&&t.audio)){r=e.audio;var o=t.audio;r=!!((!r.channelsCount||!o.channelsCount||2<r.channelsCount||2<o.channelsCount)&&r.channelsCount!=o.channelsCount||n&&!lf(r,o)||!cf(r.roles,o.roles)||i&&r.groupId!==o.groupId)}return!(i=r)&&(i=e.video&&t.video)&&(e=e.video,t=t.video,i=!((!n||lf(e,t))&&cf(e.roles,t.roles))),!i}yu.prototype.values=function(){return this.g.values()};function lf(e,t){if(e.mimeType!=t.mimeType||(e=e.codecs.split(",").map(function(i){return Pn(i)}),t=t.codecs.split(",").map(function(i){return Pn(i)}),e.length!=t.length))return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function cf(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;e=g(e);for(var n=e.next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function hf(e,t,n){t=t===void 0?"reload":t,n=n===void 0?!1:n,this.i=e,this.h=t,this.g=n,this.j=new Rr(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"",!1,"","","",t,n)}hf.prototype.create=function(e){var t=this,n=this.h=="smooth"&&Bi(),i=e.filter(function(r){return af(t.i,r,!n,t.g)});return i.length?new yu(i[0],i,!n,this.g):this.j.create(e)};function Rr(e,t,n,i,r,o,s,u,a,l){this.u=e,this.C=t,this.h=n,this.i=i,this.D=r,this.l=o,this.g=s===void 0?"":s,this.j=u===void 0?"":u,this.m=a===void 0?"reload":a,this.s=l===void 0?!1:l}Rr.prototype.create=function(e){var t=[];t=oT(e,this.u);var n=e.filter(function(i){return i.primary});return t=t.length?t:n.length?n:e,e=sT(t,this.C),e.length&&(t=e),this.l&&(e=hT(t,this.l),e.length&&(t=e)),this.i&&(e=cT(t,this.i),e.length&&(t=e)),this.h&&(e=lT(t,this.h),e.length&&(t=e)),this.g&&(e=uT(t,this.g),e.length&&(t=e)),this.j&&(e=aT(t,this.j),e.length&&(t=e)),e=dT(t,this.D),e.length&&(t=e),new yu(t[0],t,!(this.m=="smooth"&&Bi()),this.s)};function oT(e,t){t=Le(t);var n=ru(t,e.map(function(i){return Cl(i)}));return n?e.filter(function(i){return n==Cl(i)}):[]}function sT(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function uT(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function aT(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function lT(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount!=t)})}function cT(e,t){return t=="AUTO"&&(t=I.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR"),e.filter(function(n){return!(n.video&&n.video.hdr&&n.video.hdr!=t)})}function hT(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function dT(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function pT(){this.g=Eu,this.h=new Map().set(Eu,2).set(Pr,1)}function df(e,t,n){e.h.set(Eu,n).set(Pr,t)}var Pr=0,Eu=1;function pf(e,t){var n=Kn();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.s=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function ff(e){var t,n;return k(function(i){if(i.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new M(2,7,1010);return t=e.g,e.g++,t==0?i.return():(n=e.h*(1+(2*Math.random()-1)*e.s),y(i,new Promise(function(r){new fe(r).S(n/1e3)}),2))}e.h*=e.m,K(i)})}function Kn(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Ve(){var e,t,n=new Promise(function(i,r){e=i,t=r});return n.resolve=e,n.reject=t,n}Ve.prototype.resolve=function(){},Ve.prototype.reject=function(){};function $e(e,t){this.promise=e,this.i=t,this.g=!1}function Hi(e){return new $e(Promise.reject(e),function(){return Promise.resolve()})}function $l(){var e=Promise.reject(new M(2,7,7001));return e.catch(function(){}),new $e(e,function(){return Promise.resolve()})}function Nr(e){return new $e(Promise.resolve(e),function(){return Promise.resolve()})}function gf(e){return new $e(e,function(){return e.catch(function(){})})}$e.prototype.abort=function(){return this.g=!0,this.i()};function mf(e){return new $e(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}$e.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},$e.prototype.Fa=function(e,t){function n(u){return function(a){if(r.g&&u)o.reject(s);else{var l=u?e:t;l?i=fT(l,a,o):(u?o.resolve:o.reject)(a)}}}function i(){return o.reject(s),r.abort()}var r=this,o=new Ve,s=new M(2,7,7001);return this.promise.then(n(!0),n(!1)),new $e(o,function(){return i()})};function fT(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then(function(){},function(){})})}catch(r){return n.reject(r),function(){return Promise.resolve()}}}O("shaka.util.AbortableOperation",$e),$e.prototype.chain=$e.prototype.Fa,$e.prototype.finally=$e.prototype.finally,$e.all=mf,$e.prototype.abort=$e.prototype.abort,$e.notAbortable=gf,$e.completed=Nr,$e.aborted=$l,$e.failed=Hi;function br(){this.g=[]}function Wi(e,t){e.g.push(t.finally(function(){Rn(e.g,t)}))}br.prototype.destroy=function(){for(var e=[],t=g(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function Be(e,t,n,i,r){Ie.call(this),this.i=!1,this.m=new br,this.g=new Set,this.h=new Set,this.l=e||null,this.j=t||null,this.u=n||null,this.C=i||null,this.D=r||null,this.s=!1}pe(Be,Ie),h=Be.prototype,h.mg=function(e){this.s=e};function ri(e,t,n,i){n=n||Tf;var r=wu[e];(!r||n>=r.priority)&&(wu[e]={priority:n,Ge:t,$i:i===void 0?!1:i})}h.aj=function(e){this.g.add(e)},h.uj=function(e){this.g.delete(e)},h.Lh=function(){this.g.clear()},h.bj=function(e){this.h.add(e)},h.vj=function(e){this.h.delete(e)},h.Mh=function(){this.h.clear()};function dt(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}h.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),Ie.prototype.release.call(this),this.m.destroy()},h.request=function(e,t,n){var i=this,r=new Ef;if(this.i){var o=Promise.reject(new M(2,7,7001));return o.catch(function(){}),new Tu(o,function(){return Promise.resolve()},r)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?zi(t.retryParameters):Kn(),t.uris=zi(t.uris),o=gT(this,e,t,n);var s=o.Fa(function(){return vf(i,e,t,n,new pf(t.retryParameters,!1),0,null,r)}),u=s.Fa(function(f){return mT(i,e,f,n)}),a=Date.now(),l=0;o.promise.then(function(){l=Date.now()-a},function(){});var c=0;s.promise.then(function(){c=Date.now()},function(){});var d=u.Fa(function(f){var p=Date.now()-c,m=f.response;return m.timeMs+=l,m.timeMs+=p,f.Gi||!i.l||m.fromCache||t.method=="HEAD"||e!=bn||i.l(m.timeMs,m.data.byteLength,yf(n)),m},function(f){throw f&&(f.severity=2),f});return o=new Tu(d.promise,function(){return d.abort()},r),Wi(this.m,o),o};function gT(e,t,n,i){function r(u){o=o.Fa(function(){return n.body&&(n.body=tn(n.body)),u(t,n,i)})}var o=Nr(void 0);e.C&&r(e.C),e=g(e.g);for(var s=e.next();!s.done;s=e.next())r(s.value);return o.Fa(void 0,function(u){throw u instanceof M&&u.code==7001?u:new M(2,1,1006,u)})}function vf(e,t,n,i,r,o,s,u){e.s&&(n.uris[o]=n.uris[o].replace("http://","https://")),0<o&&e.D&&e.D(t,i,n.uris[o],n.uris[o-1]);var a=new Je(n.uris[o]),l=a.wb,c=!1;l||(l=location.protocol,l=l.slice(0,-1),eu(a,l),n.uris[o]=a.toString()),l=l.toLowerCase();var d=(l=wu[l])?l.Ge:null;if(!d)return Hi(new M(2,1,1e3,a));var f=l.$i,p=null,m=null,v=!1,E=!1,w;return gf(ff(r)).Fa(function(){if(e.i)return $l();w=Date.now();var T=d(n.uris[o],n,t,function(C,D,b){p&&p.stop(),m&&m.S(S/1e3),e.l&&t==bn&&(e.l(C,D,yf(i)),c=!0,u.g=b)},function(C){e.j&&e.j(C,n,t),E=!0});if(!f)return T;var x=n.retryParameters.connectionTimeout;x&&(p=new fe(function(){v=!0,T.abort()}),p.S(x/1e3));var S=n.retryParameters.stallTimeout;return S&&(m=new fe(function(){v=!0,T.abort()})),T}).Fa(function(T){p&&p.stop(),m&&m.stop(),T.timeMs==null&&(T.timeMs=Date.now()-w);var x={response:T,Gi:c};return!E&&e.j&&e.j(T.headers,n,t),x},function(T){if(p&&p.stop(),m&&m.stop(),e.u){var x=null,S=0;T instanceof M&&(x=T,T.code==1001&&(S=T.data[1])),e.u(n,x,S,v)}if(e.i)return $l();if(v&&(T=new M(1,1,1003,n.uris[o],t)),T instanceof M){if(T.code==7001)throw T;if(T.code==1010)throw s;if(T.severity==1)return x=new Map().set("error",T),x=new X("retry",x),e.dispatchEvent(x),o=(o+1)%n.uris.length,vf(e,t,n,i,r,o,T,u)}throw T})}function mT(e,t,n,i){var r=Nr(void 0),o={};e=g(e.h);for(var s=e.next();!s.done;o={Ye:o.Ye},s=e.next())o.Ye=s.value,r=r.Fa(function(u){return function(){var a=n.response;return a.data&&(a.data=tn(a.data)),u.Ye(t,a,i)}}(o));return r.Fa(function(){return n},function(u){var a=2;if(u instanceof M){if(u.code==7001)throw u;a=u.severity}throw new M(a,1,1007,u)})}function yf(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.Fd)return!1}return!0}O("shaka.net.NetworkingEngine",Be),Be.prototype.request=Be.prototype.request,Be.prototype.destroy=Be.prototype.destroy,Be.makeRequest=dt,Be.defaultRetryParameters=function(){return Kn()},Be.prototype.clearAllResponseFilters=Be.prototype.Mh,Be.prototype.unregisterResponseFilter=Be.prototype.vj,Be.prototype.registerResponseFilter=Be.prototype.bj,Be.prototype.clearAllRequestFilters=Be.prototype.Lh,Be.prototype.unregisterRequestFilter=Be.prototype.uj,Be.prototype.registerRequestFilter=Be.prototype.aj,Be.unregisterScheme=function(e){delete wu[e]},Be.registerScheme=ri,Be.prototype.setForceHTTPS=Be.prototype.mg;function Ef(){this.g=0}Be.NumBytesRemainingClass=Ef;function Tu(e,t,n){$e.call(this,e,t),this.h=n}pe(Tu,$e),Be.PendingRequest=Tu;var bn=1;Be.RequestType={MANIFEST:0,SEGMENT:bn,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},Be.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5};var Tf=3;Be.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:Tf};var wu={};function _r(e){this.g=!1,this.h=new Ve,this.i=e}_r.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function Ne(e,t){if(e.g)throw t instanceof M&&t.code==7003?t:new M(2,7,7003,t)}function _e(){this.g=new Zs}h=_e.prototype,h.release=function(){this.ub(),this.g=null},h.o=function(e,t,n,i){this.g&&(e=new wf(e,t,n,i),this.g.push(t,e))},h.na=function(e,t,n,i){function r(s){o.hc(e,t,r),n(s)}var o=this;this.o(e,t,r,i)},h.hc=function(e,t,n){if(this.g){var i=this.g.get(t)||[];i=g(i);for(var r=i.next();!r.done;r=i.next())r=r.value,r.target!=e||n!=r.listener&&n||(r.hc(),this.g.remove(t,r))}},h.ub=function(){if(this.g){var e=this.g,t=[],n;for(n in e.g)t.push.apply(t,F(e.g[n]));for(e=g(t),t=e.next();!t.done;t=e.next())t.value.hc();this.g.g={}}},O("shaka.util.EventManager",_e),_e.prototype.removeAll=_e.prototype.ub,_e.prototype.unlisten=_e.prototype.hc,_e.prototype.listenOnce=_e.prototype.na,_e.prototype.listen=_e.prototype.o,_e.prototype.release=_e.prototype.release;function wf(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.g=vT(e,i),this.target.addEventListener(t,n,this.g)}wf.prototype.hc=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function vT(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(i){return!n.has(i)}),yT(e)?t:t.capture||!1}function yT(e){var t=Af;if(t==null){t=!1;try{var n={},i={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch{t=!1}Af=t}return t||!1}var Af=void 0;function Ur(e){this.h=e,this.g=void 0}Ur.prototype.value=function(){return this.g==null&&(this.g=this.h()),this.g};function Wo(e){for(var t=new Map,n=g(Object.keys(e)),i=n.next();!i.done;i=n.next())i=i.value,t.set(i,e[i]);return t}function Ql(e){var t={};return e.forEach(function(n,i){t[i]=n}),t}function Xi(){}function ze(e){if(!e)return"";if(e=ge(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),I.TextDecoder&&!Mr())return e=new TextDecoder().decode(e),e.includes("")&&Ti('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var i=65533;if(e[n]&128?e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(i=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(i=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(i=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3):i=e[n],65535>=i)t+=String.fromCharCode(i);else{i-=65536;var r=i&1023;t+=String.fromCharCode(55296+(i>>10)),t+=String.fromCharCode(56320+r)}}return t}function oi(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new M(2,2,2004);n=Math.floor(e.byteLength/2);var i=new Uint16Array(n);e=Ut(e);for(var r=0;r<n;r++)i[r]=e.getUint16(2*r,t);return Zl.value()(i)}function Ii(e){function t(i){return n.byteLength<=i||32<=n[i]&&126>=n[i]}if(!e)return"";var n=ge(e);if(n[0]==239&&n[1]==187&&n[2]==191)return ze(n);if(n[0]==254&&n[1]==255)return oi(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return oi(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return oi(e,!1);if(n[1]==0&&n[3]==0)return oi(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return ze(e);throw new M(2,2,2003)}function si(e){if(I.TextEncoder&&!Mr()){var t=new TextEncoder;return tn(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return tn(t)}function Jl(e,t){for(var n=new ArrayBuffer(2*e.length),i=new DataView(n),r=0;r<e.length;++r)i.setUint16(2*r,e.charCodeAt(r),t);return n}O("shaka.util.StringUtils",Xi),Xi.resetFromCharCode=function(){Zl.g=void 0},Xi.toUTF16=Jl,Xi.toUTF8=si,Xi.fromBytesAutoDetect=Ii,Xi.fromUTF16=oi,Xi.fromUTF8=ze;var Zl=new Ur(function(){function e(n){try{var i=new Uint8Array(n);return 0<String.fromCharCode.apply(null,i).length}catch{return!1}}for(var t={Wb:65536};0<t.Wb;t={Wb:t.Wb},t.Wb/=2)if(e(t.Wb))return function(n){return function(i){for(var r="",o=0;o<i.length;o+=n.Wb)r+=String.fromCharCode.apply(null,i.subarray(o,o+n.Wb));return r}}(t);return null});function be(e,t){this.h=Ut(e),this.i=t==Sf,this.g=0}h=be.prototype,h.xa=function(){return this.g<this.h.byteLength},h.Ga=function(){return this.g},h.getLength=function(){return this.h.byteLength},h.ra=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch{throw ui()}},h.Ua=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch{throw ui()}},h.O=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch{throw ui()}},h.ih=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch{throw ui()}},h.Uc=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch{throw ui()}if(2097151<t)throw new M(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},h.Sb=function(e){if(this.g+e>this.h.byteLength)throw ui();var t=ge(this.h,this.g,e);return this.g+=e,t},h.skip=function(e){if(this.g+e>this.h.byteLength)throw ui();this.g+=e},h.jj=function(e){if(this.g<e)throw ui();this.g-=e},h.seek=function(e){if(0>e||e>this.h.byteLength)throw ui();this.g=e},h.Hd=function(){for(var e=this.g;this.xa()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=ge(this.h,e,this.g-e),this.g+=1,ze(e)};function ui(){return new M(2,3,3e3)}O("shaka.util.DataViewReader",be),be.prototype.readTerminatedString=be.prototype.Hd,be.prototype.seek=be.prototype.seek,be.prototype.rewind=be.prototype.jj,be.prototype.skip=be.prototype.skip,be.prototype.readBytes=be.prototype.Sb,be.prototype.readUint64=be.prototype.Uc,be.prototype.readInt32=be.prototype.ih,be.prototype.readUint32=be.prototype.O,be.prototype.readUint16=be.prototype.Ua,be.prototype.readUint8=be.prototype.ra,be.prototype.getLength=be.prototype.getLength,be.prototype.getPosition=be.prototype.Ga,be.prototype.hasMoreData=be.prototype.xa;var Sf=1;be.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Sf};function Ue(){this.i=[],this.h=[],this.g=!1}h=Ue.prototype,h.box=function(e,t){return e=xf(e),this.i[e]=ET,this.h[e]=t,this},h.T=function(e,t){return e=xf(e),this.i[e]=If,this.h[e]=t,this},h.stop=function(){this.g=!0},h.parse=function(e,t,n){for(e=new be(e,0),this.g=!1;e.xa()&&!this.g;)this.Ed(0,e,t,n)},h.Ed=function(e,t,n,i){var r=t.Ga();if(i&&r+8>t.getLength())this.g=!0;else{var o=t.O(),s=t.O(),u=Su(s),a=!1;switch(o){case 0:o=t.getLength()-r;break;case 1:if(i&&t.Ga()+8>t.getLength()){this.g=!0;return}o=t.Uc(),a=!0}var l=this.h[s];if(l){var c=null,d=null;if(this.i[s]==If){if(i&&t.Ga()+4>t.getLength()){this.g=!0;return}d=t.O(),c=d>>>24,d&=16777215}s=r+o,n&&s>t.getLength()&&(s=t.getLength()),i&&s>t.getLength()?this.g=!0:(i=s-t.Ga(),t=0<i?t.Sb(i):new Uint8Array(0),t=new be(t,0),l({name:u,parser:this,partialOkay:n||!1,version:c,flags:d,reader:t,size:o,start:r+e,has64BitSize:a}))}else t.skip(Math.min(r+o-t.Ga(),t.getLength()-t.Ga()))}};function Re(e){for(var t=Xo(e);e.reader.xa()&&!e.parser.g;)e.parser.Ed(e.start+t,e.reader,e.partialOkay)}function Or(e){for(var t=Xo(e),n=e.reader.O(),i=0;i<n&&(e.parser.Ed(e.start+t,e.reader,e.partialOkay),!e.parser.g);i++);}function Au(e){var t=Xo(e);for(e.reader.skip(78);e.reader.xa()&&!e.parser.g;)e.parser.Ed(e.start+t,e.reader,e.partialOkay)}function Yi(e){return function(t){e(t.reader.Sb(t.reader.getLength()-t.reader.Ga()))}}function xf(e){var t=0;e=g(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Su(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function Xo(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}O("shaka.util.Mp4Parser",Ue),Ue.headerSize=Xo,Ue.typeToString=Su,Ue.allData=Yi,Ue.visualSampleEntry=Au,Ue.sampleDescription=Or,Ue.children=Re,Ue.prototype.parseNext=Ue.prototype.Ed,Ue.prototype.parse=Ue.prototype.parse,Ue.prototype.stop=Ue.prototype.stop,Ue.prototype.fullBox=Ue.prototype.T,Ue.prototype.box=Ue.prototype.box;var ET=0,If=1;function xt(){}function Cf(e){return e=ge(e),e=Zl.value()(e),btoa(e)}function qi(e,t){return t=t??!0,e=Cf(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function An(e){e=I.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}function $i(e){for(var t=e.length/2,n=new Uint8Array(t),i=0;i<t;i++)n[i]=I.parseInt(e.substr(2*i,2),16);return n}function jr(e){var t=ge(e);e="",t=g(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}function Ye(){for(var e=vn.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var i=n=0;i<e.length;++i){var r=e[i];r instanceof Uint8Array?t.set(r,n):t.set(ge(r),n),n+=r.byteLength}return t}O("shaka.util.Uint8ArrayUtils",xt),xt.concat=Ye,xt.toHex=jr,xt.fromHex=$i,xt.fromBase64=An,xt.toBase64=qi,xt.toStandardBase64=Cf;function Mf(e){var t=this;this.g=[],this.h=[],this.data=[],new Ue().box("moov",Re).box("moof",Re).T("pssh",function(n){if(!(1<n.version)){var i=ge(n.reader.h,-12,n.size);if(t.data.push(i),t.g.push(jr(n.reader.Sb(16))),0<n.version){i=n.reader.O();for(var r=0;r<i;r++){var o=jr(n.reader.Sb(16));t.h.push(o)}}}}).parse(e)}function xu(e,t,n,i){var r=e.length,o=t.length+16+r;0<i&&(o+=4+16*n.size);var s=new Uint8Array(o),u=Ut(s),a=0;if(u.setUint32(a,o),a+=4,u.setUint32(a,1886614376),a+=4,1>i?u.setUint32(a,0):u.setUint32(a,16777216),a+=4,s.set(t,a),a+=t.length,0<i)for(u.setUint32(a,n.size),a+=4,t=g(n),n=t.next();!n.done;n=t.next())n=$i(n.value),s.set(n,a),a+=n.length;return u.setUint32(a,r),s.set(e,a+4),s}function Sn(e,t){return e=Ke(e,t),e.length!=1?null:e[0]}function ai(e,t,n){return e=kf(e,t,n),e.length!=1?null:e[0]}function Ke(e,t){var n=[];e=g(e.childNodes);for(var i=e.next();!i.done;i=e.next())i=i.value,i instanceof Element&&i.tagName==t&&n.push(i);return n}function TT(e){return Array.from(e.childNodes).filter(function(t){return t instanceof Element})}function kf(e,t,n){var i=[];e=g(e.childNodes);for(var r=e.next();!r.done;r=e.next())r=r.value,r instanceof Element&&r.localName==n&&r.namespaceURI==t&&i.push(r);return i}function Qi(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function Hn(e,t,n){t=g(t);for(var i=t.next();!i.done;i=t.next())if(i=i.value,e.hasAttributeNS(i,n))return e.getAttributeNS(i,n);return null}function Ji(e){return Array.from(e.childNodes).every(ec)?e.textContent.trim():null}function ec(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}function Se(e,t,n,i){i=i===void 0?null:i;var r=null;return e=e.getAttribute(t),e!=null&&(r=n(e)),r??i}function Lf(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function li(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function Iu(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function Cu(e){return e=Number(e),e%1===0?e:null}function ci(e){return e=Number(e),e%1===0&&0<e?e:null}function Dt(e){return e=Number(e),e%1===0&&0<=e?e:null}function Yo(e){return e=Number(e),isNaN(e)?null:e}function tc(e){return e?e.toLowerCase()==="true":!1}function wT(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function Br(e,t){var n=new DOMParser,i=AT.value()(e);e=null;try{e=n.parseFromString(i,"text/xml")}catch{return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function nc(e,t){try{var n=Ii(e);return Br(n,t)}catch{return null}}var AT=new Ur(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function Mu(e,t){var n=this;t=t===void 0?1:t,this.G=e,this.J=new Set,this.m=this.u=null,this.ha=this.$=!1,this.K=0,this.g=null,this.D=new _e,this.i=new Map,this.C=new Map,this.l=new Ve,this.h=null,this.s=function(i){i.severity==2&&n.l.reject(i),e.onError(i)},this.V=new Map,this.aa=new Map,this.W=new fe(function(){return NT(n)}),this.M=!1,this.L=[],this.N=!1,this.Aa=new fe(function(){UT(n)}).za(t),this.l.catch(function(){}),this.j=new _r(function(){return ST(n)}),this.Z=!1,this.H=this.I=null}h=Mu.prototype,h.destroy=function(){return this.j.destroy()};function ST(e){return k(function(t){switch(t.g){case 1:return e.D.release(),e.D=null,e.l.reject(),e.Aa.stop(),e.Aa=null,e.W.stop(),e.W=null,y(t,Ff(e),2);case 2:if(!e.m){t.F(3);break}return le(t,4),y(t,e.m.setMediaKeys(null),6);case 6:Ee(t,5);break;case 4:ce(t);case 5:e.m=null;case 3:e.g=null,e.J.clear(),e.u=null,e.C=new Map,e.h=null,e.s=function(){},e.G=null,e.Z=!1,e.I=null,K(t)}})}h.configure=function(e){this.h=e};function xT(e,t,n){return e.ha=!0,e.C=new Map,e.M=n,Rf(e,t)}function Df(e,t,n){e.C=new Map,n=g(n);for(var i=n.next();!i.done;i=n.next())e.C.set(i.value,{initData:null,initDataType:null});for(n=g(e.h.persistentSessionsMetadata),i=n.next();!i.done;i=n.next())i=i.value,e.C.set(i.sessionId,{initData:i.initData,initDataType:i.initDataType});return e.M=0<e.C.size,Rf(e,t)}function IT(e,t,n,i,r,o){var s=new Map;return r={audioCapabilities:r,videoCapabilities:o,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},r.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:i,serverCertificateUri:"",initData:null,keyIds:null}],s.set(t,r),Uf(e,s,[])}function Rf(e,t){var n,i,r,o,s,u,a,l,c,d,f,p,m,v,E,w,T;return k(function(x){if(x.g==1){if(n=RT(e))for(i=g(t),r=i.next();!r.done;r=i.next())o=r.value,o.video&&(o.video.drmInfos=[n]),o.audio&&(o.audio.drmInfos=[n]);for(s=t.some(function(S){return!!(S.video&&S.video.drmInfos.length||S.audio&&S.audio.drmInfos.length)}),s||(u=Wo(e.h.servers),jT(t,u)),a=new Set,l=g(t),r=l.next();!r.done;r=l.next())for(c=r.value,d=Vf(c),f=g(d),p=f.next();!p.done;p=f.next())m=p.value,a.add(m);for(v=g(a),p=v.next();!p.done;p=v.next())E=p.value,BT(E,Wo(e.h.servers),Wo(e.h.advanced||{}),e.h.keySystemsMapping);return y(x,Zp(t,e.M,e.Z,e.h.preferredKeySystems),2)}return w=s||Object.keys(e.h.servers).length,w?(T=Uf(e,void 0,t),x.return(s?T:T.catch(function(){}))):(e.$=!0,x.return(Promise.resolve()))})}function Pf(e){var t;return k(function(n){switch(n.g){case 1:if(e.m.mediaKeys)return n.return();if(!e.I){n.F(2);break}return y(n,e.I,3);case 3:return Ne(e.j),n.return();case 2:return le(n,4),e.I=e.m.setMediaKeys(e.u),y(n,e.I,6);case 6:Ee(n,5);break;case 4:t=ce(n),e.s(new M(2,6,6003,t.message));case 5:Ne(e.j),K(n)}})}function CT(e,t){return k(function(n){if(n.g==1)return y(n,Pf(e),2);qo(e,t.initDataType,ge(t.initData)),K(n)})}h.Gc=function(e){var t=this;return k(function(n){if(n.g==1)return t.u?(t.m=e,t.D.na(t.m,"play",function(){for(var i=g(t.L),r=i.next();!r.done;r=i.next())rc(t,r.value);t.N=!0,t.L=[]}),"webkitCurrentPlaybackTargetIsWireless"in t.m&&t.D.o(t.m,"webkitcurrentplaybacktargetiswirelesschanged",function(){return Ff(t)}),t.H=t.g&&t.g.initData.find(function(i){return 0<i.initData.length})||null,t.H||t.g.keySystem!=="com.apple.fps"||t.C.size?y(n,Pf(t),2):n.F(2)):(t.D.na(e,"encrypted",function(){t.s(new M(2,6,6010))}),n.return());Nf(t).catch(function(){}),t.H||t.C.size||t.h.parseInbandPsshEnabled||t.D.o(t.m,"encrypted",function(i){return CT(t,i)}),K(n)})};function MT(e){var t,n,i,r,o;return k(function(s){switch(s.g){case 1:if(!e.u||!e.g)return s.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){s.F(2);break}return t=dt([e.g.serverCertificateUri],e.h.retryParameters),le(s,3),n=e.G.zc.request(5,t),y(s,n.promise,5);case 5:i=s.h,e.g.serverCertificate=ge(i.data),Ee(s,4);break;case 3:throw r=ce(s),new M(2,6,6017,r);case 4:if(e.j.g)return s.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?s.return():(le(s,6),y(s,e.u.setServerCertificate(e.g.serverCertificate),8));case 8:Ee(s,0);break;case 6:throw o=ce(s),new M(2,6,6004,o.message)}})}function kT(e,t){var n,i,r;return k(function(o){if(o.g==1)return y(o,jf(e,t,{initData:null,initDataType:null}),2);if(o.g!=3)return n=o.h,n?(i=[],(r=e.i.get(n))&&(r.Db=new Ve,i.push(r.Db)),i.push(n.remove()),y(o,Promise.all(i),3)):o.return();e.i.delete(n),K(o)})}function Nf(e){var t,n,i,r,o;return k(function(s){if(s.g==1)return e.C.size?(e.C.forEach(function(u,a){jf(e,a,u)}),y(s,e.l,3)):s.F(2);if(s.g!=2){if(t=e.g&&e.g.keyIds||new Set([]),0<t.size&&OT(e))return s.return(e.l);e.l=new Ve,e.l.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],i=g(n),r=i.next();!r.done;r=i.next())o=r.value,qo(e,o.initDataType,o.initData);return n.length||e.l.resolve(),s.return(e.l)})}function qo(e,t,n){if(n.length){var i=e.i.values();i=g(i);for(var r=i.next();!r.done;r=i.next())if(Ai(n,r.value.initData)&&e.h.ignoreDuplicateInitData)return;0<e.i.size&&sc(e)&&(e.l.resolve(),e.l=new Ve,e.l.catch(function(){})),PT(e,t,n,e.g.sessionType)}}function bf(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function _f(e){return e=e.i.keys(),e=Sl(e,function(t){return t.sessionId}),Array.from(e)}h.Ff=function(){var e=this,t=this.i.keys();return t=Sl(t,function(n){var i=e.i.get(n);return{sessionId:n.sessionId,sessionType:i.type,initData:i.initData,initDataType:i.initDataType}}),Array.from(t)},h.td=function(){var e=1/0,t=this.i.keys();t=g(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},h.ge=function(){return Ql(this.aa)};function Uf(e,t,n){var i,r,o,s,u,a,l,c,d,f,p,m,v,E,w;return k(function(T){switch(T.g){case 1:if(i=new Map,n.length){r=LT(e,n,i),T.F(2);break}return y(T,DT(e,t),3);case 3:r=T.h;case 2:if(o=r,!o)throw new M(2,6,6001);for(Ne(e.j),le(T,4),e.J.clear(),s=o.getConfiguration(),u=s.audioCapabilities||[],a=s.videoCapabilities||[],l=g(u),c=l.next();!c.done;c=l.next())d=c.value,e.J.add(d.contentType.toLowerCase());for(f=g(a),c=f.next();!c.done;c=f.next())p=c.value,e.J.add(p.contentType.toLowerCase());if(n.length){var x=o.keySystem,S=i.get(o.keySystem),C=[],D=[],b=[],P=[],N=new Set;zf(S,C,b,D,P,N);var U=e.M?"persistent-license":"temporary";for(x={keySystem:x,licenseServerUri:C[0],distinctiveIdentifierRequired:S[0].distinctiveIdentifierRequired,persistentStateRequired:S[0].persistentStateRequired,sessionType:S[0].sessionType||U,audioRobustness:S[0].audioRobustness||"",videoRobustness:S[0].videoRobustness||"",serverCertificate:b[0],serverCertificateUri:D[0],initData:P,keyIds:N},S=g(S),C=S.next();!C.done;C=S.next())C=C.value,C.distinctiveIdentifierRequired&&(x.distinctiveIdentifierRequired=C.distinctiveIdentifierRequired),C.persistentStateRequired&&(x.persistentStateRequired=C.persistentStateRequired);S=x}else S=o.keySystem,x=t.get(o.keySystem),C=[],D=[],b=[],P=[],N=new Set,zf(x.drmInfos,C,b,D,P,N),S={keySystem:S,licenseServerUri:C[0],distinctiveIdentifierRequired:x.distinctiveIdentifier=="required",persistentStateRequired:x.persistentState=="required",sessionType:x.sessionTypes[0]||"temporary",audioRobustness:(x.audioCapabilities?x.audioCapabilities[0].robustness:"")||"",videoRobustness:(x.videoCapabilities?x.videoCapabilities[0].robustness:"")||"",serverCertificate:b[0],serverCertificateUri:D[0],initData:P,keyIds:N};if(e.g=S,!e.g.licenseServerUri)throw new M(2,6,6012,e.g.keySystem);return y(T,o.createMediaKeys(),6);case 6:if(m=T.h,Ne(e.j),e.u=m,!(e.h.minHdcpVersion!=""&&"getStatusForPolicy"in e.u)){T.F(7);break}return le(T,8),y(T,e.u.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),10);case 10:if(v=T.h,v!="usable")throw new M(2,6,6018);Ne(e.j),Ee(T,7,4);break;case 8:throw E=ce(T,4),E instanceof M?E:new M(2,6,6019,E.message);case 7:return e.$=!0,y(T,MT(e),11);case 11:Ne(e.j),Ee(T,0);break;case 4:throw w=ce(T),Ne(e.j,w),e.g=null,e.J.clear(),w instanceof M?w:new M(2,6,6002,w.message)}})}function LT(e,t,n){for(var i=g(t),r=i.next();!r.done;r=i.next()){var o=g(Vf(r.value));for(r=o.next();!r.done;r=o.next())r=r.value,n.has(r.keySystem)||n.set(r.keySystem,[]),n.get(r.keySystem).push(r)}if(n.size==1&&n.has(""))throw new M(2,6,6e3);for(i={},e=g(e.h.preferredKeySystems),r=e.next();!r.done;i={Xe:i.Xe},r=e.next())for(i.Xe=r.value,o=g(t),r=o.next();!r.done;r=o.next())if(r=r.value.decodingInfos.find(function(l){return function(c){return c.supported&&c.keySystemAccess!=null&&c.keySystemAccess.keySystem==l.Xe}}(i)))return r.keySystemAccess;for(e=g([!0,!1]),r=e.next();!r.done;r=e.next())for(i=r.value,o=g(t),r=o.next();!r.done;r=o.next()){var s=g(r.value.decodingInfos);for(r=s.next();!r.done;r=s.next()){var u=r.value;if(u.supported&&u.keySystemAccess){r=n.get(u.keySystemAccess.keySystem);var a=g(r);for(r=a.next();!r.done;r=a.next())if(!!r.value.licenseServerUri==i)return u.keySystemAccess}}}return null}function DT(e,t){var n,i,r,o,s,u,a,l,c,d,f,p,m,v,E;return k(function(w){switch(w.g){case 1:if(t.size==1&&t.has(""))throw new M(2,6,6e3);for(i=g(t.values()),r=i.next();!r.done;r=i.next())o=r.value,o.audioCapabilities.length==0&&delete o.audioCapabilities,o.videoCapabilities.length==0&&delete o.videoCapabilities;s=g(e.h.preferredKeySystems),u=s.next();case 2:if(u.done){w.F(4);break}if(a=u.value,!t.has(a)){w.F(3);break}return l=t.get(a),le(w,6),y(w,navigator.requestMediaKeySystemAccess(a,[l]),8);case 8:return n=w.h,w.return(n);case 6:ce(w);case 7:Ne(e.j);case 3:u=s.next(),w.F(2);break;case 4:c=g([!0,!1]),d=c.next();case 9:if(d.done){w.F(11);break}f=d.value,p=g(t.keys()),u=p.next();case 12:if(u.done){d=c.next(),w.F(9);break}if(m=u.value,v=t.get(m),E=v.drmInfos.some(function(T){return!!T.licenseServerUri}),E!=f){w.F(13);break}return le(w,15),y(w,navigator.requestMediaKeySystemAccess(m,[v]),17);case 17:return n=w.h,w.return(n);case 15:ce(w);case 16:Ne(e.j);case 13:u=p.next(),w.F(12);break;case 11:return w.return(n)}})}function RT(e){if(e=Wo(e.h.clearKeys),e.size==0)return null;var t=[],n=[];e.forEach(function(r,o){var s=o;s.length!=22&&(s=qi($i(o),!1)),o=r,o.length!=22&&(o=qi($i(r),!1)),r={kty:"oct",kid:s,k:o},t.push(r),n.push(r.kid)}),e=JSON.stringify({keys:t});var i=JSON.stringify({kids:n});return i=[{initData:ge(si(i)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+I.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:i,keyIds:new Set(n)}}function ic(e){sc(e)&&e.l.resolve()}function Of(e,t){new fe(function(){t.loaded=!0,ic(e)}).S(GT)}function jf(e,t,n){var i,r,o,s,u,a,l;return k(function(c){switch(c.g){case 1:try{i=e.u.createSession("persistent-license")}catch(d){return r=new M(2,6,6005,d.message),e.s(r),c.return(Promise.reject(r))}return e.D.o(i,"message",function(d){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.N?e.L.push(d):rc(e,d)}),e.D.o(i,"keystatuseschange",function(d){return Bf(e,d)}),o={initData:n.initData,initDataType:n.initDataType,loaded:!1,Yf:1/0,Db:null,type:"persistent-license"},e.i.set(i,o),le(c,2),y(c,i.load(t),4);case 4:return s=c.h,Ne(e.j),s||(e.i.delete(i),u=e.h.persistentSessionOnlinePlayback?1:2,e.s(new M(u,6,6013)),o.loaded=!0),Of(e,o),ic(e),c.return(i);case 2:a=ce(c),Ne(e.j,a),e.i.delete(i),l=e.h.persistentSessionOnlinePlayback?1:2,e.s(new M(l,6,6005,a.message)),o.loaded=!0,ic(e);case 3:return c.return(Promise.resolve())}})}function PT(e,t,n,i){try{var r=e.u.createSession(i)}catch(o){e.s(new M(2,6,6005,o.message));return}e.D.o(r,"message",function(o){e.m&&e.h.delayLicenseRequestUntilPlayed&&e.m.paused&&!e.N?e.L.push(o):rc(e,o)}),e.D.o(r,"keystatuseschange",function(o){return Bf(e,o)}),e.i.set(r,{initData:n,initDataType:t,loaded:!1,Yf:1/0,Db:null,type:i});try{n=e.h.initDataTransform(n,t,e.g)}catch(o){t=o,o instanceof M||(t=new M(2,6,6016,o)),e.s(t);return}e.h.logLicenseExchange&&qi(n),r.generateRequest(t,n).catch(function(o){if(!e.j.g){e.i.delete(r);var s=o.errorCode;if(s&&s.systemCode){var u=s.systemCode;0>u&&(u+=Math.pow(2,32)),u="0x"+u.toString(16)}e.s(new M(2,6,6006,o.message,o,u))}})}function rc(e,t){var n,i,r,o,s,u,a,l,c,d,f,p,m;k(function(v){switch(v.g){case 1:if(n=t.target,e.h.logLicenseExchange&&qi(t.message),i=e.i.get(n),r=e.g.licenseServerUri,o=e.h.advanced[e.g.keySystem],t.messageType=="individualization-request"&&o&&o.individualizationServer&&(r=o.individualizationServer),s=dt([r],e.h.retryParameters),s.body=t.message,s.method="POST",s.licenseRequestType=t.messageType,s.sessionId=n.sessionId,s.drmInfo=e.g,i&&(s.initData=i.initData,s.initDataType=i.initDataType),bf(e.g.keySystem)){var E=oi(s.body,!0,!0);if(E.includes("PlayReadyKeyMessage")){E=Br(E,"PlayReadyKeyMessage");for(var w=g(E.getElementsByTagName("HttpHeader")),T=w.next();!T.done;T=w.next())T=T.value,s.headers[T.getElementsByTagName("name")[0].textContent]=T.getElementsByTagName("value")[0].textContent;s.body=An(E.getElementsByTagName("Challenge")[0].textContent)}else s.headers["Content-Type"]="text/xml; charset=utf-8"}return u=Date.now(),le(v,2),l=e.G.zc.request(2,s),y(v,l.promise,4);case 4:a=v.h,Ee(v,3);break;case 2:return c=ce(v),d=new M(2,6,6007,c),e.s(d),i&&i.Db&&i.Db.reject(d),v.return();case 3:return e.j.g?v.return():(e.K+=(Date.now()-u)/1e3,e.h.logLicenseExchange&&qi(a.data),le(v,5),y(v,n.update(a.data),7));case 7:Ee(v,6);break;case 5:return f=ce(v),p=new M(2,6,6008,f.message),e.s(p),i&&i.Db&&i.Db.reject(p),v.return();case 6:if(e.j.g)return v.return();m=new X("drmsessionupdate"),e.G.onEvent(m),i&&(i.Db&&i.Db.resolve(),Of(e,i)),K(v)}})}function Bf(e,t){t=t.target;var n=e.i.get(t),i=!1;t.keyStatuses.forEach(function(o,s){if(typeof s=="string"){var u=s;s=o,o=u}if(bf(e.g.keySystem)&&s.byteLength==16&&(Fl()||Mr())){u=Ut(s);var a=u.getUint32(0,!0),l=u.getUint16(4,!0),c=u.getUint16(6,!0);u.setUint32(0,a,!1),u.setUint16(4,l,!1),u.setUint16(6,c,!1)}o!="status-pending"&&(n.loaded=!0),o=="expired"&&(i=!0),s=jr(s).slice(0,32),e.V.set(s,o)});var r=t.expiration-Date.now();(0>r||i&&1e3>r)&&n&&!n.Db&&(e.i.delete(t),t.close().catch(function(){})),sc(e)&&(e.l.resolve(),e.W.S(VT))}function NT(e){var t=e.V,n=e.aa;n.clear(),t.forEach(function(i,r){return n.set(r,i)}),t=Array.from(n.values()),t.length&&t.every(function(i){return i=="expired"})&&e.s(new M(2,6,6014)),e.G.Fe(Ql(n))}function bT(){var e,t,n,i,r,o,s,u;return k(function(a){return a.g==1?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],n={initDataTypes:["cenc"],videoCapabilities:t},i={videoCapabilities:t,persistentState:"required",sessionTypes:["persistent-license"]},r=[i,n],o=new Map,s=function(l){var c,d,f;return k(function(p){switch(p.g){case 1:if(le(p,2),l==="org.w3.clearkey"&&kr())throw Error("Unsupported keySystem");return y(p,navigator.requestMediaKeySystemAccess(l,r),4);case 4:return c=p.h,f=(d=c.getConfiguration().sessionTypes)?d.includes("persistent-license"):!1,cu()&&(f=!1),o.set(l,{persistentState:f}),y(p,c.createMediaKeys(),5);case 5:Ee(p,0);break;case 2:ce(p),o.set(l,null),K(p)}})},u=e.map(function(l){return s(l)}),y(a,Promise.all(u),2)):a.return(Ql(o))})}function _T(e){var t;return k(function(n){if(n.g==1)return t=new Promise(function(i,r){new fe(r).S(FT)}),le(n,2),y(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4);if(n.g!=2)return Ee(n,0);ce(n),K(n)})}function Ff(e){var t;return k(function(n){return t=Array.from(e.i.entries()),e.i.clear(),y(n,Promise.all(t.map(function(i){i=g(i);var r=i.next().value,o=i.next().value;return k(function(s){if(s.g==1)return le(s,2),e.ha||e.C.has(r.sessionId)||o.type!=="persistent-license"||e.h.persistentSessionOnlinePlayback?y(s,_T(r),5):y(s,r.remove(),5);if(s.g!=2)return Ee(s,0);ce(s),K(s)})})),0)})}function Gf(e,t){return e.length&&t.length&&e!==t?0<oc(e,t).length:!0}function oc(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=g(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;for(var r=g(t),o=r.next();!o.done;o=r.next())if(o=o.value,i.keySystem==o.keySystem){r=new Map;for(var s=g((i.initData||[]).concat(o.initData||[])),u=s.next();!u.done;u=s.next())u=u.value,r.set(u.keyId,u);r=Array.from(r.values()),s=i.keyIds&&o.keyIds?new Set([].concat(F(i.keyIds),F(o.keyIds))):i.keyIds||o.keyIds,n.push({keySystem:i.keySystem,licenseServerUri:i.licenseServerUri||o.licenseServerUri,distinctiveIdentifierRequired:i.distinctiveIdentifierRequired||o.distinctiveIdentifierRequired,persistentStateRequired:i.persistentStateRequired||o.persistentStateRequired,videoRobustness:i.videoRobustness||o.videoRobustness,audioRobustness:i.audioRobustness||o.audioRobustness,serverCertificate:i.serverCertificate||o.serverCertificate,serverCertificateUri:i.serverCertificateUri||o.serverCertificateUri,initData:r,keyIds:s});break}}return n}function Vf(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function UT(e){e.i.forEach(function(t,n){var i=t.Yf,r=n.expiration;isNaN(r)&&(r=1/0),r!=i&&(e.G.onExpirationUpdated(n.sessionId,r),t.Yf=r)})}function sc(e){return e=e.i.values(),PE(e,function(t){return t.loaded})}function OT(e){for(var t=g(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.V.get(n.value)!=="usable")return!1;return!0}function jT(e,t){var n=[];for(t.forEach(function(i,r){n.push({keySystem:r,licenseServerUri:i,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=g(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function zf(e,t,n,i,r,o){var s={};e=g(e);for(var u=e.next();!u.done;s={Va:s.Va},u=e.next()){if(s.Va=u.value,t.includes(s.Va.licenseServerUri)||t.push(s.Va.licenseServerUri),i.includes(s.Va.serverCertificateUri)||i.push(s.Va.serverCertificateUri),s.Va.serverCertificate&&(n.some(function(c){return function(d){return Ai(d,c.Va.serverCertificate)}}(s))||n.push(s.Va.serverCertificate)),s.Va.initData){u={};for(var a=g(s.Va.initData),l=a.next();!l.done;u={Sd:u.Sd},l=a.next())u.Sd=l.value,r.some(function(c){return function(d){var f=c.Sd;return d.keyId&&d.keyId==f.keyId?!0:d.initDataType==f.initDataType&&Ai(d.initData,f.initData)}}(u))||r.push(u.Sd)}if(s.Va.keyIds)for(u=g(s.Va.keyIds),a=u.next();!a.done;a=u.next())o.add(a.value)}}function BT(e,t,n,i){var r=e.keySystem;r&&(r!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&(t=t.get(r)||"",e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(r))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.videoRobustness||(e.videoRobustness=n.videoRobustness),e.audioRobustness||(e.audioRobustness=n.audioRobustness),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),i[r]&&(e.keySystem=i[r]),I.cast&&I.cast.__platform__&&r=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}var FT=1,GT=5,VT=.5,ku=new Ur(function(){return tn(new Uint8Array([0]))});function $o(){}function Kf(e,t){if(t){var n=xn[t.toLowerCase()];if(n)return n}throw new M(2,4,4e3,e,t)}O("shaka.media.ManifestParser",$o),$o.unregisterParserByMime=function(e){delete xn[e]},$o.registerParserByMime=function(e,t){xn[e]=t},$o.registerParserByExtension=function(){wn("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},$o.AccessibilityPurpose={tk:"visually impaired",Mj:"hard of hearing"};var xn={};function zT(e){function t(){i=!0}function n(l){o.push(l),Re(l)}e=ge(e);var i=!1,r,o=[],s=[];if(new Ue().box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).T("stsd",function(l){r=l,o.push(l),Or(l)}).T("encv",t).T("enca",t).T("dvav",function(l){s.push({box:l,cb:1701733238})}).T("dva1",function(l){s.push({box:l,cb:1701733238})}).T("dvh1",function(l){s.push({box:l,cb:1701733238})}).T("dvhe",function(l){s.push({box:l,cb:1701733238})}).T("hev1",function(l){s.push({box:l,cb:1701733238})}).T("hvc1",function(l){s.push({box:l,cb:1701733238})}).T("avc1",function(l){s.push({box:l,cb:1701733238})}).T("avc3",function(l){s.push({box:l,cb:1701733238})}).T("ac-3",function(l){s.push({box:l,cb:1701733217})}).T("ec-3",function(l){s.push({box:l,cb:1701733217})}).T("ac-4",function(l){s.push({box:l,cb:1701733217})}).T("mp4a",function(l){s.push({box:l,cb:1701733217})}).parse(e),i)return e;if(s.length==0||!r)throw jr(e),new M(2,3,3019);s.reverse();for(var u=g(s),a=u.next();!a.done;a=u.next())a=a.value,e=KT(e,r,a.box,o,a.cb);return e}function KT(e,t,n,i,r){var o=HT.value(),s=e.subarray(n.start,n.start+n.size),u=Ut(s),a=new Uint8Array(n.size+o.byteLength);for(a.set(s,0),s=Ut(a),s.setUint32(4,r),a.set(o,n.size),r=u.getUint32(4),s.setUint32(n.size+16,r),Hf(a,0,a.byteLength),r=new Uint8Array(e.byteLength+a.byteLength),n=zo()?n.start:n.start+n.size,o=e.subarray(n),r.set(e.subarray(0,n)),r.set(a,n),r.set(o,n+a.byteLength),e=g(i),i=e.next();!i.done;i=e.next())i=i.value,Hf(r,i.start,i.size+a.byteLength);return a=Ut(r,t.start),t=Xo(t),e=a.getUint32(t),a.setUint32(t,e+1),r}function Hf(e,t,n){e=Ut(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}var HT=new Ur(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function rn(e,t,n,i,r,o,s){this.ba=e,this.hb=t,this.Na=n,this.Uf=i===void 0?null:i,this.timescale=r===void 0?null:r,this.g=o===void 0?null:o,this.aes128Key=s===void 0?null:s,this.mimeType=this.codecs=null}rn.prototype.Pb=function(){return this.hb},rn.prototype.Mb=function(){return this.Na};function Wf(e,t){return e===t?!0:e&&t?e.Pb()==t.Pb()&&e.Mb()==t.Mb()&&Rl(e.ba().sort(),t.ba().sort())&&Ai(e.g,t.g):e==t}O("shaka.media.InitSegmentReference",rn),rn.prototype.getEndByte=rn.prototype.Mb,rn.prototype.getStartByte=rn.prototype.Pb;function oe(e,t,n,i,r,o,s,u,a,l,c,d,f,p,m,v){for(l=l===void 0?[]:l,p=p===void 0?Ci:p,this.startTime=e,this.h=this.endTime=t,this.D=n,this.hb=i,this.Na=r,this.ka=o,this.timestampOffset=s,this.appendWindowStart=u,this.appendWindowEnd=a,this.g=l,this.tilesLayout=c===void 0?"":c,this.C=d===void 0?null:d,this.oa=f===void 0?null:f,this.status=p,this.l=!1,this.j=!0,this.m=!1,this.aes128Key=m===void 0?null:m,this.u=null,this.i=0,this.s=v===void 0?!1:v,this.ue=this.Fd=!1,e=g(this.g),t=e.next();!t.done;t=e.next())t.value.eh();this.s&&this.g.length&&this.g[this.g.length-1].dh(),this.mimeType=this.codecs=null}h=oe.prototype,h.ba=function(){return this.D()},h.getStartTime=function(){return this.startTime},h.di=function(){return this.endTime},h.Pb=function(){return this.hb},h.Mb=function(){return this.Na},h.Bi=function(){return this.tilesLayout},h.Ai=function(){return this.C},h.sc=function(){return this.status},h.Ti=function(){this.status=Xf},h.Tf=function(){this.l=!0},h.Ni=function(){return this.l},h.xe=function(){this.j=!1},h.Ki=function(){return this.j},h.eh=function(){this.Fd=!0},h.Mi=function(){return this.Fd},h.dh=function(){this.ue=!0},h.Li=function(){return this.ue},h.bh=function(){this.m=!0},h.Hi=function(){return this.m},h.rh=function(e){this.u=e},h.zi=function(){return this.u},h.offset=function(e){this.startTime+=e,this.endTime+=e,this.h+=e;for(var t=g(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.h+=e},h.sg=function(e){this.oa==null?Ti("Sync attempted without sync time!"):(e=this.oa-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},O("shaka.media.SegmentReference",oe),oe.prototype.syncAgainst=oe.prototype.sg,oe.prototype.offset=oe.prototype.offset,oe.prototype.getThumbnailSprite=oe.prototype.zi,oe.prototype.setThumbnailSprite=oe.prototype.rh,oe.prototype.hasByterangeOptimization=oe.prototype.Hi,oe.prototype.markAsByterangeOptimization=oe.prototype.bh,oe.prototype.isLastPartial=oe.prototype.Li,oe.prototype.markAsLastPartial=oe.prototype.dh,oe.prototype.isPartial=oe.prototype.Mi,oe.prototype.markAsPartial=oe.prototype.eh,oe.prototype.isIndependent=oe.prototype.Ki,oe.prototype.markAsNonIndependent=oe.prototype.xe,oe.prototype.isPreload=oe.prototype.Ni,oe.prototype.markAsPreload=oe.prototype.Tf,oe.prototype.markAsUnavailable=oe.prototype.Ti,oe.prototype.getStatus=oe.prototype.sc,oe.prototype.getTileDuration=oe.prototype.Ai,oe.prototype.getTilesLayout=oe.prototype.Bi,oe.prototype.getEndByte=oe.prototype.Mb,oe.prototype.getStartByte=oe.prototype.Pb,oe.prototype.getEndTime=oe.prototype.di,oe.prototype.getStartTime=oe.prototype.getStartTime,oe.prototype.getUris=oe.prototype.ba;var Ci=0,Xf=1;oe.Status={zj:Ci,qk:Xf,Sj:2};function uc(e){return!e||e.length==1&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function ac(e,t){return!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1)?!1:t>=e.start(0)}function Yf(e,t){if(!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0))return 0;var n=0;e=g(Mi(e));for(var i=e.next();!i.done;i=e.next()){var r=i.value;i=r.start,r=r.end,r>t&&(n+=r-Math.max(i,t))}return n}function WT(e,t,n){return!e||!e.length||e.length==1&&1e-6>e.end(0)-e.start(0)?null:(e=Mi(e).findIndex(function(i,r,o){return i.start>t&&(r==0||o[r-1].end-t<=n)}),0<=e?e:null)}function Mi(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function lc(){}function qf(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function $f(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function cc(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function XT(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(2>e.size||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var i=ze(ge(e.data,1,n)),r=e.data[2+n],o=e.data.subarray(3+n).indexOf(0);if(o===-1)return null;var s=ze(ge(e.data,3+n,o)),u;return i==="-->"?u=ze(ge(e.data,4+n+o)):u=tn(e.data.subarray(4+n+o)),t.mimeType=i,t.pictureType=r,t.description=s,t.data=u,t}return e.type==="TXXX"?2>e.size||e.data[0]!==3||(i=e.data.subarray(1).indexOf(0),i===-1)?null:(n=ze(ge(e.data,1,i)),e=ze(ge(e.data,2+i)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?2>e.size||e.data[0]!==3||(i=e.data.subarray(1).indexOf(0),i===-1)?null:(n=ze(ge(e.data,1,i)),e=ze(ge(e.data,2+i)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?2>e.size||(n=e.data.indexOf(0),n===-1)?null:(n=ze(ge(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=tn(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=ze(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=ze(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=tn(e.data),t):null}function Zi(e){for(var t=0,n=[];qf(e,t);){var i=cc(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,i=t+i;t+10<i;){var r=e.subarray(t),o=cc(r,4);r={type:String.fromCharCode(r[0],r[1],r[2],r[3]),size:o,data:r.subarray(10,10+o)},(o=XT(r))&&n.push(o),t+=r.size+10}$f(e,t)&&(t+=10)}return n}function Qo(e,t){for(var n=t=t===void 0?0:t,i=0;qf(e,t);)e[t+5]>>6&1&&(i+=10),i+=10,i+=cc(e,t+6),$f(e,t+10)&&(i+=10),t+=i;return 0<i?e.subarray(n,n+i):new Uint8Array([])}O("shaka.util.Id3Utils",lc),lc.getID3Data=Qo,lc.getID3Frames=Zi;function Qf(e,t){var n=null,i=null,r=null,o=e.O();return t&1&&(r=e.Uc()),t&2&&e.skip(4),t&8&&(n=e.O()),t&16&&(i=e.O()),{trackId:o,Og:n,Qh:i,wk:r}}function hc(e,t){return t==1?(t=e.O(),e=e.O(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.O()}}function Lu(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.O(),e.skip(4),e=e.Ua(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function Jf(e,t,n){var i=e.O(),r=[],o=null;n&1&&(o=e.O()),n&4&&e.skip(4);for(var s=0;s<i;s++){var u={gg:null,sampleSize:null,Ke:null};n&256&&(u.gg=e.O()),n&512&&(u.sampleSize=e.O()),n&1024&&e.skip(4),n&2048&&(u.Ke=t==0?e.O():e.ih()),r.push(u)}return{Ak:i,lh:r,Ph:o}}function Zf(e,t){t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4));var n=e.O();return t==1?e.skip(8):e.skip(4),e.skip(4),e.skip(8),e.skip(2),e.skip(2),e.skip(2),e.skip(2),e.skip(36),t=e.Ua()+e.Ua()/16,e=e.Ua()+e.Ua()/16,{trackId:n,width:t,height:e}}function YT(e){for(var t="mp4a",n,i;e.xa();){n=e.ra();for(var r=e.ra();r&128;)r=e.ra();if(n==3)e.Ua(),r=e.ra(),r&128&&e.Ua(),r&64&&e.skip(e.ra()),r&32&&e.Ua();else if(n==4)i=e.ra(),e.skip(12);else if(n==5)break}return i&&(t+="."+this.g(i),n==5&&e.xa()&&(n=e.ra(),i=(n&248)>>3,i===31&&e.xa()&&(i=32+((n&7)<<3)+((e.ra()&224)>>5)),t+="."+i)),{wa:t}}function e0(e,t){return e.skip(87),{wa:t+"."+this.g(e.ra())+this.g(e.ra())+this.g(e.ra())}}function t0(e){return e=e.O(),{wa:Su(e)}}function hi(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,i=0;i<e.byteLength;i++)2<=i&&e[i]==3&&e[i-1]==0&&e[i-2]==0||(t[n]=e[i],n++);this.j=ge(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function dc(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),i=Math.min(4,e.i);i!==0&&(n.set(e.j.subarray(t,t+i)),e.h=new be(n,0).O(),e.g=8*i,e.i-=i)}function Ot(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,dc(e)}e.h<<=t,e.g-=t}function Te(e,t){var n=Math.min(e.g,t),i=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&dc(e),n=t-n,0<n?i<<n|Te(e,n):i}function pc(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return dc(e),t+pc(e)}function Rt(e){Ot(e,1+pc(e))}function z(e){var t=pc(e);return Te(e,t+1)-1}function Fr(e){return e=z(e),1&e?1+e>>>1:-1*(e>>>1)}function $(e){return Te(e,1)===1}function Me(e){return Te(e,8)}function Du(e,t){for(var n=8,i=8,r=0;r<t;r++)i!==0&&(i=Fr(e),i=(n+i+256)%256),n=i===0?n:i}function qT(e){return Me(e),z(e),z(e)}O("shaka.util.ExpGolomb",hi);function Oe(){this.D=null,this.G=!1,this.m=this.H=null,this.j=[],this.g=[],this.s=this.u=null,this.i=[],this.h=[],this.C=null,this.l=[]}h=Oe.prototype,h.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},h.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,mc(e)),n=e.length-(e.length+t)%188,i=!1,r=t;r<n;r+=188)if(e[r]==71){var o=!!(e[r+1]&64),s=((e[r+1]&31)<<8)+e[r+2];if(1<(e[r+3]&48)>>4){var u=r+5+e[r+4];if(u==r+188)continue}else u=r+4;switch(s){case 0:o&&(u+=e[u]+1),this.D=(e[u+10]&31)<<8|e[u+11];break;case 17:case 8191:break;case this.D:o&&(u+=e[u]+1),o=e,s={audio:-1,video:-1,pe:-1,audioCodec:"",videoCodec:""};var a=u+3+((o[u+1]&15)<<8|o[u+2])-4;for(u+=12+((o[u+10]&15)<<8|o[u+11]);u<a;){var l=(o[u+1]&31)<<8|o[u+2],c=(o[u+3]&15)<<8|o[u+4];switch(o[u]){case 6:if(s.audio==-1&&0<c)for(var d=u+5,f=c;2<f;){switch(o[d]){case 106:s.audio=l,s.audioCodec="ac3";break;case 122:s.audio=l,s.audioCodec="ec3"}var p=o[d+1]+2;d+=p,f-=p}break;case 15:s.audio==-1&&(s.audio=l,s.audioCodec="aac");break;case 21:s.pe==-1&&(s.pe=l);break;case 27:s.video==-1&&(s.video=l,s.videoCodec="avc");break;case 3:case 4:s.audio==-1&&(s.audio=l,s.audioCodec="mp3");break;case 36:s.video==-1&&(s.video=l,s.videoCodec="hvc");break;case 129:s.audio==-1&&(s.audio=l,s.audioCodec="ac3");break;case 132:case 135:s.audio==-1&&(s.audio=l,s.audioCodec="ec3")}u+=c+5}o=s,o.video!=-1&&(this.H=o.video,this.m=o.videoCodec),o.audio!=-1&&(this.u=o.audio,this.s=o.audioCodec),o.pe!=-1&&(this.C=o.pe),i&&!this.G&&(i=!1,r=t-188),this.G=!0;break;case this.H:u=e.subarray(u,r+188),o?this.j.push([u]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(u);break;case this.u:u=e.subarray(u,r+188),o?this.i.push([u]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(u);break;case this.C:u=e.subarray(u,r+188),o?this.l.push([u]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(u);break;default:i=!0}}return this};function fc(e){if((e[0]<<16|e[1]<<8|e[2])!==1)return null;var t={data:new Uint8Array(0),packetLength:e[4]<<8|e[5],pts:null,dts:null,nalus:[]};if(t.packetLength&&t.packetLength>e.byteLength-6)return null;var n=e[7];return n&192&&(t.pts=536870912*(e[9]&14)+4194304*(e[10]&255)+16384*(e[11]&254)+128*(e[12]&255)+(e[13]&254)/2,t.dts=t.pts,n&64&&(t.dts=536870912*(e[14]&14)+4194304*(e[15]&255)+16384*(e[16]&254)+128*(e[17]&255)+(e[18]&254)/2)),n=e[8]+9,e.byteLength<=n?null:(t.data=e.subarray(n),t)}h.Zi=function(e){return wn("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.ag(e)},h.ag=function(e,t,n){var i=e.pts?e.pts/9e4:null;e=e.data;var r=e.byteLength,o=1;this.m=="hvc"&&(o=2);for(var s=n||0,u=[],a=-1,l=0,c,d=0;d<r;++d){var f=e[d];if(f){if(2<=s&&f==1){if(t&&!u.length&&a==-1&&(f=d-(3<s?3:s),n&&f!=0&&(f=e.subarray(0,f),t.data=Ye(t.data,f),t.fullData=Ye(t.fullData,f))),0<=a?(s=d-((3<s?3:s)+1),u.push({data:e.subarray(a+o,s+1),fullData:e.subarray(a,s+1),type:l,time:i})):t&&!u.length&&(a=d-s,0<a&&(a=e.subarray(0,a),t.data=Ye(t.data,a),t.fullData=Ye(t.fullData,a))),d>=r-o)return u;d++,a=d,l=this.m=="hvc"?e[d]>>1&63:e[d]&31}s=0}else s++;d>=r-1&&0<=a&&0<=s&&(c={data:e.subarray(a+o,r),fullData:e.subarray(a,r),type:l,time:i})}return c&&u.push(c),!u.length&&t&&(t.data=Ye(t.data,e),t.fullData=Ye(t.fullData,e)),u},h.getMetadata=function(){for(var e=[],t=g(this.l),n=t.next();!n.done;n=t.next())n=Ye.apply(xt,F(n.value)),(n=fc(n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:Zi(n.data),dts:n.dts,pts:n.pts});return e},h.qc=function(){if(this.i.length&&!this.h.length){for(var e=!1,t=g(this.i),n=t.next();!n.done;n=t.next()){var i=Ye.apply(xt,F(n.value)),r=fc(i);n=this.h.length?this.h[this.h.length-1]:null,r&&r.pts!=null&&r.dts!=null&&(!n||n.pts!=r.pts&&n.dts!=r.dts)?(this.h.length&&r.dts<(n.dts||0)&&(e=!0),this.h.push(r)):this.h.length&&(i=r?r.data:i)&&(n=this.h.pop(),n.data=Ye(n.data,i),this.h.push(n))}e&&(this.h=this.h.sort(function(o,s){var u=(o.pts||0)-(s.pts||0);return(o.dts||0)-(s.dts||0)||u}))}return this.h},h.Oc=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=!1,n=g(this.j),i=n.next();!i.done;i=n.next()){var r=Ye.apply(xt,F(i.value)),o=fc(r);i=this.g.length?this.g[this.g.length-1]:null,o&&o.pts!=null&&o.dts!=null&&(!i||i.pts!=o.pts&&i.dts!=o.dts)?(this.g.length&&o.dts<(i.dts||0)&&(t=!0),this.g.push(o)):this.g.length&&(r=o?o.data:r)&&(i=this.g.pop(),i.data=Ye(i.data,r),this.g.push(i))}if(e){var s;for(n=g(this.g),i=n.next();!i.done;i=n.next())i=i.value,i.nalus=this.ag(i,s,void 0),i.nalus.length&&(s=i.nalus[i.nalus.length-1]);this.g=this.g.filter(function(u){return u.nalus.length})}t&&(this.g=this.g.sort(function(u,a){var l=(u.pts||0)-(a.pts||0);return(u.dts||0)-(a.dts||0)||l}))}return e?this.g:(e=this.g,this.g=[],e)},h.getStartTime=function(e){if(e=="audio"){e=null;var t=this.qc();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.Oc(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},h.sd=function(){return{audio:this.s,video:this.m}},h.le=function(){for(var e=[],t=g(this.Oc()),n=t.next();!n.done;n=t.next())e.push.apply(e,F(n.value.nalus));return e},h.Ei=function(){wn("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.Lf();return{height:e.height,width:e.width}},h.Lf=function(){return this.m=="hvc"?QT(this):$T(this)};function $T(e){var t={height:null,width:null,wa:null};if(e=e.le(),!e.length||(e=e.find(function(f){return f.type==7}),!e))return t;e=new hi(e.data);var n=Me(e),i=Me(e),r=Me(e);if(Rt(e),JT.includes(n)){var o=z(e);if(o===3&&Ot(e,1),Rt(e),Rt(e),Ot(e,1),$(e)){o=o!==3?8:12;for(var s=0;s<o;s++)$(e)&&(6>s?Du(e,16):Du(e,64))}}if(Rt(e),o=z(e),o===0)z(e);else if(o===1)for(Ot(e,1),Rt(e),Rt(e),o=z(e),s=0;s<o;s++)Rt(e);Rt(e),Ot(e,1),o=z(e),s=z(e);var u=Te(e,1);u===0&&Ot(e,1),Ot(e,1);var a=0,l=0,c=0,d=0;return $(e)&&(a=z(e),l=z(e),c=z(e),d=z(e)),t.height=String((2-u)*(s+1)*16-2*c-2*d),t.width=String(16*(o+1)-2*a-2*l),t.wa="avc1."+("0"+n.toString(16).toUpperCase()).slice(-2)+("0"+i.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2),t}function QT(e){var t={height:null,width:null,wa:null};if(e=e.le(),!e.length||(e=e.find(function(S){return S.type==33}),!e))return t;var n=new hi(e.fullData,!0);Me(n),Me(n),Te(n,4);var i=Te(n,3);$(n);var r=Te(n,2),o=Te(n,1),s=Te(n,5),u=Te(n,32);e=Me(n);for(var a=Me(n),l=Me(n),c=Me(n),d=Me(n),f=Me(n),p=Me(n),m=[],v=[],E=0;E<i;E++)m.push($(n)),v.push($(n));if(0<i)for(E=i;8>E;E++)Te(n,2);for(E=0;E<i;E++)m[E]&&Te(n,88),v[E]&&Me(n);z(n),i=z(n),i==3&&Te(n,1),m=z(n),v=z(n);var w=E=0,T=0,x=0;return $(n)&&(E+=z(n),w+=z(n),T+=z(n),x+=z(n)),t.width=String(m-(E+w)*(i===1||i===2?2:1)),t.height=String(v-(T+x)*(i===1?2:1)),n=function(S){for(var C=0,D=0;32>D;D++)C|=(S>>D&1)<<31-D;return C>>>0}(u),o=o==1?"H":"L",r="hvc1"+("."+["","A","B","C"][r]+s),r+="."+n.toString(16).toUpperCase(),r+="."+o+p,f&&(r+="."+f.toString(16).toUpperCase()),d&&(r+="."+d.toString(16).toUpperCase()),c&&(r+="."+c.toString(16).toUpperCase()),l&&(r+="."+l.toString(16).toUpperCase()),a&&(r+="."+a.toString(16).toUpperCase()),e&&(r+="."+e.toString(16).toUpperCase()),t.wa=r,t}function gc(e){return!(0>mc(e))}function mc(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}O("shaka.util.TsParser",Oe),Oe.syncOffset=mc,Oe.probe=gc,Oe.prototype.getVideoInfo=Oe.prototype.Lf,Oe.prototype.getVideoResolution=Oe.prototype.Ei,Oe.prototype.getVideoNalus=Oe.prototype.le,Oe.prototype.getCodecs=Oe.prototype.sd,Oe.prototype.getStartTime=Oe.prototype.getStartTime,Oe.prototype.getVideoData=Oe.prototype.Oc,Oe.prototype.getAudioData=Oe.prototype.qc,Oe.prototype.getMetadata=Oe.prototype.getMetadata,Oe.prototype.parseNalus=Oe.prototype.ag,Oe.prototype.parseAvcNalus=Oe.prototype.Zi,Oe.prototype.parse=Oe.prototype.parse,Oe.prototype.clearData=Oe.prototype.clearData,Oe.Timescale=9e4;var JT=[100,110,122,244,44,83,86,118,128,138,139,134];function Jo(e,t,n){this.g=null,this.s=-1,this.l=e,this.i=t,this.m=n,this.j=!1;e:{if(typeof libDPIModule>"u"&&Ae("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,wn("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{Ae("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(Ae("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||Ae(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function n0(e){e.g&&e.i.classList.add("shaka-hidden")}Jo.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function i0(e,t,n){var i=ZT,r=rw;switch(t.mimeType){case"video/webm":i=ew;break;case"video/mp4":i=tw}switch(n){case"DASH":r=iw;break;case"HLS":r=nw}e.g&&(e.s=t.id,e.g.setLevelSwitching(t.id,!0),e.g.setContainerFormat(i),e.j||e.g.setStreamingFormat(r))}O("shaka.lcevc.Dec",Jo),Jo.prototype.release=Jo.prototype.release;var ZT=0,ew=1,tw=2,nw=0,iw=1,rw=-1;function r0(e,t,n,i){var r=this;this.i=e,this.G=null,this.H=t,this.g={},this.I={},this.ha={},this.h=null,this.Z=!1,this.ua=n||function(){},this.N=i||null,this.j={},this.u=new _e,this.m={},this.J=null,this.L=new Ve,this.M="",this.$=!1,this.l=o0(this,this.L),this.D=!1,this.K=new _r(function(){return ow(r)}),this.C=!1,this.W="UNKNOWN",this.Aa=this.sa=!1,this.va=new Ve,this.s=!1,this.aa=!0,this.V=null}function o0(e,t){if(I.ManagedMediaSource){e.i.disableRemotePlayback=!0;var n=new ManagedMediaSource;return e.u.o(n,"startstreaming",function(){e.aa=!0}),e.u.o(n,"endstreaming",function(){e.aa=!1}),e.u.na(n,"sourceopen",function(){URL.revokeObjectURL(e.M),t.resolve()}),e.u.na(e.i,"playing",function(){e.$=!0}),e.M=Uu(n),e.i.src=e.M,n}return n=new MediaSource,e.u.na(n,"sourceopen",function(){URL.revokeObjectURL(e.M),t.resolve()}),e.u.na(e.i,"playing",function(){e.$=!0}),e.M=Uu(n),e.i.src=e.M,n}h=r0.prototype,h.destroy=function(){return this.K.destroy()};function ow(e){var t,n,i,r,o,s,u,a;return k(function(l){if(l.g==1){t=[];for(n in e.j)for(i=e.j[n],r=i[0],e.j[n]=i.slice(0,1),r&&t.push(r.p.catch(Kp)),o=g(i.slice(1)),s=o.next();!s.done;s=o.next())u=s.value,u.p.reject(new M(2,7,7003,void 0));e.h&&t.push(e.h.destroy()),e.H&&t.push(e.H.destroy());for(a in e.m)t.push(e.m[a].destroy());return y(l,Promise.all(t),2)}e.u&&(e.u.release(),e.u=null),e.i&&(e.i.removeAttribute("src"),e.i.load(),e.i=null),e.G=null,e.l=null,e.h=null,e.H=null,e.g={},e.m={},e.J=null,e.j={},e.N=null,K(l)})}h.init=function(e,t,n,i){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,i=i===void 0?!1:i;var r=this,o,s,u,a,l;return k(function(c){if(c.g==1)return o=at,y(c,r.L,2);for(r.C=t,r.W=n,r.sa=i,r.Aa=!r.C&&r.W=="HLS"&&!r.sa,s=g(e.keys()),u=s.next();!u.done;u=s.next())a=u.value,l=e.get(a),Ru(r,a,l,l.codecs),r.s?(r.j[o.U]=[],r.j[o.ia]=[]):r.j[a]=[];K(c)})};function Ru(e,t,n,i,r){r=r===void 0?!1:r;var o=Kt(n.mimeType,i);if(t==Ce)Pu(e,o,e.C,n.external);else{var s=e.G.forceTransmux||r;if((!nt(o)||!e.C&&xr.includes(o))&&(s=!0),r=Ar(n.mimeType,i),s){if(s=_t("audio",(i||"").split(",")),i=_t("video",(i||"").split(",")),s&&i){e.s=!0,Ru(e,"audio",n,s,!0),Ru(e,"video",n,i,!0);return}(i=Vi(r))&&(o=i(),e.m[t]=o,o=o.convertCodecs(t,r))}r=o+e.G.sourceBufferExtraFeatures,Ne(e.K);try{var u=e.l.addSourceBuffer(r)}catch(a){throw new M(2,3,3015,a,"The mediaSource_ status was "+e.l.readyState+" expected 'open'")}e.C&&(u.mode=vw),e.u.o(u,"error",function(){e.j[t][0].p.reject(new M(2,3,3014,e.i.error?e.i.error.code:0))}),e.u.o(u,"updateend",function(){return di(e,t)}),e.g[t]=u,e.I[t]=o,e.ha[t]=!!n.drmInfos.length}}h.configure=function(e){this.G=e};function Pu(e,t,n,i){e.h||(e.h=new ii(e.H));var r=e.h;i=i||e.Z,e=e.W,t=="application/cea-608"||t=="application/cea-708"?r.i=null:(r.i=(0,ht[t])(),r.i.setSequenceMode?r.i.setSequenceMode(n):Ae('Text parsers should have a "setSequenceMode" method!'),r.i.setManifestType?r.i.setManifestType(e):Ae('Text parsers should have a "setManifestType" method!'),r.C=i)}function s0(e){return e.D?!1:e.l?e.l.readyState=="ended":!0}function u0(e,t){return e.D||!Object.keys(e.g).length?e=null:t==Ce?e=e.h.g:(e=Gr(e,t),e=!e||e.length==1&&1e-6>e.end(0)-e.start(0)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null),e}function Nu(e,t){return e.D?null:t==Ce?e.h.h:uc(Gr(e,t))}function sw(e,t,n){return e.D?0:t==Ce?(e=e.h,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=Gr(e,t),Yf(e,n))}h.Lb=function(){var e={total:this.D?[]:Mi(this.i.buffered),audio:this.D?[]:Mi(Gr(this,"audio")),video:this.D?[]:Mi(Gr(this,"video")),text:[]};if(this.h){var t=this.h.g,n=this.h.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function Gr(e,t){try{return e.g[t].buffered}catch{return null}}function uw(e,t,n,i,r,o){var s=null,u=ge(n);if(xr.includes(r))o=Zi(u),o.length&&i&&((t=o.find(function(d){return d.description==="com.apple.streaming.transportStreamTimestamp"}))&&t.data&&(s=Math.round(t.data)/1e3),e.ua([{cueTime:i.startTime,data:u,frames:o,dts:i.startTime,pts:i.startTime}],0,i.endTime));else if(r.includes("/mp4")&&i&&i.timestampOffset==0&&i.ka&&i.ka.timescale){var a=i.ka.timescale;if(!isNaN(a)){var l=0,c=!1;new Ue().box("moof",Re).box("traf",Re).T("tfdt",function(d){l=hc(d.reader,d.version).baseMediaDecodeTime/a,c=!0,d.parser.stop()}).parse(n,!0),c&&(s=l)}}else r.includes("/mp4")||r.includes("/webm")||!gc(u)||(u=new Oe().parse(u),t=u.getStartTime(t),t!=null&&(s=t),u=u.getMetadata(),u.length&&e.ua(u,o,i?i.endTime:null));return s}function bu(e,t,n,i,r,o,s,u,a,l){s=s===void 0?!1:s,u=u===void 0?!1:u,a=a===void 0?!1:a,l=l===void 0?!1:l;var c,d,f,p,m,v,E,w,T,x,S;return k(function(C){switch(C.g){case 1:if(c=at,t!=c.Da){C.F(2);break}if(!e.C){C.F(3);break}return y(C,e.va,4);case 4:d=C.h,e.h.u=d;case 3:return y(C,GE(e.h,n,i?i.startTime:null,i?i.endTime:null,i?i.ba()[0]:null),5);case 5:return C.return();case 2:if(l||!e.s){C.F(6);break}return y(C,bu(e,c.U,n,i,r,o,s,u,a,!0),7);case 7:return y(C,bu(e,c.ia,n,i,r,o,s,u,a,!0),8);case 8:return C.return();case 6:if(!e.g[t])return C.return();if(f=e.g[t].timestampOffset,p=e.I[t],e.m[t]&&(p=e.m[t].getOriginalMimeType()),i&&(m=uw(e,t,n,i,p,f),m!=null&&(v=i.startTime-m,E=Math.abs(f-v),(.001<=E||s||u)&&(!a||0<v||!f)&&(f=v,e.Aa&&(ot(e,t,function(){return Vr(e,t)}),ot(e,t,function(){return zr(e,t,f)}))),w=t==c.ia||!(c.ia in e.g),e.C&&w&&e.va.resolve(f))),o&&t==c.ia&&(e.h||Pu(e,"application/cea-608",e.C,!1),e.J||(T=p.split(";",1)[0],e.J=new zt(T)),i?(x=e.J.i(n),x.length&&zE(e.h,x,i.startTime,i.endTime,f)):e.J.init(n)),!e.m[t]){C.F(9);break}return y(C,e.m[t].transmux(n,r,i,e.l.duration,t),10);case 10:n=C.h;case 9:return n=dw(e,n,i?i.startTime:null,t),i&&e.C&&t!=c.Da&&(s||u)&&(S=i.startTime,ot(e,t,function(){return Vr(e,t)}),ot(e,t,function(){return zr(e,t,S)})),y(C,ot(e,t,function(){var D=n;if(t=="video"&&e.N){var b=e.N;b.g&&b.g.appendBuffer(D,"video",b.s,-f)}e.g[t].appendBuffer(D)}),11);case 11:K(C)}})}function aw(e,t){var n=Nu(e,"video")||0;Vp(e.h,t,n)}function lw(e){e.h&&Vp(e.h,"",0)}h.remove=function(e,t,n){var i=this,r;return k(function(o){return o.g==1?(r=at,e==r.Da?y(o,i.h.remove(t,n),0):y(o,ot(i,e,function(){return _u(i,e,t,n)}),4)):i.s?y(o,ot(i,r.U,function(){return _u(i,r.U,t,n)}),0):o.F(0)})};function a0(e,t){var n;return k(function(i){return i.g==1?(n=at,t==n.Da?e.h?y(i,e.h.remove(0,1/0),0):i.return():y(i,ot(e,t,function(){return _u(e,t,0,e.l.duration)}),4)):e.s?y(i,ot(e,n.U,function(){return _u(e,n.U,0,e.l.duration)}),0):i.F(0)})}h.flush=function(e){var t=this,n;return k(function(i){return i.g==1?(n=at,e==n.Da?i.return():y(i,ot(t,e,function(){t.i.currentTime-=.001,di(t,e)}),2)):t.s?y(i,ot(t,n.U,function(){var r=n.U;t.i.currentTime-=.001,di(t,r)}),0):i.F(0)})};function cw(e,t,n,i,r,o,s,u,a){var l,c,d;return k(function(f){return f.g==1?(l=at,t==l.Da?(o||(e.h.u=n),VE(e.h,i,r),f.return()):(c=[],y(f,gw(e,t,s,u,a),2))):(d=f.h,d||(c.push(ot(e,t,function(){return Vr(e,t)})),e.s&&c.push(ot(e,l.U,function(){return Vr(e,l.U)}))),o||(c.push(ot(e,t,function(){return zr(e,t,n)})),e.s&&c.push(ot(e,l.U,function(){return zr(e,l.U,n)}))),c.push(ot(e,t,function(){e.g[t].appendWindowStart=0,e.g[t].appendWindowEnd=r,e.g[t].appendWindowStart=i,di(e,t)})),e.s&&c.push(ot(e,l.U,function(){var p=l.U;e.g[p].appendWindowStart=0,e.g[p].appendWindowEnd=r,e.g[p].appendWindowStart=i,di(e,p)})),y(f,Promise.all(c),0))})}function hw(e,t,n){var i;return k(function(r){return r.g==1?(i=at,t==i.Da?r.return():(ot(e,t,function(){return Vr(e,t)}),e.s&&ot(e,i.U,function(){return Vr(e,i.U)}),y(r,ot(e,t,function(){return zr(e,t,n)}),2))):e.s?y(r,ot(e,i.U,function(){return zr(e,i.U,n)}),0):r.F(0)})}h.endOfStream=function(e){var t=this;return k(function(n){return y(n,vc(t,function(){s0(t)||t.l.readyState==="closed"||(e?t.l.endOfStream(e):t.l.endOfStream())}),0)})},h.gb=function(e){var t=this;return k(function(n){return y(n,vc(t,function(){if(e<t.l.duration)for(var i in t.g){var r={start:function(){},p:new Ve};t.j[i].unshift(r)}t.l.duration=e,t.V=e}),0)})},h.getDuration=function(){return this.l.duration};function _u(e,t,n,i){i<=n?di(e,t):e.g[t].remove(n,i)}function Vr(e,t){var n=e.g[t].appendWindowStart,i=e.g[t].appendWindowEnd;e.g[t].abort(),e.g[t].appendWindowStart=n,e.g[t].appendWindowEnd=i,di(e,t)}function zr(e,t,n){0>n&&(n+=.001),e.g[t].timestampOffset=n,di(e,t)}function di(e,t){if(!e.D){var n=e.j[t][0];n&&(n.p.resolve(),yc(e,t))}}function ot(e,t,n){return Ne(e.K),n={start:n,p:new Ve},e.j[t].push(n),e.j[t].length==1&&l0(e,t),n.p}function vc(e,t){var n,i,r,o,s,u,a;return k(function(l){switch(l.g){case 1:Ne(e.K),n=[],i={};for(r in e.g)i.dd=new Ve,o={start:function(c){return function(){return c.dd.resolve()}}(i),p:i.dd},e.j[r].push(o),n.push(i.dd),e.j[r].length==1&&o.start(),i={dd:i.dd};return le(l,2),y(l,Promise.all(n),4);case 4:Ee(l,3);break;case 2:throw s=ce(l),s;case 3:return le(l,5,6),y(l,t(),6);case 6:Zt(l);for(u in e.g)yc(e,u);en(l,0);break;case 5:throw a=ce(l),new M(2,3,3015,a,e.i.error||"No error in the media element")}})}function yc(e,t){e.j[t].shift(),l0(e,t)}function l0(e,t){var n=e.j[t][0];if(n)try{n.start()}catch(i){i.name=="QuotaExceededError"?n.p.reject(new M(2,3,3017,t)):n.p.reject(new M(2,3,3015,i,e.i.error||"No error in the media element")),yc(e,t)}}function dw(e,t,n,i){var r=e.ha[i];return e.G.insertFakeEncryptionInInit&&n==null&&r&&(Ki()||zo()||Xe("SOPOpenBrowser"))&&e.I[i].split(";")[0].split("/")[1]=="mp4"&&(t=zT(t)),t}function pw(e,t,n,i){return ot(e,t,function(){t!==Ce&&(Bi()&&(e.m[t]&&(e.m[t].destroy(),delete e.m[t]),i&&(e.m[t]=i),e.g[t].changeType(n+e.G.sourceBufferExtraFeatures),e.I[t]=n),di(e,t))})}function fw(e,t){var n,i,r,o,s,u,a,l,c,d,f,p,m,v,E,w,T,x,S,C,D,b,P;return k(function(N){switch(N.g){case 1:n=at,e.D=!0,e.s=!1,i=e.i.currentTime,r=e.i.autoplay,o=e.i.paused,e.$&&(e.i.autoplay=!1),Zn(N,2),e.u.ub(),s=[];for(u in e.m)s.push(e.m[u].destroy());for(a in e.j)for(l=e.j[a],c=l[0],e.j[a]=l.slice(0,1),c&&s.push(c.p.catch(Kp)),d=g(l.slice(1)),f=d.next();!f.done;f=d.next())p=f.value,p.p.reject(new M(2,7,7003,void 0));for(m in e.g){v=e.g[m];try{e.l.removeSourceBuffer(v)}catch{}}return y(N,Promise.all(s),4);case 4:return e.m={},e.g={},E=e.l.duration,e.L=new Ve,e.l=o0(e,e.L),y(N,e.L,5);case 5:for(!isNaN(E)&&E?e.l.duration=E:!isNaN(e.V)&&e.V&&(e.l.duration=e.V),w=new Ve,T=e.l.sourceBuffers,x=t.size,S=0,e.u.o(T,"addsourcebuffer",function(){S++,S===x&&w.resolve()}),C=g(t.keys()),D=C.next();!D.done;D=C.next())b=D.value,P=t.get(b),Ru(e,b,P,P.codecs),e.s?(e.j[n.U]=[],e.j[n.ia]=[]):e.j[b]=[];return e.i.currentTime=i,y(N,w,2);case 2:Zt(N),e.D=!1,Ne(e.K),e.u.na(e.i,"canplaythrough",function(){Ne(e.K),e.i.autoplay=r,o||e.i.play()}),en(N,0)}})}function c0(e,t){return vc(e,function(){return fw(e,t)})}function gw(e,t,n,i,r){var o,s,u,a,l,c,d,f,p,m,v,E,w,T,x;return k(function(S){return S.g==1?(o=at,t==o.Da||(s=Pn(Tn(e.I[t])),u=ni(e.I[t]),l=!1,c=Kt(n,i),d=e.G.forceTransmux,(!nt(c)||!e.C&&xr.includes(c)||i.includes(","))&&(d=!0),d&&(f=Ar(n,i),p=Vi(f))&&(a=p(),m=_t(o.U,(i||"").split(",")),v=_t(o.ia,(i||"").split(",")),m&&v?(l=!0,E=v,t==o.U&&(E=m),c=a.convertCodecs(t,Ar(n,E))):c=a.convertCodecs(t,f)),w=Pn(Tn(c)),T=ni(c),s===w&&u===T)?S.return(!1):(x=!0,(e.s||l&&a&&!e.m[t])&&(x=!1),x&&e.G.codecSwitchingStrategy==="smooth"&&Bi()?y(S,pw(e,t,c,a),3):(a&&a.destroy(),y(S,c0(e,r),3)))):S.return(!0)})}function mw(e,t,n){if(t==Ce)var i=!1;else{i=Pn(Tn(e.I[t]));var r=ni(e.I[t]),o=Kt(n.mimeType,n.codecs),s=e.G.forceTransmux;(!nt(o)||!e.C&&xr.includes(o)||n.codecs.includes(","))&&(s=!0),n=Ar(n.mimeType,n.codecs),s&&(s=Vi(n))&&(s=s(),o=s.convertCodecs(t,n),s.destroy()),t=Pn(Tn(o)),o=ni(o),i=i!==t||r!==o}return i?e.G.codecSwitchingStrategy!=="smooth"||!Bi()||e.s:!1}var Uu=I.URL.createObjectURL,vw="sequence";function de(e,t,n){this.i=e,this.s=t,this.C=this.j=1/0,this.g=1,this.h=this.l=null,this.u=0,this.G=!0,this.H=0,this.D=n===void 0?!0:n,this.I=0,this.m=!1}h=de.prototype,h.getDuration=function(){return this.j},h.mi=function(){return this.g},h.og=function(e){this.i=e},h.gb=function(e){this.j=e},h.pi=function(){return this.i},h.nh=function(e){this.u=e},h.Vc=function(e){this.G=e},h.Ne=function(e){this.C=e},h.oh=function(e){this.s=e},h.ci=function(){return this.s},h.hh=function(e,t){if(e.length!=0){var n=e[e.length-1].end+t;this.Ce(e[0].start+t),this.g=e.reduce(function(i,r){return Math.max(i,r.end-r.start)},this.g),this.h=Math.max(this.h,n),this.i!=null&&this.D&&!this.m&&(this.i=(Date.now()+this.u)/1e3-this.h-this.g)}},h.Dd=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,i=(Date.now()+this.u)/1e3;e=g(e);for(var r=e.next();!r.done;r=e.next())r=r.value,i<r.startTime||(t=Math.min(t,r.startTime),n=Math.max(n,r.endTime),this.g=Math.max(this.g,r.endTime-r.startTime));this.Ce(t),this.h=Math.max(this.h,n),this.i!=null&&this.D&&!this.m&&(this.i=i-this.h-this.g)}},h.ve=function(){this.m=!0},h.Pi=function(){return this.m},h.Ce=function(e){this.l=this.l==null?e:Math.min(this.l,e)},h.Wf=function(e){this.g=Math.max(this.g,e)},h.offset=function(e){this.l!=null&&(this.l+=e),this.h!=null&&(this.h+=e)},h.R=function(){return this.j==1/0&&!this.G},h.wc=function(){return this.j!=1/0&&!this.G},h.Ab=function(){return Math.max(this.H,this.ac()-this.C)},h.sh=function(e){this.H=e},h.ac=function(){return this.R()||this.wc()?Math.min(Math.max(0,(Date.now()+this.u)/1e3-this.g-this.i)+this.I,this.j):this.h?Math.min(this.h,this.j):this.j},h.ud=function(e){var t=Math.max(this.l,this.H);return this.C==1/0?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.ac()-this.C+e,this.Ob()))},h.Nc=function(){return this.ud(0)},h.Ob=function(){return Math.max(0,this.ac()-(this.R()||this.wc()?this.s:0))},h.yh=function(){return!(this.i==null||this.h!=null&&this.D)},h.mh=function(e){this.I=e},O("shaka.media.PresentationTimeline",de),de.prototype.setAvailabilityTimeOffset=de.prototype.mh,de.prototype.usingPresentationStartTime=de.prototype.yh,de.prototype.getSeekRangeEnd=de.prototype.Ob,de.prototype.getSeekRangeStart=de.prototype.Nc,de.prototype.getSafeSeekRangeStart=de.prototype.ud,de.prototype.getSegmentAvailabilityEnd=de.prototype.ac,de.prototype.setUserSeekStart=de.prototype.sh,de.prototype.getSegmentAvailabilityStart=de.prototype.Ab,de.prototype.isInProgress=de.prototype.wc,de.prototype.isLive=de.prototype.R,de.prototype.offset=de.prototype.offset,de.prototype.notifyMaxSegmentDuration=de.prototype.Wf,de.prototype.notifyMinSegmentStartTime=de.prototype.Ce,de.prototype.isStartTimeLocked=de.prototype.Pi,de.prototype.lockStartTime=de.prototype.ve,de.prototype.notifySegments=de.prototype.Dd,de.prototype.notifyTimeRange=de.prototype.hh,de.prototype.getDelay=de.prototype.ci,de.prototype.setDelay=de.prototype.oh,de.prototype.setSegmentAvailabilityDuration=de.prototype.Ne,de.prototype.setStatic=de.prototype.Vc,de.prototype.setClockOffset=de.prototype.nh,de.prototype.getPresentationStartTime=de.prototype.pi,de.prototype.setDuration=de.prototype.gb,de.prototype.setPresentationStartTime=de.prototype.og,de.prototype.getMaxSegmentDuration=de.prototype.mi,de.prototype.getDuration=de.prototype.getDuration;function h0(e,t,n){this.j=n,this.l=e,this.u=d0(e),this.g=e.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.s=0,this.C=t,this.i=function(){}}h0.prototype.release=function(){this.j=this.l=null,this.i=function(){}};function yw(e,t){e.i=t}function Ew(e){this.g=e}function d0(e){if(e.g.paused||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=g(Mi(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function Ec(e,t,n,i,r){var o=this;this.C=r,this.g=e,this.D=t,this.u=n,this.l=new _e,this.j=!1,this.H=e.readyState,this.G=this.i=0,this.h=i,this.s=!1,this.l.o(e,"waiting",function(){return Tc(o)}),this.m=new fe(function(){Tc(o)}).za(this.u.gapJumpTimerTime)}Ec.prototype.release=function(){this.l&&(this.l.release(),this.l=null),this.m!=null&&(this.m.stop(),this.m=null),this.h&&(this.h.release(),this.h=null),this.g=this.D=this.C=null},Ec.prototype.Zf=function(){this.s=!0,Tc(this)};function Tc(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.j)return}else e.j=!1;if(!e.g.paused||e.g.currentTime==e.i&&(e.g.autoplay||e.g.currentTime!=e.i)){e.g.readyState!=e.H&&(e.H=e.g.readyState);var t;if(!(t=!e.h)){t=e.h;var n=t.l,i=d0(n),r=n.g.currentTime,o=Date.now()/1e3;(t.g!=r||t.u!=i)&&(t.m=o,t.g=r,t.u=i,t.h=!1),r=o-t.m,(i=r>=t.C&&i&&!t.h)&&(t.i(t.g,r),t.h=!0,t.g=n.g.currentTime,t.s++,t.j(new X("stalldetected"))),t=!i}t&&(t=e.g.currentTime,n=e.g.buffered,i=WT(n,t,e.u.gapDetectionThreshold),i==null||i==0&&!e.s||(r=n.start(i),r>=e.D.Ob()||.001>r-t||(i!=0&&n.end(i-1),e.g.currentTime=r,t==e.i&&(e.i=r),e.G++,e.C(new X("gapjumped")))))}}}function Kr(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=Tw.value().get(t),n.na(e,t,i))}var Tw=new Ur(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function p0(e,t,n,i){var r=this;this.g=e,this.m=t,this.u=n,this.l=null,this.j=function(){return r.l==null&&(r.l=i()),r.l},this.s=!1,this.h=new _e,this.i=new v0(e),Kr(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){g0(r,r.j())})}p0.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function wc(e){return e.s?e.g.currentTime:e.j()}function f0(e,t){0<e.g.readyState?y0(e.i,t):Kr(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){g0(e,e.j())})}function g0(e,t){.001>Math.abs(e.g.currentTime-t)?m0(e):(e.h.na(e.g,"seeking",function(){m0(e)}),y0(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function m0(e){e.s=!0,e.h.o(e.g,"seeking",function(){return e.m()}),e.u(e.g.currentTime)}function v0(e){var t=this;this.h=e,this.m=10,this.l=this.j=this.i=0,this.g=new fe(function(){0>=t.i||t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)})}v0.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null};function y0(e,t){e.j=e.h.currentTime,e.l=t,e.i=e.m,e.h.currentTime=t,e.g.za(.1)}function E0(e){this.g=e,this.j=!1,this.h=null,this.i=new _e}h=E0.prototype,h.df=function(){function e(){t.h==null||t.h==0?t.j=!0:(t.i.na(t.g,"seeking",function(){t.j=!0}),t.g.currentTime=Math.max(0,t.g.currentTime+t.h))}var t=this;Kr(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},h.release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},h.ef=function(e){this.h=this.j?this.h:e},h.Yd=function(){return(this.j?this.g.currentTime:this.h)||0},h.Cg=function(){return 0},h.Bg=function(){return 0},h.gh=function(){};function T0(e,t,n,i,r,o){var s=this;this.i=e,this.g=t.presentationTimeline,this.D=t.minBufferTime||0,this.l=n,this.C=r,this.u=null,this.s=ww(e,n,o),this.j=new Ec(e,t.presentationTimeline,n,this.s,o),this.h=new p0(e,function(){e:{var u=s.j;u.j=!0,u.s=!1;var a=wc(s.h);if(u=A0(s,a),.001<Math.abs(u-a)&&(a=Date.now()/1e3,!s.u||s.u<a-1)){s.u=a,f0(s.h,u),u=void 0;break e}s.C(),u=void 0}return u},function(u){var a=s.j;a.g.seeking&&!a.j&&(a.j=!0,a.i=u)},function(){var u=i;return u==null?u=1/0>s.g.getDuration()?s.g.Nc():s.g.Ob():0>u&&(u=s.g.Ob()+u),w0(s,S0(s,u))}),this.m=new fe(function(){if(s.i.readyState!=0&&!s.i.paused){var u=wc(s.h),a=s.g.Nc(),l=s.g.Ob();3>l-a&&(a=l-3),u<a&&(u=A0(s,u),s.i.currentTime=u)}})}h=T0.prototype,h.df=function(){this.m.za(.25)},h.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.C=function(){}},h.ef=function(e){f0(this.h,e)},h.Yd=function(){var e=wc(this.h);return 0<this.i.readyState&&!this.i.paused?S0(this,e):e},h.Cg=function(){return this.s?this.s.s:0},h.Bg=function(){return this.j.G},h.gh=function(){this.j.Zf()};function w0(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function A0(e,t){var n=Math.max(e.D,e.l.rebufferingGoal),i=e.l.safeSeekOffset,r=e.g.Nc(),o=e.g.Ob(),s=e.g.getDuration();3>o-r&&(r=o-3);var u=e.g.ud(n),a=e.g.ud(i);return n=e.g.ud(n+i),t>=s?w0(e,t):t>o?o:t<r?ac(e.i.buffered,a)?a:n:t>=u||ac(e.i.buffered,t)?t:n}function S0(e,t){var n=e.g.Nc();return t<n?n:(e=e.g.Ob(),t>e?e:t)}function ww(e,t,n){if(!t.stallEnabled)return null;var i=t.stallSkip;return t=new h0(new Ew(e),t.stallThreshold,n),yw(t,function(){i?e.currentTime+=i:(e.pause(),e.play())}),t}function De(e){this.g=e,this.m=null,this.j=0,this.s=!1}h=De.prototype,h.$b=function(){return this.g.length},h.release=function(){this.s||(this.g=[],this.m&&this.m.stop(),this.m=null)},h.Ui=function(){this.s=!0};function Ac(e,t){e=g(e.g);for(var n=e.next();!n.done;n=e.next())t(n.value)}h.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var i=this.g[n],r=n<t?this.g[n+1].startTime:i.endTime;if(e>=i.startTime&&e<r)return n+this.j}return this.g.length&&e<this.g[0].startTime?this.j:null},h.get=function(e){return this.g.length==0?null:(e-=this.j,0>e||e>=this.g.length?null:this.g[e])},h.offset=function(e){if(!this.s)for(var t=g(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},h.ze=function(e){if(!this.s&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(n){return Math.round(1e3*n.startTime)/1e3<t}),this.g.push.apply(this.g,F(e))}},h.Cd=function(e,t){var n=this;e=e.filter(function(i){return i.endTime>t&&(n.g.length==0||i.endTime>n.g[0].startTime)}),this.ze(e),this.yb(t)},h.yb=function(e){if(!this.s){var t=this.g.length;this.g=this.g.filter(function(n){return n.endTime>e}),this.j+=t-this.g.length}},h.Ic=function(e,t,n){if(n=n===void 0?!1:n,!this.s){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.j++;this.g.length!=0&&(e=this.g[this.g.length-1],this.g[this.g.length-1]=new oe(e.startTime,t,e.D,e.hb,e.Na,e.ka,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.C,e.oa,e.status,e.aes128Key),this.g[this.g.length-1].i=e.i)}},h.Qe=function(e,t){var n=this;this.s||(this.m&&this.m.stop(),this.m=new fe(function(){var i=t();i?n.g.push.apply(n.g,F(i)):(n.m.stop(),n.m=null)}),this.m.za(e))},De.prototype[Symbol.iterator]=function(){return this.rc(0)},De.prototype.rc=function(e){var t=this.find(e);if(t==null)return null;t--;var n=this.get(t+1),i=-1;if(n&&0<n.g.length)for(var r=n.g.length-1;0<=r;--r){var o=n.g[r];if(e>=o.startTime&&e<o.endTime){for(;r&&!o.j;)r--,o=n.g[r];if(!o.j)return Ti("No independent partial segment found!"),null;t++,i=r-1;break}}return new _n(this,t,i)};function Sc(e,t,n){return e=new oe(e,e+t,function(){return n},0,null,null,e,e,e+t),new De([e])}O("shaka.media.SegmentIndex",De),De.forSingleSegment=Sc,De.prototype.getIteratorForTime=De.prototype.rc,De.prototype.updateEvery=De.prototype.Qe,De.prototype.fit=De.prototype.Ic,De.prototype.evict=De.prototype.yb,De.prototype.mergeAndEvict=De.prototype.Cd,De.prototype.offset=De.prototype.offset,De.prototype.get=De.prototype.get,De.prototype.find=De.prototype.find,De.prototype.markImmutable=De.prototype.Ui,De.prototype.release=De.prototype.release;function _n(e,t,n){this.i=e,this.g=t,this.h=n}_n.prototype.Oh=function(){return this.g},_n.prototype.current=function(){var e=this.i.get(this.g);return e&&0<e.g.length&&e.s&&this.h>=e.g.length&&(this.g++,this.h=0,e=this.i.get(this.g)),e&&0<e.g.length?e.g[this.h]:e},_n.prototype.next=function(){var e=this.i.get(this.g);return e&&0<e.g.length?(this.h++,e.s&&this.h==e.g.length&&(this.g++,this.h=0)):(this.g++,this.h=0),e=this.current(),{value:e,done:!e}},O("shaka.media.SegmentIterator",_n),_n.prototype.next=_n.prototype.next,_n.prototype.current=_n.prototype.current,_n.prototype.currentPosition=_n.prototype.Oh;function Ze(){De.call(this,[]),this.h=[]}pe(Ze,De),h=Ze.prototype,h.clone=function(){var e=new Ze;return e.h=this.h.slice(),e},h.release=function(){for(var e=g(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]},h.find=function(e){for(var t=0,n=g(this.h),i=n.next();!i.done;i=n.next()){i=i.value;var r=i.find(e);if(r!=null)return r+t;t+=i.j+i.$b()}return null},h.get=function(e){for(var t=0,n=g(this.h),i=n.next();!i.done;i=n.next()){i=i.value;var r=i.get(e-t);if(r)return r;t+=i.j+i.$b()}return null},h.offset=function(){},h.ze=function(){},h.yb=function(){},h.Cd=function(){},h.Ic=function(){},h.Qe=function(){},O("shaka.media.MetaSegmentIndex",Ze),Ze.prototype.updateEvery=Ze.prototype.Qe,Ze.prototype.fit=Ze.prototype.Ic,Ze.prototype.mergeAndEvict=Ze.prototype.Cd,Ze.prototype.evict=Ze.prototype.yb,Ze.prototype.merge=Ze.prototype.ze,Ze.prototype.offset=Ze.prototype.offset,Ze.prototype.get=Ze.prototype.get,Ze.prototype.find=Ze.prototype.find,Ze.prototype.release=Ze.prototype.release;function Zo(e){var t=this;this.g=e,this.h=this.g.ke(),this.i=new fe(function(){t.g.fh(.25*t.h)})}Zo.prototype.release=function(){this.set(this.Lc()),this.i&&(this.i.stop(),this.i=null),this.g=null},Zo.prototype.set=function(e){if(this.h!=e)e:{if(this.h=e,this.i.stop(),0<=this.h)try{var t=this.h;this.g.ke()!=t&&this.g.pg(t);break e}catch{}this.i.za(.25),this.g.ke()!=0&&this.g.pg(0)}},Zo.prototype.Lc=function(){return this.g.Lc()};function x0(e){var t=this;this.h=e,this.g=new Set,this.i=new fe(function(){I0(t,!1)}).za(.25)}x0.prototype.release=function(){this.i.stop();for(var e=g(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function I0(e,t){for(var n=g(e.g),i=n.next();!i.done;i=n.next())i.value.j(e.h.currentTime,t)}function Ou(e){Ie.call(this),this.g=new Map,this.h=e}pe(Ou,Ie),Ou.prototype.release=function(){this.g.clear(),Ie.prototype.release.call(this)};function Aw(e,t){var n=e.g.get(t);return n||(n={Gd:[],Mg:null,contentType:t},e.g.set(t,n)),n}function Sw(e,t,n){var i=Aw(e,t.contentType);xw(e,i),e={Uf:t,position:n},i=i.Gd,t=i.findIndex(function(r){return r.position>=n}),0<=t?i.splice(t,i[t].position==n?1:0,e):i.push(e)}Ou.prototype.j=function(e){for(var t=g(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;e:{for(var i=n.Gd,r=i.length-1;0<=r;r--){var o=i[r];if(o.position<=e){i=o.Uf;break e}}i=null}if((r=i)&&(r=n.Mg,r=!(r===i||r&&i&&r.bandwidth==i.bandwidth&&r.audioSamplingRate==i.audioSamplingRate&&r.codecs==i.codecs&&r.contentType==i.contentType&&r.frameRate==i.frameRate&&r.height==i.height&&r.mimeType==i.mimeType&&r.channelsCount==i.channelsCount&&r.pixelAspectRatio==i.pixelAspectRatio&&r.width==i.width)),r)e:{if(r=e,o=i.contentType,(o=this.h()[o])&&0<o.length){var s=o[o.length-1].end;if(r>=o[0].start&&r<s){r=!0;break e}}r=!1}r&&(n.Mg=i,JSON.stringify(i),n=new X("qualitychange",new Map([["quality",i],["position",e]])),this.dispatchEvent(n))}};function xw(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,i=e[e.length-1].end,r=t.Gd;t.Gd=r.filter(function(o,s){return!(o.position<=n&&s+1<r.length&&r[s+1].position<=n||o.position>=i)})}else t.Gd=[]}function xc(e){Ie.call(this);var t=this;this.g=new Set,this.i=e,this.h=new fe(function(){for(var n=t.i(),i=g(t.g),r=i.next();!r.done;r=i.next())r=r.value,r.endTime<n.start&&(t.g.delete(r),r=new X("regionremove",new Map([["region",r]])),t.dispatchEvent(r))}).za(2)}pe(xc,Ie),xc.prototype.release=function(){this.g.clear(),this.h.stop(),Ie.prototype.release.call(this)};function ju(e,t){Ie.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{Dc:null,Cc:Hr,vc:function(i,r){return er(n,"enter",i,r)}},{Dc:es,Cc:Hr,vc:function(i,r){return er(n,"enter",i,r)}},{Dc:ts,Cc:Hr,vc:function(i,r){return er(n,"enter",i,r)}},{Dc:Hr,Cc:es,vc:function(i,r){return er(n,"exit",i,r)}},{Dc:Hr,Cc:ts,vc:function(i,r){return er(n,"exit",i,r)}},{Dc:es,Cc:ts,vc:function(i,r){return er(n,"skip",i,r)}},{Dc:ts,Cc:es,vc:function(i,r){return er(n,"skip",i,r)}}],this.h=new _e,this.h.o(this.i,"regionremove",function(i){n.g.delete(i.region)})}pe(ju,Ie),ju.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Ie.prototype.release.call(this)},ju.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=g(this.i.g),i=n.next();!i.done;i=n.next()){i=i.value;var r=this.g.get(i),o=e<i.startTime?es:e>i.endTime?ts:Hr;this.g.set(i,o);for(var s=g(this.m),u=s.next();!u.done;u=s.next())u=u.value,u.Dc==r&&u.Cc==o&&u.vc(i,t)}}};function er(e,t,n,i){t=new X(t,new Map([["region",n],["seeking",i]])),e.dispatchEvent(t)}var es=1,Hr=2,ts=3;function Iw(e,t,n){this.i=e,this.h=t,this.j=0,this.l=n,this.g=new Map}function Ic(e,t,n){if(n=n===void 0?!1:n,e.h.segmentIndex){var i=e.h.segmentIndex.rc(Math.max(t.startTime,e.j));if(i){var r=t;for(n&&(r=i.next().value)&&r.startTime==t.startTime&&r.endTime==t.endTime&&(r=null);e.g.size<e.i&&r!=null&&(t=!0,r.l&&r.Na!=null&&(t=!1),r.sc()==2&&(t=!1),t&&!e.g.has(r)&&(t=new Cc(e.l),k0(t,r,e.h),e.g.set(r,t)),e.j=r.startTime,!(e.h.fastSwitching&&r.Fd&&r.ue));)r=i.next().value}}}function Cw(e,t){if(e.h.segmentIndex&&e.g.size<e.i&&!e.g.has(t)){var n=new Cc(e.l);k0(n,t,e.h),e.g.set(t,n)}}function C0(e){if(e.g.size!==0){for(var t=g(e.g.keys()),n=t.next();!n.done;n=t.next())(n=n.value)&&M0(e,n);e.j=0}}function Mw(e,t){t&&t!==e.h&&(C0(e),e.h=t)}function M0(e,t){var n=e.g.get(t);e.g.delete(t),n&&n.abort()}function Cc(e){this.i=e,this.g=this.h=null}function k0(e,t,n){var i=new Uint8Array(0);e.g=e.i(t,n,function(r){return k(function(o){if(o.g==1)return 0<i.byteLength?i=Ye(i,r):i=r,e.h?y(o,e.h(i),3):o.F(0);i=new Uint8Array(0),K(o)})})}Cc.prototype.abort=function(){this.g&&this.g.abort()};function ns(e,t,n,i,r){return e=dt(e,i,r),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function L0(e,t){var n=this;this.g=t,this.m=e,this.h=null,this.C=1,this.s=this.j=null,this.H=0,this.G=!1,this.i=new Map,this.D=!1,this.I=null,this.u=!1,this.l=new _r(function(){return kw(n)}),this.J=Date.now()/1e3}h=L0.prototype,h.destroy=function(){return this.l.destroy()};function kw(e){var t,n,i,r;return k(function(o){if(o.g==1){for(t=[],n=g(e.i.values()),i=n.next();!i.done;i=n.next())r=i.value,rs(r),t.push(os(r));return y(o,Promise.all(t),2)}e.i.clear(),e.g=null,e.m=null,e.h=null,K(o)})}h.configure=function(e){this.h=e,this.I=new pf({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0);for(var t=g(this.i.keys()),n=t.next();!n.done;n=t.next())if(n=this.i.get(n.value),n.Ia){var i=n.Ia,r=e.segmentPrefetchLimit;i.i=r;for(var o=Array.from(i.g.keys());o.length>r;){var s=o.pop();s&&M0(i,s)}0<e.segmentPrefetchLimit||(n.Ia=null)}else 0<e.segmentPrefetchLimit&&(n.Ia=N0(this,n.stream))},h.start=function(){var e=this;return k(function(t){if(t.g==1)return y(t,Pw(e),2);Ne(e.l),e.D=!0,K(t)})};function Lw(e,t){var n,i,r,o,s,u;k(function(a){switch(a.g){case 1:return n=at,e.H++,i=e.H,le(a,2),y(a,a0(e.g.Y,n.Da),4);case 4:Ee(a,3);break;case 2:r=ce(a),e.g&&e.g.onError(r);case 3:o=Kt(t.mimeType,t.codecs),Pu(e.g.Y,o,e.m.sequenceMode,t.external),s=e.g.Y.H,(s.isTextVisible()||e.h.alwaysStreamText)&&e.H==i&&(u=P0(e,t),e.i.set(n.Da,u),In(e,u,0)),K(a)}})}function Dw(e){var t=e.i.get(Ce);t&&(rs(t),os(t).catch(function(){}),e.i.delete(Ce)),e.s=null}function D0(e,t){var n=e.i.get("video");if(n){var i=n.stream;i&&(t?(t=i.trickModeVideo)&&!n.Ac&&(Wr(e,t,!1,0,!1),n.Ac=i):(i=n.Ac)&&(n.Ac=null,Wr(e,i,!0,0,!1)))}}function R0(e,t,n,i,r,o){n=n===void 0?!1:n,i=i===void 0?0:i,r=r===void 0?!1:r,o=o===void 0?!1:o,e.j=t,e.D&&(t.video&&Wr(e,t.video,n,i,r,o),t.audio&&Wr(e,t.audio,n,i,r,o))}function Bu(e,t){k(function(n){if(n.g==1)return e.s=t,e.D?t.segmentIndex?n.F(2):y(n,t.createSegmentIndex(),2):n.return();Wr(e,t,!0,0,!1),K(n)})}function Wr(e,t,n,i,r,o){var s=e.i.get(t.type);s||t.type!=Ce?s&&(s.Ac&&(t.trickModeVideo?(s.Ac=t,t=t.trickModeVideo):s.Ac=null),s.stream!=t||r)&&(s.Ia&&Mw(s.Ia,t),t.type==Ce&&(r=Kt(t.mimeType,t.codecs),Pu(e.g.Y,r,e.m.sequenceMode,t.external)),s.stream.closeSegmentIndex&&s.stream.closeSegmentIndex(),s.stream=t,s.ea=null,s.Dg=!!o,n&&(s.pd?s.Re=!0:s.Ta?(s.Ub=!0,s.be=i,s.Re=!0):(rs(s),Dc(e,s,!0,i).catch(function(u){e.g&&e.g.onError(u)}))),Rw(e,s).catch(function(u){e.g&&e.g.onError(u)})):Lw(e,t)}function Rw(e,t){var n,i;return k(function(r){if(r.g==1)return t.eb?(n=t.stream,i=t.eb,n.segmentIndex?r.F(2):y(r,n.createSegmentIndex(),2)):r.return();if(t.eb!=i||t.stream!=n)return r.return();var o=e.g.je(),s=Nu(e.g.Y,t.type),u=t.stream.segmentIndex.find(t.Sa?t.Sa.endTime:o),a=u==null?null:t.stream.segmentIndex.get(u);u=a&&a.Na?a.Na-a.hb:null,a&&!u&&(u=(a.endTime-a.getStartTime())*(t.stream.bandwidth||0)/8),u?((a=a.ka)&&(u+=(a.Na?a.Na-a.hb:null)||0),a=e.g.getBandwidthEstimate(),o=8*u/a<(s||0)-o-Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal)||t.eb.h.g>u):o=!1,o&&t.eb.abort(),K(r)})}h.Kd=function(){if(this.g)for(var e=this.g.je(),t=g(this.i.keys()),n=t.next();!n.done;n=t.next()){var i=n.value;n=this.i.get(i);var r=null;n.ea&&(r=n.ea.current()),(!r||r.startTime>e||r.endTime<e)&&(n.ea=null),r=this.g.Y,r.D?r=!1:i==Ce?(r=r.h,r=r.g==null||r.h==null?!1:e>=r.g&&e<r.h):(r=Gr(r,i),r=ac(r,e)),r||((Nu(this.g.Y,i)!=null||n.Ta)&&is(this,n),n.eb&&(n.eb.abort(),n.eb=null),i===Ce&&(i=this.g.Y,i.J&&i.J.h()),n.Kd=!0)}};function is(e,t){t.pd||t.Ub||(t.Ta?(t.Ub=!0,t.be=0):u0(e.g.Y,t.type)==null?t.Eb==null&&In(e,t,0):(rs(t),Dc(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function Pw(e){var t,n,i,r,o,s,u,a,l;return k(function(c){if(c.g==1){if(t=at,!e.j)throw new M(2,5,5006);return n=new Map,i=new Set,e.j.audio&&(n.set(t.U,e.j.audio),i.add(e.j.audio)),e.j.video&&(n.set(t.ia,e.j.video),i.add(e.j.video)),e.s&&(n.set(t.Da,e.s),i.add(e.s)),r=e.g.Y,y(c,r.init(n,e.m.sequenceMode,e.m.type,e.m.ignoreManifestTimestampsInSegmentsMode),2)}for(Ne(e.l),e.updateDuration(),o=g(n.keys()),s=o.next();!s.done;s=o.next())u=s.value,a=n.get(u),e.i.has(u)||(l=P0(e,a),e.i.set(u,l),In(e,l,0));K(c)})}function P0(e,t){return{stream:t,type:t.type,ea:null,Ia:N0(e,t),Sa:null,ec:null,Rf:null,Pf:null,Of:null,Ac:null,endOfStream:!1,Ta:!1,Eb:null,Ub:!1,be:0,Re:!1,pd:!1,Kd:!0,Vf:!1,dg:!1,wd:!1,eb:null}}function N0(e,t){return t.type!=="video"&&t.type!=="audio"?null:0<e.h.segmentPrefetchLimit?new Iw(e.h.segmentPrefetchLimit,t,function(n,i,r){return b0(e,n,i,r)}):null}h.updateDuration=function(){var e=this.m.presentationTimeline.getDuration();1/0>e?this.g.Y.gb(e):this.g.Y.gb(Math.pow(2,32))};function Nw(e,t){var n,i,r,o,s;return k(function(u){switch(u.g){case 1:if(Ne(e.l),t.Ta||t.Eb==null||t.pd)return u.return();if(t.Eb=null,!t.Ub){u.F(2);break}return y(u,Dc(e,t,t.Re,t.be),3);case 3:return u.return();case 2:if(t.stream.segmentIndex){u.F(4);break}return n=t.stream,y(u,t.stream.createSegmentIndex(),5);case 5:if(n!=t.stream)return n.closeSegmentIndex&&n.closeSegmentIndex(),t.Ta||t.Eb||In(e,t,0),u.return();case 4:le(u,6),i=bw(e,t),i!=null&&(In(e,t,i),t.wd=!1),Ee(u,7);break;case 6:return r=ce(u),y(u,_0(e,t,r),8);case 8:return u.return();case 7:if(o=Array.from(e.i.values()),!e.D||!o.every(function(a){return a.endOfStream})){u.F(0);break}return y(u,e.g.Y.endOfStream(),10);case 10:Ne(e.l),s=e.g.Y.getDuration(),s!=0&&s<e.m.presentationTimeline.getDuration()&&e.m.presentationTimeline.gb(s),K(u)}})}function bw(e,t){if(kc(t))return aw(e.g.Y,t.stream.originalId||""),null;if(t.type==Ce&&lw(e.g.Y),!e.g.Y.aa&&t.type!=Ce)return e.h.updateIntervalSeconds/2;var n=e.g.je(),i=t.Sa?t.Sa.endTime:n,r=sw(e.g.Y,t.type,n),o=Math.max(1,Math.max(e.m.minBufferTime||0,e.h.rebufferingGoal,e.h.bufferingGoal)*e.C),s=e.m.presentationTimeline.getDuration()-i,u=Nu(e.g.Y,t.type);if(1e-6>s&&u)return t.endOfStream=!0,t.type=="video"&&(e=e.i.get(Ce))&&kc(e)&&(e.endOfStream=!0),null;if(t.endOfStream=!1,r>=o)return e.h.updateIntervalSeconds/2;if(r=_w(e,t,n,u),!r)return e.h.updateIntervalSeconds;for(o=1/0,s=Array.from(e.i.values()),s=g(s),u=s.next();!u.done;u=s.next())u=u.value,kc(u)||u.ea&&!u.ea.current()||(o=Math.min(o,u.Sa?u.Sa.endTime:n));return i>=o+e.m.presentationTimeline.g?e.h.updateIntervalSeconds:(t.Ia&&t.ea&&(i=r.ka,!i||t.Sa&&Wf(i,t.ec)||Cw(t.Ia,i),Ic(t.Ia,r)),Uw(e,t,n,r).catch(function(){}),null)}function _w(e,t,n,i){if(t.ea)return t.ea.current();if(t.Sa||i)return n=t.Sa?t.Sa.endTime:i,t.Vf=!0,t.ea=t.stream.segmentIndex.rc(n),t.ea&&t.ea.next().value;e=e.h.inaccurateManifestTolerance,i=Math.max(n-e,0);var r=null;return e&&(t.ea=t.stream.segmentIndex.rc(i),r=t.ea&&t.ea.next().value),r||(t.ea=t.stream.segmentIndex.rc(n),r=t.ea&&t.ea.next().value),r}function Uw(e,t,n,i){var r,o,s,u,a,l,c,d,f,p,m,v,E,w,T,x;return k(function(S){switch(S.g){case 1:if(r=at,o=t.stream,s=t.ea,t.Ta=!0,le(S,2),i.sc()==2)throw new M(1,1,1011);return y(S,Fw(e,t,i),4);case 4:return Ne(e.l),e.u?S.return():(u=o.mimeType=="video/mp4"||o.mimeType=="audio/mp4",a=I.ReadableStream,e.h.lowLatencyMode&&a&&u&&(e.m.type!="HLS"||i.m)?(d=new Uint8Array(0),p=f=!1,v=function(C){var D,b,P;return k(function(N){switch(N.g){case 1:if(f||(p=!0,Ne(e.l),e.u))return N.return();if(le(N,2),d=jw(d,C),D=!1,b=0,new Ue().box("mdat",function(U){b=U.size+U.start,D=!0}).parse(d,!1,!0),!D){N.F(4);break}return P=d.subarray(0,b),d=d.subarray(b),y(N,Mc(e,t,n,o,i,P,!0),5);case 5:t.Ia&&t.ea&&Ic(t.Ia,i,!0);case 4:Ee(N,0);break;case 2:m=ce(N),K(N)}})},y(S,Lc(e,t,i,v),9)):(l=Lc(e,t,i),y(S,l,7)));case 7:return c=S.h,Ne(e.l),e.u?S.return():(Ne(e.l),t.Ub?(t.Ta=!1,In(e,t,0),S.return()):y(S,Mc(e,t,n,o,i,c),6));case 9:if(E=S.h,m)throw m;if(p){S.F(10);break}return f=!0,Ne(e.l),e.u?S.return():t.Ub?(t.Ta=!1,In(e,t,0),S.return()):y(S,Mc(e,t,n,o,i,E),10);case 10:t.Ia&&t.ea&&Ic(t.Ia,i,!0);case 6:if(Ne(e.l),e.u)return S.return();t.Sa=i,s.next(),t.Ta=!1,t.dg=!1,w=e.g.Y.Lb(),T=w[t.type],JSON.stringify(T),t.Ub||e.g.Zf(i,t.stream),In(e,t,0),Ee(S,0);break;case 2:if(x=ce(S),Ne(e.l,x),e.u)return S.return();if(t.Ta=!1,x.code==7001)t.Ta=!1,rs(t),In(e,t,0),S.F(0);else if(t.type==r.Da&&e.h.ignoreTextStreamFailures)e.i.delete(r.Da),S.F(0);else if(x.code==3017)Bw(e,t,x),S.F(0);else return t.wd=!0,x.severity=2,y(S,_0(e,t,x),0)}})}function Ow(e,t,n){var i,r,o,s;return k(function(u){if(u.g==1)return i=t,i.cryptoKey?u.F(2):y(u,i.fetchKey(),3);if(r=i.iv,!r)for(r=ge(new ArrayBuffer(16)),o=i.firstMediaSequenceNumber+n,s=r.byteLength-1;0<=s;s--)r[s]=o&255,o>>=8;return u.return(I.crypto.subtle.decrypt({name:"AES-CBC",iv:r},i.cryptoKey,e))})}function jw(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function Bw(e,t,n){if(!Array.from(e.i.values()).some(function(r){return r!=t&&r.dg})){if(0<e.h.maxDisabledTime&&e.g.ce(t.stream,e.h.maxDisabledTime))return;var i=Math.round(100*e.C);if(20<i)e.C-=.2;else if(4<i)e.C-=.04;else{t.wd=!0,e.u=!0,e.g.onError(n);return}t.dg=!0}In(e,t,4)}function Fw(e,t,n){var i,r,o,s,u,a,l,c,d,f,p,m,v;return k(function(E){return E.g==1?(i=at,r=[],o=Math.max(0,n.appendWindowStart-.1),s=n.appendWindowEnd+.01,u=Pn(t.stream.codecs),a=ni(t.stream.mimeType),l=n.timestampOffset,l==t.Rf&&o==t.Pf&&s==t.Of&&u==t.Qf&&a==t.ah?E.F(2):((c=t.Qf&&t.ah&&mw(e.g.Y,t.type,t.stream))&&(d=null,t.type===i.ia?d=e.i.get(i.U):t.type===i.U&&(d=e.i.get(i.ia)),d&&(d.ec=null,is(e,d),os(d).catch(function(){}))),f=function(){var w,T,x,S;return k(function(C){if(C.g==1)return w=new Map,e.j.audio&&w.set(i.U,e.j.audio),e.j.video&&w.set(i.ia,e.j.video),le(C,2),t.Pf=o,t.Of=s,t.Qf=u,t.ah=a,t.Rf=l,T=e.m.sequenceMode||e.m.type=="HLS",y(C,cw(e.g.Y,t.type,l,o,s,T,n.mimeType||t.stream.mimeType,n.codecs||t.stream.codecs,w),4);if(C.g!=2)return c&&(x=null,t.type===i.ia?x=e.i.get(i.U):t.type===i.U&&(x=e.i.get(i.ia)),x&&(x.Ub=!1,x.Ta=!1,is(e,x))),Ee(C,0);throw S=ce(C),t.Pf=null,t.Of=null,t.Qf=null,t.Rf=null,S})},y(E,f(),2))):(Wf(n.ka,t.ec)||(t.ec=n.ka,n.j&&n.ka&&(p=Lc(e,t,n.ka),m=function(){var w,T,x,S,C,D;return k(function(b){switch(b.g){case 1:return le(b,2),y(b,p,4);case 4:return w=b.h,Ne(e.l),T=null,x=new Map,S=new Ue,S.box("moov",Re).box("trak",Re).box("mdia",Re).T("mdhd",function(P){T=Lu(P.reader,P.version).timescale}).box("hdlr",function(P){P=P.reader,P.skip(8),P=P.Sb(4);var N=String.fromCharCode(P[0]);switch(N+=String.fromCharCode(P[1]),N+=String.fromCharCode(P[2]),N+=String.fromCharCode(P[3]),N){case"soun":x.set(i.U,T);break;case"vide":x.set(i.ia,T)}T=null}).parse(w),x.has(t.type)?n.ka.timescale=x.get(t.type):T!=null&&(n.ka.timescale=T),C=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,y(b,e.g.Gg(t.type,w),5);case 5:return y(b,bu(e.g.Y,t.type,w,null,t.stream,C),6);case 6:Ee(b,0);break;case 2:throw D=ce(b),t.ec=null,D}})},e.g.Wi(n.startTime,n.ka),r.push(m()))),e.m.sequenceMode&&(v=t.Sa?t.Sa.i:null,n.i!=v||t.Vf)&&(t.Vf=!1,r.push(hw(e.g.Y,t.type,n.startTime))),y(E,Promise.all(r),0))})}function Mc(e,t,n,i,r,o,s){s=s===void 0?!1:s;var u,a,l,c,d,f;return k(function(p){switch(p.g){case 1:return u=i.closedCaptions&&0<i.closedCaptions.size,l=i.emsgSchemeIdUris!=null&&0<i.emsgSchemeIdUris.length||e.h.dispatchAllEmsgBoxes,c=e.h.parsePrftBox&&!e.G,(l||c)&&(a=new Ue),l&&a.T("emsg",function(m){var v=i.emsgSchemeIdUris;if(m.version===0)var E=m.reader.Hd(),w=m.reader.Hd(),T=m.reader.O(),x=m.reader.O(),S=m.reader.O(),C=m.reader.O(),D=r.startTime+x/T;else T=m.reader.O(),D=m.reader.Uc()/T+r.timestampOffset,x=D-r.startTime,S=m.reader.O(),C=m.reader.O(),E=m.reader.Hd(),w=m.reader.Hd();m=m.reader.Sb(m.reader.getLength()-m.reader.Ga()),(v&&v.includes(E)||e.h.dispatchAllEmsgBoxes)&&(E=="urn:mpeg:dash:event:2012"?e.g.Xi():(v=new Map().set("detail",{startTime:D,endTime:D+S/T,schemeIdUri:E,value:w,timescale:T,presentationTimeDelta:x,eventDuration:S,id:C,messageData:m}),v=new X("emsg",v),v.cancelable=!0,e.g.onEvent(v),v.defaultPrevented||E!="https://aomedia.org/emsg/ID3"&&E!="https://developer.apple.com/streaming/emsg-id3"||(E=Zi(m),E.length&&r&&e.g.Yi([{cueTime:r.startTime,data:m,frames:E,dts:r.startTime,pts:r.startTime}],0,r.endTime))))}),c&&a.T("prft",function(m){if(!e.G&&r.ka.timescale){var v=m.reader,E=m.version;v.O(),m=v.O();var w=v.O();m=1e3*m+w/Math.pow(2,32)*1e3,E===0?v=v.O():(E=v.O(),v=v.O(),v=E*Math.pow(2,32)+v),m=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+m).getTime(),v=new Map().set("detail",{wallClockTime:m,programStartDate:new Date(m-v/r.ka.timescale*1e3)}),v=new X("prft",v),e.g.onEvent(v),e.G=!0}}),(l||c)&&a.parse(o),y(p,Gw(e,t,n),2);case 2:return Ne(e.l),d=t.Kd,t.Kd=!1,f=t.Dg,t.Dg=!1,y(p,e.g.Gg(t.type,o),3);case 3:return y(p,bu(e.g.Y,t.type,o,r,i,u,d,f,s),4);case 4:Ne(e.l),K(p)}})}function Gw(e,t,n){var i,r,o,s;return k(function(u){if(u.g==1)return i=Math.max(e.h.bufferBehind,e.m.presentationTimeline.g),r=u0(e.g.Y,t.type),r==null?u.return():(o=n-r,s=o-i,1>=s?u.return():y(u,e.g.Y.remove(t.type,r,r+s),2));Ne(e.l),K(u)})}function kc(e){return e&&e.type==Ce&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function Lc(e,t,n,i){var r,o,s,u,a;return k(function(l){switch(l.g){case 1:if(n instanceof rn&&(r=n.g))return l.return(r);if(o=null,t.Ia){var c=t.Ia;if(c.g.has(n)){var d=c.g.get(n);i&&(d.h=i),c.g.delete(n),o=d.g}else o=null}return o||(o=b0(e,n,t.stream,i)),s=0,t.ea&&(s=t.ea.g),t.eb=o,y(l,o.promise,2);case 2:if(u=l.h,t.eb=null,a=u.data,!n.aes128Key){l.F(3);break}return y(l,Ow(a,n.aes128Key,s),4);case 4:a=l.h;case 3:return l.return(a)}})}function b0(e,t,n,i){var r=t instanceof oe?t:void 0,o=r?1:0;return t=ns(t.ba(),t.hb,t.Na,e.h.retryParameters,i),e.g.zc.request(bn,t,{type:o,stream:n,segment:r})}function Dc(e,t,n,i){var r,o;return k(function(s){if(s.g==1)return t.Ub=!1,t.Re=!1,t.be=0,t.pd=!0,t.Sa=null,t.ec=null,t.ea=null,t.Ia&&C0(t.Ia),i?(r=e.g.je(),o=e.g.Y.getDuration(),y(s,e.g.Y.remove(t.type,r+i,o),3)):y(s,a0(e.g.Y,t.type),4);if(s.g!=3)return Ne(e.l),n?y(s,e.g.Y.flush(t.type),3):s.F(3);Ne(e.l),t.pd=!1,t.endOfStream=!1,t.Ta||t.Eb||In(e,t,0),K(s)})}function In(e,t,n){var i=t.type;(i!=Ce||e.i.has(i))&&(t.Eb=new Go(function(){var r;return k(function(o){if(o.g==1)return le(o,2),y(o,Nw(e,t),4);if(o.g!=2)return Ee(o,0);r=ce(o),e.g&&e.g.onError(r),K(o)})}).S(n))}function rs(e){e.Eb!=null&&(e.Eb.stop(),e.Eb=null)}function os(e){return k(function(t){return e.eb?y(t,e.eb.abort(),0):t.F(0)})}function _0(e,t,n){var i;return k(function(r){if(r.g==1)return y(r,ff(e.I),2);Ne(e.l),i=e.h.maxDisabledTime===0&&n.code==1011?1:e.h.maxDisabledTime,n.category===1&&0<i&&(n.handled=e.g.ce(t.stream,i),n.handled&&(n.severity=1)),e.g.onError(n),n.handled||e.h.failureCallback(n),K(r)})}function Vw(e){var t,n,i,r,o,s;return k(function(u){return u.g==1?(t=Date.now()/1e3,n=e.h.minTimeBetweenRecoveries,!e.h.allowMediaSourceRecoveries||t-e.J<n?u.return(!1):(e.J=t,i=at,(r=e.i.get(i.U))&&(r.ec=null,is(e,r),os(r).catch(function(){})),(o=e.i.get(i.ia))&&(o.ec=null,is(e,o),os(o).catch(function(){})),s=new Map,e.j.audio&&s.set(i.U,e.j.audio),e.j.video&&s.set(i.ia,e.j.video),y(u,c0(e.g.Y,s),2))):u.return(!0)})}function Rc(e,t,n){var i,r,o,s,u,a,l;return k(function(c){switch(c.g){case 1:var d=new Je(e).Ya.split("/").pop().split(".");return i=d.length==1?"":d.pop().toLowerCase(),(r=zw[i])?c.return(r):(o=0,s=dt([e],n),le(c,2),s.method="HEAD",y(c,t.request(o,s).promise,4));case 4:u=c.h,r=u.headers["content-type"],Ee(c,3);break;case 2:if(a=ce(c),!a||a.code!=1002&&a.code!=1001){c.F(3);break}return s.method="GET",y(c,t.request(o,s).promise,6);case 6:l=c.h,r=l.headers["content-type"];case 3:return c.return(r?r.toLowerCase().split(";").shift():"")}})}var zw={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav",sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function U0(e,t){if(e.lineBreak)return`
`;if(e.nestedCues.length)return e.nestedCues.map(function(s){return U0(s,e)}).join("");var n=[],i=700<=e.fontWeight,r=e.fontStyle=="italic",o=e.textDecoration.includes("underline");return i&&n.push(["b"]),r&&n.push(["i"]),o&&n.push(["u"]),r=e.color,r==""&&t&&(r=t.color),i="",(r=O0(r))&&(i+="."+r),r=e.backgroundColor,r==""&&t&&(r=t.backgroundColor),(t=O0(r))&&(i+=".bg_"+t),i&&n.push(["c",i]),n.reduceRight(function(s,u){var a=g(u);return u=a.next().value,a=a.next().value,"<"+u+(a===void 0?"":a)+">"+s+"</"+u+">"},e.payload)}function O0(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function Pc(e,t){var n=[];e=g(e);for(var i=e.next();!i.done;i=e.next())if(i=i.value,i.isContainer)n.push.apply(n,F(Pc(i.nestedCues,i)));else{var r=i.clone();r.nestedCues=[],r.payload=U0(i,t),n.push(r)}return n}function on(e,t){this.g=null;for(var n=g(Array.from(e.textTracks)),i=n.next();!i.done;i=n.next())i=i.value,i.mode="disabled",i.label==t&&(this.g=i);this.g||(this.g=e.addTextTrack("subtitles",t)),this.g.mode="hidden"}h=on.prototype,h.remove=function(e,t){return this.g?(j0(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},h.append=function(e){var t=Pc(e),n=[];e=this.g.cues?Array.from(this.g.cues):[];var i={};t=g(t);for(var r=t.next();!r.done;i={Ec:i.Ec},r=t.next())i.Ec=r.value,e.some(function(o){return function(s){return s.startTime==o.Ec.startTime&&s.endTime==o.Ec.endTime&&s.text==o.Ec.payload}}(i))||(r=Kw(i.Ec))&&n.push(r);for(e=n.slice().sort(function(o,s){return o.startTime!=s.startTime?o.startTime-s.startTime:o.endTime!=s.endTime?o.endTime-s.startTime:"line"in VTTCue.prototype?n.indexOf(s)-n.indexOf(o):n.indexOf(o)-n.indexOf(s)}),e=g(e),i=e.next();!i.done;i=e.next())this.g.addCue(i.value)},h.destroy=function(){return this.g&&(j0(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},h.isTextVisible=function(){return this.g.mode=="showing"},h.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"};function Kw(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch{}return e.textAlign=="center"&&t.align!="center"&&(t.align="middle"),e.writingMode=="vertical-lr"?t.vertical="lr":e.writingMode=="vertical-rl"&&(t.vertical="rl"),e.lineInterpretation==1&&(t.snapToLines=!1),e.line!=null&&(t.line=e.line),e.position!=null&&(t.position=e.position),t}function j0(e,t){var n=e.mode;e.mode=n=="showing"?"showing":"hidden";for(var i=g(Array.from(e.cues)),r=i.next();!r.done;r=i.next())(r=r.value)&&t(r)&&e.removeCue(r);e.mode=n}O("shaka.text.SimpleTextDisplayer",on),on.prototype.setTextVisibility=on.prototype.setTextVisibility,on.prototype.isTextVisible=on.prototype.isTextVisible,on.prototype.destroy=on.prototype.destroy,on.prototype.append=on.prototype.append,on.prototype.remove=on.prototype.remove;/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function sn(){}h=sn.prototype,h.remove=function(){},h.append=function(){},h.destroy=function(){},h.isTextVisible=function(){return!1},h.setTextVisibility=function(){},O("shaka.text.StubTextDisplayer",sn),sn.prototype.setTextVisibility=sn.prototype.setTextVisibility,sn.prototype.isTextVisible=sn.prototype.isTextVisible,sn.prototype.destroy=sn.prototype.destroy,sn.prototype.append=sn.prototype.append,sn.prototype.remove=sn.prototype.remove;function B0(){}function q(e){return document.createElement(e)}function st(){var e=document.createElement("button");return e.setAttribute("type","button"),e}function ki(e){for(;e.firstChild;)e.removeChild(e.firstChild)}O("shaka.util.Dom",B0),B0.removeAllChildren=ki;function un(e,t){var n=this;this.m=!1,this.i=[],this.D=e,this.u=t,this.j=null,this.g=q("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.u.appendChild(this.g),this.G=new fe(function(){ss(n)}).za(.25),this.h=new Map,this.l=new _e,this.l.o(document,"fullscreenchange",function(){ss(n,!0)}),this.l.o(this.D,"resize",function(){var i=n.D,r=i.videoWidth;i=i.videoHeight,r&&i?n.j=r/i:n.j=null}),this.s=null,"ResizeObserver"in I&&(this.s=new ResizeObserver(function(){ss(n,!0)}),this.s.observe(this.g)),this.C=new Map}h=un.prototype,h.append=function(e){var t=[].concat(F(this.i)),n={};e=g(e);for(var i=e.next();!i.done;n={Rd:n.Rd},i=e.next())n.Rd=i.value,t.some(function(r){return function(o){return Pl(o,r.Rd)}}(n))||this.i.push(n.Rd);ss(this)},h.destroy=function(){return this.g&&(this.u.removeChild(this.g),this.g=null,this.m=!1,this.i=[],this.G&&this.G.stop(),this.h.clear(),this.l&&(this.l.release(),this.l=null),this.s&&(this.s.disconnect(),this.s=null)),Promise.resolve()},h.remove=function(e,t){if(!this.g)return!1;var n=this.i.length;return this.i=this.i.filter(function(i){return i.startTime<e||i.endTime>=t}),ss(this,n>this.i.length),!0},h.isTextVisible=function(){return this.m},h.setTextVisibility=function(e){this.m=e};function Hw(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function F0(e,t,n,i,r){var o=!1,s=[],u=[];t=g(t);for(var a=t.next();!a.done;a=t.next()){a=a.value,r.push(a);var l=e.h.get(a),c=a.startTime<=i&&a.endTime>i,d=l?l.Ch:null;l&&(s.push(l.nf),l.Id&&s.push(l.Id),c||(o=!0,e.h.delete(a),l=null)),c&&(u.push(a),l?Hw(e,d)||(o=!0):(Ww(e,a,r),l=e.h.get(a),d=l.Ch,o=!0)),0<a.nestedCues.length&&d&&F0(e,a.nestedCues,d,i,r),r.pop()}if(o){for(i=g(s),r=i.next();!r.done;r=i.next())r=r.value,r.parentElement&&r.parentElement.removeChild(r);for(u.sort(function(f,p){return f.startTime!=p.startTime?f.startTime-p.startTime:f.endTime-p.endTime}),u=g(u),a=u.next();!a.done;a=u.next())i=e.h.get(a.value),i.Id?(n.appendChild(i.Id),i.Id.appendChild(i.nf)):n.appendChild(i.nf)}}function ss(e,t){if(e.g){var n=e.D.currentTime;if(!e.m||t!==void 0&&t){t=g(e.C.values());for(var i=t.next();!i.done;i=t.next())ki(i.value);ki(e.g),e.h.clear(),e.C.clear()}if(e.m){t=new Map,i=g(e.h.keys());for(var r=i.next();!r.done;r=i.next())r=r.value,t.set(r,e.h.get(r));F0(e,e.i,e.g,n,[])}}}function Ww(e,t,n){var i=1<n.length,r=i?"span":"div";t.lineBreak&&(r="br"),t.rubyTag&&(r=t.rubyTag),i=!i&&0<t.nestedCues.length;var o=q(r);if(r!="br"&&Yw(e,o,t,n,i),n=null,t.region&&t.region.id){n=t.region,r=e.j===4/3?2.5:1.9;var s=n.id+"_"+n.width+"x"+n.height+(n.heightUnits==nn?"%":"px")+"-"+n.viewportAnchorX+"x"+n.viewportAnchorY+(n.viewportAnchorUnits==nn?"%":"px");if(e.C.has(s))n=e.C.get(s);else{var u=q("span"),a=n.heightUnits==nn?"%":"px",l=n.widthUnits==nn?"%":"px",c=n.viewportAnchorUnits==nn?"%":"px";u.id="shaka-text-region---"+s,u.classList.add("shaka-text-region"),u.style.position="absolute",n.heightUnits===2&&n.widthUnits===2?(u.style.height=5.33*n.height+"%",u.style.width=n.width*r+"%"):(u.style.height=n.height+a,u.style.width=n.width+l),n.viewportAnchorUnits===2?(a=n.viewportAnchorY/75*100,l=n.viewportAnchorX/(e.j===4/3?160:210)*100,a-=n.regionAnchorY*n.height*5.33/100,l-=n.regionAnchorX*n.width*r/100,u.style.top=a+"%",u.style.left=l+"%"):(u.style.top=n.viewportAnchorY-n.regionAnchorY*n.height/100+c,u.style.left=n.viewportAnchorX-n.regionAnchorX*n.width/100+c),u.style.display="flex",u.style.flexDirection="column",u.style.alignItems="center",u.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.C.set(s,u),n=u}}r=o,i&&(r=q("span"),r.classList.add("shaka-text-wrapper"),r.style.backgroundColor=t.backgroundColor,r.style.lineHeight="normal",o.appendChild(r)),e.h.set(t,{nf:o,Ch:r,Id:n})}function Xw(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==uu?n:e==="left"||e==="start"&&t===Bo||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===Bo?"line-right":"center"}function Yw(e,t,n,i,r){var o=t.style,s=n.nestedCues.length==0,u=1<i.length;o.whiteSpace="pre-wrap";var a=n.payload.replace(/\s+$/g,function(c){return"".repeat(c.length)});if(o.webkitTextStrokeColor=n.textStrokeColor,o.webkitTextStrokeWidth=n.textStrokeWidth,o.color=n.color,o.direction=n.direction,o.opacity=n.opacity,o.paddingLeft=Nc(n.linePadding,n,e.u),o.paddingRight=Nc(n.linePadding,n,e.u),o.textCombineUpright=n.textCombineUpright,o.textShadow=n.textShadow,n.backgroundImage)o.backgroundImage="url('"+n.backgroundImage+"')",o.backgroundRepeat="no-repeat",o.backgroundSize="contain",o.backgroundPosition="center",o.width="100%",o.height="100%";else{if(n.nestedCues.length)var l=t;else l=q("span"),t.appendChild(l);n.border&&(l.style.border=n.border),!r&&((t=G0(i,function(c){return c.backgroundColor}))?l.style.backgroundColor=t:a&&(l.style.backgroundColor="rgba(0, 0, 0, 0.8)"),t=G0(i,function(c){return c.fontFamily}))&&(l.style.fontFamily=t),a&&(l.textContent=a)}u&&!i[i.length-1].isContainer?o.display="inline":(o.display="flex",o.flexDirection="column",o.alignItems="center",o.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),s||(o.margin="0"),o.fontFamily=n.fontFamily,o.fontWeight=n.fontWeight.toString(),o.fontStyle=n.fontStyle,o.letterSpacing=n.letterSpacing,o.fontSize=Nc(n.fontSize,n,e.u),i=n.line,i!=null&&(s=n.lineInterpretation,s==au&&(s=1,u=16,e.j&&1>e.j&&(u=32),i=0>i?100+i/u*100:i/u*100),s==1&&(o.position="absolute",n.writingMode==Fo?(o.width="100%",n.lineAlign==Fi?o.top=i+"%":n.lineAlign=="end"&&(o.bottom=100-i+"%")):n.writingMode=="vertical-lr"?(o.height="100%",n.lineAlign==Fi?o.left=i+"%":n.lineAlign=="end"&&(o.right=100-i+"%")):(o.height="100%",n.lineAlign==Fi?o.right=i+"%":n.lineAlign=="end"&&(o.left=100-i+"%")))),o.lineHeight=n.lineHeight,n.position!=null&&(n.writingMode==Fo?o.paddingLeft=n.position:o.paddingTop=n.position),e=Xw(n),e=="line-left"?o.cssFloat="left":e=="line-right"&&(o.cssFloat="right"),o.textAlign=n.textAlign,o.textDecoration=n.textDecoration.join(" "),o.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&o.writingMode==n.writingMode||(o.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==Fo?o.width=n.size+"%":o.height=n.size+"%")}function Nc(e,t,n){var i=(i=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(i[1]),unit:i[2]}:null;if(!i)return e;var r=i.value;switch(i.unit){case"%":return r/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*r/t.cellResolution.rows+"px";default:return e}}function G0(e,t){for(var n=e.length-1;0<=n;n--){var i=t(e[n]);if(i||i===0)return i}return null}O("shaka.text.UITextDisplayer",un),un.prototype.setTextVisibility=un.prototype.setTextVisibility,un.prototype.isTextVisible=un.prototype.isTextVisible,un.prototype.remove=un.prototype.remove,un.prototype.destroy=un.prototype.destroy,un.prototype.append=un.prototype.append;function qw(e,t){function n(o){for(var s=o,u=g(t),a=u.next();!a.done;a=u.next())a=a.value,a.end&&a.start<o&&(s+=a.end-a.start);return o=Math.floor(s/3600),u=Math.floor(s/60%60),a=Math.floor(s%60),s=Math.floor(1e3*s%1e3),(10>o?"0":"")+o+":"+(10>u?"0":"")+u+":"+(10>a?"0":"")+a+"."+(100>s?10>s?"00":"0":"")+s}var i=Pc(e);e=`WEBVTT

`,i=g(i);for(var r=i.next();!r.done;r=i.next())r=r.value,e+=n(r.startTime)+" --> "+n(r.endTime)+function(o){var s=[];switch(o.textAlign){case"left":s.push("align:left");break;case"right":s.push("align:right");break;case ei:s.push("align:middle");break;case"start":s.push("align:start");break;case"end":s.push("align:end")}switch(o.writingMode){case"vertical-lr":s.push("vertical:lr");break;case"vertical-rl":s.push("vertical:rl")}return s.length?" "+s.join(" "):""}(r)+`
`,e+=r.payload+`

`;return e}O("shaka.text.WebVttGenerator",function(){});function V0(e,t){this.h=e,this.g=t,this.m=void 0,this.i=!1,this.l=!0,this.j=!1}V0.prototype.configure=function(e){this.g=e};function $w(e,t,n){try{if(!e.g.enabled)return t;var i=bc(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var r=Gu;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":r=zu;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":r=z0;break e}r=void 0}i.ot=r,i.su=!0;var o=Fu(i);return _c(t,o)}catch(s){return Oi("CMCD_SRC_ERROR","Could not generate src CMCD data.",s),t}}function bc(e){return e.g.sessionId||(e.g.sessionId=I.crypto.randomUUID()),{v:1,sf:e.m,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function Xr(e,t,n){n=n===void 0?{}:n;var i=i===void 0?e.g.useHeaders:i;if(e.g.enabled){Object.assign(n,bc(e)),n.pr=e.h.Nb();var r=n.ot===Vu||n.ot===zu;if(e.j&&r&&(n.bs=!0,n.su=!0,e.j=!1),n.su==null&&(n.su=e.l),i)e=eA(n),Object.keys(e).length&&Object.assign(t.headers,e);else{var o=Fu(n);o&&(t.uris=t.uris.map(function(s){return _c(s,o)}))}}}function Qw(e){if(e.type===0)return tA;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?zu:Vu;if(t=="audio")return Gu;if(t=="text")return e.mimeType==="application/mp4"?Oc:Uc}}function Jw(e,t){if(t=e.h.Lb()[t],!t.length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(i){return i.start<=n&&i.end>=n}))?1e3*(e.end-n):NaN}function Zw(e,t){var n=e.h.mb();if(!n.length)return NaN;e=n[0],n=g(n);for(var i=n.next();!i.done;i=n.next())i=i.value,i.type==="variant"&&i.bandwidth>e.bandwidth&&(e=i);switch(t){case Vu:return e.videoBandwidth||NaN;case Gu:return e.audioBandwidth||NaN;default:return e.bandwidth}}function Fu(e){function t(d){return 100*n(d/100)}function n(d){return Math.round(d)}function i(d){return!Number.isNaN(d)&&d!=null&&d!==""&&d!==!1}var r=[],o={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(d){return encodeURIComponent(d)},rtp:t,tb:n},s=Object.keys(e||{}).sort();s=g(s);for(var u=s.next();!u.done;u=s.next()){u=u.value;var a=e[u];if(i(a)&&(u!=="v"||a!==1)&&(u!="pr"||a!==1)){var l=o[u];l&&(a=l(a)),l=typeof a;var c=void 0;c=l==="string"&&u!=="ot"&&u!=="sf"&&u!=="st"?u+"="+JSON.stringify(a):l==="boolean"?u:l==="symbol"?u+"="+a.description:u+"="+a,r.push(c)}}return r.join(",")}function eA(e){var t=Object.keys(e),n={},i=["Object","Request","Session","Status"],r=[{},{},{},{}],o={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};t=g(t);for(var s=t.next();!s.done;s=t.next())s=s.value,r[o[s]!=null?o[s]:1][s]=e[s];for(e=0;e<r.length;e++)(o=Fu(r[e]))&&(n["CMCD-"+i[e]]=o);return n}function _c(e,t){return!t||e.includes("offline:")?e:(e=new Je(e),e.g.set("CMCD",t),e.toString())}var z0="m",Gu="a",Vu="v",zu="av",tA="i",Uc="c",Oc="tt";O("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",Eh:"s",OTHER:"o"});function an(e){this.h=e,this.g=null}h=an.prototype,h.configure=function(e){this.h=e},h.Ug=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(W0)?1e3*this.g.get(W0):null},h.Tg=function(){return this.h.enabled&&this.g&&this.g.has(H0)?1e3*this.g.get(H0):null},h.ri=function(){return this.h.enabled&&this.g&&this.g.has(X0)?this.g.get(X0):null},h.si=function(){return this.h.enabled&&this.g&&this.g.has(Y0)?this.g.get(Y0):null},h.getBandwidthEstimate=function(e){var t=this.Tg();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e};function K0(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}O("shaka.util.CmsdManager",an),an.prototype.getBandwidthEstimate=an.prototype.getBandwidthEstimate,an.prototype.getRoundTripTime=an.prototype.si,an.prototype.getResponseDelay=an.prototype.ri,an.prototype.getEstimatedThroughput=an.prototype.Tg,an.prototype.getMaxBitrate=an.prototype.Ug;var H0="etp",W0="mb",X0="rd",Y0="rtt";function jc(){}function us(e,t,n,i,r){var o=r in i,s=!0,u;for(u in t){var a=r+"."+u,l=o?i[r]:n[u];o||u in n?t[u]===void 0?l===void 0||o?delete e[u]:e[u]=zi(l):l.constructor==Object&&t[u]&&t[u].constructor==Object?(e[u]||(e[u]=zi(l)),a=us(e[u],t[u],l,i,a),s=s&&a):typeof t[u]!=typeof l||t[u]==null||typeof t[u]!="function"&&t[u].constructor!=l.constructor?(Ti("Invalid config, wrong type for "+a),s=!1):(typeof n[u]=="function"&&n[u].length!=t[u].length&&Ae("Unexpected number of arguments for "+a),e[u]=t[u]):(Ti("Invalid config, unrecognized key "+a),s=!1)}return s}function Ku(e,t){for(var n={},i=n,r=0,o=0;r=e.indexOf(".",r),!(0>r);)(r==0||e[r-1]!="\\")&&(o=e.substring(o,r).replace(/\\\./g,"."),i[o]={},i=i[o],o=r+1),r+=1;return i[e.substring(o).replace(/\\\./g,".")]=t,n}function Hu(e,t){return e&&t}O("shaka.util.ConfigUtils",jc),jc.convertToConfigObject=Ku,jc.mergeConfigObjects=us;function q0(){this.g=null,this.h=[]}function Bc(e,t){return k(function(n){if(n.g==1)return e.g?y(n,new Promise(function(i){return e.h.push(i)}),2):n.F(2);e.g=t,K(n)})}q0.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null};function ln(){}function $0(e){return e=Ii(e),new Je(e).Kb}function as(e,t,n){function i(u){Ut(o).setUint32(s,u.byteLength,!0),s+=4,o.set(ge(u),s),s+=u.byteLength}if(!n||!n.byteLength)throw new M(2,6,6015);var r;typeof t=="string"?r=Jl(t,!0):r=t,e=Ii(e),e=Jl(e,!0);var o=new Uint8Array(12+e.byteLength+r.byteLength+n.byteLength),s=0;return i(e),i(r),i(n),o}function Q0(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Ii(e).split("skd://").pop(),as(e,n,t))}function Fc(e,t){e===2&&(t.headers["Content-Type"]="application/octet-stream")}O("shaka.util.FairPlayUtils",ln),ln.commonFairPlayResponse=function(e,t){if(e===2){try{var n=ze(t.data)}catch{return}e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0);try{var i=JSON.parse(n);i.ckc&&(n=i.ckc,e=!0),i.CkcMessage&&(n=i.CkcMessage,e=!0),i.License&&(n=i.License,e=!0)}catch{}e&&(t.data=tn(An(n)))}},ln.expressplayFairPlayRequest=function(e,t){Fc(e,t)},ln.conaxFairPlayRequest=function(e,t){Fc(e,t)},ln.ezdrmFairPlayRequest=function(e,t){Fc(e,t)},ln.verimatrixFairPlayRequest=function(e,t){e===2&&(e=ge(t.body),e=qi(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=si("spc="+e))},ln.expressplayInitDataTransform=function(e,t,n){return Q0(e,t,n)},ln.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=Ii(e).split("skd://").pop().split("?").shift(),n=I.atob(n);var i=new ArrayBuffer(2*n.length);i=Dp(i);for(var r=0,o=n.length;r<o;r++)i[r]=n.charCodeAt(r);return as(e,i,t)},ln.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=Ii(e).split(";").pop(),as(e,n,t))},ln.verimatrixInitDataTransform=function(e,t,n){return Q0(e,t,n)},ln.initDataTransform=as,ln.defaultGetContentId=$0,ln.isFairPlaySupported=function(){var e;return k(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},le(t,2),y(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(ce(t),t.return(!1))})};function Gc(){}function Yr(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:Kn(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(u,a,l){return I.shakaMediaKeysPolyfill&&a=="skd"&&(a=l.serverCertificate,l=$0(u),u=as(u,l,a)),u},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:zo(),minHdcpVersion:"",ignoreDuplicateInitData:!hu()},n="reload",i=!1;hu()||cu()||Xe("Tizen 4")||Gl()||navigator.userAgent.match(/webOS\/4/i)||navigator.userAgent.match(/webOS\/5/i)||(n="smooth",i=!0),i={retryParameters:Kn(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(u){return Hu([u],u)},sequenceMode:!1,enableAudioGroups:!1,multiTypeVariantsAllowed:i},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3,sequenceMode:!(cu()||hu()||Gl()||Mr()),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,allowLowLatencyByteRangeOptimization:!0},mss:{manifestPreprocessor:function(u){return Hu([u],u)},sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var r={retryParameters:Kn(),failureCallback:function(u){return Hu([u])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1,segmentPrefetchLimit:0,liveSync:!1,liveSyncMaxLatency:1,liveSyncPlaybackRate:1.1,liveSyncMinLatency:0,liveSyncMinPlaybackRate:1,allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5};(Xe("Web0S")||Ki()||Cr()||Xe("Hisense")||Xe("VIDAA"))&&(r.stallSkip=0);var o={trackSelectionCallback:function(u){return k(function(a){return a.return(u)})},downloadSizeCallback:function(u){var a;return k(function(l){return l.g==1?navigator.storage&&navigator.storage.estimate?y(l,navigator.storage.estimate(),3):l.return(!0):(a=l.h,l.return(a.usage+u<.95*a.quota))})},progressCallback:function(u,a){return Hu([u,a])},usePersistentLicense:!0,numberOfParallelDownloads:5},s={drm:t,manifest:i,streaming:r,mediaSource:{codecSwitchingStrategy:n,sourceBufferExtraFeatures:"",forceTransmux:!1,insertFakeEncryptionInInit:!0},offline:o,abrFactory:function(){return new Ge},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0},autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1},ads:{customPlayheadTracker:!1}};return o.trackSelectionCallback=function(u){return k(function(a){return a.return(nA(u,s.preferredAudioLanguage,s.preferredVideoHdrLevel))})},s}function qr(e,t,n){var i={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return us(e,t,n||Yr(),i,"")}function nA(e,t,n){var i=n;i=="AUTO"&&(i=I.matchMedia("(color-gamut: p3)").matches?"PQ":"SDR");var r=e.filter(function(u){return!(u.type!="variant"||u.hdr&&u.hdr!=i)});n=[];var o=ru(t,r.map(function(u){return u.language}));o&&(n=r.filter(function(u){return Le(u.language)==o})),n.length==0&&(n=r.filter(function(u){return u.primary})),n.length==0&&(r.map(function(u){return u.language}),n=r);var s=n.filter(function(u){return u.height&&480>=u.height});for(s.length&&(s.sort(function(u,a){return a.height-u.height}),n=s.filter(function(u){return u.height==s[0].height})),t=[],n.length&&(r=Math.floor(n.length/2),n.sort(function(u,a){return u.bandwidth-a.bandwidth}),t.push(n[r])),e=g(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=Ce&&n.type!="image"||t.push(n);return t}O("shaka.util.PlayerConfiguration",Gc),Gc.mergeConfigObjects=qr,Gc.createDefault=Yr;function iA(){this.g=null,this.h=[]}function Vc(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=g(e.h);for(var i=e.next();!i.done;i=e.next())i=i.value,n+=i.state==t?i.duration:0;return n}function rA(e){function t(o){return{timestamp:o.timestamp,state:o.state,duration:o.duration}}for(var n=[],i=g(e.h),r=i.next();!r.done;r=i.next())n.push(t(r.value));return e.g&&n.push(t(e.g)),n}function oA(){this.i=this.h=null,this.g=[]}function zc(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function J0(){this.C=this.D=this.I=this.G=this.u=this.j=this.H=this.m=this.i=this.M=this.N=this.J=this.K=this.L=this.l=this.s=NaN,this.g=new iA,this.h=new oA}function _(e,t){Ie.call(this);var n=this;this.l=Zc,this.oe=this.h=null,this.$=!1,this.Be=new _e,this.Fb=new _e,this.s=new _e,this.va=new _e,this.G=this.I=this.m=this.J=null,this.He=0,this.W=new q0,this.ha=this.aa=this.i=this.Ie=this.H=this.j=this.sa=this.L=this.Bh=this.Z=this.V=this.ua=this.M=this.K=this.xb=null,this.Xa=!1,this.fg=this.u=null,this.Ag=1e9,this.tc=[],this.N=NaN,this.g=Qr(this),this.Ee={width:1/0,height:1/0},this.C=null,this.Ra=new Rr(this.g.preferredAudioLanguage,this.g.preferredVariantRole,this.g.preferredAudioChannelCount,this.g.preferredVideoHdrLevel,this.g.preferSpatialAudio,this.g.preferredVideoLayout,this.g.preferredAudioLabel,this.g.preferredVideoLabel,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),this.Wa=this.g.preferredTextLanguage,this.nc=this.g.preferredTextRole,this.Xb=this.g.preferForcedSubs,this.Ib=[],t&&t(this),this.V=AA(this),this.Z=new an(this.g.cmsd),this.J=yA(this),this.J.mg(this.g.streaming.forceHTTPS),this.D=null,Qu&&(this.D=Qu(),this.D.configure(this.g.ads)),this.Be.o(I,"online",function(){$c(n),n.eg()}),this.se=new fe(function(){return kA(n)}),e&&(wn("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Gc(e,!0))}pe(_,Ie);function Wu(e){e.L!=null&&(n0(e.L),e.L.release(),e.L=null)}function sA(e,t){if(t.lcevc.enabled){var n=e.mb();n&&n[0]&&n[0].videoMimeType=="video/mp2t"&&(Fl()||navigator.userAgent.match(/Edge\//))&&(t.mediaSource.forceTransmux||Ae("LCEVC Warning: For MPEG-2 TS decoding the config.mediaSource.forceTransmux must be enabled.")),Wu(e),e.L==null&&(e.L=new Jo(e.h,e.Bh,t.lcevc),e.I&&(e.I.N=e.L))}else Wu(e)}function He(e,t){return new X(e,t)}h=_.prototype,h.destroy=function(){var e=this,t;return k(function(n){switch(n.g){case 1:return e.l==Un?n.return():(Wu(e),t=e.detach(),e.l=Un,y(n,t,2));case 2:if(e.Be&&(e.Be.release(),e.Be=null),e.Fb&&(e.Fb.release(),e.Fb=null),e.s&&(e.s.release(),e.s=null),e.va&&(e.va.release(),e.va=null),e.fg=null,e.g=null,e.C=null,e.oe=null,e.V=null,e.Z=null,!e.J){n.F(3);break}return y(n,e.J.destroy(),4);case 4:e.J=null;case 3:e.u&&(e.u.release(),e.u=null),Ie.prototype.release.call(e),K(n)}})};function Z0(){if(I.Promise||Ae("A Promise implementation or polyfill is required"),!(I.Promise&&I.Uint8Array&&Array.prototype.forEach)||Xe("Trident/"))return!1;var e=kr();return e&&9>e||!(I.MediaKeys&&I.navigator&&I.navigator.requestMediaKeySystemAccess&&I.MediaKeySystemAccess&&I.MediaKeySystemAccess.prototype.getConfiguration)?!1:Nn()?!0:Vo("application/x-mpegurl")}function pi(e,t){e.dispatchEvent(He("onstatechange",new Map().set("state",t)))}h.Gc=function(e,t){t=t===void 0?!0:t;var n=this,i,r;return k(function(o){switch(o.g){case 1:if(n.l==Un)throw new M(2,7,7e3);if(!n.h||n.h==e){o.F(2);break}return y(o,n.detach(),2);case 2:return y(o,Kc(n,"attach"),4);case 4:if(o.h)return o.return();if(le(o,5,6),pi(n,"attach"),i=function(){var s=Qc(n);s&&tr(n,s)},n.Fb.o(e,"error",i),n.h=e,!t||!Nn()||n.I){o.F(6);break}return y(o,Hc(n),6);case 6:Zt(o),n.W.release(),en(o,0);break;case 5:return r=ce(o),y(o,n.detach(),10);case 10:throw r}})},h.Eg=function(e){this.Bh=e},h.detach=function(e){e=e===void 0?!1:e;var t=this;return k(function(n){if(n.g==1){if(t.l==Un)throw new M(2,7,7e3);return y(n,t.Wc(!1,e),2)}if(n.g!=3)return y(n,Kc(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.Fb.ub(),t.h=null),pi(t,"detach"),t.D&&!e&&t.D.release()}finally{t.W.release()}K(n)})};function Kc(e,t){var n;return k(function(i){return i.g==1?(n=++e.He,y(i,Bc(e.W,t),2)):n!=e.He?(e.W.release(),i.return(!0)):i.return(!1)})}h.Wc=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,i,r,o,s,u,a,l,c,d;return k(function(f){switch(f.g){case 1:return n.l!=Un&&(n.l=Zc),y(f,Kc(n,"unload"),2);case 2:return f.h?f.return():(Zn(f,3),n.Xa=!1,pi(n,"unload"),e&&!Nn()&&(e=!1),Wu(n),i=n.Ib.map(function(p){return p()}),n.Ib=[],y(f,Promise.all(i),5));case 5:if(n.dispatchEvent(He("unloading")),n.ua&&(n.ua.release(),n.ua=null),n.h&&(n.s.ub(),n.va.ub()),n.se.stop(),n.xb&&(n.xb.release(),n.xb=null),!n.H){f.F(6);break}return y(f,n.H.stop(),7);case 7:n.H=null,n.Ie=null;case 6:if(!n.u){f.F(8);break}return y(f,n.u.stop(),8);case 8:if(!n.j){f.F(10);break}return y(f,n.j.destroy(),11);case 11:n.j=null;case 10:if(n.K&&(n.K.release(),n.K=null),n.G&&(n.G.release(),n.G=null),!n.I){f.F(12);break}return y(f,n.I.destroy(),13);case 13:n.I=null;case 12:if(n.D&&!t&&n.D.onAssetUnload(),n.Z&&(n.Z.g=null),n.h&&ki(n.h),!n.h||!n.h.src){f.F(14);break}return y(f,new Promise(function(p){return new fe(p).S(.1)}),15);case 15:n.h.removeAttribute("src"),n.h.load();case 14:if(!n.m){f.F(16);break}return y(f,n.m.destroy(),17);case 17:n.m=null;case 16:if(n.aa=null,n.M=null,n.i){for(r=g(n.i.variants),o=r.next();!o.done;o=r.next())for(s=o.value,u=g([s.audio,s.video]),a=u.next();!a.done;a=u.next())(l=a.value)&&l.segmentIndex&&l.segmentIndex.release();for(c=g(n.i.textStreams),a=c.next();!a.done;a=c.next())d=a.value,d.segmentIndex&&d.segmentIndex.release()}n.i=null,n.C=new J0,n.xg=null,n.tc=[],n.N=NaN,qc(n);case 3:Zt(f),n.W.release(),en(f,4);break;case 4:if(e&&Nn()&&!n.I)return y(f,Hc(n),0);f.F(0)}})},h.xj=function(e){this.ha=e},h.load=function(e,t,n){t=t===void 0?null:t;var i=this,r,o,s,u,a;return k(function(l){switch(l.g){case 1:if(i.l==Un)throw new M(2,7,7e3);return y(l,Bc(i.W,"load"),2);case 2:if(i.W.release(),!i.h)throw new M(2,7,7002);if(!i.aa){l.F(3);break}return y(l,i.Wc(!1),3);case 3:if(r=++i.He,o=function(){if(i.He!=r)throw new M(2,7,7e3)},s=function(c,d){return k(function(f){switch(f.g){case 1:return Zn(f,2),y(f,Bc(i.W,d),4);case 4:return o(),y(f,c(),5);case 5:o();case 2:Zt(f),i.W.release(),en(f,0)}})},le(l,5),i.ha=t,i.Xa=!1,i.dispatchEvent(He("loading")),u=Date.now()/1e3,i.C=new J0,i.aa=e,n){l.F(7);break}return y(l,s(function(){return k(function(c){if(c.g==1)return y(c,uA(i),2);n=c.h,K(c)})},"guessMimeType_"),7);case 7:if(aA(i,n))return y(l,s(function(){return k(function(c){return y(c,dA(i,n),0)})},"initializeSrcEqualsDrmInner_"),16);if(i.I){l.F(11);break}return y(l,s(function(){return k(function(c){return y(c,Hc(i),0)})},"initializeMediaSourceEngineInner_"),11);case 11:return y(l,s(function(){return k(function(c){return y(c,lA(i,n),0)})},"parseManifestInner_"),13);case 13:return y(l,s(function(){return k(function(c){return y(c,cA(i),0)})},"initializeDrmInner_"),14);case 14:return y(l,s(function(){return k(function(c){return y(c,hA(i,u),0)})},"loadInner_"),10);case 16:return y(l,s(function(){return k(function(c){return y(c,pA(i,u,n),0)})},"srcEqualsInner_"),10);case 10:i.dispatchEvent(He("loaded")),Ee(l,0);break;case 5:if(a=ce(l),a.code==7e3){l.F(18);break}return y(l,i.Wc(!1),18);case 18:throw a}})};function uA(e){var t,n;return k(function(i){return i.g==1?(t=e.g.manifest.retryParameters,y(i,Rc(e.aa,e.J,t),2)):(n=i.h,n=="application/x-mpegurl"&&Ko()&&(n="application/vnd.apple.mpegurl"),i.return(n))})}function aA(e,t){if(!Nn())return!0;if(t){if((e.h||Wp()).canPlayType(t)=="")return!1;if(!(Nn()&&t in xn))return!0;if(t==="application/x-mpegurl"||t==="application/vnd.apple.mpegurl"){if(e.g.streaming.preferNativeHls)return!0;if(Ko())return e.g.streaming.useNativeHlsOnSafari}}return!1}function Hc(e){var t,n,i,r,o;return k(function(s){if(s.g==1)return pi(e,"media-source"),t=e.g.textDisplayFactory,n=t(),e.xg=t,i=wA(e.h,n,function(u,a,l){eg(e,u,a,l)},e.L),i.configure(e.g.mediaSource),r=e.g.manifest,o=r.segmentRelativeVttTiming,i.Z=o,y(s,i.L,2);e.I=i,K(s)})}function lA(e,t){var n,i,r,o,s,u,a,l;return k(function(c){if(c.g==1)return n=e.J,pi(e,"manifest-parser"),e.Ie=Kf(e.aa,t||null),e.H=e.Ie(),i=zi(e.g.manifest),e.h&&e.h.nodeName==="AUDIO"&&(i.disableVideo=!0),e.H.configure(i),e.ua=new xc(function(){return e.Ha()}),e.ua.addEventListener("regionadd",function(d){d=d.region,cs(e,"timelineregionadded",d),e.D&&e.D.onDashTimedMetadata(d)}),e.sa=null,e.g.streaming.observeQualityChanges&&(e.sa=new Ou(function(){return e.Lb()}),e.sa.addEventListener("qualitychange",function(d){var f=d.quality;d=d.position,f=new Map().set("mediaQuality",{bandwidth:f.bandwidth,audioSamplingRate:f.audioSamplingRate,codecs:f.codecs,contentType:f.contentType,frameRate:f.frameRate,height:f.height,mimeType:f.mimeType,channelsCount:f.channelsCount,pixelAspectRatio:f.pixelAspectRatio,width:f.width}).set("position",d),e.dispatchEvent(He("mediaqualitychanged",f))})),r={networkingEngine:n,filter:function(d){return cg(e,d)},makeTextStreamsForClosedCaptions:function(d){return IA(e,d)},onTimelineRegionAdded:function(d){var f=e.ua;e:{for(var p=g(f.g),m=p.next();!m.done;m=p.next())if(m=m.value,m.schemeIdUri==d.schemeIdUri&&m.id==d.id&&m.startTime==d.startTime&&m.endTime==d.endTime){p=m;break e}p=null}p==null&&(f.g.add(d),d=new X("regionadd",new Map([["region",d]])),f.dispatchEvent(d))},onEvent:function(d){return e.dispatchEvent(d)},onError:function(d){return tr(e,d)},isLowLatencyMode:function(){return e.g.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return e.g.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){e.configure("streaming.lowLatencyMode",!0)},updateDuration:function(){e.j&&e.j.updateDuration()},newDrmInfo:function(d){var f=e.m?e.m.g:null;f&&e.m.u&&Yc(e,f.keySystem,d)},onManifestUpdated:function(){var d=new Map().set("isLive",e.R());e.dispatchEvent(He("manifestupdated",d)),e.D&&e.D.onManifestUpdated(e.R())},getBandwidthEstimate:function(){return e.u.getBandwidthEstimate()}},o=Date.now()/1e3,pi(e,"manifest"),s=e,y(c,e.H.start(e.aa,r),2);if(s.i=c.h,u=He("manifestparsed"),e.dispatchEvent(u),e.i.variants.length==0)throw new M(2,4,4036);vA(e.i),a=Date.now()/1e3,l=a-o,e.C.H=l,K(c)})}function cA(e){var t,n,i;return k(function(r){return r.g==1?(pi(e,"drm-engine"),t=Date.now()/1e3,n=!0,e.m=ig(e,{zc:e.J,onError:function(o){tr(e,o)},Fe:function(o){Eg(e,o)},onExpirationUpdated:function(o,s){Tg(e,o,s)},onEvent:function(o){e.dispatchEvent(o),o.type=="drmsessionupdate"&&n&&(n=!1,e.C.j=Date.now()/1e3-t,e.L&&n0(e.L))}}),e.m.configure(e.g.drm),qp(e.i.variants,e.g.restrictions,e.Ee)&&e.j&&Ht(e),i=Wl(e.i.variants),y(r,Df(e.m,i,e.i.offlineSessionIds),2)):r.g!=3?y(r,e.m.Gc(e.h),3):y(r,cg(e,e.i),0)})}function hA(e,t){var n,i,r,o,s,u,a,l,c,d,f,p,m,v,E,w,T,x,S;return k(function(C){switch(C.g){case 1:for(pi(e,"load"),n=e.h,e.K=new Zo({ke:function(){return n.playbackRate},Lc:function(){return n.defaultPlaybackRate},pg:function(D){n.playbackRate=D},fh:function(D){n.currentTime+=D}}),i=function(){return Xu(e)},r=function(){return dg(e)},e.s.o(n,"playing",i),e.s.o(n,"pause",i),e.s.o(n,"ended",i),e.s.o(n,"ratechange",r),sA(e,e.g),o=e.g.abrFactory,e.u&&e.fg==o||(e.fg=o,e.u=o(),typeof e.u.setMediaElement!="function"&&(wn("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),e.u.setMediaElement=function(){}),typeof e.u.setCmsdManager!="function"&&(wn("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),e.u.setCmsdManager=function(){}),typeof e.u.trySuggestStreams!="function"&&(wn("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),e.u.trySuggestStreams=function(){}),e.u.configure(e.g.abr)),e.Ra=new Rr(e.g.preferredAudioLanguage,e.g.preferredVariantRole,e.g.preferredAudioChannelCount,e.g.preferredVideoHdrLevel,e.g.preferSpatialAudio,e.g.preferredVideoLayout,e.g.preferredAudioLabel,e.g.preferredVideoLabel,e.g.mediaSource.codecSwitchingStrategy,e.g.manifest.dash.enableAudioGroups),e.Wa=e.g.preferredTextLanguage,e.nc=e.g.preferredTextRole,e.Xb=e.g.preferForcedSubs,Jc(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.u.init(function(D,b,P){e.j&&D!=e.j.j&&qu(e,D,!0,b===void 0?!1:b,P===void 0?0:P)}),e.u.setMediaElement(n),e.u.setCmsdManager(e.Z),Yp(e.i,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredDecodingAttributes),e.j=SA(e),e.j.configure(e.g.streaming),e.l=It,n.textTracks&&e.s.o(n.textTracks,"addtrack",function(D){if(D.track)switch(D=D.track,D.kind){case"chapters":ng(e,D)}}),e.dispatchEvent(He("streaming")),s=null,(u=e.j.j)||(s=fg(e,!0)),a=[],l=u||s,c=g([l.video,l.audio]),d=c.next();!d.done;d=c.next())(f=d.value)&&!f.segmentIndex&&a.push(f.createSegmentIndex());if(!(0<a.length)){C.F(2);break}return y(C,Promise.all(a),2);case 2:if(e.H&&e.H.onInitialVariantChosen&&e.H.onInitialVariantChosen(l),Jc(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.G=EA(e,e.ha),e.xb=TA(e,t),p=Math.max(e.i.minBufferTime,e.g.streaming.rebufferingGoal),rg(e,n,p),u){C.F(4);break}if(qu(e,s,!0,!1,0),!e.g.streaming.startAtSegmentBoundary){C.F(4);break}return m=e.G,v=m.ef,y(C,MA(s,e.G.Yd()),6);case 6:v.call(m,C.h);case 4:return e.G.df(),E=e.bc().find(function(D){return D.active}),E||((w=Ho(e.i.textStreams,e.Wa,e.nc,e.Xb)[0]||null)&&zc(e.C.h,w,!0),s&&(w?(s.audio&&LA(e,s.audio,w)&&(e.$=!0),e.$&&e.I.H.setTextVisibility(!0),vg(e)):e.$=!1),w&&(e.g.streaming.alwaysStreamText||e.xc())&&Bu(e.j,w)),y(C,e.j.start(),7);case 7:e.g.abr.enabled&&(e.u.enable(),yg(e)),Ht(e),Jr(e),e.i.variants.some(function(D){return D.primary}),(T=e.R())&&(e.g.streaming.liveSync||e.i.serviceDescription)?(x=function(){return pg(e)},e.s.o(n,"timeupdate",x)):T||(S=function(){return Yu(e)},e.s.o(n,"timeupdate",S),Yu(e)),e.D&&e.D.onManifestUpdated(T),e.Xa=!0,e.s.na(n,"loadedmetadata",function(){e.C.m=Date.now()/1e3-t}),K(C)}})}function dA(e,t){var n,i,r,o;return k(function(s){return s.g==1?(n=at,i=Date.now()/1e3,r=!0,e.m=ig(e,{zc:e.J,onError:function(u){tr(e,u)},Fe:function(u){Eg(e,u)},onExpirationUpdated:function(u,a){Tg(e,u,a)},onEvent:function(u){e.dispatchEvent(u),u.type=="drmsessionupdate"&&r&&(r=!1,e.C.j=Date.now()/1e3-i)}}),e.m.configure(e.g.drm),o={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:t?ni(t):"",codecs:t?Tn(t):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.ia,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},e.m.Z=!0,y(s,Df(e.m,[o],[]),2)):y(s,e.m.Gc(e.h),0)})}function pA(e,t,n){var i,r,o,s,u,a,l,c,d,f;return k(function(p){if(p.g==1)return pi(e,"src-equals"),i=e.h,e.G=new E0(i),r=!1,e.Ib.push(function(){r=!0}),e.ha!=null&&e.G.ef(e.ha),e.K=new Zo({ke:function(){return i.playbackRate},Lc:function(){return i.defaultPlaybackRate},pg:function(m){i.playbackRate=m},fh:function(m){i.currentTime+=m}}),o=e.g.streaming.rebufferingGoal,rg(e,i,o),s=function(){return Xu(e)},u=function(){return dg(e)},e.s.o(i,"playing",s),e.s.o(i,"pause",s),e.s.o(i,"ended",s),e.s.o(i,"ratechange",u),i.preload!="none"&&e.s.na(i,"loadedmetadata",function(){e.C.m=Date.now()/1e3-t}),i.audioTracks&&(e.s.o(i.audioTracks,"addtrack",function(){return Ht(e)}),e.s.o(i.audioTracks,"removetrack",function(){return Ht(e)}),e.s.o(i.audioTracks,"change",function(){return Ht(e)})),i.textTracks&&(e.s.o(i.textTracks,"addtrack",function(m){if(m.track)switch(m=m.track,m.kind){case"metadata":mA(e,m);break;case"chapters":ng(e,m);break;default:Ht(e)}}),e.s.o(i.textTracks,"removetrack",function(){return Ht(e)}),e.s.o(i.textTracks,"change",function(){return Ht(e)})),i.src=$w(e.V,e.aa,n),(Ki()||Xe("Web0S"))&&i.load(),e.l=wt,e.dispatchEvent(He("streaming")),a=new Ve,Kr(i,HTMLMediaElement.HAVE_METADATA,e.s,function(){e.G.df(),a.resolve()}),Kr(i,HTMLMediaElement.HAVE_CURRENT_DATA,e.s,function(){var m;return k(function(v){if(v.g==1)return fA(e),m=ls(e),m.find(function(E){return E.mode!="disabled"})?(0<m.length&&(e.$=!0),v.F(2)):y(v,new Promise(function(E){e.s.na(i.textTracks,"change",E),new fe(E).S(1)}),2);if(r)return v.return();gA(e),K(v)})}),i.error?a.reject(Qc(e)):i.preload=="none"&&(Ae('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),a.resolve()),e.s.na(i,"error",function(){a.reject(Qc(e))}),y(p,a,2);(l=e.R())&&e.g.streaming.liveSync?(c=function(){return pg(e)},e.s.o(i,"timeupdate",c)):l||(d=function(){return Yu(e)},e.s.o(i,"timeupdate",d),Yu(e)),e.D&&(e.D.onManifestUpdated(l),l&&(f=e.Ha().end,e.s.o(i,"progress",function(){var m=e.Ha().end;f!=m&&(e.D.onManifestUpdated(e.R()),f=m)}))),e.Xa=!0,K(p)})}function fA(e){var t=e.g.preferredAudioLanguage;t!=""&&e.Le(t,e.g.preferredVariantRole)}function gA(e){var t=e.g.preferredTextLanguage;t!=""&&e.ig(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function mA(e,t){if(t.kind=="metadata"){t.mode="hidden",e.s.o(t,"cuechange",function(){if(t.activeCues)for(var i=g(t.activeCues),r=i.next();!r.done;r=i.next())r=r.value,tg(e,r.startTime,r.endTime,r.type,r.value),e.D&&e.D.onCueMetadataChange(r.value)});var n=new fe(function(){var i=xA(e);i=g(i);for(var r=i.next();!r.done;r=i.next())r.value.mode="hidden"}).Qa().S(.5);e.Ib.push(function(){n.stop()})}}function eg(e,t,n,i){t=g(t);for(var r=t.next();!r.done;r=t.next())if(r=r.value,r.data&&r.cueTime&&r.frames){var o=r.cueTime+n,s=i;s&&o>s&&(s=o);for(var u=g(r.frames),a=u.next();!a.done;a=u.next())tg(e,o,s,"org.id3",a.value);e.D&&e.D.onHlsTimedMetadata(r,o)}}function tg(e,t,n,i,r){t=new Map().set("startTime",t).set("endTime",n).set("metadataType",i).set("payload",r),e.dispatchEvent(He("metadata",t))}function ng(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new fe(function(){t.mode="hidden"}).Qa().S(.5);e.Ib.push(function(){n.stop()})}}function vA(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}h.dj=function(){for(var e=this.W;e.g;)e.release()};function ig(e,t){return new Mu(t,e.g.drm.updateExpirationTime)}function yA(e){return new Be(function(t,n,i){e.u&&e.u.segmentDownloaded(t,n,i)},function(t,n,i){if(n=new Map().set("headers",t).set("request",n).set("requestType",i),e.dispatchEvent(He("downloadheadersreceived",n)),e.Z&&(n=e.Z,n.h.enabled)){if(i=t["cmsd-static"])try{var r=new Map,o=i.split(",");for(i=0;i<o.length;i++){var s=o[i].split("=");r.set(s[0],K0(s[1]))}}catch{}if(t=t["cmsd-dynamic"]){try{var u=new Map,a=t.split(";");for(t=1;t<a.length;t++){var l=a[t].split("=");u.set(l[0],K0(l[1]))}var c=u}catch{c=null}c&&(n.g=c)}}},function(t,n,i,r){t=new Map().set("request",t).set("error",n).set("httpResponseCode",i).set("aborted",r),e.dispatchEvent(He("downloadfailed",t))},function(t,n,i){var r=e.V;if(i=i===void 0?{}:i,r.g.enabled)if(n.method==="HEAD")Xr(r,n);else switch(t){case 0:try{if(r.g.enabled){if(i.type){e:{switch(i.type){case 4:var o="d";break e;case 3:case 2:o="h";break e;case 5:o="s";break e}o=void 0}r.m=o}Xr(r,n,{ot:z0,su:!r.i})}}catch(c){Oi("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",c)}break;case bn:t=i;try{if(r.g.enabled){var s=t.segment;o=0,s&&(o=s.endTime-s.startTime);var u={d:1e3*o,st:r.h.R()?"l":"v"};u.ot=Qw(t);var a=u.ot===Vu||u.ot===Gu||u.ot===zu||u.ot===Oc,l=t.stream;l&&(a&&(u.bl=Jw(r,l.type)),l.bandwidth&&(u.br=l.bandwidth/1e3)),a&&u.ot!==Oc&&(u.tb=Zw(r,u.ot)/1e3),Xr(r,n,u)}}catch(c){Oi("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",c)}break;case 2:case 5:case 6:Xr(r,n,{ot:"k"});break;case 4:Xr(r,n,{ot:"o"})}},function(t,n,i,r){e.H&&e.H.banLocation&&e.H.banLocation(r)})}function EA(e,t){return new T0(e.h,e.i,e.g.streaming,t,function(){e.xb&&I0(e.xb,!0),e.j&&e.j.Kd(),e.M&&$r(e)},function(n){return e.dispatchEvent(n)})}function TA(e,t){t=new ju(e.ua,e.R()||0<t),t.addEventListener("enter",function(i){cs(e,"timelineregionenter",i.region)}),t.addEventListener("exit",function(i){cs(e,"timelineregionexit",i.region)}),t.addEventListener("skip",function(i){var r=i.region;i.seeking||(cs(e,"timelineregionenter",r),cs(e,"timelineregionexit",r))});var n=new x0(e.h);return n.g.add(t),e.sa&&n.g.add(e.sa),n}function rg(e,t,n){e.M=new pT,e.M.g=Pr,df(e.M,n,Math.min(.5,n/2)),qc(e),e.s.o(t,"waiting",function(){return $r(e)}),e.s.o(t,"stalled",function(){return $r(e)}),e.s.o(t,"canplaythrough",function(){return $r(e)}),e.s.o(t,"progress",function(){return $r(e)})}function $r(e){switch(e.l){case wt:if(e.h.ended)var t=!0;else{var n=uc(e.h.buffered);t=n!=null&&n>=e.h.duration-1}break;case It:e:if(e.h.ended||s0(e.I))t=!0;else{if(e.i.presentationTimeline.R()){n=e.i.presentationTimeline.ac();var i=uc(e.h.buffered);if(i!=null&&i>=n){t=!0;break e}}t=!1}break;default:t=!1}i=Yf(e.h.buffered,e.h.currentTime),n=e.M;var r=t,o=n.h.get(n.g);t=n.g,i=r||i>=o?Eu:Pr,n.g=i,t!=i&&qc(e)}function wA(e,t,n,i){return new r0(e,t,n,i)}function AA(e){return new V0({getBandwidthEstimate:function(){return e.u?e.u.getBandwidthEstimate():NaN},Lb:function(){return e.Lb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},Nb:function(){return e.Nb()},Zb:function(){return e.Zb()},mb:function(){return e.mb()},R:function(){return e.R()}},e.g.cmcd)}function SA(e){return new L0(e.i,{je:function(){return e.G?e.G.Yd():0},getBandwidthEstimate:function(){return e.u.getBandwidthEstimate()},Y:e.I,zc:e.J,onError:function(t){return tr(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Xi:function(){e.H&&e.H.update&&e.H.update()},Zf:function(t,n){var i=t.startTime,r=t.endTime,o=n.type;e.G&&e.G.gh(),$r(e),i=new Map().set("start",i).set("end",r).set("contentType",o),e.dispatchEvent(He("segmentappended",i)),e.u&&n.fastSwitching&&t.Fd&&t.ue&&e.u.trySuggestStreams()},Wi:function(t,n){(n=n.Uf)&&e.sa&&Sw(e.sa,n,t)},Gg:function(t,n){var i=e.m;if(i.h.parseInbandPsshEnabled&&!i.H&&["audio","video"].includes(t)){n=new Mf(ge(n));var r=0,o=g(n.data);for(t=o.next();!t.done;t=o.next())r+=t.value.length;if(r==0)i=Promise.resolve();else{for(r=new Uint8Array(r),o=0,n=g(n.data),t=n.next();!t.done;t=n.next())t=t.value,r.set(t,o),o+=t.length;qo(i,"cenc",r),i=i.l}}else i=Promise.resolve();return i},Yi:function(t,n,i){eg(e,t,n,i)},ce:function(t,n){return e.ce(t,n)}})}h.configure=function(e,t){arguments.length==2&&typeof e=="string"&&(e=Ku(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(wn("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(wn("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&e.streaming.lowLatencyMode&&(e.streaming.inaccurateManifestTolerance==null&&(e.streaming.inaccurateManifestTolerance=0),e.streaming.rebufferingGoal==null&&(e.streaming.rebufferingGoal=.01),e.streaming.segmentPrefetchLimit==null&&(e.streaming.segmentPrefetchLimit=2),e.streaming.retryParameters==null&&(e.streaming.retryParameters={}),e.streaming.retryParameters.baseDelay==null&&(e.streaming.retryParameters.baseDelay=100),e.manifest==null&&(e.manifest={}),e.manifest.retryParameters==null&&(e.manifest.retryParameters={}),e.manifest.retryParameters.baseDelay==null&&(e.manifest.retryParameters.baseDelay=100),e.drm==null&&(e.drm={}),e.drm.retryParameters==null&&(e.drm.retryParameters={}),e.drm.retryParameters.baseDelay==null&&(e.drm.retryParameters.baseDelay=100));var n=qr(this.g,e,Qr(this));return og(this),n};function og(e){if(e.H){var t=zi(e.g.manifest);e.h&&e.h.nodeName==="AUDIO"&&(t.disableVideo=!0),e.H.configure(t)}if(e.m&&e.m.configure(e.g.drm),e.j){e.j.configure(e.g.streaming);try{hg(e,e.i)}catch(o){tr(e,o)}e.u&&Jr(e),t=e.j.j,!t||t.allowedByApplication&&t.allowedByKeySystem||Zr(e)}if(e.J&&e.J.mg(e.g.streaming.forceHTTPS),e.I&&(e.I.configure(e.g.mediaSource),e.I.Z=e.g.manifest.segmentRelativeVttTiming,t=e.g.textDisplayFactory,e.xg!=t)){var n=t(),i=e.I,r=i.H;i.H=n,r&&(n.setTextVisibility(r.isTextVisible()),r.destroy()),i.h&&(i.h.j=n),e.xg=t,e.j&&(t=e.j,(n=t.i.get(Ce))&&Wr(t,n.stream,!0,0,!0))}e.u&&(e.u.configure(e.g.abr),e.g.abr.enabled?e.u.enable():e.u.disable(),yg(e)),e.M&&(t=e.g.streaming.rebufferingGoal,e.i&&(t=Math.max(t,e.i.minBufferTime)),df(e.M,t,Math.min(.5,t/2))),e.i&&Jc(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.D&&e.D.configure(e.g.ads),e.V&&e.V.configure(e.g.cmcd),e.Z&&e.Z.configure(e.g.cmsd)}h.getConfiguration=function(){var e=Qr(this);return qr(e,this.g,Qr(this)),e},h.Uh=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.h.currentTime+t,this.Ha().end),e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},h.hj=function(){for(var e in this.g)delete this.g[e];qr(this.g,Qr(this),Qr(this)),og(this)},h.ie=function(){return this.l},h.If=function(){return this.i?this.i.type:null},h.ni=function(){return this.h},h.Zb=function(){return this.J},h.Gf=function(){return this.aa},h.ee=function(){return this.D?this.D:null},h.R=function(){return this.i?this.i.presentationTimeline.R():this.h&&this.h.src?this.h.duration==1/0:!1},h.wc=function(){return this.i?this.i.presentationTimeline.wc():!1},h.Pc=function(){if(this.i){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&this.h.src?this.h.videoTracks?this.h.videoTracks.length==0:this.h.videoHeight==0:!1},h.Ha=function(){if(this.i){if(!this.Xa&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.Nc(),end:e.Ob()}}return this.h&&this.h.src&&(e=this.h.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},h.Fi=function(){this.R()&&(this.h.currentTime=this.Ha().end)},h.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},h.drmInfo=function(){return this.m?this.m.g:null},h.td=function(){return this.m?this.m.td():1/0},h.Ff=function(){return this.m?this.m.Ff():[]},h.ge=function(){return this.m?this.m.ge():{}},h.yd=function(){return this.M?this.M.g==Pr:!1},h.Nb=function(){return this.h?this.K?this.K.h:1:0},h.Pd=function(e){var t=this;e==0?Ae("A trick play rate of 0 is unsupported!"):(this.va.ub(),this.h.paused&&this.h.play(),this.K.set(e),this.l==It&&(this.u.playbackRateChanged(e),D0(this.j,1<Math.abs(e))),this.R()&&this.va.o(this.h,"timeupdate",function(){var n=t.h.currentTime,i=t.Ha(),r=t.g.streaming.safeSeekOffset;0<e?n>=i.end&&t.od():n<=i.start+r&&t.od()}))},h.od=function(){var e=this.K.Lc();this.l==wt&&this.K.set(e),this.l==It&&(this.K.set(e),this.u.playbackRateChanged(e),D0(this.j,!1)),this.va.ub()},h.mb=function(){if(this.i){for(var e=this.j?this.j.j:null,t=[],n=0,i=g(this.i.variants),r=i.next();!r.done;r=i.next())if(r=r.value,mu(r)){var o=Dr(r);o.active=r==e,o.active||n==1||e==null||r.video!=e.video||r.audio!=e.audio||(o.active=!0),o.active&&n++,t.push(o)}return t}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(s){return Hl(s)}):[]},h.bc=function(){if(this.i){for(var e=this.j?this.j.s:null,t=[],n=g(this.i.textStreams),i=n.next();!i.done;i=n.next()){i=i.value;var r=gu(i);r.active=i==e,t.push(r)}return t}return this.h&&this.h.src&&this.h.textTracks?ls(this).map(function(o){return tf(o)}):[]},h.fe=function(){var e=this.tc;return this.i&&(e=this.i.imageStreams),e.map(function(t){return zl(t)})},h.Rh=function(e){var t=this,n,i,r,o;return k(function(s){return s.g==1?t.l!=It&&t.l!=wt?s.return(null):(n=t.tc,t.i&&(n=t.i.imageStreams),(i=n.find(function(u){return u.id==e}))?i.segmentIndex?s.F(2):y(s,i.createSegmentIndex(),2):s.return(null)):s.g!=4?(r=[],Ac(i.segmentIndex,function(u){var a=sg(u.tilesLayout||i.tilesLayout);if(a){a=a.rows*a.mc;for(var l=u.h-u.startTime,c=0;c<a;c++)r.push(t.Kf(e,u.startTime+l*c/a))}}),y(s,Promise.all(r),4)):(o=s.h,s.return(o.filter(function(u){return u})))})};function sg(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{mc:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}h.Kf=function(e,t){var n=this,i,r,o,s,u,a,l,c,d,f,p,m,v,E,w,T,x,S;return k(function(C){return C.g==1?n.l!=It&&n.l!=wt?C.return(null):(i=n.tc,n.i&&(i=n.i.imageStreams),(r=i.find(function(D){return D.id==e}))?r.segmentIndex?C.F(2):y(C,r.createSegmentIndex(),2):C.return(null)):(o=r.segmentIndex.find(t),o==null||(s=r.segmentIndex.get(o),u=sg(s.tilesLayout||r.tilesLayout),!u)?C.return(null):(a=r.width||0,l=r.height||0,c=a/u.mc,d=l/u.rows,f=u.mc*u.rows,p=s.h-s.startTime,m=s.C||p/f,v=s.startTime,w=E=0,1<f&&(T=Math.floor((t-s.startTime)/m),v=s.startTime+T*m,E=T%u.mc*c,w=Math.floor(T/u.mc)*d),x=!1,(S=s.u)&&(x=!0,d=S.height,E=S.positionX,w=S.positionY,c=S.width),C.return({segment:s,imageHeight:l,imageWidth:a,height:d,positionX:E,positionY:w,startTime:v,duration:m,uris:s.ba(),width:c,sprite:x})))})},h.jg=function(e){if(this.i&&this.j){var t=this.i.textStreams.find(function(i){return i.id==e.id});t&&t!=this.j.s&&(zc(this.C.h,t,!1),Bu(this.j,t),$u(this),this.Wa=t.language)}else if(this.h&&this.h.src&&this.h.textTracks){t=ls(this),t=g(t);for(var n=t.next();!n.done;n=t.next())n=n.value,Kl(n)==e.id?n.mode=this.$?"showing":"hidden":n.mode="disabled";$u(this)}},h.Me=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?0:n,this.i&&this.j){this.g.abr.enabled&&Ae("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var i=this.i.variants.find(function(r){return r.id==e.id});i&&mu(i)&&(qu(this,i,!1,t,n),this.Ra=new hf(i,this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),Jr(this))}else if(this.h&&this.h.audioTracks){for(t=Array.from(this.h.audioTracks),t=g(t),n=t.next();!n.done;n=t.next())if(n=n.value,Kl(n)==e.id){gg(this,n);break}}},h.Th=function(){return Sg(this.mb())},h.xi=function(){return Sg(this.bc())},h.Sh=function(){return Array.from(Ag(this.mb()))},h.wi=function(){return Array.from(Ag(this.bc()))},h.Le=function(e,t,n,i){if(n=n===void 0?0:n,i=i===void 0?0:i,this.i&&this.G){this.Ra=new Rr(e,t||"",n,"",!1,"","","",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),e=function(s,u){return s.video||u.video?s.video&&u.video?Math.abs((s.video.height||0)-(u.video.height||0))+Math.abs((s.video.width||0)-(u.video.width||0)):1/0:0},t=this.j.j;var r=this.Ra.create(this.i.variants);n=null,r=g(r.values());for(var o=r.next();!o.done;o=r.next())o=o.value,(!n||e(n,t)>e(o,t))&&(n=o);n?(e=Dr(n),this.Me(e,!0,i)):Zr(this)}else this.h&&this.h.audioTracks&&(i=Ho(this.mb(),e,t||"",!1)[0])&&this.Me(i)},h.ig=function(e,t,n){n=n===void 0?!1:n,this.i&&this.G?(this.Wa=e,this.nc=t||"",this.Xb=n,(e=Ho(this.i.textStreams,this.Wa,this.nc,this.Xb)[0]||null)&&e!=this.j.s&&(zc(this.C.h,e,!1),this.g.streaming.alwaysStreamText||this.xc())&&(Bu(this.j,e),$u(this))):(e=Ho(this.bc(),e,t||"",n)[0])&&this.jg(e)},h.oj=function(e,t,n){if(t=t===void 0?!0:t,n=n===void 0?0:n,this.i&&this.G){for(var i=null,r=g(this.i.variants),o=r.next();!o.done;o=r.next())if(o=o.value,o.audio.label==e){i=o;break}i!=null&&(this.Ra=new Rr(i.language,"",0,"",!1,"",e,"",this.g.mediaSource.codecSwitchingStrategy,this.g.manifest.dash.enableAudioGroups),Zr(this,t,n))}else if(this.h&&this.h.audioTracks){for(n=Array.from(this.h.audioTracks),t=null,n=g(n),i=n.next();!i.done;i=n.next())i=i.value,i.label==e&&(t=i);t&&gg(this,t)}},h.xc=function(){var e=this.$;return this.I&&this.l==It?this.I.H.isTextVisible():this.h&&this.h.src&&this.h.textTracks?ls(this).some(function(t){return t.mode=="showing"}):e},h.Sg=function(){return this.h&&this.h.src&&this.h.textTracks?ug(this).map(function(e){return tf(e)}):[]},h.Wh=function(e){if(!this.h||!this.h.src||!this.h.textTracks)return[];var t=Le(e),n=ug(this).filter(function(u){return Le(u.language)==t});if(!n||!n.length)return[];e=[];var i=new Set;n=g(n);for(var r=n.next();!r.done;r=n.next())if((r=r.value)&&r.cues){r=g(r.cues);for(var o=r.next();!o.done;o=r.next()){var s=o.value;(o=s.id)&&o!=""||(o=s.startTime+"-"+s.endTime+"-"+s.text),s={id:o,title:s.text,startTime:s.startTime,endTime:s.endTime},i.has(o)||(e.push(s),i.add(o))}}return e};function ls(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function xA(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="metadata"})}function ug(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="chapters"})}h.Oe=function(e){if(e=!!e,this.$!=e){if(this.$=e,this.l==It)this.I.H.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.j.s||(e=Ho(this.i.textStreams,this.Wa,this.nc,this.Xb),0<e.length&&(Bu(this.j,e[0]),$u(this))):Dw(this.j));else if(this.h&&this.h.src&&this.h.textTracks){var t=ls(this);t=g(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.mode!="disabled"&&(n.mode=e?"showing":"hidden")}vg(this)}},h.oi=function(){if(!this.R())return null;if(this.G)var e=this.G.Yd();else{if(this.ha==null)return new Date;e=this.ha}if(this.i)return new Date(1e3*(this.i.presentationTimeline.i+e));if(this.h&&this.h.getStartDate){var t=this.h.getStartDate();return isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)}return null},h.Vg=function(){if(!this.R())return null;if(this.i)return new Date(1e3*this.i.presentationTimeline.i);if(this.h&&this.h.getStartDate){var e=this.h.getStartDate();return isNaN(e.getTime())?null:e}return null},h.Lb=function(){if(this.l==It)return this.I.Lb();var e={total:[],audio:[],video:[],text:[]};return this.l==wt&&(e.total=Mi(this.h.buffered)),e},h.getStats=function(){if(this.l!=It&&this.l!=wt)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};Xu(this);var e=this.h,t=e.currentTime/e.duration;if(!isNaN(t)){var n=this.C;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}if(this.G&&(this.C.M=this.G.Bg(),this.C.N=this.G.Cg()),e.getVideoPlaybackQuality){n=e.getVideoPlaybackQuality(),t=this.C;var i=Number(n.totalVideoFrames);t.L=Number(n.droppedVideoFrames),t.K=i,this.C.J=Number(n.corruptedVideoFrames)}if(this.m?(n=this.m,n=n.K?n.K:NaN):n=NaN,this.C.u=n,this.l==It){if(n=this.j.j,t=this.j.s,n){i=this.K?this.K.h:1;var r=i*n.bandwidth;t&&t.bandwidth&&(r+=i*t.bandwidth),this.C.D=r}n&&n.video&&(t=this.C,i=n.video.height||NaN,t.s=n.video.width||NaN,t.l=i),this.R()&&(n=this.Vg().valueOf()+1e3*e.currentTime,this.C.G=(Date.now()-n)/1e3),this.i&&this.i.presentationTimeline&&(this.C.I=this.i.presentationTimeline.g),n=this.u.getBandwidthEstimate(),this.C.C=n}this.l==wt&&(n=this.C,t=e.videoHeight||NaN,n.s=e.videoWidth||NaN,n.l=t);var o=this.C;e=o.s,n=o.l,t=o.D,i=o.K,r=o.L;var s=o.J,u=o.N,a=o.M,l=o.C,c=o.i,d=o.m,f=o.H,p=o.j,m=Vc(o.g,"playing"),v=Vc(o.g,"paused"),E=Vc(o.g,"buffering"),w=o.u,T=o.G,x=o.I,S=rA(o.g),C=[];o=g(o.h.g);for(var D=o.next();!D.done;D=o.next())D=D.value,C.push({timestamp:D.timestamp,id:D.id,type:D.type,fromAdaptation:D.fromAdaptation,bandwidth:D.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:i,droppedFrames:r,corruptedFrames:s,stallsDetected:u,gapsJumped:a,estimatedBandwidth:l,completionPercent:c,loadLatency:d,manifestTimeSeconds:f,drmTimeSeconds:p,playTime:m,pauseTime:v,bufferingTime:E,licenseTime:w,liveLatency:T,maxSegmentDuration:x,stateHistory:S,switchHistory:C}},h.Hh=function(e,t,n,i,r,o,s){s=s===void 0?!1:s;var u=this,a,l,c,d,f,p,m,v,E,w,T,x;return k(function(S){switch(S.g){case 1:if(u.l!=It&&u.l!=wt)throw new M(1,7,7004);if(n!="subtitles"&&n!="captions"&&Ae("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),i){S.F(2);break}return y(S,Wc(u,e),3);case 3:i=S.h;case 2:if(a=[],u.D&&(a=u.D.getCuePoints()),u.l!=wt){S.F(4);break}return s&&(n="forced"),y(S,ag(u,e,t,n,i,o||"",a),5);case 5:if(l=Le(t),c=u.bc(),d=c.find(function(C){return Le(C.language)==l&&C.label==(o||"")&&C.kind==n}))return Ht(u),S.return(d);throw new M(1,2,2012);case 4:if(f=at,p=u.h.duration,u.i&&(p=u.i.presentationTimeline.getDuration()),p==1/0)throw new M(1,4,4033);if(!a.length){S.F(6);break}return y(S,Xc(u,e,u.J,u.g.streaming.retryParameters),7);case 7:m=S.h,v=lg(u,m,i,a),E=new Blob([v],{type:"text/vtt"}),e=Uu(E),i="text/vtt";case 6:if(w={id:u.Ag++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Sc(0,p,[e]),mimeType:i||"",codecs:r||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:o||null,type:f.Da,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!s,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1},T=Kt(w.mimeType,w.codecs),x=lu(T),!x)throw new M(2,2,2014,i);return u.i.textStreams.push(w),Ht(u),S.return(gu(w))}})},h.Ih=function(e,t){var n=this,i,r,o,s,u,a,l,c,d,f,p,m,v,E,w,T;return k(function(x){switch(x.g){case 1:if(n.l!=It&&n.l!=wt)throw new M(1,7,7004);if(t){x.F(2);break}return y(x,Wc(n,e),3);case 3:t=x.h;case 2:if(t!="text/vtt")throw new M(1,2,2017,e);if(i=at,r=n.h.duration,n.i&&(r=n.i.presentationTimeline.getDuration()),r==1/0)throw new M(1,4,4045);return y(x,Xc(n,e,n.J,n.g.streaming.retryParameters),4);case 4:if(o=x.h,s=ht[t],!s)throw new M(2,2,2014,t);for(u=s(),a={periodStart:0,segmentStart:0,segmentEnd:r,vttOffset:0},l=ge(o),c=u.parseMedia(l,a,e),d=[],f={},p=g(c),m=p.next();!m.done;f={jd:f.jd,jc:f.jc},m=p.next())f.jc=m.value,f.jd=null,v=function(S){return function(){return S.jd==null&&(S.jd=Tt([e],[S.jc.payload])),S.jd||[]}}(f),E=new oe(f.jc.startTime,f.jc.endTime,v,0,null,null,0,0,1/0),f.jc.payload.includes("#xywh")&&(w=f.jc.payload.split("#xywh=")[1].split(","),w.length===4&&E.rh({height:parseInt(w[3],10),positionX:parseInt(w[0],10),positionY:parseInt(w[1],10),width:parseInt(w[2],10)})),d.push(E);return T={id:n.Ag++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new De(d),mimeType:t||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:i.cf,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1},n.l==wt?n.tc.push(T):n.i.imageStreams.push(T),Ht(n),x.return(zl(T))}})},h.Gh=function(e,t,n){var i=this,r,o,s,u;return k(function(a){switch(a.g){case 1:if(i.l!=It&&i.l!=wt)throw new M(1,7,7004);if(n){a.F(2);break}return y(a,Wc(i,e),3);case 3:n=a.h;case 2:return r=[],i.D&&(r=i.D.getCuePoints()),y(a,ag(i,e,t,"chapters",n,"",r),4);case 4:if(o=a.h,s=i.Sg(),u=s.find(function(l){return l.language==t}),!u){a.F(5);break}return y(a,new Promise(function(l,c){i.s.na(o,"load",l),i.s.na(o,"error",function(){c(new M(1,2,2015))})}),6);case 6:return Ht(i),a.return(u);case 5:throw new M(1,2,2012)}})};function Wc(e,t){var n;return k(function(i){switch(i.g){case 1:return le(i,2),y(i,Rc(t,e.J,e.g.streaming.retryParameters),4);case 4:n=i.h,Ee(i,3);break;case 2:ce(i);case 3:if(n)return i.return(n);throw new M(1,2,2011,t)}})}function ag(e,t,n,i,r,o,s){var u,a,l,c;return k(function(d){if(d.g==1)return r!="text/vtt"||s.length?y(d,Xc(e,t,e.J,e.g.streaming.retryParameters),3):d.F(2);d.g!=2&&(u=d.h,a=lg(e,u,r,s),l=new Blob([a],{type:"text/vtt"}),t=Uu(l),r="text/vtt"),c=document.createElement("track");var f=e.V,p=t;try{if(f.g.enabled){var m=bc(f);m.ot=Uc,m.su=!0;var v=Fu(m),E=_c(p,v)}else E=p}catch(w){Oi("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",w),E=p}return c.src=E,c.label=o,c.kind=i,c.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(c),d.return(c)})}function Xc(e,t,n,i){var r,o,s;return k(function(u){if(u.g==1){r=bn,o=dt([t],i),o.method="GET";var a=e.V;try{a.g.enabled&&Xr(a,o,{ot:Uc,su:!0})}catch(l){Oi("CMCD_TEXT_ERROR","Could not generate text CMCD data.",l)}return y(u,n.request(r,o).promise,2)}return s=u.h,u.return(s.data)})}function lg(e,t,n,i){var r=ht[n];if(r)return n=r(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=ge(t),t=n.parseMedia(t,e,null),qw(t,i);throw new M(2,2,2014,n)}h.ng=function(e,t){this.Ee.width=e,this.Ee.height=t},h.eg=function(e){if(this.l==It){var t=this.j;if(e=e===void 0?.1:e,t.l.g)t=!1;else if(t.u)t=!1;else{for(var n=g(t.i.values()),i=n.next();!i.done;i=n.next())i=i.value,!i.wd||i.Ta||i.Eb||(i.wd=!1,In(t,i,e));t=!0}}else t=!1;return t},h.ki=function(){return Ae("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},h.li=function(){return this.Ie};function Qr(e){var t=Yr();return t.streaming.failureCallback=function(n){if(e.R()){var i=null;n.code==1001||n.code==1002?i=1:n.code==1003&&(i=.1),i!=null&&(n.severity=1,e.eg(i))}},t.textDisplayFactory=function(){return e.oe?new un(e.h,e.oe):HTMLMediaElement.prototype.addTextTrack?new on(e.h,"Shaka Player TextTrack"):new sn},t}h.rg=function(e){this.oe=e};function IA(e,t){for(var n=new Set,i=g(t.textStreams),r=i.next();!r.done;r=i.next())r=r.value,r.mimeType!="application/cea-608"&&r.mimeType!="application/cea-708"||n.add(r.originalId);for(i=g(t.variants),r=i.next();!r.done;r=i.next())if((r=r.value.video)&&r.closedCaptions){for(var o=g(r.closedCaptions.keys()),s=o.next();!s.done;s=o.next())if(s=s.value,!n.has(s)){var u=s.startsWith("CC")?"application/cea-608":"application/cea-708",a=new Ze,l=r.closedCaptions.get(s);u={id:e.Ag++,originalId:s,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:a,mimeType:u,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:l,originalLanguage:l,label:null,type:Ce,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:r.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1},t.textStreams.push(u),n.add(s)}}}function cg(e,t){return k(function(n){if(n.g==1)return y(n,CA(e,t),2);hg(e,t),K(n)})}function CA(e,t){return k(function(n){if(n.g==1)return y(n,XE(e.m,t),2);if(!t.variants.some(mu))throw new M(2,4,4032);K(n)})}function hg(e,t){if(e.l!=Un){qp(t.variants,e.g.restrictions,e.Ee)&&e.j&&Ht(e);var n=e.m?e.m.g:null;if(n&&e.m.u)for(var i=g(t.variants),r=i.next();!r.done;r=i.next())r=r.value,Yc(e,n.keySystem,r.video),Yc(e,n.keySystem,r.audio);wg(e,t)}}function Yc(e,t,n){if(n){n=g(n.drmInfos);for(var i=n.next();!i.done;i=n.next())if(i=i.value,i.keySystem==t){i=g(i.initData||[]);for(var r=i.next();!r.done;r=i.next())r=r.value,qo(e.m,r.initDataType,r.initData)}}}function MA(e,t){var n,i,r,o,s;return k(function(u){return u.g==1?(n=e.audio,i=e.video,r=function(a,l){var c,d,f;return k(function(p){return p.g==1?a?y(p,a.createSegmentIndex(),2):p.return(null):(d=(c=a.segmentIndex.rc(l))?c.next().value:null,d?(f=d.startTime,p.return(f)):p.return(null))})},y(u,r(n,t),2)):u.g!=3?(o=u.h,y(u,r(i,t),3)):(s=u.h,s!=null&&o!=null?u.return(Math.max(s,o)):s!=null?u.return(s):o!=null?u.return(o):u.return(t))})}function qc(e){var t=e.yd();if(e.C&&e.M&&e.G){if(e.V){var n=e.V;t||n.i||(n.i=!0),n.i&&t&&(n.j=!0),n.l=t}Xu(e)}t=new Map().set("buffering",t),e.dispatchEvent(He("buffering",t))}function dg(e){var t=e.h.playbackRate;t!=0&&(e.K&&e.K.set(t),t=He("ratechange"),e.dispatchEvent(t))}function Xu(e){if(e.C&&e.M){var t=e.C.g,n="playing";e.M.g==Pr?n="buffering":e.h.paused?n="paused":e.h.ended&&(n="ended");var i=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:i,duration:0},t=!0;else{var r=Date.now()/1e3;t.g.duration=r-t.g.timestamp,t.g.state==i?t=!1:(t.h.push(t.g),t.g={timestamp:r,state:i,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(He("statechanged",n)))}}function pg(e){if(e.R()){var t=e.Ha();if(Number.isFinite(t.end)&&!(e.h.currentTime<t.start)){if(e.g.streaming.liveSync)var n=e.g.streaming.liveSyncMaxLatency,i=e.g.streaming.liveSyncPlaybackRate;else e.i&&e.i.serviceDescription&&(n=e.i.serviceDescription.maxLatency||e.g.streaming.liveSyncMaxLatency,i=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSyncPlaybackRate);if(e.g.streaming.liveSync)var r=e.g.streaming.liveSyncMinLatency,o=e.g.streaming.liveSyncMinPlaybackRate;else e.i&&e.i.serviceDescription&&(r=e.i.serviceDescription.minLatency||e.g.streaming.liveSyncMinLatency,o=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSyncMinPlaybackRate);var s=e.h.playbackRate,u=t.end-e.h.currentTime,a=0;if(e.l==wt){var l=e.h.buffered;0<l.length&&(a=l.end(l.length-1),a=Math.max(i,a-t.end))}n&&i&&u-a>n?s!=i&&e.Pd(i):r&&o&&u-a<r?s!=o&&e.Pd(o):s!==e.K.Lc()&&e.od()}}}function Yu(e){if(e.h){var t=!1,n=e.h.currentTime/e.h.duration;if(isNaN(n)||(n=Math.round(100*n),isNaN(e.N)?(e.N=n,t=!0):(n=Math.max(e.N,n),e.N!=n&&(e.N=n,t=!0))),t){var i;e.N==0?i=He("started"):e.N==25?i=He("firstquartile"):e.N==50?i=He("midpoint"):e.N==75?i=He("thirdquartile"):e.N==100&&(i=He("complete")),i&&e.dispatchEvent(i)}}}function Jr(e){try{wg(e,e.i)}catch(n){return tr(e,n),!1}var t=Wl(e.i.variants);return t=e.Ra.create(t),e.u.setVariants(Array.from(t.values())),!0}function fg(e,t){return t=t===void 0?!1:t,Jr(e)?e.u.chooseVariant(t):null}function kA(e){function t(s){var u="";return s.video&&(u+="video:"+s.video.id),s.audio&&(u=u+(u?"&":"")+("audio:"+s.audio.id)),u}for(var n=Date.now()/1e3,i=!1,r=g(e.i.variants),o=r.next();!o.done;o=r.next())o=o.value,0<o.disabledUntilTime&&o.disabledUntilTime<=n&&(o.disabledUntilTime=0,i=!0,""+t(o),void 0);e.i.variants.every(function(s){return s.disabledUntilTime===0})&&e.se.stop(),i&&Zr(e,!0,void 0,!1,!1)}function Zr(e,t,n,i,r){t=t===void 0?!0:t,n=n===void 0?0:n,i=i===void 0?!1:i,r=r===void 0?!0:r;var o=fg(e);o&&qu(e,o,r,t,n,i)}function qu(e,t,n,i,r,o){o=o===void 0?!1:o;var s=e.j.j;if(t==s)i&&R0(e.j,t,i,r,!0);else{var u=e.C.h;u.h!=t&&(u.h=t,u.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),R0(e.j,t,i,r,o,n),i=null,s&&(i=Dr(s)),t=Dr(t),n?(n=new Map().set("oldTrack",i).set("newTrack",t),e.L&&i0(e.L,t,e.If()),n=He("adaptation",n),eo(e,n)):mg(e,i,t)}}function gg(e,t){var n=Array.from(e.h.audioTracks).find(function(i){return i.enabled});t.enabled=!0,t.id!==n.id&&(n.enabled=!1),n=Hl(n),t=Hl(t),mg(e,n,t)}function LA(e,t,n){if(e.g.autoShowText==0)return!1;if(e.g.autoShowText==1)return!0;var i=Le(e.g.preferredTextLanguage);return n=Le(n.language),e.g.autoShowText==2?iu(n,i):e.g.autoShowText==3?(e=Le(t.language),iu(n,i)&&!iu(e,n)):(Ae("Invalid autoShowText setting!"),!1)}function Ht(e){var t=He("trackschanged");eo(e,t)}function mg(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),e.L&&i0(e.L,n,e.If()),n=He("variantchanged",t),eo(e,n)}function $u(e){var t=He("textchanged");eo(e,t)}function vg(e){var t=He("texttrackvisibility");eo(e,t)}function yg(e){e.g.abr.enabled||$c(e);var t=new Map().set("newStatus",e.g.abr.enabled);eo(e,He("abrstatuschanged",t))}function $c(e,t){if(t=t===void 0?!0:t,e.l==It){e.se.stop();for(var n=g(e.i.variants),i=n.next();!i.done;i=n.next())i.value.disabledUntilTime=0;t&&Jr(e)}}h.ce=function(e,t){if(!this.g.abr.enabled||this.l===Un||!navigator.onLine)return!1;if(this.i.variants.some(function(o){return(o=o[e.type])&&o.id!==e.id?e.type=="audio"?e.language===o.language:!0:!1})){for(var n=g(this.i.variants),i=n.next();!i.done;i=n.next()){i=i.value;var r=i[e.type];r&&r.id===e.id&&(i.disabledUntilTime=Date.now()/1e3+t)}return this.se.za(1),t=this.Lb().video.reduce(function(o,s){return o+s.end-s.start},0),Zr(this,!0,t,!0,!1),!0}return!1};function tr(e,t){var n,i,r;return k(function(o){switch(o.g){case 1:if(e.l==Un)return o.return();if(n=!0,!(e.Xa&&e.i&&e.j)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3018){o.F(2);break}return le(o,3),y(o,Vw(e.j),5);case 5:i=o.h,n=!i,Ee(o,2);break;case 3:ce(o),n=!0;case 2:if(!n)return o.return();t.severity===2&&$c(e,!1),r=He("error",new Map().set("detail",t)),e.dispatchEvent(r),r.defaultPrevented&&(t.handled=!0),K(o)}})}function cs(e,t,n){n=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}),e.dispatchEvent(He(t,n))}function Qc(e){if(!e.h.error)return null;var t=e.h.error.code;if(t==1)return null;var n=e.h.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new M(2,3,3016,t,n,e.h.error.message)}function Eg(e,t){if(e.j){var n=He("keystatuschanged");e.dispatchEvent(n);var i=Object.keys(t);n=i.length==1&&i[0]=="00";var r=!1;if(i.length){i=g(e.i.variants);for(var o=i.next();!o.done;o=i.next()){o=o.value;var s=[];o.audio&&s.push(o.audio),o.video&&s.push(o.video),s=g(s);for(var u=s.next();!u.done;u=s.next()){var a=u.value;if(u=o.allowedByKeySystem,a.keyIds.size){o.allowedByKeySystem=!0,a=g(a.keyIds);for(var l=a.next();!l.done;l=a.next())l=l.value,((l=t[n?"00":l])||e.m.H)&&(o.allowedByKeySystem=o.allowedByKeySystem&&!!l&&!Ig.includes(l))}u!=o.allowedByKeySystem&&(r=!0)}}}if(r&&(Ht(e),!Jr(e)))return;(t=e.j.j)&&!t.allowedByKeySystem&&Zr(e)}}function Tg(e,t,n){e.H&&e.H.onExpirationUpdated&&e.H.onExpirationUpdated(t,n),t=He("expirationupdated"),e.dispatchEvent(t)}function Jc(e,t,n){0<t&&(e.R()||e.sh(t)),t=e.getDuration(),n<t&&(e.R()||e.gb(n))}function wg(e,t){e=e.m?e.m.ge():{};var n=Object.keys(e);n=n.length&&n[0]=="00";var i=!1,r=!1,o=new Set,s=new Set;t=g(t.variants);for(var u=t.next();!u.done;u=t.next()){u=u.value;var a=[];u.audio&&a.push(u.audio),u.video&&a.push(u.video),a=g(a);for(var l=a.next();!l.done;l=a.next())if(l=l.value,l.keyIds.size){l=g(l.keyIds);for(var c=l.next();!c.done;c=l.next()){c=c.value;var d=e[n?"00":c];d?Ig.includes(d)&&s.add(d):o.add(c)}}u.allowedByApplication?u.allowedByKeySystem&&(i=!0):r=!0}if(!i)throw e={hasAppRestrictions:r,missingKeys:Array.from(o),restrictedKeyStatuses:Array.from(s)},new M(2,4,4012,e)}function eo(e,t){k(function(n){if(n.g==1)return y(n,Promise.resolve(),2);e.l!=Un&&e.dispatchEvent(t),K(n)})}function Ag(e){var t=new Set;e=g(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(Le(n.language)):t.add("und");return t}function Sg(e){var t=new Map,n=new Map;e=g(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var r="und",o=[];i.language&&(r=Le(i.language)),i.type=="variant"?o=i.audioRoles:o=i.roles,o&&o.length||(o=[""]),t.has(r)||t.set(r,new Set),o=g(o);for(var s=o.next();!s.done;s=o.next())s=s.value,t.get(r).add(s),i.label&&(n.has(r)||n.set(r,new Map),n.get(r).set(s,i.label))}var u=[];return t.forEach(function(a,l){a=g(a);for(var c=a.next();!c.done;c=a.next()){c=c.value;var d=null;n.has(l)&&n.get(l).has(c)&&(d=n.get(l).get(c)),u.push({language:l,role:c,label:d})}}),u}O("shaka.Player",_),_.prototype.setVideoContainer=_.prototype.rg,_.prototype.getManifestParserFactory=_.prototype.li,_.prototype.getManifest=_.prototype.ki,_.prototype.retryStreaming=_.prototype.eg,_.prototype.setMaxHardwareResolution=_.prototype.ng,_.prototype.addChaptersTrack=_.prototype.Gh,_.prototype.addThumbnailsTrack=_.prototype.Ih,_.prototype.addTextTrackAsync=_.prototype.Hh,_.prototype.getStats=_.prototype.getStats,_.prototype.getBufferedInfo=_.prototype.Lb,_.prototype.getPresentationStartTimeAsDate=_.prototype.Vg,_.prototype.getPlayheadTimeAsDate=_.prototype.oi,_.prototype.setTextTrackVisibility=_.prototype.Oe,_.prototype.getChapters=_.prototype.Wh,_.prototype.getChaptersTracks=_.prototype.Sg,_.prototype.isTextTrackVisible=_.prototype.xc,_.prototype.selectVariantsByLabel=_.prototype.oj,_.prototype.selectTextLanguage=_.prototype.ig,_.prototype.selectAudioLanguage=_.prototype.Le,_.prototype.getTextLanguages=_.prototype.wi,_.prototype.getAudioLanguages=_.prototype.Sh,_.prototype.getTextLanguagesAndRoles=_.prototype.xi,_.prototype.getAudioLanguagesAndRoles=_.prototype.Th,_.prototype.selectVariantTrack=_.prototype.Me,_.prototype.selectTextTrack=_.prototype.jg,_.prototype.getThumbnails=_.prototype.Kf,_.prototype.getAllThumbnails=_.prototype.Rh,_.prototype.getImageTracks=_.prototype.fe,_.prototype.getTextTracks=_.prototype.bc,_.prototype.getVariantTracks=_.prototype.mb,_.prototype.cancelTrickPlay=_.prototype.od,_.prototype.trickPlay=_.prototype.Pd,_.prototype.getPlaybackRate=_.prototype.Nb,_.prototype.isBuffering=_.prototype.yd,_.prototype.getKeyStatuses=_.prototype.ge,_.prototype.getActiveSessionsMetadata=_.prototype.Ff,_.prototype.getExpiration=_.prototype.td,_.prototype.drmInfo=_.prototype.drmInfo,_.prototype.keySystem=_.prototype.keySystem,_.prototype.goToLive=_.prototype.Fi,_.prototype.seekRange=_.prototype.Ha,_.prototype.isAudioOnly=_.prototype.Pc,_.prototype.isInProgress=_.prototype.wc,_.prototype.isLive=_.prototype.R,_.prototype.getAdManager=_.prototype.ee,_.prototype.getAssetUri=_.prototype.Gf,_.prototype.getNetworkingEngine=_.prototype.Zb,_.prototype.getMediaElement=_.prototype.ni,_.prototype.getManifestType=_.prototype.If,_.prototype.getLoadMode=_.prototype.ie,_.prototype.resetConfiguration=_.prototype.hj,_.prototype.getBufferFullness=_.prototype.Uh,_.prototype.getConfiguration=_.prototype.getConfiguration,_.prototype.configure=_.prototype.configure,_.prototype.releaseAllMutexes=_.prototype.dj,_.prototype.load=_.prototype.load,_.prototype.updateStartTime=_.prototype.xj,_.prototype.unload=_.prototype.Wc,_.prototype.detach=_.prototype.detach,_.prototype.attachCanvas=_.prototype.Eg,_.prototype.attach=_.prototype.Gc,_.probeSupport=function(e){e=e===void 0?!0:e;var t,n,i,r,o,s;return k(function(u){if(u.g==1)return t={},e?y(u,bT(),3):u.F(2);u.g!=2&&(t=u.h);var a={};if(Nn())for(var l in xn)a[l]=!0;l=g(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var c=l.next();!c.done;c=l.next())c=c.value,a[c]=Nn()?!!xn[c]:Vo(c);for(n=a,l='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(F(xr)),a={},l=g(l),c=l.next();!c.done;c=l.next()){c=c.value,a[c]=Nn()?lu(c)?!0:nt(c)||!!Vi(c):Vo(c);var d=c.split(";")[0];a[d]=a[d]||a[c]}i=a,r={manifest:n,media:i,drm:t},o=eh;for(s in o)r[s]=o[s]();return u.return(r)})},_.isBrowserSupported=Z0,_.setAdManagerFactory=function(e){Qu=e},_.registerSupportPlugin=function(e,t){eh[e]=t},_.prototype.destroy=_.prototype.destroy;var Un=0,Zc=1,It=2,wt=3;_.LoadMode={DESTROYED:Un,NOT_LOADED:Zc,MEDIA_SOURCE:It,SRC_EQUALS:wt},_.version="v4.7.11";var xg=["4","7"];uf=new function(e){this.g=e,this.i=iT,this.h=rT}(new ql(Number(xg[0]),Number(xg[1])));var Ig=["output-restricted","internal-error"],eh={},Qu=null;function Cg(){this.h=[],this.j=this.i=this.g=0}function ue(e,t,n){var i=this;this.g=e,this.h=t,this.j=n,this.i=!1,this.l=this.h.getVolume(),this.m=new _e,this.m.o(this.h,google.ima.AdEvent.Type.PAUSED,function(){i.i=!0}),this.m.o(this.h,google.ima.AdEvent.Type.RESUMED,function(){i.i=!1})}h=ue.prototype,h.getDuration=function(){return this.g.getDuration()},h.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},h.getRemainingTime=function(){return this.h.getRemainingTime()},h.isPaused=function(){return this.i},h.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},h.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},h.canSkipNow=function(){return this.h.getAdSkippableState()},h.skip=function(){return this.h.skip()},h.pause=function(){return this.h.pause()},h.play=function(){return this.h.resume()},h.getVolume=function(){return this.h.getVolume()},h.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},h.isMuted=function(){return this.h.getVolume()==0},h.isLinear=function(){return this.g.isLinear()},h.resize=function(e,t){var n=!1,i=this.j;document.fullscreenEnabled?n=!!document.fullscreenElement:i.webkitSupportsFullscreen&&(n=i.webkitDisplayingFullscreen),this.h.resize(e,t,n?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},h.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},h.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},h.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},h.getTitle=function(){return this.g.getTitle()},h.getDescription=function(){return this.g.getDescription()},h.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},h.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},h.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},h.getAdId=function(){return this.g.getAdId()},h.getCreativeAdId=function(){return this.g.getCreativeAdId()},h.getAdvertiserName=function(){return this.g.getAdvertiserName()},h.getMediaUrl=function(){return this.g.getMediaUrl()},h.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},h.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},h.release=function(){this.h=this.g=null},O("shaka.ads.ClientSideAd",ue),ue.prototype.release=ue.prototype.release,ue.prototype.getPodIndex=ue.prototype.getPodIndex,ue.prototype.getTimeOffset=ue.prototype.getTimeOffset,ue.prototype.getMediaUrl=ue.prototype.getMediaUrl,ue.prototype.getAdvertiserName=ue.prototype.getAdvertiserName,ue.prototype.getCreativeAdId=ue.prototype.getCreativeAdId,ue.prototype.getAdId=ue.prototype.getAdId,ue.prototype.getVastMediaWidth=ue.prototype.getVastMediaWidth,ue.prototype.getVastMediaHeight=ue.prototype.getVastMediaHeight,ue.prototype.getVastMediaBitrate=ue.prototype.getVastMediaBitrate,ue.prototype.getDescription=ue.prototype.getDescription,ue.prototype.getTitle=ue.prototype.getTitle,ue.prototype.getPositionInSequence=ue.prototype.getPositionInSequence,ue.prototype.getSequenceLength=ue.prototype.getSequenceLength,ue.prototype.setMuted=ue.prototype.setMuted,ue.prototype.resize=ue.prototype.resize,ue.prototype.isLinear=ue.prototype.isLinear,ue.prototype.isMuted=ue.prototype.isMuted,ue.prototype.setVolume=ue.prototype.setVolume,ue.prototype.getVolume=ue.prototype.getVolume,ue.prototype.play=ue.prototype.play,ue.prototype.pause=ue.prototype.pause,ue.prototype.skip=ue.prototype.skip,ue.prototype.canSkipNow=ue.prototype.canSkipNow,ue.prototype.getTimeUntilSkippable=ue.prototype.getTimeUntilSkippable,ue.prototype.isSkippable=ue.prototype.isSkippable,ue.prototype.isPaused=ue.prototype.isPaused,ue.prototype.getRemainingTime=ue.prototype.getRemainingTime,ue.prototype.getMinSuggestedDuration=ue.prototype.getMinSuggestedDuration,ue.prototype.getDuration=ue.prototype.getDuration;function Ju(e,t,n,i,r){var o=this;this.s=e,this.i=t,this.D=!1,this.u=this.G=null,this.H=NaN,this.m=r,this.j=null,this.h=new _e,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),e=new google.ima.AdDisplayContainer(this.s,this.i),e.initialize(),this.l=new google.ima.AdsLoader(e),this.l.getSettings().setPlayerType("shaka-player"),this.l.getSettings().setPlayerVersion("v4.7.11"),this.g=null,this.C=i||new google.ima.AdsRenderingSettings,this.h.o(this.l,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(s){DA(o,s)}),this.h.o(this.l,google.ima.AdErrorEvent.Type.AD_ERROR,function(s){Mg(o,s)}),this.h.o(this.i,"ended",function(){o.l.contentComplete()}),this.h.na(this.i,"play",function(){o.D=!0})}Ju.prototype.configure=function(e){this.G=e},Ju.prototype.stop=function(){this.g&&this.g.stop(),this.s&&ki(this.s)},Ju.prototype.release=function(){this.stop(),this.u&&this.u.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.l.destroy()};function Mg(e,t){t.getError(),t=new Map().set("originalEvent",t),e.m(new X("ad-error",t)),ea(e,null),e.m(new X("ad-cue-points-changed",new Map().set("cuepoints",[])))}function DA(e,t){if(e.m(new X("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.H))),e.G.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.C),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.o(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.o(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.C);e.m(new X("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var i=e.g.getCuePoints();if(i.length){t=[],i=g(i);for(var r=i.next();!r.done;r=i.next())t.push({start:r.value,end:null});e.m(new X("ad-cue-points-changed",new Map().set("cuepoints",t)))}RA(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight,Zu(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.o(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,Zu(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in I?(e.u=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,Zu(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.u.observe(e.i)):e.h.o(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,Zu(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.D?e.g.start():e.h.na(e.i,"play",function(){e.D=!0,e.g.start()})}catch{ea(e,null)}}function Zu(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1)}function RA(e){function t(n,i){n=new Map().set("originalEvent",n),e.m(new X(i,n))}e.h.o(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){Mg(e,n)}),e.h.o(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){kg(e,n)}),e.h.o(e.g,google.ima.AdEvent.Type.STARTED,function(n){kg(e,n)}),e.h.o(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.o(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.o(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.o(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.o(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){ea(e,n)}),e.h.o(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){ea(e,n)}),e.h.o(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.o(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.o(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.o(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.o(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.o(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.o(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.o(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.o(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.o(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.o(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.o(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.o(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.o(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed")}),e.h.o(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.o(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.o(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.o(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.o(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function kg(e,t){var n=t.getAd();n?(e.j=new ue(n,e.g,e.i),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.m(new X("ad-started",t)),e.j.isLinear()&&(e.s.setAttribute("ad-active","true"),e.i.pause(),e.i.muted?(t=e.j,t.l=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):Ae("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function ea(e,t){e.m(new X("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.s.removeAttribute("ad-active"),e.i.ended||e.i.play())}function se(e,t,n,i,r){this.h=e,this.g=r,this.i=t,this.j=n,this.l=i}h=se.prototype,h.getDuration=function(){return this.h.durationInSeconds},h.getMinSuggestedDuration=function(){return this.getDuration()},h.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},h.isPaused=function(){return this.g.paused},h.isSkippable=function(){return!!this.h.skipOffset},h.getTimeUntilSkippable=function(){if(!this.h.skipOffset)return this.getRemainingTime();var e=this.getRemainingTime()-this.h.skipOffset;return Math.max(e,0)},h.canSkipNow=function(){return this.getTimeUntilSkippable()==0},h.skip=function(){this.g.currentTime+=this.getRemainingTime()},h.pause=function(){return this.g.pause()},h.play=function(){return this.g.play()},h.getVolume=function(){return this.g.volume},h.setVolume=function(e){this.g.volume=e},h.isMuted=function(){return this.g.muted},h.isLinear=function(){return this.l},h.resize=function(){},h.setMuted=function(e){this.g.muted=e},h.getSequenceLength=function(){return this.j?this.j:1},h.getPositionInSequence=function(){return this.i?this.i:1},h.getTitle=function(){return this.h.adTitle},h.getDescription=function(){return""},h.getVastMediaBitrate=function(){return 0},h.getVastMediaHeight=function(){return 0},h.getVastMediaWidth=function(){return 0},h.getAdId=function(){return this.h.adId},h.getCreativeAdId=function(){return this.h.creativeId},h.getAdvertiserName=function(){return""},h.getMediaUrl=function(){return null},h.getTimeOffset=function(){return 0},h.getPodIndex=function(){return 0},h.release=function(){this.j=this.i=this.g=this.h=null},O("shaka.ads.MediaTailorAd",se),se.prototype.release=se.prototype.release,se.prototype.getPodIndex=se.prototype.getPodIndex,se.prototype.getTimeOffset=se.prototype.getTimeOffset,se.prototype.getMediaUrl=se.prototype.getMediaUrl,se.prototype.getAdvertiserName=se.prototype.getAdvertiserName,se.prototype.getCreativeAdId=se.prototype.getCreativeAdId,se.prototype.getAdId=se.prototype.getAdId,se.prototype.getVastMediaWidth=se.prototype.getVastMediaWidth,se.prototype.getVastMediaHeight=se.prototype.getVastMediaHeight,se.prototype.getVastMediaBitrate=se.prototype.getVastMediaBitrate,se.prototype.getDescription=se.prototype.getDescription,se.prototype.getTitle=se.prototype.getTitle,se.prototype.getPositionInSequence=se.prototype.getPositionInSequence,se.prototype.getSequenceLength=se.prototype.getSequenceLength,se.prototype.setMuted=se.prototype.setMuted,se.prototype.resize=se.prototype.resize,se.prototype.isLinear=se.prototype.isLinear,se.prototype.isMuted=se.prototype.isMuted,se.prototype.setVolume=se.prototype.setVolume,se.prototype.getVolume=se.prototype.getVolume,se.prototype.play=se.prototype.play,se.prototype.pause=se.prototype.pause,se.prototype.skip=se.prototype.skip,se.prototype.canSkipNow=se.prototype.canSkipNow,se.prototype.getTimeUntilSkippable=se.prototype.getTimeUntilSkippable,se.prototype.isSkippable=se.prototype.isSkippable,se.prototype.isPaused=se.prototype.isPaused,se.prototype.getRemainingTime=se.prototype.getRemainingTime,se.prototype.getMinSuggestedDuration=se.prototype.getMinSuggestedDuration,se.prototype.getDuration=se.prototype.getDuration;function hs(e,t,n,i){this.D=e,this.K=t,this.g=n,this.l=null,this.W=NaN,this.i=i,this.J=!1,this.C=null,this.j=[],this.M=[],this.L=this.G=this.h=null,this.H=new Map,this.m=[],this.u=[],this.N="",this.V=!0,this.I="",this.s=new _e}hs.prototype.stop=function(){for(var e=g(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.s.hc(t.target,t.type,t.listener);to(this),this.m=[],this.u=[],this.N="",this.V=!0,this.I="",this.C=null,this.j=[],this.M=[],this.H.clear()},hs.prototype.release=function(){this.stop(),this.s&&this.s.release()},hs.prototype.onManifestUpdated=function(e){this.J=e,this.N!=""&&(NA(this,this.N,this.V),this.V=!1)},hs.prototype.getCuePoints=function(){for(var e=[],t=g(this.j),n=t.next();!n.done;n=t.next()){n=g(n.value.ads);for(var i=n.next();!i.done;i=n.next())i=i.value,e.push({start:i.startTimeInSeconds,end:i.startTimeInSeconds+i.durationInSeconds})}return e};function PA(e,t,n){var i,r,o,s,u,a,l,c,d,f,p;k(function(m){if(m.g==1)return i=dt([t],Kn()),i.method="POST",n&&(r=JSON.stringify(n),i.body=si(r)),o=e.K.request(7,i),le(m,2),y(m,o.promise,4);if(m.g!=2){if(s=m.h,u=ze(s.data),a=JSON.parse(u),a.manifestUrl&&a.trackingUrl)l=new Je(t),c=new Je(a.trackingUrl),e.N=l.resolve(c).toString(),d=Date.now()/1e3,f=d-e.W,e.i(new X("ads-loaded",new Map().set("loadTime",f))),p=new Je(a.manifestUrl),e.l.resolve(l.resolve(p).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return Ee(m,0)}if(ce(m),!e.I.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,m.return();e.l.resolve(e.I),e.l=null,K(m)})}function NA(e,t,n){var i,r,o,s,u,a,l,c,d,f,p,m,v,E,w;k(function(T){if(T.g==1)return i=dt([t],Kn()),r=e.K.request(7,i),le(T,2),y(T,r.promise,4);if(T.g!=2){if(o=T.h,s=[],u=ze(o.data),a=JSON.parse(u),0<a.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(a.avails)){for(e.j=a.avails,l=g(e.j),c=l.next();!c.done;c=l.next())for(d=c.value,f=g(d.nonLinearAdsList),p=f.next();!p.done;p=f.next())for(m=p.value,v=g(m.nonLinearAdList),E=v.next();!E.done;E=v.next())w=E.value,bA(e,w);s=e.getCuePoints(),e.i(new X("ad-cue-points-changed",new Map().set("cuepoints",s)))}}else e.j.length&&e.i(new X("ad-cue-points-changed",new Map().set("cuepoints",s))),to(e),e.j=[];return n&&(e.J||0<s.length)&&_A(e),Ee(T,0)}ce(T),K(T)})}function bA(e,t){var n,i,r,o,s,u,a;k(function(l){if(l.g==1)return!t.staticResource||(n=Lg(t),e.H.get(n))?l.return():(i=dt([t.staticResource],Kn()),r=e.K.request(7,i),le(l,2),e.H.set(n,[]),y(l,r.promise,4));if(l.g!=2)return o=l.h,s=ze(o.data),u=JSON.parse(s),a=u.apps,e.H.set(n,a),Ee(l,0);ce(l),e.H.delete(n),K(l)})}function Lg(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function _A(e){Rg(e),e.J||(Dg(e),e.s.o(e.g,"seeked",function(){Dg(e)}),e.s.o(e.g,"ended",function(){to(e)})),e.s.o(e.g,"timeupdate",function(){Rg(e)})}function Dg(e){var t=e.g.currentTime;if(t!=0&&e.C==null){for(var n,i,r=g(e.j),o=r.next();!o.done;o=r.next()){o=o.value;for(var s=g(o.ads),u=s.next();!u.done;u=s.next())if(u=u.value,!i)u.startTimeInSeconds<t&&(i=u,n=o);else if(u.startTimeInSeconds<t&&u.startTimeInSeconds>i.startTimeInSeconds+i.durationInSeconds){i=u,n=o;break}}n&&i&&!e.M.includes(i.adId)&&(e.C=t,e.g.currentTime=n.startTimeInSeconds)}}function Rg(e){if(e.g.duration&&(e.h||e.j.length)){var t=e.g.currentTime,n=!1;if(e.h){n=!0;var i=e.G,r=i.startTimeInSeconds+.5*i.durationInSeconds,o=i.startTimeInSeconds+.75*i.durationInSeconds;t>=i.startTimeInSeconds+.25*i.durationInSeconds&&!e.u.includes("firstQuartile")?(e.u.push("firstQuartile"),jt(e,"firstQuartile")):t>=r&&!e.u.includes("midpoint")?(e.u.push("midpoint"),jt(e,"midpoint")):t>=o&&!e.u.includes("thirdQuartile")&&(e.u.push("thirdQuartile"),jt(e,"thirdQuartile")),i=e.h.getRemainingTime(),r=e.h.getDuration(),0<r&&(0>=i||i>r)&&to(e)}if(!e.h||!e.h.isLinear()){e:for(i=g(e.j),r=i.next();!r.done&&(r=r.value,!(e.h&&e.h.isLinear()));r=i.next())for(o=0;o<r.ads.length;o++){var s=r.ads[o],u=s.startTimeInSeconds+s.durationInSeconds;if(s.startTimeInSeconds<=t&&u>t){if(e.M.includes(s.adId)){if(e.g.ended)continue;e.g.currentTime=u;break e}to(e),e.L=r,e.h=new se(s,o+1,r.ads.length,!0,e.g),e.G=s,o===0&&jt(e,"breakStart"),Pg(e);break}}if(!e.h){for(i=g(e.j),r=i.next();!r.done&&(r=r.value,!e.h);r=i.next())for(o=0;o<r.nonLinearAdsList.length;o++)if(s=r.nonLinearAdsList[o],s.nonLinearAdList.length){u=r.startTimeInSeconds;var a=e.H.get(Lg(s.nonLinearAdList[0]));if(u<=t&&a&&a.length){to(e),u=e,a=g(a);for(var l=a.next();!l.done;l=a.next())if(l=l.value,l.data.source.length){var c=document.createElement("img");c.src=l.data.source[0].url,c.style.top=(l.placeholder.top||0)+"%",c.style.height=100-(l.placeholder.top||0)+"%",c.style.left=(l.placeholder.left||0)+"%",c.style.maxWidth=100-(l.placeholder.left||0)+"%",c.style.objectFit="contain",c.style.position="absolute",u.D.appendChild(c)}e.L=r,e.h=new se(s,o+1,r.ads.length,!1,e.g),e.G=s,o===0&&jt(e,"breakStart"),Pg(e);break}}}n&&!e.h&&(t=e.g.currentTime,e.C&&e.C>t&&(e.g.currentTime=e.C),e.C=null)}}}function to(e){if(e.h){for(;e.D.lastChild;)e.D.removeChild(e.D.firstChild);e.J||e.M.push(e.G.adId),jt(e,"complete");for(var t=g(e.m),n=t.next();!n.done;n=t.next())n=n.value,e.s.hc(n.target,n.type,n.listener);e.m=[],e.u=[],t=e.h.getPositionInSequence(),n=e.h.getSequenceLength(),t===n&&jt(e,"breakEnd"),e.h=null,e.G=null,e.L=null}}function Pg(e){var t=!1;e.g.paused?t=!0:(jt(e,"impression"),jt(e,"start")),e.m.push({target:e.g,type:"volumechange",listener:function(){e.g.muted&&jt(e,"mute")}}),e.m.push({target:e.g,type:"volumechange",listener:function(){e.g.muted||jt(e,"unmute")}}),e.m.push({target:e.g,type:"play",listener:function(){t?(jt(e,"impression"),jt(e,"start"),t=!1):jt(e,"resume")}}),e.m.push({target:e.g,type:"pause",listener:function(){jt(e,"pause")}});for(var n=g(e.m),i=n.next();!i.done;i=n.next())i=i.value,e.s.o(i.target,i.type,i.listener)}function jt(e,t){var n=e.G.trackingEvents.find(function(r){return r.eventType==t});if(n||(n=e.L.adBreakTrackingEvents.find(function(r){return r.eventType==t})),n){n=g(n.beaconUrls);for(var i=n.next();!i.done;i=n.next())(i=i.value)&&i!=""&&(i=dt([i],Kn()),i.method="POST",e.K.request(7,i))}switch(t){case"impression":e.i(new X("ad-impression"));break;case"start":e.i(new X("ad-started",new Map().set("ad",e.h)));break;case"mute":e.i(new X("ad-muted"));break;case"unmute":e.i(new X("ad-volume-changed"));break;case"resume":e.i(new X("ad-resumed"));break;case"pause":e.i(new X("ad-paused"));break;case"firstQuartile":e.i(new X("ad-first-quartile"));break;case"midpoint":e.i(new X("ad-midpoint"));break;case"thirdQuartile":e.i(new X("ad-third-quartile"));break;case"complete":e.i(new X("ad-complete")),e.i(new X("ad-stopped"));break;case"breakStart":e.D.setAttribute("ad-active","true");break;case"breakEnd":e.D.removeAttribute("ad-active")}}function ae(e,t){this.g=e,this.i=null,this.h=t}h=ae.prototype,h.getDuration=function(){return this.i?this.i.duration:-1},h.getMinSuggestedDuration=function(){return this.getDuration()},h.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},h.isPaused=function(){return this.h.paused},h.isSkippable=function(){return this.g.isSkippable()},h.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},h.canSkipNow=function(){return this.getTimeUntilSkippable()==0},h.skip=function(){this.h.currentTime+=this.getRemainingTime()},h.pause=function(){return this.h.pause()},h.play=function(){return this.h.play()},h.getVolume=function(){return this.h.volume},h.setVolume=function(e){this.h.volume=e},h.isMuted=function(){return this.h.muted},h.isLinear=function(){return!0},h.resize=function(){},h.setMuted=function(e){this.h.muted=e},h.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},h.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},h.getTitle=function(){return this.g.getTitle()},h.getDescription=function(){return this.g.getDescription()},h.getVastMediaBitrate=function(){return 0},h.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},h.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},h.getAdId=function(){return this.g.getAdId()},h.getCreativeAdId=function(){return this.g.getCreativeAdId()},h.getAdvertiserName=function(){return this.g.getAdvertiserName()},h.getMediaUrl=function(){return null},h.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},h.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},h.release=function(){this.h=this.i=this.g=null},O("shaka.ads.ServerSideAd",ae),ae.prototype.release=ae.prototype.release,ae.prototype.getPodIndex=ae.prototype.getPodIndex,ae.prototype.getTimeOffset=ae.prototype.getTimeOffset,ae.prototype.getMediaUrl=ae.prototype.getMediaUrl,ae.prototype.getAdvertiserName=ae.prototype.getAdvertiserName,ae.prototype.getCreativeAdId=ae.prototype.getCreativeAdId,ae.prototype.getAdId=ae.prototype.getAdId,ae.prototype.getVastMediaWidth=ae.prototype.getVastMediaWidth,ae.prototype.getVastMediaHeight=ae.prototype.getVastMediaHeight,ae.prototype.getVastMediaBitrate=ae.prototype.getVastMediaBitrate,ae.prototype.getDescription=ae.prototype.getDescription,ae.prototype.getTitle=ae.prototype.getTitle,ae.prototype.getPositionInSequence=ae.prototype.getPositionInSequence,ae.prototype.getSequenceLength=ae.prototype.getSequenceLength,ae.prototype.setMuted=ae.prototype.setMuted,ae.prototype.resize=ae.prototype.resize,ae.prototype.isLinear=ae.prototype.isLinear,ae.prototype.isMuted=ae.prototype.isMuted,ae.prototype.setVolume=ae.prototype.setVolume,ae.prototype.getVolume=ae.prototype.getVolume,ae.prototype.play=ae.prototype.play,ae.prototype.pause=ae.prototype.pause,ae.prototype.skip=ae.prototype.skip,ae.prototype.canSkipNow=ae.prototype.canSkipNow,ae.prototype.getTimeUntilSkippable=ae.prototype.getTimeUntilSkippable,ae.prototype.isSkippable=ae.prototype.isSkippable,ae.prototype.isPaused=ae.prototype.isPaused,ae.prototype.getRemainingTime=ae.prototype.getRemainingTime,ae.prototype.getMinSuggestedDuration=ae.prototype.getMinSuggestedDuration,ae.prototype.getDuration=ae.prototype.getDuration;function Ng(e,t,n,i){var r=this;this.u=e,this.l=t,this.j=null,this.H=NaN,this.i=i,this.I=!1,this.C=this.m=this.s=null,this.D="",this.G=[],this.h=new _e,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.u,e),this.i(new X("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(o){UA(r,o)}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){r.D.length?r.j.resolve(r.D):r.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),r.j=null}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(o){o=o.getAd(),r.m=new ae(o,r.l),r.C&&(r.m.i=r.C),r.i(new X("ad-started",new Map().set("ad",r.m))),r.u.setAttribute("ad-active","true")}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){r.u.removeAttribute("ad-active");var o=r.l.currentTime;r.s&&r.s>o&&(r.l.currentTime=r.s,r.s=null)}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(o){r.C=o.getStreamData().adProgressData,r.m&&(r.m.i=r.C)}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){r.i(new X("ad-first-quartile"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){r.i(new X("ad-midpoint"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){r.i(new X("ad-third-quartile"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){r.i(new X("ad-complete")),r.i(new X("ad-stopped")),r.u.removeAttribute("ad-active"),r.m=null}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){r.i(new X("ad-skipped")),r.i(new X("ad-stopped"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(o){var s=o.getStreamData();o=[],s=g(s.cuepoints);for(var u=s.next();!u.done;u=s.next())u=u.value,o.push({start:u.start,end:u.end});r.G=o,r.i(new X("ad-cue-points-changed",new Map().set("cuepoints",o)))})}h=Ng.prototype,h.configure=function(){},h.stop=function(){this.D="",this.s=null,this.G=[]},h.release=function(){this.stop(),this.h&&this.h.release()},h.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},h.getCuePoints=function(){return this.G};function UA(e,t){e.i(new X("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.H))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.I||e.h.o(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var i=e.g.previousCuePointForStreamTime(n);i&&!i.played&&(e.s=n,e.l.currentTime=i.start)}})}function te(){Ie.call(this),this.g=this.i=this.h=null,this.j=new Cg,this.m=navigator.language,this.l=null}pe(te,Ie),h=te.prototype,h.setLocale=function(e){this.m=e},h.configure=function(e){this.l=e,this.h&&this.h.configure(this.l),this.g&&this.g.configure(this.l)},h.initClientSide=function(e,t,n){var i=this;if(!I.google||!google.ima||!google.ima.AdsLoader)throw new M(2,10,1e4);this.h&&this.h.release(),this.h=new Ju(e,t,this.m,n,function(r){return th(i,r)}),this.h.configure(this.l)},h.release=function(){this.h&&(this.h.release(),this.h=null),this.i&&(this.i.release(),this.i=null),this.g&&(this.g.release(),this.g=null),Ie.prototype.release.call(this)},h.onAssetUnload=function(){this.h&&this.h.stop(),this.i&&this.i.stop(),this.g&&this.g.stop(),this.dispatchEvent(new X("ad-stopped")),this.j=new Cg},h.requestClientSideAds=function(e){if(!this.h)throw new M(1,10,10001);var t=this.h;t.g&&t.g.destroy(),t.l&&t.l.contentComplete(),t.H=Date.now()/1e3,t.l.requestAds(e)},h.updateClientSideAdsRenderingSettings=function(e){if(!this.h)throw new M(1,10,10001);var t=this.h;t.C=e,t.g&&t.g.updateAdsRenderingSettings(t.C)},h.initMediaTailor=function(e,t,n){var i=this;this.i&&this.i.release(),this.i=new hs(e,t,n,function(r){return th(i,r)})},h.requestMediaTailorStream=function(e,t,n){if(!this.i)throw new M(1,10,10005);var i=this.i;return n=n===void 0?"":n,i.l?e=Promise.reject(new M(1,10,10004)):(i.l=new Ve,PA(i,e,t),i.I=n||"",i.W=Date.now()/1e3,e=i.l),e},h.initServerSide=function(e,t){var n=this;if(!I.google||!google.ima||!google.ima.dai)throw new M(2,10,10002);this.g&&this.g.release(),this.g=new Ng(e,t,this.m,function(i){return th(n,i)}),this.g.configure(this.l)},h.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.g)throw new M(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&Ae('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.7.11",n=this.g,n.j?e=Promise.reject(new M(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.I=!0),n.j=new Ve,n.g.requestStream(e),n.D=t||"",n.H=Date.now()/1e3,e=n.j),e},h.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new M(1,10,10003);(e.mpt||e.mpv)&&Ae('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v4.7.11",this.g.g.replaceAdTagParameters(e)},h.getServerSideCuePoints=function(){return wn("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},h.getCuePoints=function(){var e=[];return this.g&&(e=e.concat(this.g.getCuePoints())),this.i&&(e=e.concat(this.i.getCuePoints())),e},h.getStats=function(){var e=this.j;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},h.onManifestUpdated=function(e){this.i&&this.i.onManifestUpdated(e)},h.onDashTimedMetadata=function(e){if(this.g&&e.schemeIdUri=="urn:google:dai:2018"){var t=e.schemeIdUri,n=e.eventElement?e.eventElement.getAttribute("messageData"):null;this.g.g.processMetadata(t,n,e.startTime)}},h.onHlsTimedMetadata=function(e,t){this.g&&this.g.g.processMetadata("ID3",e.data,t)},h.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)};function th(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.j.h.push(t.loadTime);break;case"ad-started":e.j.g++;break;case"ad-complete":e.j.i++;break;case"ad-skipped":e.j.j++}e.dispatchEvent(t)}O("shaka.ads.AdManager",te),te.prototype.onCueMetadataChange=te.prototype.onCueMetadataChange,te.prototype.onHlsTimedMetadata=te.prototype.onHlsTimedMetadata,te.prototype.onDashTimedMetadata=te.prototype.onDashTimedMetadata,te.prototype.onManifestUpdated=te.prototype.onManifestUpdated,te.prototype.getStats=te.prototype.getStats,te.prototype.getCuePoints=te.prototype.getCuePoints,te.prototype.getServerSideCuePoints=te.prototype.getServerSideCuePoints,te.prototype.replaceServerSideAdTagParameters=te.prototype.replaceServerSideAdTagParameters,te.prototype.requestServerSideStream=te.prototype.requestServerSideStream,te.prototype.initServerSide=te.prototype.initServerSide,te.prototype.requestMediaTailorStream=te.prototype.requestMediaTailorStream,te.prototype.initMediaTailor=te.prototype.initMediaTailor,te.prototype.updateClientSideAdsRenderingSettings=te.prototype.updateClientSideAdsRenderingSettings,te.prototype.requestClientSideAds=te.prototype.requestClientSideAds,te.prototype.onAssetUnload=te.prototype.onAssetUnload,te.prototype.release=te.prototype.release,te.prototype.initClientSide=te.prototype.initClientSide,te.prototype.configure=te.prototype.configure,te.prototype.setLocale=te.prototype.setLocale,te.ADS_LOADED="ads-loaded",te.AD_STARTED="ad-started",te.AD_FIRST_QUARTILE="ad-first-quartile",te.AD_MIDPOINT="ad-midpoint",te.AD_THIRD_QUARTILE="ad-third-quartile",te.AD_COMPLETE="ad-complete",te.AD_STOPPED="ad-stopped",te.AD_SKIPPED="ad-skipped",te.AD_VOLUME_CHANGED="ad-volume-changed",te.AD_MUTED="ad-muted",te.AD_PAUSED="ad-paused",te.AD_RESUMED="ad-resumed",te.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",te.CUEPOINTS_CHANGED="ad-cue-points-changed",te.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",te.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",te.AD_CLICKED="ad-clicked",te.AD_PROGRESS="ad-progress",te.AD_BUFFERING="ad-buffering",te.AD_IMPRESSION="ad-impression",te.AD_DURATION_CHANGED="ad-duration-changed",te.AD_CLOSED="ad-closed",te.AD_LOADED="ad-loaded",te.ALL_ADS_COMPLETED="all-ads-completed",te.AD_LINEAR_CHANGED="ad-linear-changed",te.AD_METADATA="ad-metadata",te.AD_RECOVERABLE_ERROR="ad-recoverable-error",te.AD_ERROR="ad-error",te.AD_BREAK_READY="ad-break-ready",te.AD_INTERACTION="ad-interaction",Qu=function(){return new te};function bg(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(n instanceof Event||n instanceof X){var i={};for(r in n)(t=n[r])&&typeof t=="object"?r=="detail"&&(i[r]=t):r in Event||(i[r]=t);return i}if(n instanceof Error){var r=new Set(["name","message","stack"]);for(i in n)r.add(i);for(t=g(Object.getOwnPropertyNames(n)),i=t.next();!i.done;i=t.next())r.add(i.value);for(t={},r=g(r),i=r.next();!i.done;i=r.next())i=i.value,t[i]=n[i];n={__type__:"Error",contents:t}}else if(n instanceof TimeRanges){for(r={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=g(Mi(n)),i=n.next();!i.done;i=n.next())i=i.value,t=i.end,r.start.push(i.start),r.end.push(t);n=r}else n=n instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:0>n?"-Infinity":"Infinity":n;return n}})}function nh(e){return JSON.parse(e,function(t,n){if(n=="NaN")var i=NaN;else if(n=="-Infinity")i=-1/0;else if(n=="Infinity")i=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")i=OA(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")i=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(i in t)n[i]=t[i];i=n}else i=n;return i})}function OA(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var _g="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),jA="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),ih=["loop","playbackRate"],BA=["pause","play"],ta={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10,getManifestType:10},na={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},rh={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},Ug=[["getConfiguration","configure"]],Og=[["isTextTrackVisible","setTextTrackVisibility"]],FA="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),GA=["attach","attachCanvas","detach","load","unload"];function oh(e,t,n,i,r,o,s){var u=this;this.I=e,this.M=s,this.j=new fe(t),this.N=n,this.C=!1,this.u=i,this.H=r,this.K=o,this.h=this.m=!1,this.L="",this.s=null,this.D=function(){return uh(u)},this.G=function(a,l){switch(a=nh(l),a.type){case"event":var c=a.targetName,d=Ap(a.event);u.u(c,d);break;case"update":c=a.update;for(d in c){a=u.g[d]||{};for(var f in c[d])a[f]=c[d][f]}u.C&&(u.N(),u.C=!1);break;case"asyncComplete":if(d=a.id,f=a.error,a=u.i[d],delete u.i[d],a)if(f){d=new M(f.severity,f.category,f.code);for(c in f)d[c]=f[c];a.reject(d)}else a.resolve()}},this.g={video:{},player:{}},this.J=0,this.i={},this.l=null,ps.add(this)}h=oh.prototype,h.destroy=function(){return ps.delete(this),ah(this),Cn&&Fg(this),this.j&&(this.j.stop(),this.j=null),this.H=this.u=null,this.h=this.m=!1,this.G=this.D=this.l=this.i=this.g=this.s=null,Promise.resolve()},h.Ba=function(){return this.h},h.Je=function(){return this.L},h.init=function(){if(this.I.length)if(I.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.j.Qa();var e=new chrome.cast.SessionRequest(this.I,[],null,this.M,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=g(ps),i=n.next();!i.done;i=n.next())Bg(i.value,t)},function(t){for(var n=g(ps),i=n.next();!i.done;i=n.next())i=i.value,ia=t=="available",i.j.Qa()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),ia&&this.j.S(zA),(e=Cn)&&e.status!=chrome.cast.SessionStatus.STOPPED?Bg(this,e):Cn=null}else I.__onGCastApiAvailable!==Gg&&(ra=I.__onGCastApiAvailable||null,I.__onGCastApiAvailable=Gg)},h.kg=function(e){this.s=e,this.h&&ds(this,{type:"appData",appData:this.s})},h.cast=function(e){var t=this;return k(function(n){if(!t.m)throw new M(1,8,8e3);if(!ia)throw new M(1,8,8001);if(t.h)throw new M(1,8,8002);return t.l=new Ve,chrome.cast.requestSession(function(i){return sh(t,e,i)},function(i){return jg(t,i)}),y(n,t.l,0)})};function VA(e){if(e.h){var t=e.K();chrome.cast.requestSession(function(n){return sh(e,t,n)},function(n){return jg(e,n)})}}h.Jc=function(){if(this.h){if(ah(this),Cn){Fg(this);try{Cn.stop(function(){},function(){})}catch{}Cn=null}uh(this)}},h.get=function(e,t){var n=this;if(e=="video"){if(BA.includes(t))return function(){return n.kh.apply(n,[e,t].concat(F(vn.apply(0,arguments))))}}else if(e=="player"){if(rh[t]&&!this.get("player","isLive")())return function(){};if(FA.includes(t))return function(){return n.kh.apply(n,[e,t].concat(F(vn.apply(0,arguments))))};if(GA.includes(t))return function(){return n.ej.apply(n,[e,t].concat(F(vn.apply(0,arguments))))};if(ta[t]||na[t])return function(){return n.g[e][t]}}return this.g[e][t]},h.set=function(e,t,n){this.g[e][t]=n,ds(this,{type:"set",targetName:e,property:t,value:n})};function sh(e,t,n){Cn=n,n.addUpdateListener(e.D),n.addMessageListener("urn:x-cast:com.google.shaka.v2",e.G),uh(e),ds(e,{type:"init",initState:t,appData:e.s}),e.l.resolve()}function jg(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.l.reject(new M(2,8,n,t))}h.kh=function(e,t){ds(this,{type:"call",targetName:e,methodName:t,args:vn.apply(2,arguments)})},h.ej=function(e,t){var n=vn.apply(2,arguments),i=new Ve,r=this.J.toString();this.J++,this.i[r]=i;try{ds(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:r})}catch(o){i.reject(o)}return i};function Bg(e,t){var n=e.K();e.l=new Ve,e.C=!0,sh(e,n,t)}function Fg(e){var t=Cn;t.removeUpdateListener(e.D),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.G)}function uh(e){var t=Cn?Cn.status=="connected":!1;if(e.h&&!t){e.H();for(var n in e.g)e.g[n]={};ah(e)}e.h=t,e.L=t?Cn.receiver.friendlyName:"",e.j.Qa()}function ah(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new M(1,7,7e3))}}function ds(e,t){t=bg(t);var n=Cn;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},RE)}catch(i){throw t=new M(2,8,8005,i),n=new X("error",new Map().set("detail",t)),e.u("player",n),e.Jc(),t}}var zA=.02,ia=!1,Cn=null,ra=null,ps=new Set;function Gg(e){if(ra?I.__onGCastApiAvailable=ra:delete I.__onGCastApiAvailable,ra=null,e)for(var t=g(ps),n=t.next();!n.done;n=t.next())n.value.init();typeof I.__onGCastApiAvailable=="function"&&I.__onGCastApiAvailable(e)}function Qe(e,t,n,i){i=i===void 0?!1:i,Ie.call(this);var r=this;this.i=e,this.h=t,this.m=this.s=this.j=this.u=this.l=null,this.G=n,this.D=i,this.C=new Map,this.g=new oh(n,function(){return zg(r)},function(){return Kg(r)},function(o,s){return Wg(r,o,s)},function(){return Hg(r)},function(){return lh(r)},i),KA(this)}pe(Qe,Ie),h=Qe.prototype,h.destroy=function(e){return e&&this.g.Jc(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.u=this.l=this.i=null,Ie.prototype.release.call(this),Promise.all(e)},h.cc=function(){return this.l},h.Mc=function(){return this.u},h.kf=function(){return this.g.m&&ia},h.Ba=function(){return this.g.Ba()},h.Je=function(){return this.g.Je()},h.cast=function(){var e=this,t;return k(function(n){return n.g==1?(t=lh(e),y(n,e.g.cast(t),2)):e.h?y(n,e.h.Wc(),0):n.return()})},h.kg=function(e){this.g.kg(e)},h.vh=function(){VA(this.g)},h.Jc=function(){this.g.Jc()},h.Jg=function(e,t){t=t===void 0?!1:t;var n=this;return k(function(i){if(i.g==1)return e==n.G&&t==n.D?i.return():(n.G=e,n.D=t,n.g.Jc(),y(i,n.g.destroy(),2));n.g=null,n.g=new oh(e,function(){return zg(n)},function(){return Kg(n)},function(r,o){return Wg(n,r,o)},function(){return Hg(n)},function(){return lh(n)},t),n.g.init(),K(i)})};function KA(e){e.g.init(),e.m=new _e;for(var t=g(_g),n=t.next();!n.done;n=t.next())e.m.o(e.i,n.value,function(o){e.g.Ba()||(o=Ap(o),e.j.dispatchEvent(o))});for(var i in Js)e.m.o(e.h,Js[i],function(o){e.g.Ba()||e.s.dispatchEvent(o)});e.l={},t={};for(var r in e.i)t.$c=r,Object.defineProperty(e.l,t.$c,{configurable:!1,enumerable:!0,get:function(o){return function(){return WA(e,o.$c)}}(t),set:function(o){return function(s){var u=o.$c;e.g.Ba()?e.g.set("video",u,s):e.i[u]=s}}(t)}),t={$c:t.$c};e.u={},Vg(e,function(o){Object.defineProperty(e.u,o,{configurable:!1,enumerable:!0,get:function(){return XA(e,o)}})}),HA(e),e.j=new Ie,e.j.we=e.l,e.s=new Ie,e.s.we=e.u}function HA(e){var t=new Map;Vg(e,function(n,i){t.has(i)?(i=t.get(i),n.length<i.length?e.C.set(n,i):e.C.set(i,n)):t.set(i,n)})}function Vg(e,t){function n(a){return a=="constructor"||typeof i[a]!="function"?!1:!r.has(a)}var i=e.h,r=new Set,o;for(o in i)n(o)&&(r.add(o),t(o,i[o]));for(e=Object.getPrototypeOf(i),o=Object.getPrototypeOf({});e&&e!=o;){for(var s=g(Object.getOwnPropertyNames(e)),u=s.next();!u.done;u=s.next())u=u.value,n(u)&&(r.add(u),t(u,i[u]));e=Object.getPrototypeOf(e)}}function lh(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.Gf(),startTime:null};e.i.pause();for(var n=g(ih),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.i[i];for(e.i.ended||(t.startTime=e.i.currentTime),n=g(Ug),i=n.next();!i.done;i=n.next()){var r=i.value;i=r[1],r=e.h[r[0]](),t.player[i]=r}for(n=g(Og),i=n.next();!i.done;i=n.next())r=i.value,i=r[1],r=e.h[r[0]](),t.playerAfterLoad[i]=r;return t}function zg(e){var t=new X("caststatuschanged");e.dispatchEvent(t)}function Kg(e){var t=new X(e.l.paused?"pause":"play");e.j.dispatchEvent(t)}function Hg(e){for(var t=g(Ug),n=t.next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.g.get("player",i[0])(),e.h[n](i)}var r=e.g.get("player","getAssetUri")();i=e.g.get("video","ended"),t=Promise.resolve();var o=e.i.autoplay;n=null,i||(n=e.g.get("video","currentTime"));var s;(i=e.g.get("player","getTextTracks")())&&i.length&&(s=i.find(function(l){return l.active}));var u=e.g.get("player","isTextTrackVisible")();r&&(e.i.autoplay=!1,t=e.h.load(r,n));var a={};for(n=g(ih),i=n.next();!i.done;i=n.next())i=i.value,a[i]=e.g.get("video",i);t.then(function(){if(e.i){for(var l=g(ih),c=l.next();!c.done;c=l.next())c=c.value,e.i[c]=a[c];for(l=g(Og),c=l.next();!c.done;c=l.next()){var d=c.value;c=d[1],d=e.g.get("player",d[0])(),e.h[c](d)}e.h.Oe(u),s&&e.h.ig(s.language,s.roles,s.forced),e.i.autoplay=o,r&&e.i.play()}},function(l){l=new Map().set("detail",l),l=new X("error",l),e.h.dispatchEvent(l)})}function WA(e,t){if(t=="addEventListener")return function(i,r,o){return e.j.addEventListener(i,r,o)};if(t=="removeEventListener")return function(i,r,o){return e.j.removeEventListener(i,r,o)};if(e.g.Ba()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.Ba()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function XA(e,t){if(e.C.has(t)&&(t=e.C.get(t)),t=="addEventListener")return function(n,i,r){return e.s.addEventListener(n,i,r)};if(t=="removeEventListener")return function(n,i,r){return e.s.removeEventListener(n,i,r)};if(t=="getMediaElement")return function(){return e.l};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.Zb()};if(t=="getDrmEngine")return function(){return e.h.m};if(t=="getAdManager")return function(){return e.h.ee()};if(t=="setVideoContainer")return function(n){return e.h.rg(n)};if(e.g.Ba()){if(t=="getManifest"||t=="drmInfo")return function(){return Ae(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return Ae(t+"() does not work while casting!"),Promise.resolve()}}return e.g.Ba()&&Object.keys(e.g.g.video).length==0&&(ta[t]||na[t])||!e.g.Ba()?e.h[t].bind(e.h):e.g.get("player",t)}function Wg(e,t,n){e.g.Ba()&&(t=="video"?e.j.dispatchEvent(n):t=="player"&&e.s.dispatchEvent(n))}O("shaka.cast.CastProxy",Qe),Qe.prototype.changeReceiverId=Qe.prototype.Jg,Qe.prototype.forceDisconnect=Qe.prototype.Jc,Qe.prototype.suggestDisconnect=Qe.prototype.vh,Qe.prototype.setAppData=Qe.prototype.kg,Qe.prototype.cast=Qe.prototype.cast,Qe.prototype.receiverName=Qe.prototype.Je,Qe.prototype.isCasting=Qe.prototype.Ba,Qe.prototype.canCast=Qe.prototype.kf,Qe.prototype.getPlayer=Qe.prototype.Mc,Qe.prototype.getVideo=Qe.prototype.cc,Qe.prototype.destroy=Qe.prototype.destroy;function gt(e,t,n,i){Ie.call(this);var r=this;this.g=e,this.h=t,this.j=new _e,this.J={video:e,player:t},this.G=n||function(){},this.K=i||function(o){return o},this.i=null,this.H=!1,this.s=!0,this.m=0,this.D=!1,this.C=!0,this.u=this.l=null,this.I=new fe(function(){ch(r)}),YA(this)}pe(gt,Ie),h=gt.prototype,h.isConnected=function(){return this.H},h.Ji=function(){return this.s},h.rj=function(e){this.i=e},h.Nh=function(){this.i=null},h.sj=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},h.qj=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},h.pj=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},h.destroy=function(){var e=this,t,n;return k(function(i){if(i.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.h&&(t.push(e.h.destroy()),e.h=null),e.I&&(e.I.stop(),e.I=null),e.g=null,e.J=null,e.G=null,e.H=!1,e.s=!0,e.l=null,e.u=null,Ie.prototype.release.call(e),y(i,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),K(i)})};function YA(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return Xg(e)},t.onSenderDisconnected=function(){return Xg(e)},t.onSystemVolumeChanged=function(){var r=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();r&&fi(e,{type:"update",update:{video:{volume:r.level,muted:r.muted}}},e.l),fi(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.u=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.u.onMessage=function(r){return QA(e,r)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(r){return $A(e,r)},t.start(),t=g(_g);for(var n=t.next();!n.done;n=t.next())e.j.o(e.g,n.value,function(r){return Yg(e,"video",r)});for(var i in Js)e.j.o(e.h,Js[i],function(r){return Yg(e,"player",r)});cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.h.ng(3840,2160):e.h.ng(1920,1080),e.j.o(e.g,"loadeddata",function(){e.D=!0}),e.j.o(e.h,"loading",function(){e.s=!1,no(e)}),e.j.o(e.g,"playing",function(){e.s=!1,no(e)}),e.j.o(e.g,"pause",function(){no(e)}),e.j.o(e.h,"unloading",function(){e.s=!0,no(e)}),e.j.o(e.g,"ended",function(){new fe(function(){e.g&&e.g.ended&&(e.s=!0,no(e))}).S(ZA)})}function Xg(e){e.m=0,e.C=!0,e.H=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,no(e)}function no(e){var t;k(function(n){if(n.g==1)return y(n,Promise.resolve(),2);if(!e.h)return n.return();t=new X("caststatuschanged"),e.dispatchEvent(t),qg(e)||gi(e),K(n)})}function qA(e,t,n){var i,r,o,s,u,a,l,c,d,f;k(function(p){switch(p.g){case 1:for(i in t.player)r=t.player[i],e.h[i](r);return e.G(n),o=e.g.autoplay,t.manifest?(e.g.autoplay=!1,le(p,5),y(p,e.h.load(t.manifest,t.startTime),7)):y(p,Promise.resolve(),3);case 7:Ee(p,3);break;case 5:return s=ce(p),u=new Map().set("detail",s),a=new X("error",u),e.h&&e.h.dispatchEvent(a),p.return();case 3:if(!e.h)return p.return();for(l in t.video)c=t.video[l],e.g[l]=c;for(d in t.playerAfterLoad)f=t.playerAfterLoad[d],e.h[d](f);e.g.autoplay=o,t.manifest&&(e.g.play(),gi(e)),K(p)}})}function Yg(e,t,n){e.h&&(ch(e),fi(e,{type:"event",targetName:t,event:n},e.l))}function ch(e){e.I.S(JA);for(var t={video:{},player:{}},n=g(jA),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.g[i];if(e.h.R())for(var r in rh)e.m%rh[r]==0&&(t.player[r]=e.h[r]());for(var o in ta)e.m%ta[o]==0&&(t.player[o]=e.h[o]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),fi(e,{type:"update",update:t},e.l);for(var s in na)e.m%na[s]==0&&(t={player:{}},t.player[s]=e.h[s](),fi(e,{type:"update",update:t},e.l));e.D&&(e.m+=1),qg(e)}function qg(e){return e.C&&(e.g.duration||e.h.R())?(hh(e),e.C=!1,!0):!1}function hh(e,t){var n={contentId:e.h.Gf(),streamType:e.h.R()?"LIVE":"BUFFERED",contentType:""};e.h.R()||(n.duration=e.g.duration),e.i&&(n.metadata=e.i),gi(e,t===void 0?0:t,n)}function $A(e,t){var n=nh(t.data);switch(n.type){case"init":e.m=0,e.D=!1,e.C=!0,qA(e,n.initState,n.appData),ch(e);break;case"appData":e.G(n.appData);break;case"set":var i=n.targetName,r=n.property;if(n=n.value,i=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),r=="volume"){t.setSystemVolumeLevel(n);break}else if(r=="muted"){t.setSystemVolumeMuted(n);break}}e.J[i][r]=n;break;case"call":i=e.J[n.targetName],i[n.methodName].apply(i,n.args);break;case"asyncCall":i=n.targetName,r=n.methodName,i=="player"&&r=="load"&&(e.m=0,e.D=!1);var o=n.id,s=t.senderId;t=e.J[i],n=t[r].apply(t,n.args),i=="player"&&r=="load"&&(n=n.then(function(){e.C=!0})),n.then(function(){return $g(e,s,o,null)},function(u){return $g(e,s,o,u)})}}function QA(e,t){var n=nh(t.data);switch(n.type){case"PLAY":e.g.play(),gi(e);break;case"PAUSE":e.g.pause(),gi(e);break;case"SEEK":t=n.currentTime;var i=n.resumeState;t!=null&&(e.g.currentTime=Number(t)),i&&i=="PLAYBACK_START"?(e.g.play(),gi(e)):i&&i=="PLAYBACK_PAUSE"&&(e.g.pause(),gi(e));break;case"STOP":e.h.Wc().then(function(){e.h&&gi(e)});break;case"GET_STATUS":hh(e,Number(n.requestId));break;case"VOLUME":i=n.volume,t=i.level,i=i.muted;var r=e.g.volume,o=e.g.muted;t!=null&&(e.g.volume=Number(t)),i!=null&&(e.g.muted=i),r==e.g.volume&&o==e.g.muted||gi(e);break;case"LOAD":e.m=0,e.D=!1,e.C=!1,t=n.media,i=n.currentTime,r=e.K(t.contentId),o=n.autoplay||!0,e.G(t.customData),o&&(e.g.autoplay=!0),e.h.load(r,i).then(function(){e.h&&hh(e)}).catch(function(s){var u="LOAD_FAILED";s.category==7&&s.code==7e3&&(u="LOAD_CANCELLED"),fi(e,{requestId:Number(n.requestId),type:u},e.u)});break;default:fi(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.u)}}function $g(e,t,n,i){e.h&&fi(e,{type:"asyncComplete",id:n,error:i},e.l,t)}function fi(e,t,n,i){e.H&&(e=bg(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function gi(e,t,n){n=n===void 0?null:n;var i={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.s?eS:e.h.yd()?nS:e.g.paused?iS:tS,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(i.media=n),fi(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[i]},e.u)}O("shaka.cast.CastReceiver",gt),gt.prototype.destroy=gt.prototype.destroy,gt.prototype.setContentArtist=gt.prototype.pj,gt.prototype.setContentImage=gt.prototype.qj,gt.prototype.setContentTitle=gt.prototype.sj,gt.prototype.clearContentMetadata=gt.prototype.Nh,gt.prototype.setContentMetadata=gt.prototype.rj,gt.prototype.isIdle=gt.prototype.Ji,gt.prototype.isConnected=gt.prototype.isConnected;var JA=.5,ZA=5,eS="IDLE",tS="PLAYING",nS="BUFFERING",iS="PAUSED";function Qg(e,t,n,i,r){if(i>=r)return null;for(var o=-1,s=-1,u=0;u<n.length;u++)if(n[u].some(function(S){return S!=null&&S.g.trim()!=""})){o=u;break}for(u=n.length-1;0<=u;u--)if(n[u].some(function(S){return S!=null&&S.g.trim()!=""})){s=u;break}if(o===-1||s===-1)return null;for(var a=u=!1,l="white",c="black",d=dh(i,r,u,a,l,c);o<=s;o++){for(var f=n[o],p=-1,m=-1,v=0;v<f.length;v++)if(f[v]!=null&&f[v].g.trim()!==""){p=v;break}for(v=f.length-1;0<=v;v--)if(f[v]!=null&&f[v].g.trim()!==""){m=v;break}if(p===-1||m===-1)f=Jg(i,r),e.nestedCues.push(f);else{for(;p<=m;p++)if(v=f[p]){var E=v.l,w=v.i,T=v.j,x=v.h;(E!=u||w!=a||T!=l||x!=c)&&(d.payload&&e.nestedCues.push(d),d=dh(i,r,E,w,T,x),u=E,a=w,l=T,c=x),d.payload+=v.g}else d.payload+=" ";d.payload&&e.nestedCues.push(d),o!==s&&(d=Jg(i,r),e.nestedCues.push(d)),d=dh(i,r,u,a,l,c)}}return e.nestedCues.length?{cue:e,stream:t}:null}function dh(e,t,n,i,r,o){return e=new je(e,t,""),n&&e.textDecoration.push("underline"),i&&(e.fontStyle="italic"),e.color=r,e.backgroundColor=o,e}function Jg(e,t){return e=new je(e,t,""),e.lineBreak=!0,e}function Zg(e,t,n,i,r){this.g=e,this.l=t,this.i=n,this.h=i,this.j=r}function ph(e,t){this.i=[],this.g=1,this.h=0,this.C=e,this.u=t,this.j=this.m=!1,this.l="white",this.s="black",fs(this)}function oa(e,t,n){var i="CC"+((e.C<<1|e.u)+1),r=new je(t,n,"");r.lineInterpretation=1;var o=uS.get(e.g);return o&&(r.line=o),Qg(r,i,e.i,t,n)}function fs(e){mi(e,0,15),e.g=1}function io(e,t,n){if(!(32>n||127<n)){var i="";switch(t){case gs:i=rm.has(n)?rm.get(n):String.fromCharCode(n);break;case tm:i=rS.get(n);break;case nm:e.i[e.g].pop(),i=oS.get(n);break;case im:e.i[e.g].pop(),i=sS.get(n)}i&&e.i[e.g].push(new Zg(i,e.m,e.j,e.s,e.l))}}function em(e,t,n,i){if(!(0>n||0>t))if(t>=n)for(--i;0<=i;i--)e.i[t+i]=e.i[n+i].map(function(o){return o});else for(var r=0;r<i;r++)e.i[t+r]=e.i[n+r].map(function(o){return o})}function mi(e,t,n){for(var i=0;i<=n;i++)e.i[t+i]=[]}var gs=0,tm=1,nm=2,im=3,rm=new Map([[39,""],[42,""],[92,""],[92,""],[94,""],[95,""],[96,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),rS=new Map([[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),oS=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,"*"],[41,"'"],[42,""],[43,""],[44,""],[45,""],[46,""],[47,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),sS=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,""],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),uS=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function sa(e,t){this.h=um,this.s=new ph(e,t),this.i=new ph(e,t),this.g=this.j=new ph(e,t),this.l=0,this.m=null}function fh(e,t,n){e.g=e.i;var i=e.g,r=null;return e.h!==ua&&e.h!==ms&&(r=oa(i,e.l,n),n=e.i,n.g=0<n.h?n.h:0,mi(n,0,15),n=e.j,n.g=0<n.h?n.h:0,mi(n,0,15),i.g=15),e.h=ua,i.h=t,r}function om(e){e.h=aS,e.g=e.j,e.g.h=0}function sm(e){Oi("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.s,e.h=ms}var um=0,aS=1,ua=3,ms=4,lS="black green blue cyan red yellow magenta black".split(" "),am="white green blue cyan red yellow magenta white_italics".split(" ");function lm(e,t){this.K=t,this.N=e,this.L=this.l=!1,this.m=this.s=this.I=this.M=this.J=0,this.H=dS,this.i=[],this.g=this.h=this.j=0,this.G=this.C=!1,this.D="white",this.u="black",gh(this)}function gh(e){e.i=[];for(var t=0;16>t;t++)e.i.push(mh())}function mh(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function nr(e,t){cm(e)&&(e.i[e.h][e.g]=new Zg(t,e.G,e.C,e.u,e.D),e.g++)}function cm(e){var t=e.g<e.m&&0<=e.g;return e.h<e.s&&0<=e.h&&t}lm.prototype.isVisible=function(){return this.l};function ir(e,t,n){var i=new je(e.j,t,"");i.textAlign=e.H===cS?"left":e.H===hS?"right":ei;var r=i.region;switch(e.K&&(r.id+="svc"+e.K),r.id+="win"+e.N,r.height=e.s,r.width=e.m,r.heightUnits=2,r.widthUnits=2,r.viewportAnchorX=e.J,r.viewportAnchorY=e.M,r.viewportAnchorUnits=e.L?nn:2,e.I){case pS:r.regionAnchorX=0,r.regionAnchorY=0;break;case fS:r.regionAnchorX=50,r.regionAnchorY=0;break;case gS:r.regionAnchorX=100,r.regionAnchorY=0;break;case mS:r.regionAnchorX=0,r.regionAnchorY=50;break;case vS:r.regionAnchorX=50,r.regionAnchorY=50;break;case yS:r.regionAnchorX=100,r.regionAnchorY=50;break;case ES:r.regionAnchorX=0,r.regionAnchorY=100;break;case TS:r.regionAnchorX=50,r.regionAnchorY=100;break;case wS:r.regionAnchorX=100,r.regionAnchorY=100}return(n=Qg(i,"svc"+n,e.i,e.j,t))&&(e.j=t),n}var cS=0,hS=1,dS=2,pS=0,fS=1,gS=2,mS=3,vS=4,yS=5,ES=6,TS=7,wS=8;function AS(){this.i=[],this.h=null,this.g=0}function SS(e,t){t.type===3?(e.g=2*(t.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new aa(e.h)),e.h=null,e.g=0))}function aa(e){this.g=0,this.h=e}aa.prototype.xa=function(){return this.g<this.h.length},aa.prototype.Ga=function(){return this.g};function lt(e){if(!e.xa())throw new M(2,2,3e3);return e.h[e.g++]}aa.prototype.skip=function(e){if(this.g+e>this.h.length)throw new M(2,2,3e3);this.g+=e};function xS(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function IS(e,t,n,i){if(128<=n&&135>=n)i=n&7,e.h[i]&&(e.g=e.h[i]);else{if(n===136){n=lt(t).value,t=null,n=g(vs(e,n));for(var r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()&&(t=ir(r,i,e.i)),gh(r);return t}if(n===137)for(t=lt(t).value,t=g(vs(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=i),n.l=!0;else{if(n===138){for(n=lt(t).value,t=null,n=g(vs(e,n)),r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()&&(t=ir(r,i,e.i)),r.l=!1;return t}if(n===139){for(n=lt(t).value,t=null,n=g(vs(e,n)),r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()?t=ir(r,i,e.i):r.j=i,r.l=!r.l;return t}if(n===140)return t=lt(t).value,hm(e,t,i);if(n===143)return i=hm(e,255,i),dm(e),i;if(n===144)t.skip(1),i=lt(t).value,e.g&&(e.g.C=0<(i&128),e.g.G=0<(i&64));else if(n===145)i=lt(t).value,n=lt(t).value,t.skip(1),e.g&&(t=pm((n&48)>>4,(n&12)>>2,n&3),e.g.D=pm((i&48)>>4,(i&12)>>2,i&3),e.g.u=t);else if(n===146)i=lt(t).value,t=lt(t).value,e.g&&(e=e.g,e.h=i&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),i=lt(t).value,t.skip(1),e.g&&(e.g.H=i&3);else if(152<=n&&159>=n){if(n=(n&15)-8,r=e.h[n]!==null,!r){var o=new lm(n,e.i);o.j=i,e.h[n]=o}i=lt(t).value,o=lt(t).value;var s=lt(t).value,u=lt(t).value,a=lt(t).value;t=lt(t).value,r&&!(t&7)||(t=e.h[n],t.h=0,t.g=0,t.G=!1,t.C=!1,t.D="white",t.u="black"),t=e.h[n],t.l=0<(i&32),t.M=o&127,t.J=s,t.I=(u&240)>>4,t.L=0<(o&128),t.s=(u&15)+1,t.m=(a&63)+1,e.g=e.h[n]}}}return null}function vs(e,t){for(var n=[],i=0;8>i;i++)(t&1)===1&&e.h[i]&&n.push(i),t>>=1;return n}function hm(e,t,n){var i=null;t=g(vs(e,t));for(var r=t.next();!r.done;r=t.next()){r=r.value;var o=e.h[r];o.isVisible()&&(i=ir(o,n,e.i)),e.h[r]=null}return i}function dm(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function pm(e,t,n){var i={0:0,1:0,2:1,3:1};return e=i[e],t=i[t],n=i[n],CS[e<<2|t<<1|n]}var fm=new Map([[32," "],[33,""],[37,""],[42,""],[44,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[57,""],[58,""],[60,""],[61,""],[63,""],[118,""],[119,""],[120,""],[121,""],[122,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),CS="black blue green cyan red magenta yellow white".split(" ");function ro(){this.h=[],this.g=[],this.i=new AS,this.l=0,this.m=new Map([["CC1",new sa(0,0)],["CC2",new sa(0,1)],["CC3",new sa(1,0)],["CC4",new sa(1,1)]]),this.u=this.s=0,this.j=new Map,this.D=!0,this.C=new Set,vh(this)}ro.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,vh(this),e=g(this.j.values());for(var t=e.next();!t.done;t=e.next())dm(t.value)};function vh(e){e.s=0,e.u=0;for(var t=g(e.m.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=um,n.g=n.j,n.m=null,fs(n.i),fs(n.j),fs(n.s);e.D=!0}ro.prototype.extract=function(e,t){if(this.D){for(var n=g(this.m.values()),i=n.next();!i.done;i=n.next())i.value.l=t;this.D=!1}if(e=new be(e,0),!(8>e.getLength())&&e.ra()===181&&e.Ua()===49&&e.O()===1195456820&&e.ra()===3&&(n=e.ra(),(n&64)!==0))for(n&=31,e.skip(1),i=0;i<n;i++){var r=e.ra(),o=(r&4)>>2,s=e.ra(),u=e.ra();o&&(r&=3,r===0||r===1?this.h.push({pts:t,type:r,jb:s,Jb:u,order:this.h.length}):(this.g.push({pts:t,type:r,value:s,order:this.g.length}),this.g.push({pts:t,type:2,value:u,order:this.g.length})))}},ro.prototype.decode=function(){function e(r,o){return r.pts-o.pts||r.order-o.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=g(this.h),i=n.next();!i.done;i=n.next())(i=MS(this,i.value))&&t.push(i);for(n=g(this.g),i=n.next();!i.done;i=n.next())SS(this.i,i.value);for(n=g(this.i.i),i=n.next();!i.done;i=n.next())i=kS(this,i.value),t.push.apply(t,F(i));return this.i.i=[],this.h=[],this.g=[],t};function MS(e,t){var n=t.type;if((t.jb&112)===16){var i=t.jb>>3&1;n===0?e.s=i:e.u=i}if(i="CC"+((n<<1|(n?e.u:e.s))+1),n=e.m.get(i),t.jb===255&&t.Jb===255||!t.jb&&!t.Jb||!gm(t.jb)||!gm(t.Jb))return 45<=++e.l&&vh(e),null;if(e.l=0,t.jb&=127,t.Jb&=127,!t.jb&&!t.Jb)return null;if(e.C.add(i),e=null,(t.jb&112)===16)e:{if(i=t.jb,e=t.Jb,n.m===(i<<8|e))n.m=null;else if(n.m=i<<8|e,(i&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(i&7)<<1|e>>5&1];var r=(e&30)>>1;i="white";var o=!1;7>r?i=am[r]:r===7&&(o=!0),e=(e&1)===1,n.h!==ms&&(r=n.g,n.h===ua&&t!==r.g&&(n=1+t-r.h,em(r,n,1+r.g-r.h,r.h),mi(r,0,n-1),mi(r,t+1,15-t)),r.g=t,r.m=e,r.j=o,r.l=i,r.s="black")}else if((i&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",io(n.g,gs,32),i=!1,t=am[(e&14)>>1],t==="white_italics"&&(t="white",i=!0),n.g.m=(e&1)===1,n.g.j=i,n.g.l=t;else if((i&247)===16&&(e&240)===32||(i&247)===23&&(e&255)===45)t="black",!(i&7)&&(t=lS[(e&14)>>1]),n.g.s=t;else if((i&247)===17&&(e&240)===48)io(n.g,tm,e);else if((i&246)===18&&(e&224)===32)io(n.g,i&1?im:nm,e);else if((i&246)===20&&(e&240)===32){switch(e=t.pts,i=null,t.Jb){case 32:om(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:i=fh(n,2,e);break;case 38:i=fh(n,3,e);break;case 39:i=fh(n,4,e);break;case 40:io(n.g,gs,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:fs(n.s),sm(n);break;case 43:sm(n);break;case 44:t=n.i,i=null,n.h!==ms&&(i=oa(t,n.l,e)),mi(t,0,15);break;case 45:t=n.g,n.h!==ua?i=null:(i=oa(t,n.l,e),o=t.g-t.h+1,em(t,o-1,o,t.h),mi(t,0,o-1),mi(t,t.g,15-t.g),n.l=e);break;case 46:mi(n.j,0,15);break;case 47:t=null,n.h!==ms&&(t=oa(n.i,n.l,e)),i=n.j,n.j=n.i,n.i=i,om(n),n.l=e,i=t}e=i;break e}e=null}else i=t.Jb,io(n.g,gs,t.jb),io(n.g,gs,i);return e}function kS(e,t){var n=[];try{for(;t.xa();){var i=lt(t).value,r=(i&224)>>5,o=i&31;if(r===7&&o!=0&&(r=lt(t).value&63),r!=0){e.C.add("svc"+r),e.j.has(r)||e.j.set(r,new xS(r));for(var s=e.j.get(r),u=t.Ga();t.Ga()-u<o;){r=t;var a=lt(r),l=a.value,c=a.pts;if(l===16){var d=lt(r);l=l<<16|d.value}if(0<=l&&31>=l){var f=c;if(s.g){var p=s.g;switch(r=null,l){case 8:!cm(p)||0>=p.g&&0>=p.h||(0>=p.g?(p.g=p.m-1,p.h--):p.g--,p.i[p.h][p.g]=null);break;case 13:if(p.isVisible()&&(r=ir(p,f,s.i)),p.h+1>=p.s){f=p;for(var m=0,v=1;16>v;v++,m++)f.i[m]=f.i[v];for(v=0;1>v;v++,m++)f.i[m]=mh()}else p.h++;p.g=0;break;case 14:p.isVisible()&&(r=ir(p,f,s.i)),p.i[p.h]=mh(),p.g=0;break;case 12:p.isVisible()&&(r=ir(p,f,s.i)),gh(p),f=p,f.h=0,f.g=0}var E=r}else E=null}else if(128<=l&&159>=l)E=IS(s,r,l,c);else{if(4096<=l&&4127>=l)f=l&255,8<=f&&15>=f?r.skip(1):16<=f&&23>=f?r.skip(2):24<=f&&31>=f&&r.skip(3);else if(4224<=l&&4255>=l)f=l&255,128<=f&&135>=f?r.skip(4):136<=f&&143>=f&&r.skip(5);else if(32<=l&&127>=l)r=l,s.g&&(r===127?nr(s.g,""):nr(s.g,String.fromCharCode(r)));else if(160<=l&&255>=l)s.g&&nr(s.g,String.fromCharCode(l));else if(4128<=l&&4223>=l){if(r=l&255,s.g)if(fm.has(r)){var w=fm.get(r);nr(s.g,w)}else nr(s.g,"_")}else 4256<=l&&4351>=l&&s.g&&((l&255)!=160?nr(s.g,"_"):nr(s.g,"[CC]"));E=null}(r=E)&&n.push(r)}}}}catch(T){if(T instanceof M&&T.code===3e3)Oi("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw T}return n}function gm(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}ro.prototype.getStreams=function(){return Array.from(this.C)},O("shaka.cea.CeaDecoder",ro),wr=function(){return new ro};function mm(e){for(var t=[],n=e,i=e=0;i<n.length;)e==2&&n[i]==3?(e=0,n=[].concat(F(n)),n.splice(i,1),n=new Uint8Array(n)):n[i]==0?e++:e=0,i++;for(e=n,i=0;i<e.length;){for(n=0;e[i]==255;)n+=255,i++;n+=e[i++];for(var r=0;e[i]==255;)r+=255,i++;r+=e[i++],n==4&&t.push(e.subarray(i,i+r)),i+=r}return t}function la(){this.j=new Map,this.i=this.h=0,this.g=yh}la.prototype.init=function(e){function t(o){o=o.name,o in ca&&(n.g=ca[o])}var n=this,i=[],r=[];if(new Ue().box("moov",Re).box("mvex",Re).T("trex",function(o){var s=o.reader;s.skip(4),s.skip(4),o=s.O(),s=s.O(),n.h=o,n.i=s}).box("trak",Re).T("tkhd",function(o){o=Zf(o.reader,o.version),i.push(o.trackId)}).box("mdia",Re).T("mdhd",function(o){o=Lu(o.reader,o.version),r.push(o.timescale)}).box("minf",Re).box("stbl",Re).T("stsd",Or).box("avc1",t).box("avc3",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("encv",Au).box("sinf",Re).box("frma",function(o){o=t0(o.reader).wa,o in ca&&(n.g=ca[o])}).parse(e,!0),!i.length||!r.length||i.length!=r.length)throw new M(2,2,2010);this.g==yh&&Ae("Unable to determine bitstream format for CEA parsing!"),i.forEach(function(o,s){n.j.set(o,r[s])})},la.prototype.parse=function(e){var t=this;if(this.g==yh)return[];var n=[],i=this.h,r=this.i,o=0,s=[],u=null,a=9e4;return new Ue().box("moof",function(l){o=l.start,s=[],Re(l)}).box("traf",Re).T("trun",function(l){l=Jf(l.reader,l.version,l.flags),s.push(l)}).T("tfhd",function(l){l=Qf(l.reader,l.flags),i=l.Og||t.h,r=l.Qh||t.i,l=l.trackId,t.j.has(l)&&(a=t.j.get(l))}).T("tfdt",function(l){u=hc(l.reader,l.version).baseMediaDecodeTime}).box("mdat",function(l){if(u===null)throw Ae("Unable to find base media decode time for CEA captions!"),new M(2,2,2010);LS(t,l.reader,u,a,i,r,o-l.start-8,s,n)}).parse(e,!1),n};function LS(e,t,n,i,r,o,s,u,a){var l=0,c=o,d=u.map(function(m){return m.lh});for(d=[].concat.apply([],F(d)),d.length&&(c=d[0].sampleSize||o),t.skip(s+u[0].Ph);t.xa();){s=t.O();var f=t.ra(),p=null;switch(p=!1,u=1,e.g){case Eh:p=f&31,p=p==6;break;case ys:u=2,t.skip(1),p=f>>1&63,p=p==39||p==40;break;default:return}if(p)for(f=0,l<d.length&&(f=d[l].Ke||0),f=(n+f)/i,u=g(mm(t.Sb(s-u))),p=u.next();!p.done;p=u.next())a.push({packet:p.value,pts:f});else try{t.skip(s-u)}catch{break}c-=s+4,c==0&&(n=l<d.length?n+(d[l].gg||r):n+r,l++,l<d.length?c=d[l].sampleSize||o:c=o)}}O("shaka.cea.Mp4CeaParser",la);var yh=0,Eh=1,ys=2,ca={avc1:Eh,avc3:Eh,hev1:ys,hvc1:ys,dvh1:ys,dvhe:ys};Tr["video/mp4"]=function(){return new la};function ha(){}ha.prototype.init=function(){},ha.prototype.parse=function(e){var t=[];if(e=ge(e),!gc(e))return t;e=new Oe().parse(e);var n=e.sd(),i=e.le();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=g(i),i=n.next();!i.done;i=n.next())if(i=i.value,e.includes(i.type)&&i.time!=null)for(var r=g(mm(i.data)),o=r.next();!o.done;o=r.next())t.push({packet:o.value,pts:i.time});return t},O("shaka.cea.TsCeaParser",ha),Tr["video/mp2t"]=function(){return new ha};function vm(e,t,n){var i=bS(e),r=null;e=[];var o=[],s=null,u=new Set(i.map(function(a){return a.keyId}));if(u.delete(null),1<u.size)throw new M(2,4,4010);if(!t){if(o=i.filter(function(a){return a.Jd=="urn:mpeg:dash:sea:2012"}),1<o.length)throw new M(2,4,4050);o.length&&(s=US(o[0])),o=i.filter(function(a){return a.Jd=="urn:mpeg:dash:mp4protection:2011"?(r=a.init||r,!1):a.Jd!="urn:mpeg:dash:sea:2012"}),o.length&&(e=NS(r,o,n,u),e.length==0&&(e=[wi("",r)]))}if(i.length&&!s&&(t||!o.length))for(e=[],t=g(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,n!="org.w3.clearkey"&&e.push(wi(n,r));if(u=Array.from(u)[0]||null)for(t=g(e),n=t.next();!n.done;n=t.next())for(n=g(n.value.initData),i=n.next();!i.done;i=n.next())i.value.keyId=u;return{Ng:u,xk:r,drmInfos:e,gf:s,Rg:!0}}function DS(e,t,n,i){var r=vm(e,n,i);if(t.Rg)e=t.drmInfos.length==1&&!t.drmInfos[0].keySystem,n=r.drmInfos.length==0,(t.drmInfos.length==0||e&&!n)&&(t.drmInfos=r.drmInfos),t.Rg=!1;else if(0<r.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(o){return r.drmInfos.some(function(s){return s.keySystem==o.keySystem})}),t.drmInfos.length==0))throw new M(2,4,4008);return r.Ng||t.Ng}function RS(e){var t=0,n=Ut(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){i=n.getUint16(e,!0),e+=2;var r=n.getUint16(e,!0);if(e+=2,r&1||r+e>n.byteLength){n=[];break e}var o=ge(n,e,r);t.push({type:i,value:o}),e+=r}n=t}return n}function PS(e){e=g(e.getElementsByTagName("DATA"));for(var t=e.next();!t.done;t=e.next()){t=g(t.value.childNodes);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n instanceof Element&&n.tagName=="LA_URL")return n.textContent}return""}function da(e){var t=ai(e.node,"https://dashif.org/CPS","Laurl");return t&&t.textContent?t.textContent:(e=ai(e.node,"urn:microsoft:playready","pro"),!e||(e=An(e.textContent),e=RS(e).filter(function(n){return n.type===OS})[0],!e)?"":(e=oi(e.value,!0),(e=Br(e,"WRMHEADER"))?PS(e):""))}function NS(e,t,n,i){var r=[];t=g(t);for(var o=t.next();!o.done;o=t.next()){o=o.value;var s=n[o.Jd];if(s){var u;if(u=ai(o.node,"urn:microsoft:playready","pro")){u=An(u.textContent);var a=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);u=[{initData:xu(u,a,new Set,0),initDataType:"cenc",keyId:o.keyId}]}else u=null;if(a=null,o.Jd==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e")if(a=i,a.size==0)a=null;else{var l=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),c=new Uint8Array([]);a=[{initData:xu(c,l,a,1),initDataType:"cenc",keyId:o.keyId}]}u=wi(s,o.init||e||u||a),(s=jS.get(s))&&(u.licenseServerUri=s(o)),r.push(u)}}return r}function bS(e){var t=[];e=g(e);for(var n=e.next();!n.done;n=e.next())(n=_S(n.value))&&t.push(n);return t}function _S(e){var t=e.getAttribute("schemeIdUri"),n=Qi(e,"urn:mpeg:cenc:2013","default_KID"),i=kf(e,"urn:mpeg:cenc:2013","pssh").map(Ji);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new M(2,4,4009);var r=[];try{r=i.map(function(o){return{initDataType:"cenc",initData:An(o),keyId:null}})}catch{throw new M(2,4,4007)}return{node:e,Jd:t,keyId:n,init:0<r.length?r:null}}function US(e){if(!I.crypto||!I.crypto.subtle)throw Ae("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new M(2,4,4042);var t=ai(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new M(2,4,4051);if(t.getAttribute("schemeIdUri")!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new M(2,4,4051);if(t=ai(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new M(2,4,4051);if(e=t.getAttribute("IV"),t=t.getAttribute("keyUriTemplate"),!e||!t)throw new M(2,4,4051);if(e=$i(e.substr(2)),e.byteLength!=16)throw new M(2,4,4048);return{Qi:t,iv:e}}var OS=1,jS=new Map().set("com.widevine.alpha",function(e){var t=ai(e.node,"https://dashif.org/CPS","Laurl");return t&&t.textContent?t.textContent:(e=ai(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""}).set("com.microsoft.playready",da).set("com.microsoft.playready.recommendation",da).set("com.microsoft.playready.software",da).set("com.microsoft.playready.hardware",da).set("org.w3.clearkey",function(e){var t=ai(e.node,"https://dashif.org/CPS","Laurl");return t&&t.textContent?t.textContent:(e=ai(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.getAttribute("Lic_type")==="EME-1.0"&&e.textContent?e.textContent:""});function pa(e,t,n,i,r,o){var s={RepresentationID:t,Number:n,SubNumber:i,Bandwidth:r,Time:o};return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(u,a,l,c){if(u=="$$")return"$";var d=s[a];if(d==null)return u;switch(a=="RepresentationID"&&l&&(l=void 0),a=="Time"&&typeof d!="bigint"&&(.2<=Math.abs(d-Math.round(d))&&Ae("Calculated $Time$ values must be close to integers"),d=Math.round(d)),c){case void 0:case"d":case"i":case"u":u=d.toString();break;case"o":u=d.toString(8);break;case"x":u=d.toString(16);break;case"X":u=d.toString(16).toUpperCase();break;default:u=d.toString()}return l=I.parseInt(l,10)||1,Array(Math.max(0,l-u.length)+1).join("0")+u})}function ym(e,t){var n=Wn(e,t,"timescale"),i=1;n&&(i=ci(n)||1);var r=Wn(e,t,"duration");n=ci(r||""),e.P.contentType=="image"&&(n=Yo(r||"")),n&&(n/=i);var o=Wn(e,t,"startNumber");r=Number(Wn(e,t,"presentationTimeOffset"))||0;var s=Dt(o||"");(o==null||s==null)&&(s=1);var u=fa(e,t,"SegmentTimeline");if(t=null,u){t=i,e=e.ma.duration||1/0,o=s,u=Ke(u,"S");for(var a=[],l=-r,c=0;c<u.length;++c){var d=u[c],f=u[c+1],p=Se(d,"t",Dt),m=Se(d,"d",Dt),v=Se(d,"r",Cu);if(d=Se(d,"k",Cu)||0,p!=null&&(p-=r),!m)break;if(p=p??l,v=v||0,0>v)if(f){if(f=Se(f,"t",Dt),f==null)break;if(p>=f)break;v=Math.ceil((f-p)/m)-1}else{if(e==1/0)break;if(p/t>=e)break;v=Math.ceil((e*t-p)/m)-1}for(0<a.length&&p!=l&&(a[a.length-1].end=p/t),f=0;f<=v;++f)l=p+m,a.push({start:p/t,end:l/t,zg:p,Bb:d,nj:a.length+o}),p=l}t=a}return{timescale:i,Pa:n,Nd:s,Tb:r/i||0,yg:r,timeline:t}}function Em(e,t){return[t(e.P),t(e.Ea),t(e.Ka)].filter(Ir)}function Wn(e,t,n){t=Em(e,t),e=null,t=g(t);for(var i=t.next();!i.done&&!(e=i.value.getAttribute(n));i=t.next());return e}function fa(e,t,n){t=Em(e,t),e=null,t=g(t);for(var i=t.next();!i.done&&!(e=Sn(i.value,n));i=t.next());return e}function BS(e,t,n,i,r,o){for(var s=Qi(e,"http://www.w3.org/1999/xlink","href"),u=Qi(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",a=g(Array.from(e.attributes)),l=a.next();!l.done;l=a.next())l=l.value,l.namespaceURI=="http://www.w3.org/1999/xlink"&&e.removeAttributeNS(l.namespaceURI,l.localName);if(5<=o)return Hi(new M(2,4,4028));if(u!="onLoad")return Hi(new M(2,4,4027));var c=Tt([i],[s]);return r.request(0,dt(c,t)).Fa(function(d){if(d=nc(d.data,e.tagName),!d)return Hi(new M(2,4,4001,s));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;d.childNodes.length;){var f=d.childNodes[0];d.removeChild(f),e.appendChild(f)}for(d=g(Array.from(d.attributes)),f=d.next();!f.done;f=d.next())e.setAttributeNode(f.value.cloneNode(!1));return ga(e,t,n,c[0],r,o+1)})}function ga(e,t,n,i,r,o){if(o=o===void 0?0:o,Qi(e,"http://www.w3.org/1999/xlink","href")){var s=BS(e,t,n,i,r,o);return n&&(s=s.Fa(void 0,function(){return ga(e,t,n,i,r,o)})),s}s=[];for(var u=g(Array.from(e.childNodes)),a=u.next();!a.done;a=u.next())a=a.value,a instanceof Element&&(Qi(a,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.removeChild(a):a.tagName!="SegmentTimeline"&&s.push(ga(a,t,n,i,r,o)));return mf(s).Fa(function(){return e})}function FS(e,t,n,i,r,o,s){var u,a=new Ue().T("sidx",function(l){u=GS(t,i,r,o,s,n,l)});if(e&&a.parse(e),u)return u;throw new M(2,3,3004)}function GS(e,t,n,i,r,o,s){var u=[];s.reader.skip(4);var a=s.reader.O();if(a==0)throw new M(2,3,3005);if(s.version==0)var l=s.reader.O(),c=s.reader.O();else l=s.reader.Uc(),c=s.reader.Uc();s.reader.skip(2);var d=s.reader.Ua();for(e=e+s.size+c,c=0;c<d;c++){var f=s.reader.O(),p=(f&2147483648)>>>31;f&=2147483647;var m=s.reader.O();if(s.reader.skip(4),p==1)throw new M(2,3,3006);u.push(new oe(l/a+n,(l+m)/a+n,function(){return o},e,e+f-1,t,n,i,r)),l+=m,e+=f}return s.parser.stop(),u}function Li(e){this.h=Ut(e),this.g=new be(this.h,0)}Li.prototype.xa=function(){return this.g.xa()};function vi(e){var t=Tm(e);if(7<t.length)throw new M(2,3,3002);var n=0;t=g(t);for(var i=t.next();!i.done;i=t.next())n=256*n+i.value;t=Tm(e);e:{i=g(VS);for(var r=i.next();!r.done;r=i.next())if(Ai(t,new Uint8Array(r.value))){i=!0;break e}i=!1}if(i)t=e.h.byteLength-e.g.Ga();else{if(t.length==8&&t[1]&224)throw new M(2,3,3001);for(r=i=0;r<t.length;r++){var o=t[r];i=r==0?o&(1<<8-t.length)-1:256*i+o}t=i}return t=e.g.Ga()+t<=e.h.byteLength?t:e.h.byteLength-e.g.Ga(),i=Ut(e.h,e.g.Ga(),t),e.g.skip(t),new zS(n,i)}function Tm(e){var t=e.g.Ga(),n=e.g.ra();if(n==0)throw new M(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),ge(e.h,t,n)}var VS=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function zS(e,t){this.id=e,this.g=t}function Th(e){if(8<e.g.byteLength)throw new M(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new M(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var i=e.g.getUint8(n);t=256*t+i}return t}function KS(e,t,n,i,r,o,s,u,a){function l(){return r}var c=[];e=new Li(e.g);for(var d=null,f=null;e.xa();){var p=vi(e);if(p.id==187){var m=HS(p);m&&(p=n*m.wj,m=t+m.cj,d!=null&&c.push(new oe(d+s,p+s,l,f,m-1,o,s,u,a)),d=p,f=m)}}return d!=null&&c.push(new oe(d+s,i+s,l,f,null,o,s,u,a)),c}function HS(e){var t=new Li(e.g);if(e=vi(t),e.id!=179)throw new M(2,3,3013);if(e=Th(e),t=vi(t),t.id!=183)throw new M(2,3,3012);t=new Li(t.g);for(var n=0;t.xa();){var i=vi(t);if(i.id==241){n=Th(i);break}}return{wj:e,cj:n}}function wm(e,t,n){if(t=fa(e,t,"Initialization"),!t)return null;var i=e.P.zb(),r=t.getAttribute("sourceURL");r&&(i=Tt(i,[r])),r=0;var o=null;return(t=Se(t,"range",Iu))&&(r=t.start,o=t.end),new rn(function(){return i},r,o,Im(e),null,null,n)}function WS(e,t,n){var i=Number(Wn(e,oo,"presentationTimeOffset"))||0,r=Wn(e,oo,"timescale"),o=1;r&&(o=ci(r)||1);var s=i/o||0,u=wm(e,oo,n);XS(e,u);var a=Hp(e);return{Kc:function(){var l=fa(a,oo,"RepresentationIndex"),c=a.P.zb();return l&&(l=l.getAttribute("sourceURL"))&&(c=Tt(c,[l])),l=Sm(a),Am(a,t,u,c,l.start,l.end,s)}}}function Am(e,t,n,i,r,o,s){var u,a,l,c,d,f,p,m,v,E,w,T,x,S,C;return k(function(D){if(D.g==1)return u=e.presentationTimeline,a=!e.Yb||!e.ma.Mf,l=e.ma.start,c=e.ma.duration,d=e.P.mimeType.split("/")[1],f=t,p=null,m=[f(i,r,o,!1),d=="webm"?f(n.ba(),n.hb,n.Na,!0):null],f=null,y(D,Promise.all(m),2);if(v=D.h,E=v[0],w=v[1]||null,T=null,x=l-s,S=l,C=c?l+c:1/0,d=="mp4")var b=FS(E,r,i,n,x,S,C);else{if(b=new Li(w),vi(b).id!=440786851)throw new M(2,3,3008);var P=vi(b);if(P.id!=408125543)throw new M(2,3,3009);b=P.g.byteOffset,P=new Li(P.g);for(var N=null;P.xa();){var U=vi(P);if(U.id==357149030){N=U;break}}if(!N)throw new M(2,3,3010);for(N=new Li(N.g),U=1e6,P=null;N.xa();){var B=vi(N);if(B.id==2807729)U=Th(B);else if(B.id==17545)if(B.g.byteLength==4)P=B.g.getFloat32(0);else if(B.g.byteLength==8)P=B.g.getFloat64(0);else throw new M(2,3,3003)}if(P==null)throw new M(2,3,3011);if(N=U/1e9,P*=N,U=vi(new Li(E)),U.id!=475249515)throw new M(2,3,3007);b=KS(U,b,N,P,i,n,x,S,C)}return T=b,u.Dd(T),p=new De(T),a&&p.Ic(S,C,!0),D.return(p)})}function oo(e){return e.Ld}function Sm(e){var t=fa(e,oo,"RepresentationIndex");return e=Wn(e,oo,"indexRange"),e=Iu(e||""),t&&(e=Se(t,"range",Iu,e)),e}function XS(e,t){if(xm(e,t),!Sm(e))throw new M(2,4,4002)}function xm(e,t){var n=e.P.mimeType.split("/")[1];if(e.P.contentType!=Ce&&n!="mp4"&&n!="webm")throw new M(2,4,4006);if(n=="webm"&&!t)throw new M(2,4,4005)}function Im(e){var t=e.P;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.De,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null}}function YS(e,t,n){var i=wm(e,Cm,n),r=qS(e);if(!r.Pa&&!r.timeline&&1<r.Rc.length)throw new M(2,4,4002);if(!r.Pa&&!e.ma.duration&&!r.timeline&&r.Rc.length==1)throw new M(2,4,4002);if(r.timeline&&r.timeline.length==0)throw new M(2,4,4002);var o=null,s=null;e.Ka.id&&e.P.id&&(s=t[e.Ka.id+","+e.P.id])&&(o=s.segmentIndex);var u=$S(e.ma.start,e.ma.duration,e.P.zb,r,i,n);return t=!o,o?o.Cd(u,e.presentationTimeline.Ab()):o=new De(u),e.presentationTimeline.Dd(u),e.Yb&&e.ma.Mf||o.Ic(e.ma.start,e.ma.duration?e.ma.start+e.ma.duration:1/0,t),s&&(s.segmentIndex=o),{Kc:function(){return o&&o.$b()!=0||o.ze(u),Promise.resolve(o)}}}function Cm(e){return e.fc}function qS(e){var t=QS(e);e=ym(e,Cm);var n=e.Nd;n==0&&(n=1);var i=0;return e.Pa?i=e.Pa*(n-1):e.timeline&&0<e.timeline.length&&(i=e.timeline[0].start),{Pa:e.Pa,startTime:i,Nd:n,Tb:e.Tb,timeline:e.timeline,Rc:t}}function $S(e,t,n,i,r,o){var s=i.Rc.length;i.timeline&&i.timeline.length!=i.Rc.length&&(s=Math.min(i.timeline.length,i.Rc.length));for(var u=e-i.Tb,a=t?e+t:1/0,l=[],c=i.startTime,d={},f=0;f<s;d={kd:d.kd,fd:d.fd},f++){d.fd=i.Rc[f];var p=void 0;p=i.Pa!=null?c+i.Pa:i.timeline?i.timeline[f].end:c+t,d.kd=null,l.push(new oe(e+c,e+p,function(m){return function(){return m.kd==null&&(m.kd=Tt(n(),[m.fd.Vi])),m.kd}}(d),d.fd.start,d.fd.end,r,u,e,a,[],"",null,null,Ci,o)),c=p}return l}function QS(e){return[e.P.fc,e.Ea.fc,e.Ka.fc].filter(Ir).map(function(t){return Ke(t,"SegmentURL")}).reduce(function(t,n){return 0<t.length?t:n}).map(function(t){t.getAttribute("indexRange")&&!e.Zg&&(e.Zg=!0);var n=t.getAttribute("media");return t=Se(t,"mediaRange",Iu,{start:0,end:null}),{Vi:n,start:t.start,end:t.end}})}function JS(e,t,n,i,r,o,s){var u=n4(e,s),a=ZS(e);e4(a);var l=Hp(e);if(a.xd)return xm(e,u),{Kc:function(){var m=pa(a.xd,l.P.id,null,null,l.bandwidth||null,null);return m=Tt(l.P.zb(),[m]),Am(l,t,u,m,0,null,a.Tb)}};if(a.Pa)return i||e.Ea.contentType==="image"||(e.presentationTimeline.Wf(a.Pa),e.presentationTimeline.Ce(e.ma.start)),{Kc:function(){return t4(l,a,r,u,o,s)}};var c=null;i=i=null,e.Ka.id&&e.P.id&&(i=e.Ka.id+","+e.P.id,i=n[i])&&(c=i.segmentIndex);var d=e.ma.start,f=e.ma.duration?d+e.ma.duration:1/0,p=!(e.Yb&&e.ma.Mf);return c?(n=c,Mm(n,a,d,f,p,u),n.yb(e.presentationTimeline.Ab())):c=new va(a,e.P.id,e.bandwidth,e.P.zb,d,f,u,p,s,e.P.hg),a.timeline&&e.Ea.contentType!=="image"&&e.presentationTimeline.hh(a.timeline,d),i&&e.Yb&&(i.segmentIndex=c),{Kc:function(){return c instanceof va&&c.$b()==0&&Mm(c,a,d,f,p,u),Promise.resolve(c)}}}function ma(e){return e.Md}function ZS(e){var t=ym(e,ma),n=Wn(e,ma,"media");return e=Wn(e,ma,"index"),{Pa:t.Pa,timescale:t.timescale,Nd:t.Nd,Tb:t.Tb,yg:t.yg,timeline:t.timeline,Sc:n,xd:e}}function e4(e){var t=e.xd?1:0;if(t+=e.timeline?1:0,t+=e.Pa?1:0,t==0)throw new M(2,4,4002);if(t!=1&&(e.xd&&(e.timeline=null),e.Pa=null),!e.xd&&!e.Sc)throw new M(2,4,4002)}function t4(e,t,n,i,r,o){function s(U){var B=(U-m)*p,V=B+t.Tb,W=B+c;B=W+p;var ee=Math.min(B,a());return W=new oe(W,ee,function(){var ne=V*v;return"BigInt"in I&&ne>Number.MAX_SAFE_INTEGER&&(ne=BigInt(V)*BigInt(v)),ne=pa(E,T,U,null,w,ne),Tt(x(),[ne])},0,null,i,S,c,a(),[],"",null,null,Ci,o),W.h=B,W}function u(){var U=[Math.max(l.Ab(),c),Math.min(l.ac(),a())].map(function(B){return B-c});return[Math.ceil(U[0]/p),Math.ceil(U[1]/p)-1].map(function(B){return B+m})}function a(){var U=d!=null&&r[d]||f;return U?c+U:1/0}var l=e.presentationTimeline,c=e.ma.start,d=e.Ka.id,f=e.ma.duration,p=t.Pa,m=t.Nd,v=t.timescale,E=t.Sc,w=e.bandwidth||null,T=e.P.id,x=e.P.zb,S=c-t.Tb,C=u();e=e.Yb?Math.max(C[0],C[1]-n+1):C[0],C=C[1],n=[];for(var D=e;D<=C;++D){var b=s(D);n.push(b)}var P=new De(n);if(n=l.ac()<a(),D=l.R(),n||D){var N=Math.max(e,C+1);P.Qe(p,function(){var U=l.Ab();P.yb(U);var B=g(u());B.next(),B=B.next().value;for(var V=[];N<=B;){var W=s(N);V.push(W),N++}return U>a()&&!V.length?null:V})}return Promise.resolve(P)}function n4(e,t){var n=Wn(e,ma,"initialization");if(!n)return null;var i=e.P.id,r=e.bandwidth||null,o=e.P.zb;return new rn(function(){var s=pa(n,i,null,null,r,null);return Tt(o(),[s])},0,null,Im(e),null,null,t)}function va(e,t,n,i,r,o,s,u,a,l){De.call(this,[]),this.h=e,this.H=t,this.D=n,this.G=i,this.i=r,this.l=o,this.u=s,this.C=a,this.I=l,u&&km(this)}pe(va,De),h=va.prototype,h.$b=function(){return this.h?this.h.timeline.length:0},h.release=function(){De.prototype.release.call(this),this.h=null},h.yb=function(e){if(this.h){for(var t=0,n=this.h.timeline,i=0;i<n.length&&n[i].end+this.i<=e;i+=1)t+=1;0<t&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.j+=t,this.$b()===0&&this.release())}};function Mm(e,t,n,i,r,o){if(e.u=o,e.h){n=e.h.timeline,e.h.Sc=t.Sc;var s=n[n.length-1];t=t.timeline.filter(function(u){return u.start>=s.end}),0<t.length&&e.h.timeline.push.apply(e.h.timeline,F(t)),e.l!==i&&(e.l=i)}else e.h=t,e.i=n,e.l=i;r&&km(e)}function km(e){if(!e.s){for(var t=e.h.timeline;t.length&&t[t.length-1].start>=e.l;)t.pop();e.yb(e.i)}}h.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.i)return this.j;if(!this.h)return null;var t=this.h.timeline;if(e<this.i||e>=this.l)return null;for(var n=t.length-1,i=0;i<t.length;i++){var r=t[i],o=r.start+this.i;if(r=i<n?t[i+1].start+this.i:this.l===1/0?r.end+this.i:this.l,e>=o&&e<r)return i+this.j}return null},h.get=function(e){var t=this;if(e-=this.j,0>e||e>=this.$b()||!this.h)return null;var n=this.g[e];if(!n){var i=this.h.Sc,r=this.h.timeline[e],o=r.nj,s=this.h.yg+r.zg;n=this.i-this.h.Tb;var u=this.i+r.end,a=u;e===this.$b()-1&&this.l!==1/0&&(a=this.l);for(var l=[],c=(r.end-r.start)/r.Bb,d={},f=0;f<r.Bb;d={ld:d.ld,$e:d.$e},f++){var p=r.start+c*f,m=p+c;d.$e=f+1,d.ld=null,p=new oe(this.i+p,this.i+m,function(v){return function(){return t.h?(v.ld==null&&(v.ld=Lm(t.h.Sc,t.H,o,t.D,s,v.$e,t.G)),v.ld):[]}}(d),0,null,this.u,n,this.i,this.l,[],"",null,null,Ci,this.C),this.I==0?0<f&&p.xe():f%this.I!=0&&p.xe(),l.push(p)}n=new oe(this.i+r.start,a,function(){return 0<r.Bb?[]:Lm(i,t.H,o,t.D,s,null,t.G)},0,null,this.u,n,this.i,this.l,l,"",null,null,Ci,this.C,0<r.Bb),n.h=u,this.g[e]=n}return n};function Lm(e,t,n,i,r,o,s){return e=pa(e,t,n,o,i||null,r),Tt(s(),[e]).map(function(u){return u.toString()})}function Es(e){this.s=null,this.C=e,this.I=new br,this.j=[],this.h=null,this.m=[],this.D=null,this.H=[],this.G=300,this.l=new Map,this.i=new Map,this.g=null,this.u="UNKNOWN"}Es.prototype.configure=function(e){this.s=e},Es.prototype.destroy=function(){return this.C=this.s=null,this.j=[],this.h=null,this.m=[],this.H=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.I.destroy()},Es.prototype.setManifestType=function(e){this.u=e};function Ts(e,t){var n,i,r,o,s,u,a;return k(function(l){if(l.g==1)return n=Tt(e.j,[i4(e,t)]),i=dt(n,e.s.retryParameters),r=e.C.networkingEngine.request(8,i),Wi(e.I,r),le(l,2),y(l,r.promise,4);if(l.g!=2)return o=l.h,s=ze(o.data),u=JSON.parse(s),u.VERSION==1&&r4(e,u,o.uri),Ee(l,0);if((a=ce(l))&&a.code==7001)return l.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new fe(function(){Ts(e,t)}),e.g.S(e.G),K(l)})}function i4(e,t){if(!e.m.length)return t;t=new Je(t);var n=e.D||e.m[0],i=Math.round(e.C.getBandwidthEstimate()),r=t.g;return e.u=="DASH"?(r.add("_DASH_pathway",n),r.add("_DASH_throughput",String(i))):e.u=="HLS"&&(r.add("_HLS_pathway",n),r.add("_HLS_throughput",String(i))),Cp(r)&&Do(t,r),t.toString()}function r4(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var i=t["RELOAD-URI"]||n;e.g=new fe(function(){Ts(e,i)}),(n=t.TTL)&&(e.G=n),e.g.S(e.G),e.m=t["PATHWAY-PRIORITY"]||[],e.H=t["PATHWAY-CLONES"]||[]}function so(e,t,n,i){var r=e.l.get(t);r||(r=new Map),r.set(n,i),e.l.set(t,r)}function ws(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var i=[],r={},o=g(e.m),s=o.next();!s.done;r={lc:r.lc},s=o.next())if(r.lc=s.value,s=t.get(r.lc))i.push({cg:r.lc,location:s});else if(s=e.H.find(function(a){return function(l){return l.Nj==a.lc}}(r))){var u=t.get(s["BASE-ID"]);u&&(s["URI-REPLACEMENT"].Dh?(u=new Je(u),tu(u,s["URI-REPLACEMENT"].Dh),i.push({cg:r.lc,location:u.toString()})):i.push({cg:r.lc,location:u}))}for(r=Date.now(),o=g(e.i.keys()),s=o.next();!s.done;s=o.next())s=s.value,u=e.i.get(s),r>u&&e.i.delete(s);if(i=i.filter(function(a){for(var l=g(e.i.keys()),c=l.next();!c.done;c=l.next())if(c.value.includes(new Je(a.location).Kb))return!1;return!0}),i.length&&(e.D=i[0].cg),i=i.map(function(a){return a.location}),!i.length&&e.h)for(r=g(e.h.split(",")),s=r.next();!s.done;s=r.next())(o=t.get(s.value))&&(e.D=e.h,i.push(o));if(!i.length)for(t=g(t.values()),r=t.next();!r.done;r=t.next())i.push(r.value);return n?i:Tt(e.j,i)}function Mn(){this.j=[],this.h=[],this.g=[],this.l=[],this.i=[],this.m=!1,this.s=new Set}h=Mn.prototype,h.release=function(){for(var e=g(this.h.concat(this.g,this.l,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.l=[],this.i=[],this.j=[]},h.Ci=function(){return this.j},h.Jf=function(){return this.l.slice()},h.ei=function(){return this.i};function Dm(e,t){var n=[],i=[],r=[],o=[];e=g(e);for(var s=e.next();!s.done;s=e.next()){var u=s.value;s=new Map(u.audioStreams.map(function(d){return[Sh(d),d]}));var a=new Map(u.videoStreams.map(function(d){return[Ah(d),d]})),l=new Map(u.textStreams.map(function(d){return[Is(d),d]}));if(u=new Map(u.imageStreams.map(function(d){return[Cs(d),d]})),t){var c=Um(Ce);l.set(Is(c),c),c=Um("image"),u.set(Cs(c),c)}n.push(s),i.push(a),r.push(l),o.push(u)}return{Fg:n,Ah:i,wh:r,Yg:o}}h.Kg=function(e,t){var n=this,i,r,o,s,u,a,l,c,d,f,p,m,v,E,w,T,x,S,C,D,b,P,N,U,B,V,W,ee,ne;return k(function(he){if(he.g==1){if(i=at,!t&&e.length==1)return r=Dm(e,!1),o=r.Fg,s=r.Ah,u=r.wh,a=r.Yg,n.h=Array.from(o[0].values()),n.g=Array.from(s[0].values()),n.l=Array.from(u[0].values()),n.i=Array.from(a[0].values()),he.F(2);for(l=-1,c=0;c<e.length;c++)d=e[c],n.s.has(d.id)||(n.s.add(d.id),l==-1&&(l=c));return l==-1?he.return():(f=Dm(e,!0),p=f.Fg,m=f.Ah,v=f.wh,E=f.Yg,y(he,Promise.all([Di(n,n.h,p,l,As,uo),Di(n,n.g,m,l,As,uo),Di(n,n.l,v,l,As,uo),Di(n,n.i,E,l,As,uo)]),2))}if(w=0,T=[],n.g.length&&n.h.length)for(P=g(n.h),N=P.next();!N.done;N=P.next())for(U=N.value,B=g(n.g),V=B.next();!V.done;V=B.next())W=V.value,ee=oc(U.drmInfos,W.drmInfos),U.drmInfos.length&&W.drmInfos.length&&!ee.length||(ne=w++,T.push({id:ne,language:U.language,disabledUntilTime:0,primary:U.primary,audio:U,video:W,bandwidth:(U.bandwidth||0)+(W.bandwidth||0),drmInfos:ee,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(x=n.g.length?n.g:n.h,S=g(x),C=S.next();!C.done;C=S.next())D=C.value,b=w++,T.push({id:b,language:D.language,disabledUntilTime:0,primary:D.primary,audio:D.type==i.U?D:null,video:D.type==i.ia?D:null,bandwidth:D.bandwidth||0,drmInfos:D.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});n.j=T,K(he)})};function Rm(e){var t,n,i,r,o,s,u,a,l,c,d,f,p,m,v,E,w,T,x,S,C,D,b,P,N,U,B,V,W,ee;return k(function(ne){switch(ne.g){case 1:if(t=at,e.length==1)return ne.return(e[0]);for(n=e.map(function(he){return new Map(he.filter(function(Y){return Y.type===t.U}).map(function(Y){return[Sh(Y),Y]}))}),i=e.map(function(he){return new Map(he.filter(function(Y){return Y.type===t.ia}).map(function(Y){return[Ah(Y),Y]}))}),r=e.map(function(he){return new Map(he.filter(function(Y){return Y.type===t.Da}).map(function(Y){return[Is(Y),Y]}))}),o=e.map(function(he){return new Map(he.filter(function(Y){return Y.type===t.cf}).map(function(Y){return[Cs(Y),Y]}))}),s=g(r),u=s.next();!u.done;u=s.next())a=u.value,l=_m(t.Da),a.set(Is(l),l);for(c=g(o),d=c.next();!d.done;d=c.next())f=d.value,p=_m(t.cf),f.set(Cs(p),p);return m=new Mn,y(ne,Di(m,[],n,0,ya,Ea),2);case 2:return v=ne.h,y(ne,Di(m,[],i,0,ya,Ea),3);case 3:return E=ne.h,y(ne,Di(m,[],r,0,ya,Ea),4);case 4:return w=ne.h,y(ne,Di(m,[],o,0,ya,Ea),5);case 5:if(T=ne.h,x=0,E.length&&v.length)for(P=g(v),N=P.next();!N.done;N=P.next())for(U=N.value,B=g(E),V=B.next();!V.done;V=B.next())W=V.value,ee=x++,W.variantIds.push(ee),U.variantIds.push(ee);else for(S=E.concat(v),C=g(S),D=C.next();!D.done;D=C.next())b=D.value,b.variantIds=[x++];return ne.return(E.concat(v).concat(w).concat(T))}})}function Di(e,t,n,i,r,o){var s,u,a,l,c,d,f,p,m,v,E,w,T,x,S,C,D,b;return k(function(P){switch(P.g){case 1:for(s=[],u=0;u<i;u++)s.push(new Set);for(a=i;a<n.length;a++)s.push(new Set(n[a].values()));l=g(t),c=l.next();case 2:if(c.done){P.F(4);break}return d=c.value,y(P,o4(e,d,n,i,o,s),5);case 5:if(f=P.h,!f)throw new M(2,4,4037);c=l.next(),P.F(2);break;case 4:for(p=g(s),m=p.next();!m.done;m=p.next())for(v=m.value,E=g(v),w=E.next();!w.done;w=E.next())T=w.value,(x=s4(e,T,n,r,o,s))&&t.push(x);for(S=g(s),m=S.next();!m.done;m=S.next())for(C=m.value,D={},b=g(C),w=b.next();!w.done;D={Wd:D.Wd},w=b.next())if(D.Wd=w.value,!jm(D.Wd)&&t.some(function(N){return function(U){return wh(e,N.Wd,U)}}(D)))throw new M(2,4,4037);return P.return(t)}})}function o4(e,t,n,i,r,o){return k(function(s){return s.g==1?(bm(e,n,t),t.matchedStreams?t.segmentIndex?y(s,Pm(t,i),2):s.F(2):s.return(!1)):(Nm(t,i,r,o),s.return(!0))})}function Pm(e,t){var n,i,r,o,s,u,a;return k(function(l){if(l.g==1){for(n=[],i=e.matchedStreams,r=g(i),o=r.next();!o.done;o=r.next())s=o.value,n.push(s.createSegmentIndex()),s.trickModeVideo&&!s.trickModeVideo.segmentIndex&&n.push(s.trickModeVideo.createSegmentIndex());return y(l,Promise.all(n),2)}if(e.segmentIndex instanceof Ze)for(u={},a=t;a<i.length;u={Gb:u.Gb},a++)u.Gb=i[a],u.Gb.segmentIndex&&(Ac(u.Gb.segmentIndex,function(c){return function(d){d.codecs=c.Gb.codecs,d.mimeType=c.Gb.mimeType,d.ka&&(d.ka.codecs=c.Gb.codecs,d.ka.mimeType=c.Gb.mimeType)}}(u)),e.segmentIndex.h.push(u.Gb.segmentIndex));K(l)})}function s4(e,t,n,i,r,o){if(jm(t))return null;var s=i(t);return bm(e,n,s),s.createSegmentIndex&&(s.createSegmentIndex=function(){return k(function(u){return s.segmentIndex?u.F(0):(s.segmentIndex=new Ze,y(u,Pm(s,0),0))})}),!s.matchedStreams||!s.matchedStreams.length?null:(Nm(s,0,r,o),s)}function Nm(e,t,n,i){for(var r=e.matchedStreams;t<r.length;t++){var o=r[t];n(e,o);var s=!0;if(e.type=="audio"&&ji(e.language,o.language)==0&&(s=!1),s){i[t].delete(o),s=new Set(e.codecs.split(",")),o=g(o.codecs.split(","));for(var u=o.next();!u.done;u=o.next())(u=u.value)&&s.add(u);u=Array.from(s),s=new Set,o=[],u=g(u);for(var a=u.next();!a.done;a=u.next()){a=a.value;var l=Pn(a);s.has(l)||(o.push(a),s.add(l))}e.codecs=o.join(",")}}}function As(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var n=g(t.matchedStreams),i=n.next();!i.done;i=n.next())i=i.value,i.segmentIndex&&(i.segmentIndex.release(),i.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set,t.closedCaptions=null,t.trickModeVideo=null,t}function ya(e){return e=Object.assign({},e),e.roles=e.roles.slice(),e.keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function uo(e,t){function n(s,u){s||(s=[]),u=g(u);for(var a=u.next();!a.done;a=u.next())a=a.value,s.includes(a)||s.push(a);return s}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var i=g(t.keyIds),r=i.next();!r.done;r=i.next())e.keyIds.add(r.value);if(e.originalId==null?e.originalId=t.originalId:e.originalId+=","+(t.originalId||""),i=oc(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!i.length)throw new M(2,4,4038);if(e.drmInfos=i,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),i=g(t.closedCaptions),r=i.next();!r.done;r=i.next()){var o=g(r.value);r=o.next().value,o=o.next().value,e.closedCaptions.set(r,o)}t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=As(t.trickModeVideo),e.trickModeVideo.createSegmentIndex=function(){return e.trickModeVideo.segmentIndex=e.segmentIndex.clone(),Promise.resolve()}),uo(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&uo(e.trickModeVideo,t)}function Ea(e,t){var n=e.roles;n||(n=[]);for(var i=g(t.roles),r=i.next();!r.done;r=i.next())r=r.value,n.includes(r)||n.push(r);for(e.roles=n,n=g(t.keyIds),i=n.next();!i.done;i=n.next())e.keyIds.add(i.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,F(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=g(t.closedCaptions),n=t.next();!n.done;n=t.next())i=g(n.value),n=i.next().value,i=i.next().value,e.closedCaptions.set(n,i)}function bm(e,t,n){var i=[];t=g(t);for(var r=t.next();!r.done;r=t.next()){if(r=u4(e,r.value,n),!r)return;i.push(r)}n.matchedStreams=i}function u4(e,t,n){var i=null,r=(0,{audio:Sh,video:Ah,text:Is,image:Cs}[n.type])(n);if(t.has(r))i=t.get(r);else{r={audio:function(u,a){return wh(e,u,a)},video:function(u,a){return wh(e,u,a)},text:a4,image:l4}[n.type];var o={audio:c4,video:h4,text:d4,image:p4}[n.type];t=g(t.values());for(var s=t.next();!s.done;s=t.next())s=s.value,!r(n,s)||n.fastSwitching!=s.fastSwitching||i&&!o(n,i,s)||(i=s)}return i}function Ss(e,t){function n(i){if(!xh.has(i)){var r=En(i);xh.set(i,r)}return xh.get(i)}return e.mimeType!=t.mimeType?!1:n(e.codecs)==n(t.codecs)}function wh(e,t,n){return!(!Ss(t,n)&&!e.m||t.drmInfos&&!Gf(t.drmInfos,n.drmInfos))}function a4(e,t){return t.language?!(e.forced!==t.forced||ji(e.language,t.language)==0||t.kind!=e.kind):!0}function l4(){return!0}function c4(e,t,n){var i=Ss(e,t),r=Ss(e,n);if(i&&!r)return!1;if(!i&&r||(i=ji(e.language,t.language),r=ji(e.language,n.language),r>i))return!0;if(r<i)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}return e.roles.length?(i=t.roles.filter(function(o){return e.roles.includes(o)}),r=n.roles.filter(function(o){return e.roles.includes(o)}),r.length>i.length?!0:r.length<i.length?!1:n.roles.length<t.roles.length):!n.roles.length&&t.roles.length?!0:n.roles.length&&!t.roles.length?!1:!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(i=xs(e.channelsCount,t.channelsCount,n.channelsCount),i==On?!0:i==yi?!1:(i=xs(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),i==On?!0:i==yi?!1:!!(e.bandwidth&&Om(e.bandwidth,t.bandwidth,n.bandwidth)==On)))}function h4(e,t,n){var i=Ss(e,t),r=Ss(e,n);if(i&&!r)return!1;if(!i&&r||(i=xs(e.width*e.height,t.width*t.height,n.width*n.height),i==On))return!0;if(i==yi)return!1;if(e.frameRate){if(i=xs(e.frameRate,t.frameRate,n.frameRate),i==On)return!0;if(i==yi)return!1}return!!(e.bandwidth&&Om(e.bandwidth,t.bandwidth,n.bandwidth)==On)}function d4(e,t,n){var i=ji(e.language,t.language),r=ji(e.language,n.language);if(r>i)return!0;if(r<i)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(i=t.roles.filter(function(o){return e.roles.includes(o)}),r=n.roles.filter(function(o){return e.roles.includes(o)}),r.length>i.length)return!0;if(r.length<i.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function p4(e,t,n){return xs(e.width*e.height,t.width*t.height,n.width*n.height)==On}function _m(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1}}function Um(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new De([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1}}function xs(e,t,n){if(t==e&&e!=n)return yi;if(n==e&&e!=t)return On;if(t>e){if(n<=e||n-e<t-e)return On;if(n-e>t-e)return yi}else{if(n>e)return yi;if(e-n<e-t)return On;if(e-n>e-t)return yi}return Bm}function Om(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?On:t<e?yi:Bm}function jm(e){switch(e.type){case Ce:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function Ah(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,e.codecs,e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth])}function Sh(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,e.codecs,e.mimeType,e.roles,e.audioSamplingRate,e.primary])}function Is(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function Cs(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}O("shaka.util.PeriodCombiner",Mn),Mn.prototype.combinePeriods=Mn.prototype.Kg,Mn.prototype.getImageStreams=Mn.prototype.ei,Mn.prototype.getTextStreams=Mn.prototype.Jf,Mn.prototype.getVariants=Mn.prototype.Ci;var On=1,Bm=0,yi=-1,xh=new Map;function Ta(){var e=this;this.i=this.h=null,this.s=[],this.j=null,this.K=1,this.m={},this.M={},this.l=new Mn,this.H=0,this.J=new yr(5),this.I=new fe(function(){T4(e)}),this.G=new br,this.C=null,this.L=[],this.D=1/0,this.u=!1,this.g=null}h=Ta.prototype,h.configure=function(e){this.h=e,this.g&&this.g.configure(this.h),this.l&&(this.l.m=this.h.dash.multiTypeVariantsAllowed&&Bi())},h.start=function(e,t){var n=this,i;return k(function(r){if(r.g==1)return n.u=t.isLowLatencyMode(),n.s=[e],n.i=t,y(r,Ih(n),2);if(i=r.h,n.i&&Ch(n,i),!n.i)throw new M(2,7,7001);return r.return(n.j)})},h.stop=function(){for(var e=g(Object.values(this.m)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.l&&this.l.release(),this.h=this.i=null,this.s=[],this.j=null,this.m={},this.l=null,this.I!=null&&(this.I.stop(),this.I=null),this.g&&this.g.destroy(),this.G.destroy()},h.update=function(){var e=this,t;return k(function(n){if(n.g==1)return le(n,2),y(n,Ih(e),4);if(n.g!=2)return Ee(n,0);if(t=ce(n),!e.i||!t)return n.return();e.i.onError(t),K(n)})},h.onExpirationUpdated=function(){},h.onInitialVariantChosen=function(e){if(this.j&&this.j.presentationTimeline.R()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.j.presentationTimeline.ac();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.H=t.endTime-e,Ch(this,0))}}},h.banLocation=function(e){this.g&&this.g.i.set(e,Date.now()+6e4)};function Ih(e){var t,n,i,r,o,s,u;return k(function(a){return a.g==1?(t=e.s,1<e.s.length&&e.g&&(n=ws(e.g,"Location",!0),n.length&&(t=n)),i=dt(t,e.h.retryParameters),r=Date.now(),y(a,kh(e,i,0,{type:4}),2)):a.g!=3?(o=a.h,e.i?(o.uri&&o.uri!=o.originalUri&&!e.s.includes(o.uri)&&e.s.unshift(o.uri),y(a,f4(e,o.data,o.uri),3)):a.return(0)):(s=Date.now(),u=(s-r)/1e3,e.J.sample(1,u),a.return(u))})}function f4(e,t,n){var i,r,o,s;return k(function(u){if(u.g==1){if(i=nc(t,"MPD"),!i)throw new M(2,4,4001,n);return e.h.dash.disableXlinkProcessing?u.return(Fm(e,i,n)):(r=e.h.dash.xlinkFailGracefully,o=ga(i,e.h.retryParameters,r,n,e.i.networkingEngine),Wi(e.G,o),y(u,o.promise,2))}return s=u.h,u.return(Fm(e,s,n))})}function Fm(e,t,n){var i,r,o,s,u,a,l,c,d,f,p,m,v,E,w,T,x,S,C,D,b,P,N,U,B,V,W,ee,ne,he,Y,tt,ft,kn,Nt,Gn,Pe,Gt,bt,Jt,it,Ao,Ni,dr,So,Vn,pr,xo,bi,Io,_i,$n,qs,Co;return k(function(Ei){switch(Ei.g){case 1:for((i=e.h.dash.manifestPreprocessor)&&i(t),e.g&&e.g.l.clear(),r=[n],o=[],s=new Map,u=Ke(t,"Location"),a=g(u),l=a.next();!l.done;l=a.next())c=l.value,d=c.getAttribute("serviceLocation"),(f=Ji(c))&&(p=Tt(r,[f])[0],d&&(e.g?so(e.g,"Location",d,p):s.set(d,p)),o.push(p));if(e.g?(m=ws(e.g,"Location",!0),0<m.length&&(r=e.s=m)):o.length&&(r=e.s=o),v=Promise.resolve(),(E=Sn(t,"ContentSteering"))&&e.i)for(w=E.getAttribute("defaultServiceLocation"),e.g?(e.g.j=r,e.g.h=w):(e.g=new Es(e.i),e.g.configure(e.h),e.g.setManifestType("DASH"),e.g.j=r,e.g.h=w,(T=Ji(E))&&(Se(E,"queryBeforeStart",tc,!1)?v=Ts(e.g,T):Ts(e.g,T))),x=g(s.keys()),S=x.next();!S.done;S=x.next())C=S.value,D=s.get(C),so(e.g,"Location",C,D);if(b=Ke(t,"BaseURL"),N=!1,e.g)for(U=g(b),B=U.next();!B.done;B=U.next())V=B.value,W=V.getAttribute("serviceLocation"),ee=Ji(V),W&&ee&&(so(e.g,"BaseURL",W,ee),N=!0);if(N&&e.g||(ne=b.map(Ji),P=Tt(r,ne)),he=function(){return e.g&&N?ws(e.g,"BaseURL"):P||[]},Y=0,b&&b.length&&(Y=Se(b[0],"availabilityTimeOffset",Yo)||0),tt=e.h.dash.ignoreMinBufferTime,ft=0,tt||(ft=Se(t,"minBufferTime",li)||0),e.H=Se(t,"minimumUpdatePeriod",li,-1),kn=Se(t,"availabilityStartTime",Lf),Nt=Se(t,"timeShiftBufferDepth",li),Gn=e.h.dash.ignoreSuggestedPresentationDelay,Pe=null,Gn||(Pe=Se(t,"suggestedPresentationDelay",li)),Gt=e.h.dash.ignoreMaxSegmentDuration,bt=null,Gt||(bt=Se(t,"maxSegmentDuration",li)),Jt=t.getAttribute("type")||"static",e.j)for(it=e.j.presentationTimeline,Ao=g(Object.values(e.m)),Ni=Ao.next();!Ni.done;Ni=Ao.next())dr=Ni.value,dr.segmentIndex&&dr.segmentIndex.yb(it.Ab());else So=e.h.defaultPresentationDelay||1.5*ft,Vn=Pe??So,it=new de(kn,Vn,e.h.dash.autoCorrectDrift);return it.Vc(Jt=="static"),it.R()&&!isNaN(e.h.availabilityWindowOverride)&&(Nt=e.h.availabilityWindowOverride),Nt==null&&(Nt=1/0),it.Ne(Nt),pr=t.getAttribute("profiles")||"",xo={Yb:Jt!="static",presentationTimeline:it,Ka:null,ma:null,Ea:null,P:null,bandwidth:0,Zg:!1,Hc:Y,profiles:pr.split(",")},bi=m4(e,xo,he,t),Io=bi.duration,_i=bi.periods,Jt!="static"&&bi.Pg||it.gb(Io||1/0),e.D&&!e.u&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.u=e.i.isLowLatencyMode()),e.u?it.mh(e.D):e.D&&Ae("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),it.Wf(bt||1),y(Ei,e.l.Kg(_i,xo.Yb),2);case 2:return y(Ei,v,3);case 3:if(e.u&&(ft=0),e.j){e.j.variants=e.l.j,$n=e.l.Jf(),0<$n.length&&(e.j.textStreams=$n),e.j.imageStreams=e.l.i,e.i.filter(e.j),Ei.F(4);break}if(e.j={presentationTimeline:it,variants:e.l.j,textStreams:e.l.Jf(),imageStreams:e.l.i,offlineSessionIds:[],minBufferTime:ft||0,sequenceMode:e.h.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:g4(t)},!it.yh()){Ei.F(5);break}return qs=Ke(t,"UTCTiming"),y(Ei,x4(e,he,qs),6);case 6:if(Co=Ei.h,!e.i)return Ei.return();it.nh(Co);case 5:it.ve();case 4:e.i.makeTextStreamsForClosedCaptions(e.j),K(Ei)}})}function g4(e){if(e=Sn(e,"ServiceDescription"),!e)return null;var t=Sn(e,"Latency"),n=Sn(e,"PlaybackRate");if(t&&t.getAttribute("max")||n){e=t&&t.getAttribute("max")?parseInt(t.getAttribute("max"),10)/1e3:null;var i=n?parseFloat(n.getAttribute("max")):null;return t=t&&t.getAttribute("min")?parseInt(t.getAttribute("min"),10)/1e3:null,n=n?parseFloat(n.getAttribute("min")):null,{maxLatency:e,maxPlaybackRate:i,minLatency:t,minPlaybackRate:n}}return null}function m4(e,t,n,i){var r=Se(i,"mediaPresentationDuration",li),o=[],s=0;i=Ke(i,"Period");for(var u=0;u<i.length;u++){var a=i[u],l=i[u+1],c=Se(a,"start",li,s),d=a.id,f=Se(a,"duration",li),p=null;if(l){var m=Se(l,"start",li);m!=null&&(p=m-c)}else r!=null&&(p=r-c);if(p==null&&(p=f),!(e.C!==null&&d!==null&&c!==null&&c<e.C)||e.L.includes(d)||u+1==i.length){if(c!==null&&(e.C===null||c>e.C)&&(e.C=c),s=v4(e,t,n,{start:c,duration:p,node:a,Mf:p==null||!l}),o.push(s),t.Ka.id&&p&&(e.M[t.Ka.id]=p),p==null){s=null;break}s=c+p}}return e.L=o.map(function(v){return v.id}),r!=null?{periods:o,duration:r,Pg:!1}:{periods:o,duration:s,Pg:!0}}function v4(e,t,n,i){t.Ka=Mh(e,i.node,null,n),t.ma=i,t.Ka.Hc=t.Hc,t.Ka.id||(t.Ka.id="__shaka_period_"+i.start);var r=Ke(i.node,"EventStream");n=t.presentationTimeline.Ab(),r=g(r);for(var o=r.next();!o.done;o=r.next())I4(e,i.start,i.duration,o.value,n);if(n=Ke(i.node,"AdaptationSet").map(function(c){return y4(e,t,c)}).filter(Ir),t.Yb){for(i=[],r=g(n),o=r.next();!o.done;o=r.next()){o=g(o.value.gj);for(var s=o.next();!s.done;s=o.next())i.push(s.value)}if(i.length!=new Set(i).size)throw new M(2,4,4018)}for(i=n.filter(function(c){return!c.wg}),n=n.filter(function(c){return c.wg}),n=g(n),r=n.next();!r.done;r=n.next()){r=r.value,o=r.wg.split(" "),s=g(i);for(var u=s.next();!u.done;u=s.next()){var a=u.value;if(o.includes(a.id)){u={},a=g(a.streams);for(var l=a.next();!l.done;u={Xd:u.Xd},l=a.next())u.Xd=l.value,u.Xd.trickModeVideo=r.streams.find(function(c){return function(d){return En(c.Xd.codecs)==En(d.codecs)}}(u))}}}if(n=wa(e.h.disableAudio,i,"audio"),r=wa(e.h.disableVideo,i,"video"),o=wa(e.h.disableText,i,Ce),i=wa(e.h.disableThumbnails,i,"image"),r.length===0&&n.length===0)throw new M(2,4,4004);return{id:t.Ka.id,audioStreams:n,videoStreams:r,textStreams:o,imageStreams:i}}function wa(e,t,n){return e||!t.length?[]:t.reduce(function(i,r){return r.contentType!=n||i.push.apply(i,F(r.streams)),i},[])}function y4(e,t,n){function i(P){switch(P){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.Ea=Mh(e,n,t.Ka,null);var r=!1,o=Ke(n,"Role"),s=o.map(function(P){return P.getAttribute("value")}).filter(Ir),u=void 0,a=t.Ea.contentType==Ce;a&&(u="subtitle"),o=g(o);for(var l=o.next();!l.done;l=o.next()){l=l.value;var c=l.getAttribute("schemeIdUri");if(c==null||c=="urn:mpeg:dash:role:2011")switch(l=l.getAttribute("value"),l){case"main":r=!0;break;case"caption":case"subtitle":u=l}}var d;c=Ke(n,"EssentialProperty"),o=null;var f=!1;l=!1,c=g(c);for(var p=c.next();!p.done;p=c.next()){p=p.value;var m=p.getAttribute("schemeIdUri");m=="http://dashif.org/guidelines/trickmode"?o=p.getAttribute("value"):m=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?d=i(parseInt(p.getAttribute("value"),10)):m!="urn:mpeg:mpegB:cicp:ColourPrimaries"&&m!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(m=="urn:mpeg:dash:ssr:2023"?f=!0:l=!0)}for(c=Ke(n,"SupplementalProperty"),c=g(c),p=c.next();!p.done;p=c.next())p=p.value,p.getAttribute("schemeIdUri")=="urn:mpeg:mpegB:cicp:TransferCharacteristics"&&(d=i(parseInt(p.getAttribute("value"),10)));c=Ke(n,"Accessibility");var v=new Map,E;for(c=g(c),p=c.next();!p.done;p=c.next())if(m=p.value,p=m.getAttribute("schemeIdUri"),m=m.getAttribute("value"),p=="urn:scte:dash:cc:cea-608:2015")if(p=1,m!=null){m=m.split(";");for(var w=g(m),T=w.next();!T.done;T=w.next()){var x=T.value,S=T=void 0;x.includes("=")?(x=x.split("="),T=x[0].startsWith("CC")?x[0]:"CC"+x[0],S=x[1]||"und"):(T="CC"+p,m.length==2?p+=2:p++,S=x),v.set(T,Le(S))}}else v.set("CC1","und");else if(p=="urn:scte:dash:cc:cea-708:2015")if(p=1,m!=null)for(m=g(m.split(";")),T=m.next();!T.done;T=m.next())T=T.value,x=w=void 0,T.includes("=")?(T=T.split("="),w="svc"+T[0],x=T[1].split(",")[0].split(":").pop()):(w="svc"+p,p++,x=T),v.set(w,Le(x));else v.set("svc1","und");else p=="urn:mpeg:dash:role:2011"?m!=null&&(s.push(m),m=="captions"&&(u="caption")):p=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(m=="1"?E="visually impaired":m=="2"&&(E="hard of hearing"));if(l)return null;l=Ke(n,"ContentProtection");var C=vm(l,e.h.dash.ignoreDrmInfo,e.h.dash.keySystemsByURI),D=Le(t.Ea.language||"und"),b=n.getAttribute("label");if((l=Ke(n,"Label"))&&l.length&&(l=l[0],l.textContent&&(b=l.textContent)),l=Ke(n,"Representation"),n=l.map(function(P){return(P=E4(e,t,C,u,D,b,r,s,v,P,E))&&(P.hdr=P.hdr||d,P.fastSwitching=f),P}).filter(function(P){return!!P}),n.length==0){if(o=t.Ea.contentType=="image",e.h.dash.ignoreEmptyAdaptationSet||a||o)return null;throw new M(2,4,4003)}if(!t.Ea.contentType||t.Ea.contentType=="application")for(t.Ea.contentType=Vm(n[0].mimeType,n[0].codecs),a=g(n),p=a.next();!p.done;p=a.next())p.value.type=t.Ea.contentType;for(a=t.Ea.id||"__fake__"+e.K++,c=g(n),p=c.next();!p.done;p=c.next()){for(p=p.value,m=g(C.drmInfos),w=m.next();!w.done;w=m.next())w=w.value,w.keyIds=w.keyIds&&p.keyIds?new Set([].concat(F(w.keyIds),F(p.keyIds))):w.keyIds||p.keyIds;e.h.dash.enableAudioGroups&&(p.groupId=a)}return l=l.map(function(P){return P.getAttribute("id")}).filter(Ir),{id:a,contentType:t.Ea.contentType,language:D,yk:r,streams:n,drmInfos:C.drmInfos,wg:o,gj:l}}function E4(e,t,n,i,r,o,s,u,a,l,c){if(t.P=Mh(e,l,t.Ea,null),e.D=Math.min(e.D,t.P.Hc),!S4(t.P))return null;var d=t.ma.start;t.bandwidth=Se(l,"bandwidth",ci)||0;var f=t.P.contentType,p=f==Ce||f=="application";f=f=="image";try{var m=void 0;if(n.gf){var v=t.P.zb,E=Tt(v(),[n.gf.Qi]),w=dt(E,e.h.retryParameters);m={method:"AES-128",iv:n.gf.iv,firstMediaSequenceNumber:0,fetchKey:function(){var N,U,B;return k(function(V){if(V.g==1)return y(V,kh(e,w,6),2);if(V.g!=3){if(N=V.h,!N.data||N.data.byteLength!=16)throw new M(2,4,4049);return U={name:"AES-CBC"},B=m,y(V,I.crypto.subtle.importKey("raw",N.data,U,!0,["decrypt"]),3)}B.cryptoKey=V.h,m.fetchKey=void 0,K(V)})}}}if(v=function(N,U,B,V){return C4(e,N,U,B,V)},t.P.Ld)var T=WS(t,v,m);else if(t.P.fc)T=YS(t,e.m,m);else if(t.P.Md)T=JS(t,v,e.m,!!e.j,e.h.dash.initialSegmentLimit,e.M,m);else{var x=t.ma.duration||0,S=t.P.zb;T={Kc:function(){return Promise.resolve(Sc(d,x,S()))}}}}catch(N){if((p||f)&&N.code==4002)return null;throw N}v=Ke(l,"ContentProtection"),v=DS(v,n,e.h.dash.ignoreDrmInfo,e.h.dash.keySystemsByURI),v=new Set(v?[v]:[]),E=!1,Ke(l,"SupplementalProperty").some(function(N){return N.getAttribute("schemeIdUri")=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&N.getAttribute("value")=="JOC"})&&(E=!0);var C=!1;p&&(C=u.includes("forced_subtitle")||u.includes("forced-subtitle"));var D;if(f&&((l=Ke(l,"EssentialProperty").find(function(N){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(N.getAttribute("schemeIdUri"))}))&&(D=l.getAttribute("value")),!D))return null;var b;l=t.P.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(l.includes("hvc1.2.4.L153.B0")||l.includes("hev1.2.4.L153.B0"))&&(b="PQ"),l=t.P.id?t.Ka.id+","+t.P.id:"";var P=l&&e.m[l]?e.m[l]:{id:e.K++,originalId:t.P.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){P.segmentIndex&&(P.segmentIndex.release(),P.segmentIndex=null)},segmentIndex:null,mimeType:t.P.mimeType,codecs:t.P.codecs,frameRate:t.P.frameRate,pixelAspectRatio:t.P.pixelAspectRatio,bandwidth:t.bandwidth,width:t.P.width,height:t.P.height,kind:i,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:v,language:r,originalLanguage:t.Ea.language,label:o,type:t.Ea.contentType,primary:s,trickModeVideo:null,emsgSchemeIdUris:t.P.emsgSchemeIdUris,roles:u,forced:C,channelsCount:t.P.De,audioSamplingRate:t.P.audioSamplingRate,spatialAudio:E,closedCaptions:a,hdr:b,videoLayout:void 0,tilesLayout:D,accessibilityPurpose:c,external:!1,fastSwitching:!1};return P.createSegmentIndex=function(){var N;return k(function(U){if(U.g==1)return P.segmentIndex?U.F(0):(N=P,y(U,T.Kc(),3));N.segmentIndex=U.h,K(U)})},l&&t.Yb&&!e.m[l]&&(e.m[l]=P),P}function T4(e){var t,n;k(function(i){switch(i.g){case 1:return t=0,le(i,2),y(i,Ih(e),4);case 4:t=i.h,Ee(i,3);break;case 2:if(n=ce(i),e.i){if(e.h.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(n),i.return();n.severity=1,e.i.onError(n)}case 3:if(!e.i)return i.return();e.i.onManifestUpdated(),Ch(e,t),K(i)}})}function Ch(e,t){0>e.H||e.I.S(Math.max(e.H-t,ou(e.J)))}function Mh(e,t,n,i){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,De:null,audioSamplingRate:null,Hc:0,hg:0},i=i||n.zb;var r=t.getAttribute("id"),o=Ke(t,"BaseURL"),s,u=!1;if(e.g)for(var a=g(o),l=a.next();!l.done;l=a.next()){var c=l.value;l=c.getAttribute("serviceLocation"),c=Ji(c),l&&c&&(so(e.g,r,l,c),u=!0)}u&&e.g||(s=o.map(Ji)),a=t.getAttribute("contentType")||n.contentType,l=t.getAttribute("mimeType")||n.mimeType,c=t.getAttribute("codecs")||n.codecs;var d=Se(t,"frameRate",wT)||n.frameRate,f=t.getAttribute("sar")||n.pixelAspectRatio,p=w4(Ke(t,"InbandEventStream"),n.emsgSchemeIdUris),m=Ke(t,"AudioChannelConfiguration");m=A4(m)||n.De;var v=Se(t,"audioSamplingRate",Dt)||n.audioSamplingRate;a||(a=Vm(l,c));var E=Sn(t,"SegmentBase"),w=Sn(t,"SegmentTemplate"),T=E&&Se(E,"availabilityTimeOffset",Yo)||0,x=w&&Se(w,"availabilityTimeOffset",Yo)||0,S=o&&o.length&&Se(o[0],"availabilityTimeOffset",Yo)||0;return T=n.Hc+S+T+x,x=null,(S=Sn(t,"SegmentSequenceProperties"))&&(S=Sn(S,"SAP"))&&(x=Se(S,"cadence",Cu)),{zb:function(){return Tt(i(),o.length?e.g&&u?ws(e.g,r):s||[]:[])},Ld:E||n.Ld,fc:Sn(t,"SegmentList")||n.fc,Md:w||n.Md,width:Se(t,"width",Dt)||n.width,height:Se(t,"height",Dt)||n.height,contentType:a,mimeType:l,codecs:c,frameRate:d,pixelAspectRatio:f,emsgSchemeIdUris:p,id:r,language:t.getAttribute("lang"),De:m,audioSamplingRate:v,Hc:T,hg:x||n.hg}}function w4(e,t){t=t.slice(),e=g(e);for(var n=e.next();!n.done;n=e.next())n=n.value.getAttribute("schemeIdUri"),t.includes(n)||t.push(n);return t}function A4(e){e=g(e);for(var t=e.next();!t.done;t=e.next()){var n=t.value;if((t=n.getAttribute("schemeIdUri"))&&(n=n.getAttribute("value")))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(n,10),!t)continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(t=parseInt(n,16),!t)continue;for(e=0;t;)t&1&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}function S4(e){var t=e.Ld?1:0;return t+=e.fc?1:0,t+=e.Md?1:0,t==0?e.contentType==Ce||e.contentType=="application":(t!=1&&(e.Ld&&(e.fc=null),e.Md=null),!0)}function Gm(e,t,n,i){var r,o,s,u,a,l;return k(function(c){if(c.g==1)return r=Tt(t(),[n]),o=dt(r,e.h.retryParameters),o.method=i,s=e.i.networkingEngine.request(4,o),Wi(e.G,s),y(c,s.promise,2);if(u=c.h,i=="HEAD"){if(!u.headers||!u.headers.date)return c.return(0);a=u.headers.date}else a=ze(u.data);return l=Date.parse(a),isNaN(l)?c.return(0):c.return(l-Date.now())})}function x4(e,t,n){var i,r,o,s,u,a,l,c;return k(function(d){switch(d.g){case 1:i=n.map(function(f){return{scheme:f.getAttribute("schemeIdUri"),value:f.getAttribute("value")}}),r=e.h.dash.clockSyncUri,!i.length&&r&&i.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),o=g(i),s=o.next();case 2:if(s.done){d.F(4);break}switch(u=s.value,le(d,5),a=u.scheme,l=u.value,a){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return d.F(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return d.F(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return c=Date.parse(l),d.return(isNaN(c)?0:c-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":Ae("NTP UTCTiming scheme is not supported");break;default:Ae("Unrecognized scheme in UTCTiming element",a)}d.F(9);break;case 7:return y(d,Gm(e,t,l,"HEAD"),10);case 10:return d.return(d.h);case 8:return y(d,Gm(e,t,l,"GET"),11);case 11:return d.return(d.h);case 9:Ee(d,3);break;case 5:ce(d);case 3:s=o.next(),d.F(2);break;case 4:return Ae("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),d.return(0)}})}function I4(e,t,n,i,r){var o=i.getAttribute("schemeIdUri")||"",s=i.getAttribute("value")||"",u=Se(i,"timescale",Dt)||1;i=g(Ke(i,"Event"));for(var a=i.next();!a.done;a=i.next()){a=a.value;var l=Se(a,"presentationTime",Dt)||0,c=Se(a,"duration",Dt)||0;l=l/u+t,c=l+c/u,n!=null&&(l=Math.min(l,t+n),c=Math.min(c,t+n)),c<r||(a={schemeIdUri:o,value:s,startTime:l,endTime:c,id:a.getAttribute("id")||"",eventElement:a},e.i.onTimelineRegionAdded(a))}}function C4(e,t,n,i,r){var o,s,u,a;return k(function(l){return l.g==1?(o=bn,s=r?0:1,u=ns(t,n,i,e.h.retryParameters),y(l,kh(e,u,o,{type:s}),2)):(a=l.h,l.return(a.data))})}function Vm(e,t){return t=Kt(e,t),lu(t)?Ce:e.split("/")[0]}function kh(e,t,n,i){return t=e.i.networkingEngine.request(n,t,i),Wi(e.G,t),t.promise}O("shaka.dash.DashParser",Ta),xn["application/dash+xml"]=function(){return new Ta},xn["video/vnd.mpeg.dash.mpd"]=function(){return new Ta};function Aa(){}O("shaka.dependencies",Aa),Aa.has=function(e){return Lh.has(e)},Aa.add=function(e,t){if(!Km[e])throw Error(e+" is not supported");e==zm?wn("mux.js","mux.js is no longer used in Shaka Player."):Lh.set(e,function(){return t})};var zm="muxjs",Km={zk:zm,ISOBoxer:"ISOBoxer"};Aa.Allowed=Km;var Lh=new Map([["ISOBoxer",function(){return I.ISOBoxer}]]);function Hm(e,t,n){this.type=e,this.g=t,this.segments=n||null}function Dh(e,t,n,i){this.id=e,this.name=t,this.g=n,this.value=i===void 0?null:i}Dh.prototype.toString=function(e){function t(r){return r.name+"="+(isNaN(Number(r.value))?'"'+r.value+'"':r.value)}var n="#"+this.name,i=this.g?this.g.filter(function(r){return e?!e.has(r.name):!0}).map(t):[];return this.value&&i.unshift(this.value),0<i.length&&(n+=":"+i.join(",")),n};function Wm(e){var t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI");return e.toString(t)}Dh.prototype.getAttribute=function(e){var t=this.g.filter(function(n){return n.name==e});return t.length?t[0]:null};function Q(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function qe(e,t){if(e=e.getAttribute(t),!e)throw new M(2,4,4023,t);return e.value}function Xm(e,t,n){n=n===void 0?[]:n,this.g=t,this.h=e,this.Bb=n}function Ym(e,t){this.name=e,this.value=t}function jn(e,t){return e.filter(function(n){return n.name==t})}function qm(e,t){return e.filter(function(n){return qe(n,"TYPE")==t})}function At(e,t){e=g(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function ao(e,t,n){return n=n===void 0?0:n,(e=At(e,t))?Number(e.value):n}function rr(e,t,n){return t?$m(e,[t],n):[]}function $m(e,t,n){if(!t.length)return[];t=Tt(e,t),e=[],t=g(t);for(var i=t.next();!i.done;i=t.next()){var r=e,o=r.push,s=i.value;if((i=n)&&i.size){s=String(s).replace(/%7B/g,"{").replace(/%7D/g,"}");var u=s.match(/{\$\w*}/g);if(u){u=g(u);for(var a=u.next();!a.done;a=u.next()){a=a.value;var l=a.slice(2,a.length-1),c=i.get(l);if(c)s=s.replace(a,c);else throw new M(2,4,4039,l)}}i=s}else i=s;o.call(r,i)}return e}function or(e){this.h=e||"",this.g=0}function lo(e){Ri(e,/[ \t]+/gm)}function Ri(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function sr(e){return e.g==e.h.length?null:(e=Ri(e,/[^ \t\n]*/gm))?e[0]:null}function M4(){this.g=0}function Rh(e,t){t=ze(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`).trim();var n=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new M(2,4,4015);t=0;for(var i=!0,r=g(n),o=r.next();!o.done;o=r.next())if(o=o.value,/^#(?!EXT)/m.test(o)||i)i=!1;else if(o=Ph(e,o),--e.g,Qm.includes(o.name)){t=1;break}else o.name=="EXT-X-STREAM-INF"&&(i=!0);for(r=[],i=!0,o=0;o<n.length;o++){var s=n[o],u=n[o+1];if(/^#(?!EXT)/m.test(s)||i)i=!1;else{if(s=Ph(e,s),k4.includes(s.name)){if(t!=1)throw new M(2,4,4017);s=n.splice(o,n.length-o),n=[],i=[],o=[],u=null,s=g(s);for(var a=s.next();!a.done;a=s.next())a=a.value,/^(#EXT)/.test(a)?(a=Ph(e,a),Qm.includes(a.name)?r.push(a):a.name=="EXT-X-MAP"?u=a:a.name=="EXT-X-PART"?o.push(a):a.name=="EXT-X-PRELOAD-HINT"?Q(a,"TYPE")=="PART"?o.push(a):Q(a,"TYPE")=="MAP"&&(a.name="EXT-X-MAP",u=a):i.push(a)):/^#(?!EXT)/m.test(a)||(a=a.trim(),u&&i.push(u),n.push(new Xm(a,i,o)),i=[],o=[]);return o.length&&(u&&i.push(u),n.push(new Xm("",i,o))),new Hm(t,r,n)}r.push(s),s.name=="EXT-X-STREAM-INF"&&(s.g.push(new Ym("URI",u)),i=!0)}}return new Hm(t,r)}function Ph(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new M(2,4,4016,t);t=n[1];var i=n[2];n=[];var r;if(i){i=new or(i);var o;(o=Ri(i,/^([^,=]+)(?:,|$)/g))&&(r=o[1]);for(var s=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;o=Ri(i,s);)n.push(new Ym(o[1],o[2]||o[3])),lo(i)}return new Dh(e,t,n,r)}var Qm="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF".split(" "),k4="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function Jm(){}function Zm(e){try{var t=Nh(e);return Nr({uri:e,originalUri:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return Hi(n)}}function Nh(e){var t=e.split(":");if(2>t.length||t[0]!="data")throw new M(2,1,1004,e);if(t=t.slice(1).join(":").split(","),2>t.length)throw new M(2,1,1004,e);var n=t[0];e=I.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var i=!1;1<t.length&&t[t.length-1]=="base64"&&(i=!0,t.pop());var r;return i?r=An(e):r=si(e),{data:r,contentType:n}}O("shaka.net.DataUriPlugin",Jm),Jm.parse=Zm,ri("data",Zm);function ev(e){var t=ni(e),n=t.split("/")[0];return e=Tn(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map}}function L4(e,t){function n(v){return i(v.name)}function i(v){switch(v=v.toLowerCase(),v){case"avc1":case"avc3":r.push(v+".42E01E"),s=!0;break;case"hev1":case"hvc1":r.push(v+".1.6.L93.90"),s=!0;break;case"dvh1":case"dvhe":r.push(v+".05.04"),s=!0;break;case"vp09":r.push(v+".00.10.08"),s=!0;break;case"av01":r.push(v+".0.01M.08"),s=!0;break;case"mp4a":r.push("mp4a.40.2"),o=!0;break;case"ac-3":case"ec-3":case"opus":case"flac":r.push(v),o=!0}}var r=[],o=!1,s=!1,u=null,a=null,l=null,c=null,d=null;if(new Ue().box("moov",Re).box("trak",Re).T("tkhd",function(v){v=Zf(v.reader,v.version),a=String(v.height),l=String(v.width)}).box("mdia",Re).T("mdhd",function(v){u=Lu(v.reader,v.version).language}).box("minf",Re).box("stbl",Re).T("stsd",Or).box("mp4a",function(v){var E=v.reader;E.skip(6),E.skip(2),E.skip(8);var w=E.Ua();E.skip(2),E.skip(2),E.skip(2),E=E.Ua()+E.Ua()/65536,c=w,d=E,v.reader.xa()?Re(v):n(v)}).box("esds",function(v){v=YT(v.reader),r.push(v.wa),o=!0}).box("ac-3",n).box("ec-3",n).box("opus",n).box("Opus",n).box("fLaC",n).box("avc1",function(v){v=e0(v.reader,v.name),r.push(v.wa),s=!0}).box("avc3",function(v){v=e0(v.reader,v.name),r.push(v.wa),s=!0}).box("hev1",n).box("hvc1",n).box("dvh1",n).box("dvhe",n).box("vp09",n).box("av01",n).box("enca",Au).box("encv",Au).box("sinf",Re).box("frma",function(v){v=t0(v.reader).wa,i(v)}).parse(e||t,!0),!r.length)return null;var f=o&&!s,p=new Map;if(s){var m=new zt("video/mp4");for(e&&m.init(e),m.i(t),e=g(m.j()),t=e.next();!t.done;t=e.next())t=t.value,p.set(t,t);m.h()}return{type:f?"audio":"video",mimeType:f?"audio/mp4":"video/mp4",codecs:D4(r).join(", "),language:u,height:a,width:l,channelCount:c,sampleRate:d,closedCaptions:p}}function D4(e){var t=new Set,n=[];e=g(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var r=Pn(i);t.has(r)||(n.push(i),t.add(r))}return n}function Sa(){var e=this;this.g=this.i=null,this.C=1,this.s=new Map,this.J=new Map,this.L=new Map,this.L.set("video",new Map),this.L.set("audio",new Map),this.L.set(Ce,new Map),this.L.set("image",new Map),this.va=new Set,this.h=new Map,this.l=null,this.Z="",this.sa=new M4,this.K=-1,this.V=1/0,this.$=this.Xa=!1,this.u=new fe(function(){Z4(e)}),this.aa=Ca,this.G=null,this.ua=0,this.m=1/0,this.ha=this.Aa=this.M=0,this.N=new br,this.H=new Map,this.I=new Map,this.W=new Map,this.Wa=this.D=!1,this.Ra=new yr(5),this.j=null}h=Sa.prototype,h.configure=function(e){this.g=e,this.j&&this.j.configure(this.g)},h.start=function(e,t){var n=this,i;return k(function(r){return r.g==1?(n.i=t,n.D=t.isLowLatencyMode(),y(r,Fh(n,[e]),2)):r.g!=3?(i=r.h,n.Z=i.uri,y(r,b4(n,i.data,e),3)):r.return(n.G)})},h.stop=function(){this.u&&(this.u.stop(),this.u=null);var e=[];return this.N&&(e.push(this.N.destroy()),this.N=null),this.g=this.i=null,this.va.clear(),this.G=null,this.h.clear(),this.J.clear(),this.I.clear(),this.s.clear(),this.W.clear(),this.j&&this.j.destroy(),Promise.all(e)},h.update=function(){var e=this,t,n,i,r,o,s,u,a,l;return k(function(c){if(c.g==1){if(!Wt(e))return c.return();for(t=[],n=Array.from(e.h.values()),e.m=1/0,i=n.filter(function(d){return d.stream.segmentIndex}),r=g(i),o=r.next();!o.done;o=r.next())s=o.value,t.push(R4(e,s));return y(c,Promise.all(t),2)}cv(e,i.map(function(d){return d.stream})),u=i.some(function(d){return d.vd==0}),i.length&&!u&&(a=e2,Ia(e,a.Fh),l=i.map(function(d){return d.Qb}),e.l.gb(Math.min.apply(Math,F(l))),e.i.updateDuration()),u&&_h(e),K(c)})};function bh(e,t){return Wt(e)?e.L.get(t.type):t.ye}function R4(e,t){var n,i,r,o,s,u,a,l,c,d,f,p,m,v,E,w,T,x,S,C,D,b,P,N,U,B,V,W,ee;return k(function(ne){if(ne.g==1){for(n=[],i=g(t.ba()),r=i.next();!r.done;r=i.next())o=r.value,s=new Je(o),u=s.g,t.$d&&(0<=t.rb&&u.add("_HLS_msn",String(t.rb)),0<=t.sb&&u.add("_HLS_part",String(t.sb))),t.ae&&u.add("_HLS_skip","YES"),Cp(u)&&Do(s,u),n.push(s.toString());return y(ne,Fh(e,n,!0),2)}if(a=ne.h,!t.stream.segmentIndex)return ne.return();if(l=Rh(e.sa,a.data),l.type!=1)throw new M(2,4,4017);c=a.uri,c==a.originalUri||t.ba().includes(c)||t.jh.push(c),d=jn(l.g,"EXT-X-DEFINE"),f=iv(e,d,c),p=t.stream,m=bh(e,t),v=fv(l,p.mimeType),E=v.keyIds,w=v.drmInfos,T=function(he,Y){return he.size===Y.size&&[].concat(F(he)).every(function(tt){return Y.has(tt)})},T(p.keyIds,E)||(p.keyIds=E,p.drmInfos=w,e.i.newDrmInfo(p)),x=Ev(e,l,p,m,f,t.ba),S=x.segments,(C=x.bandwidth)&&(p.bandwidth=C),p.segmentIndex.Cd(S,e.l.Ab()),S.length&&(D=ao(l.g,"EXT-X-MEDIA-SEQUENCE",0),P=(b=At(l.g,"EXT-X-SKIP"))?Number(Q(b,"SKIPPED-SEGMENTS")):0,N=dv(D,S),U=N.rb,B=N.sb,t.rb=U+P,t.sb=B,V=m.get(D),p.segmentIndex.yb(V)),W=S[0],t.yc=W.startTime,ee=S[S.length-1],t.Qb=ee.endTime,At(l.g,"EXT-X-ENDLIST")&&(t.vd=!0),Oh(e,l),K(ne)})}h.onExpirationUpdated=function(){},h.onInitialVariantChosen=function(){},h.banLocation=function(e){this.j&&this.j.i.set(e,Date.now()+6e4)};function P4(e,t){for(var n=e.K==-1,i=g(t),r=i.next();!r.done;r=i.next()){r=r.value;var o=r.stream.segmentIndex,s=bh(e,r);if(o=o.g[0]||null){s=g(s);for(var u=s.next();!u.done;u=s.next()){u=g(u.value);var a=u.next().value;if(u.next().value==o.startTime){n&&(e.K=Math.max(e.K,a)),r.pf=a;break}}}}if(!(0>e.K))for(t=g(t),r=t.next();!r.done;r=t.next())n=r.value,(i=n.stream.segmentIndex)&&(i.g.splice(0,e.K-n.pf),(i=i.g[0]||null)&&(i=-i.startTime,n.stream.segmentIndex.offset(i),tv(e,n,i)))}function N4(e,t){if(e.V==1/0){t=g(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value.stream.segmentIndex.g[0]||null;i!=null&&i.oa!=null&&(e.V=Math.min(e.V,i.oa))}}if(t=e.V,t!=1/0)for(i=g(e.h.values()),n=i.next();!n.done;n=i.next()){n=n.value;var r=n.stream.segmentIndex;if(r!=null){var o=r.g[0]||null;if(o.oa==null)Ti("Missing EXT-X-PROGRAM-DATE-TIME for stream",n.ba(),"Expect AV sync issues!");else for(tv(e,n,o.oa-t-o.startTime),n=g(r),r=n.next();!r.done;r=n.next())r.value.sg(t)}}}function tv(e,t,n){t.yc+=n,t.Qb+=n,e=bh(e,t);for(var i=g(e),r=i.next();!r.done;r=i.next()){var o=g(r.value);r=o.next().value,o=o.next().value,e.set(r,o+n)}t.ba()}function b4(e,t,n){var i,r,o,s,u,a,l,c,d,f,p,m,v,E,w,T,x,S,C,D,b,P,N,U,B,V,W,ee,ne,he;return k(function(Y){switch(Y.g){case 1:return i=Rh(e.sa,t),r=jn(i.g,"EXT-X-DEFINE"),o=[],s=[],u=[],i.type==1?(v=function(){return[n]},y(Y,nv(e,i,v),6)):(_4(e,r),a=jn(i.g,"EXT-X-MEDIA"),l=jn(i.g,"EXT-X-STREAM-INF"),c=jn(i.g,"EXT-X-IMAGE-STREAM-INF"),d=jn(i.g,"EXT-X-I-FRAME-STREAM-INF"),f=jn(i.g,"EXT-X-SESSION-KEY"),p=jn(i.g,"EXT-X-SESSION-DATA"),m=jn(i.g,"EXT-X-CONTENT-STEERING"),O4(e,p),y(Y,j4(e,m),4));case 4:return U4(e,l),H4(e,a),o=V4(e,l,f,a),s=B4(e,a),y(Y,F4(e,c,d),5);case 5:u=Y.h,Y.F(3);break;case 6:return E=Y.h,w=E.type,T=E.mimeType,x=E.codecs,S=E.language,C=E.height,D=E.width,b=E.channelCount,P=E.sampleRate,N=E.closedCaptions,y(Y,hv(e,e.C++,i,v,n,x,w,S,!0,"Media Playlist",b,N,null,!1,P,!1,T),7);case 7:U=Y.h,e.h.set(n,U),w=="video"&&Tv(U.stream,D,C,null,null,null),o.push({id:0,language:Le(S||"und"),disabledUntilTime:0,primary:!0,audio:w=="audio"?U.stream:null,video:w=="video"?U.stream:null,bandwidth:U.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.i)throw new M(2,7,7001);if(e.l=new de(null,0),e.l.Vc(!0),i.type==1&&(Wt(e)&&(mv(e,i),B=e.m,e.u.S(B)),V=Array.from(e.h.values()),Uh(e,V),_h(e)),e.G={presentationTimeline:e.l,variants:o,textStreams:s,imageStreams:u,offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null},e.$||!e.g.hls.disableCodecGuessing){Y.F(8);break}for(W=[],ee=g(e.G.variants),ne=ee.next();!ne.done;ne=ee.next())he=ne.value,he.audio&&he.audio.codecs===""&&W.push(he.audio.createSegmentIndex()),he.video&&he.video.codecs===""&&W.push(he.video.createSegmentIndex());return y(Y,Promise.all(W),8);case 8:e.i.makeTextStreamsForClosedCaptions(e.G),K(Y)}})}function nv(e,t,n){var i,r,o,s,u,a,l,c,d,f,p,m,v,E,w,T,x,S;return k(function(C){switch(C.g){case 1:if(i=ev(e.g.hls.mediaPlaylistFullMimeType),!t.segments.length)return C.return(i);if(r=Math.trunc((t.segments.length-1)/2),o=t.segments[r],s=rr(n(),t.segments[0].h),u=s[0],a=new Je(u),l=a.Ya.split(".").pop(),c=wv[l])return C.return(ev(c));if(d=bn,f=null,p=vv(e,t,o.g,n),e.W.clear(),!p){C.F(2);break}return m=ns(p.ba(),p.Pb(),p.Mb(),e.g.retryParameters),y(C,co(e,m,d,{type:0}),3);case 3:v=C.h,f=v.data;case 2:return E=dt(s,e.g.retryParameters),y(C,co(e,E,d,{type:1}),4);case 4:if(w=C.h,(T=w.headers["content-type"])&&(T=T.split(";")[0].toLowerCase()),l=="ts"||T=="video/mp2t"){var D=w.data,b=ge(D);b=new Oe().parse(b);var P=b.sd();b=b.Lf();var N=[],U=!1,B=!1;switch(P.audio){case"aac":N.push("mp4a.40.2"),U=!0;break;case"mp3":N.push("mp4a.40.34"),U=!0;break;case"ac3":N.push("ac-3"),U=!0;break;case"ec3":N.push("ec-3"),U=!0}switch(P.video){case"avc":b.wa?N.push(b.wa):N.push("avc1.42E01E"),B=!0;break;case"hvc":b.wa?N.push(b.wa):N.push("hvc1.1.6.L93.90"),B=!0}if(N.length){if(P=U&&!B,U=new Map,B){B=new zt("video/mp2t"),B.i(D),D=g(B.j());for(var V=D.next();!V.done;V=D.next())V=V.value,U.set(V,V);B.h()}b={type:P?"audio":"video",mimeType:"video/mp2t",codecs:N.join(", "),language:null,height:b.height,width:b.width,channelCount:null,sampleRate:null,closedCaptions:U}}else b=null;if(x=b)return C.return(x)}else if((l=="mp4"||l=="cmfv"||l=="m4s"||T=="video/mp4"||T=="audio/mp4"||T=="video/iso.segment")&&(S=L4(f,w.data)))return C.return(S);return C.return(i)}})}function _h(e){if(Wt(e)){if(e.aa==Ma){var t=Y4(e);e.g.hls.useSafariBehaviorForLive&&(t=e.l.s),isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.Ne(t)}if(!e.l.m){t=Array.from(e.h.values()).filter(function(i){return i.stream.segmentIndex}),t=g(t);for(var n=t.next();!n.done;n=t.next())n=n.value,(n.type=="audio"||n.type=="video")&&(n=n.stream.segmentIndex.get(0))&&n.oa&&e.l.og(n.oa)}}else e.l.gb(lv(e));e.l.ve()}function _4(e,t){var n=new Je(e.Z).g;t=g(t);for(var i=t.next();!i.done;i=t.next()){var r=i.value;i=Q(r,"NAME");var o=Q(r,"VALUE");r=Q(r,"QUERYPARAM"),i&&o&&(e.s.has(i)||e.s.set(i,o)),r&&(i=n.get(r)[0])&&!e.s.has(i)&&e.s.set(r,i)}}function iv(e,t,n){n=new Je(n).g;var i=new Map;t=g(t);for(var r=t.next();!r.done;r=t.next()){var o=r.value,s=Q(o,"NAME"),u=Q(o,"VALUE");r=Q(o,"QUERYPARAM"),o=Q(o,"IMPORT"),s&&u&&(i.has(s)||i.set(s,u)),r&&(s=n.get(r)[0])&&!i.has(s)&&i.set(r,s),o&&(r=e.s.get(o))&&i.set(o,r)}return i}function U4(e,t){t=g(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,r=Q(i,"AUDIO");n=Q(i,"VIDEO");var o=Q(i,"SUBTITLES");if(i=rv(e,i),o){var s=_t(Ce,i);e.I.set(o,s),Rn(i,s)}r&&(o=_t("audio",i),o||(o=e.g.hls.defaultAudioCodec),e.I.set(r,o)),n&&(r=_t("video",i),r||(r=e.g.hls.defaultVideoCodec),e.I.set(n,r))}}function O4(e,t){t=g(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,r=Q(i,"DATA-ID");n=Q(i,"URI");var o=Q(i,"LANGUAGE");i=Q(i,"VALUE"),r=new Map().set("id",r),n&&r.set("uri",rr([e.Z],n,e.s)[0]),o&&r.set("language",o),i&&r.set("value",i),n=new X("sessiondata",r),e.i&&e.i.onEvent(n)}}function j4(e,t){var n,i,r,o,s,u;return k(function(a){if(!e.i||!e.g)return a.return();for(i=g(t),r=i.next();!r.done;r=i.next())if(o=r.value,s=Q(o,"PATHWAY-ID"),u=Q(o,"SERVER-URI"),s&&u){e.j=new Es(e.i),e.j.configure(e.g),e.j.j=[e.Z],e.j.setManifestType("HLS"),e.j.h=s,n=Ts(e.j,u);break}return y(a,n,0)})}function B4(e,t){var n=qm(t,"SUBTITLES");t=n.map(function(s){if(e.g.disableText)return null;try{return av(e,[s],new Map).stream}catch(u){if(e.g.hls.ignoreTextStreamFailures)return null;throw u}}),n=g(n);for(var i=n.next();!i.done;i=n.next()){var r=qe(i.value,"GROUP-ID");if((i=e.I.get(r))&&(r=e.J.get(r))){r=g(r);for(var o=r.next();!o.done;o=r.next())o=o.value,o.stream.codecs=i,o.stream.mimeType=jh(Ce,i)||Bh(Ce)}}return t.filter(function(s){return s})}function F4(e,t,n){var i,r;return k(function(o){return o.g==1?(i=t.map(function(s){var u,a;return k(function(l){if(l.g==1)return e.g.disableThumbnails?l.return(null):(le(l,2),y(l,W4(e,s),4));if(l.g!=2)return u=l.h,l.return(u.stream);if(a=ce(l),e.g.hls.ignoreImageStreamFailures)return l.return(null);throw a})}).concat(n.map(function(s){if(e.g.disableThumbnails)return null;try{var u=qe(s,"URI"),a=Q(s,"CODECS")||"";if(e.h.has(u))var l=e.h.get(u);else{var c=Q(s,"LANGUAGE"),d=Q(s,"NAME"),f=Q(s,"CHARACTERISTICS"),p=xa(e,e.C++,[u],a,"image",c,!1,d,null,null,f,!1,null,!1),m=Q(s,"RESOLUTION"),v=g(m?m.split("x"):[null,null]),E=v.next().value,w=v.next().value;p.stream.width=Number(E)||void 0,p.stream.height=Number(w)||void 0;var T=Q(s,"BANDWIDTH");T&&(p.stream.bandwidth=Number(T)),e.h.set(u,p),l=p}return s=l,s.stream.codecs!=="mjpg"?null:s.stream}catch(x){if(e.g.hls.ignoreImageStreamFailures)return null;throw x}})),y(o,Promise.all(i),2)):(r=o.h,o.return(r.filter(function(s){return s})))})}function G4(e,t,n){t=t.filter(function(u){var a=Q(u,"URI")||"";return Q(u,"TYPE")!="SUBTITLES"&&a!=""});var i={};t=g(t);for(var r=t.next();!r.done;r=t.next()){r=r.value;var o=Wm(r);i[o]?i[o].push(r):i[o]=[r]}for(var s in i)av(e,i[s],n)}function V4(e,t,n,i){var r=[],o=new Set;if(0<n.length){n=g(n);for(var s=n.next();!s.done;s=n.next()){s=s.value;var u=qe(s,"METHOD");if(u!="NONE"&&u!="AES-128"&&(u=Q(s,"KEYFORMAT")||"identity",s=(u=Sv[u])?u(s,""):null)){if(s.keyIds){u=g(s.keyIds);for(var a=u.next();!a.done;a=u.next())o.add(a.value)}r.push(s)}}}for(n={},t=g(t),s=t.next();!s.done;s=t.next())s=s.value,u=Wm(s),n[u]?n[u].push(s):n[u]=[s];t=[];for(var l in n){a=n[l];var c=a[0];s=Q(c,"FRAME-RATE"),u=Number(Q(c,"AVERAGE-BANDWIDTH"))||Number(qe(c,"BANDWIDTH"));var d=Q(c,"RESOLUTION"),f=g(d?d.split("x"):[null,null]);d=f.next().value,f=f.next().value;var p=Q(c,"VIDEO-RANGE");(c=Q(c,"REQ-VIDEO-LAYOUT"))&&c.includes(",")&&(c=c.split(",").filter(function(m){return m=="CH-STEREO"||m=="CH-MONO"})[0]),c=c||"CH-MONO",a=z4(e,a,i,u),t.push.apply(t,F(K4(e,a.audio,a.video,u,d,f,s,p,c,r,o)))}return t.filter(function(m){return m!=null})}function z4(e,t,n,i){for(var r={audio:[],video:[]},o=new Map,s=[],u=!1,a=!1,l=g(t),c=l.next();!c.done;c=l.next()){var d=c.value;c=Q(d,"AUDIO");var f=Q(d,"VIDEO"),p=c||f;p&&(s.includes(p)||s.push(p),(d=Q(d,"PATHWAY-ID"))&&o.set(p,d),c?u=!0:f&&(a=!0))}s.length&&n.length&&(l=n.filter(function(E){return s.includes(qe(E,"GROUP-ID"))}),G4(e,l,o)),l=(o=s.sort().join(","))&&e.J.has(o)?e.J.get(o):[],u?r.audio.push.apply(r.audio,F(l)):a&&r.video.push.apply(r.video,F(l)),c=!1;var m=t.map(function(E){return qe(E,"URI")});if(a=r.audio.find(function(E){return E&&E.ba().find(function(w){return m.includes(w)})}),u=rv(e,t[0]),f=_t("video",u),(p=_t("audio",u))&&!f?(a="audio",c=0<r.audio.length):!r.audio.length&&!r.video.length&&p&&f?(a="video",u=[[f,p].join()]):r.audio.length&&a?(a="audio",c=!0):a=r.video.length&&!r.audio.length?"audio":"video",!c){var v=d=p=f=c=null;!l.length&&(n=n.find(function(E){var w=Q(E,"URI")||"",T=Q(E,"TYPE");return E=qe(E,"GROUP-ID"),T!="SUBTITLES"&&w==""&&s.includes(E)}))&&(c=Q(n,"LANGUAGE"),f=Q(n,"NAME"),p=ov(n),uv(n),d=Q(n,"CHARACTERISTICS"),v=sv(n)),e=X4(e,t,u,a,c,f,p,d,v),o&&(e.stream.groupId=o),l.length||(e.stream.bandwidth=i),r[e.stream.type]=[e]}return r}function rv(e,t){var n=Q(t,"CODECS")||"";e.$=0<n.length,e.$||e.g.hls.disableCodecGuessing||(t=[],e.g.disableVideo||t.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||t.push(e.g.hls.defaultAudioCodec),n=t.join(",")),e=new Set,t=[],n=g(n.split(/\s*,\s*/));for(var i=n.next();!i.done;i=n.next()){i=i.value;var r=Pn(i);e.has(r)||(t.push(i),e.add(r))}return t}function ov(e){return(e=Q(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function sv(e){return(e=Q(e,"SAMPLE-RATE"))?parseInt(e,10):null}function uv(e){return(e=Q(e,"CHANNELS"))?e.includes("/JOC"):!1}function K4(e,t,n,i,r,o,s,u,a,l,c){for(var d=g(n),f=d.next();!f.done;f=d.next())Tv(f.value.stream,r,o,s,u,a);for(r=e.g.disableAudio,(!t.length||r)&&(t=[null]),r=e.g.disableVideo,(!n.length||r)&&(n=[null]),r=[],t=g(t),o=t.next();!o.done;o=t.next())for(o=o.value,s=g(n),u=s.next();!u.done;u=s.next()){var p=u.value;(u=o?o.stream:null)&&(u.drmInfos=l,u.keyIds=c),(a=p?p.stream:null)&&(a.drmInfos=l,a.keyIds=c),d=o?o.stream.drmInfos:null,f=p?p.stream.drmInfos:null,p=p?p.ba().sort().join(","):"";var m=o?o.ba().sort().join(","):"";p=p+" - "+m,u&&a&&!Gf(d,f)||e.va.has(p)||(u={id:e.C++,language:u?u.language:"und",disabledUntilTime:0,primary:!!u&&u.primary||!!a&&a.primary,audio:u,video:a,bandwidth:i,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},r.push(u),e.va.add(p))}return r}function H4(e,t){t=qm(t,"CLOSED-CAPTIONS"),t=g(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,r=Q(i,"LANGUAGE");n=Le(r||"und"),r||(r=Q(i,"NAME"))&&(n=r),r=qe(i,"GROUP-ID"),i=qe(i,"INSTREAM-ID").replace("SERVICE","svc"),e.H.get(r)||e.H.set(r,new Map),e.H.get(r).set(i,n)}}function av(e,t,n){for(var i=[],r=[],o=new Map,s=g(t),u=s.next();!u.done;u=s.next()){var a=u.value;u=qe(a,"URI"),a=qe(a,"GROUP-ID"),i.push(u),r.push(a),o.set(a,u)}if(s=r.sort().join(","),u=t[0],t="",a=qe(u,"TYPE").toLowerCase(),a=="subtitles"&&(a=Ce),a==Ce)t=Q(u,"CODECS")||"";else{r=g(r);for(var l=r.next();!l.done;l=r.next())if(l=l.value,e.I.has(l)){t=e.I.get(l);break}}if(r=i.sort().join(","),e.h.has(r))return e.h.get(r);if(l=e.C++,e.j){o=g(o);for(var c=o.next();!c.done;c=o.next()){var d=g(c.value);c=d.next().value,d=d.next().value,(c=n.get(c))&&so(e.j,l,c,d)}}n=Q(u,"LANGUAGE"),o=Q(u,"NAME"),c=Q(u,"DEFAULT")=="YES",d=a=="audio"?ov(u):null;var f=a=="audio"?uv(u):!1,p=Q(u,"CHARACTERISTICS"),m=Q(u,"FORCED")=="YES";return u=a=="audio"?sv(u):null,i=xa(e,l,i,t,a,n,c,o,d,null,p,m,u,f),i.stream&&(i.stream.groupId=s),e.J.has(s)?e.J.get(s).push(i):e.J.set(s,[i]),e.h.set(r,i),i}function W4(e,t){var n,i,r,o,s,u,a,l,c,d;return k(function(f){return f.g==1?(n=qe(t,"URI"),i=Q(t,"CODECS","jpeg")||"",e.h.has(n)?f.return(e.h.get(n)):(r=Q(t,"LANGUAGE"),o=Q(t,"NAME"),s=Q(t,"CHARACTERISTICS"),u=xa(e,e.C++,[n],i,"image",r,!1,o,null,null,s,!1,null,!1),(a=Q(t,"RESOLUTION"))?y(f,u.stream.createSegmentIndex(),3):f.F(2))):(f.g!=2&&(l=u.stream.segmentIndex.get(0),c=l.tilesLayout)&&(u.stream.width=Number(a.split("x")[0])*Number(c.split("x")[0]),u.stream.height=Number(a.split("x")[1])*Number(c.split("x")[1])),(d=Q(t,"BANDWIDTH"))&&(u.stream.bandwidth=Number(d)),e.h.set(n,u),f.return(u))})}function X4(e,t,n,i,r,o,s,u,a){for(var l=e.C++,c=[],d=g(t),f=d.next();!f.done;f=d.next()){var p=f.value;f=qe(p,"URI"),p=Q(p,"PATHWAY-ID"),e.j&&p&&so(e.j,l,p,f),c.push(f)}if(d=c.sort().join(","),e.h.has(d))return e.h.get(d);e:{if(t=Q(t[0],"CLOSED-CAPTIONS"),i=="video"){if(t&&t!="NONE"){t=e.H.get(t);break e}if(!t&&e.H.size)for(t=g(e.H.keys()).next();!t.done;){t=e.H.get(t.value);break e}}t=null}return n=mr(i,n),i=xa(e,l,c,n,i,r,!1,o,s,t,u,!1,a,!1),e.h.set(d,i),i}function xa(e,t,n,i,r,o,s,u,a,l,c,d,f,p){function m(C){var D,b,P,N,U,B,V,W,ee,ne,he,Y,tt,ft,kn,Nt,Gn;return k(function(Pe){switch(Pe.g){case 1:return D=T.ba(),y(Pe,Fh(e,T.ba(),!0),2);case 2:if(b=Pe.h,C.aborted)return Pe.return();if(P=b.uri,P==b.originalUri||D.includes(P)||w.push(P),N=Rh(e.sa,b.data),U=void 0,e.$||!e.g.hls.disableCodecGuessing){Pe.F(3);break}return y(Pe,nv(e,N,v),4);case 4:B=Pe.h,U=B.mimeType,i=B.codecs;case 3:return V=Wt(e),y(Pe,hv(e,0,N,v,P,i,r,o,s,u,a,l,c,d,f,p,U),5);case 5:if(W=Pe.h,C.aborted)return Pe.return();if(ee=W.stream,Wt(e)&&!V&&mv(e,N),T.yc=W.yc,T.Qb=W.Qb,T.ae=W.ae,T.$d=W.$d,T.vd=W.vd,T.ye=W.ye,T.rb=W.rb,T.sb=W.sb,T.Sf=!0,E.segmentIndex=ee.segmentIndex,E.encrypted=ee.encrypted,E.drmInfos=ee.drmInfos,E.keyIds=ee.keyIds,E.mimeType=ee.mimeType,E.bandwidth=E.bandwidth||ee.bandwidth,E.codecs=E.codecs||ee.codecs,E.drmInfos.length&&e.i.newDrmInfo(E),ne=at,r==ne.ia||r==ne.U)for(he=g(e.h.values()),Y=he.next();!Y.done;Y=he.next())tt=Y.value,tt.Sf||tt.type!=r||(tt.stream.mimeType=ee.mimeType);r==ne.Da&&(ft=ee.segmentIndex.get(0))&&ft.ka&&(E.mimeType="application/mp4"),q4(e)&&(e.Xa?Uh(e,[T]):(e.Xa=!0,kn=Array.from(e.h.values()),Nt=kn.filter(function(Gt){return Gt.stream.segmentIndex}),Uh(e,Nt),_h(e),Gn=e.m,0<Gn&&e.u.S(Gn))),K(Pe)}})}function v(){return e.j&&1<n.length?ws(e.j,t):w.concat($m([e.Z],n,e.s))}var E=pv(e,i,r,o,s,u,a,l,c,d,f,p),w=[],T={stream:E,type:r,jh:w,ba:v,yc:0,Qb:0,ye:new Map,ae:!1,$d:!1,vd:!1,pf:-1,rb:-1,sb:-1,Sf:!1},x=null,S=new AbortController;return E.createSegmentIndex=function(){return x||(S=new AbortController,x=new Promise(function(C){C(m(S.signal))}))},E.closeSegmentIndex=function(){x&&!E.segmentIndex&&S.abort(),E.segmentIndex&&(E.segmentIndex.release(),E.segmentIndex=null),x=null},T}function lv(e){var t=1/0;e=g(e.h.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&(t=Math.min(t,n.Qb));return t}function Y4(e){var t=1/0,n=1/0;e=g(e.h.values());for(var i=e.next();!i.done;i=e.next())i=i.value,i.stream.segmentIndex&&i.stream.type!="text"&&(t=Math.min(t,i.Qb),n=Math.min(n,i.yc));return t-n}function cv(e,t){var n=[];t=g(t);for(var i=t.next();!i.done;i=t.next())i=i.value,i.segmentIndex&&Ac(i.segmentIndex,function(r){n.push(r)});e.l.Dd(n)}function Uh(e,t){if(!Wt(e))for(var n=lv(e),i=g(t),r=i.next();!r.done;r=i.next())r.value.stream.segmentIndex.Ic(0,n);cv(e,t.map(function(o){return o.stream})),e.g.hls.ignoreManifestProgramDateTime?P4(e,t):N4(e,t)}function q4(e){if(!e.G)return!1;var t=[],n=[];e=g(e.G.variants);for(var i=e.next();!i.done;i=e.next())i=i.value,i.video&&t.push(i.video),i.audio&&n.push(i.audio);return!(0<t.length&&!t.some(function(r){return r.segmentIndex})||0<n.length&&!n.some(function(r){return r.segmentIndex}))}function hv(e,t,n,i,r,o,s,u,a,l,c,d,f,p,m,v,E){var w,T,x,S,C,D,b,P,N,U,B,V,W,ee,ne,he,Y,tt,ft,kn,Nt,Gn,Pe;return k(function(Gt){if(Gt.g==1){if(n.type!=1)throw new M(2,4,4017);w=jn(n.g,"EXT-X-DEFINE"),T=iv(e,w,r);var bt=At(n.g,"EXT-X-PLAYLIST-TYPE"),Jt=At(n.g,"EXT-X-ENDLIST");return Jt=bt&&bt.value=="VOD"||Jt,bt=bt&&bt.value=="EVENT"&&!Jt,bt=!Jt&&!bt,Jt?Ia(e,Ca):bt?Ia(e,Ma):Ia(e,xv),Wt(e)&&Oh(e,n),E?Gt.F(2):y(Gt,J4(e,s,o,n,T,i),3)}if(Gt.g!=2&&(E=Gt.h),x=fv(n,E),S=x.drmInfos,C=x.keyIds,D=x.encrypted,b=x.Jh,D&&!S.length&&!b)throw new M(2,4,4026);return P=pv(e,o,s,u,a,l,c,d,f,p,m,v),P.encrypted=D,P.drmInfos=S,P.keyIds=C,P.mimeType=E,N=Wt(e)?e.L.get(s):new Map,U=Ev(e,n,P,N,T,i),B=U.segments,(V=U.bandwidth)&&(P.bandwidth=V),Wt(e)&&Oh(e,n),W=B[0].startTime,ee=B[B.length-1],ne=ee.endTime,he=new De(B),P.segmentIndex=he,tt=(Y=At(n.g,"EXT-X-SERVER-CONTROL"))?Y.getAttribute("CAN-SKIP-UNTIL")!=null:!1,ft=Y?Y.getAttribute("CAN-BLOCK-RELOAD")!=null:!1,kn=ao(n.g,"EXT-X-MEDIA-SEQUENCE",0),Nt=dv(kn,B),Gn=Nt.rb,Pe=Nt.sb,Gt.return({stream:P,type:s,jh:[],ba:i,yc:W,Qb:ne,ae:tt,$d:ft,vd:!1,pf:-1,rb:Gn,sb:Pe,ye:N,Sf:!1})})}function dv(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{rb:e,sb:n};t=t[t.length-1];var i=t.g;return t.g.length?(n=i.length-1,i[i.length-1].l||(e++,n=0),{rb:e,sb:n}):(e++,t.m&&(n=0),{rb:e,sb:n})}function pv(e,t,n,i,r,o,s,u,a,l,c,d){var f=jh(n,t)||Bh(n),p=[];if(a){a=g(a.split(","));for(var m=a.next();!m.done;m=a.next())p.push(m.value)}return a=void 0,m=null,n==Ce?a=p.includes("public.accessibility.transcribes-spoken-dialog")&&p.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":p.includes("public.accessibility.describes-video")&&(m="visually impaired"),p.length||a!=="subtitle"||p.push("subtitle"),{id:e.C++,originalId:o,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:f,codecs:t,kind:n==Ce?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Le(i||"und"),originalLanguage:i,label:o,type:n,primary:r,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:p,forced:l,channelsCount:s,audioSamplingRate:c,spatialAudio:d,closedCaptions:u,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:m,external:!1,fastSwitching:!1}}function fv(e,t){var n=[];if(e.segments){e=g(e.segments);for(var i=e.next();!i.done;i=e.next())i=jn(i.value.g,"EXT-X-KEY"),n.push.apply(n,F(i))}i=e=!1;var r=[],o=new Set;n=g(n);for(var s=n.next();!s.done;s=n.next()){s=s.value;var u=qe(s,"METHOD");if(u!="NONE"){if(e=!0,u=="AES-128")i=!0;else if(u=Q(s,"KEYFORMAT")||"identity",s=(u=Sv[u])?u(s,t):null){if(s.keyIds){u=g(s.keyIds);for(var a=u.next();!a.done;a=u.next())o.add(a.value)}r.push(s)}}}return{drmInfos:r,keyIds:o,encrypted:e,Jh:i}}function gv(e,t,n,i,r){if(!I.crypto||!I.crypto.subtle)throw Ae("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new M(2,4,4042);var o=0,s=Q(t,"IV","");if(s){var u=$i(s.substr(2));if(u.byteLength!=16)throw new M(2,4,4048)}else o=ao(n.g,"EXT-X-MEDIA-SEQUENCE",0);var a={method:"AES-128",iv:u,firstMediaSequenceNumber:o,fetchKey:function(){var l,c,d,f,p;return k(function(m){if(m.g==1)return l=rr(i(),qe(t,"URI"),r),c=dt(l,e.g.retryParameters),y(m,co(e,c,6),2);if(m.g!=3){if(d=m.h,!d.data||d.data.byteLength!=16)throw new M(2,4,4049);return f={name:"AES-CBC"},p=a,y(m,I.crypto.subtle.importKey("raw",d.data,f,!0,["decrypt"]),3)}p.cryptoKey=m.h,a.fetchKey=void 0,K(m)})}};return a}function Oh(e,t){var n=1/0,i=t.segments;if(i.length)for(var r=i.length-1;0<=r;){var o=At(i[r].g,"EXTINF");if(o){n=Number(o.value.split(",")[0]);break}r--}if(i=At(t.g,"EXT-X-TARGETDURATION"),!i)throw new M(2,4,4024,"EXT-X-TARGETDURATION");i=Number(i.value),(r=At(t.g,"EXT-X-PART-INF"))&&(e.M=Number(qe(r,"PART-TARGET"))),t=At(t.g,"EXT-X-SERVER-CONTROL"),e.D&&e.M?(e.m=e.Wa?5*e.M<=n?Math.min(e.M,e.m):Math.min(n,e.m):Math.min(e.M,e.m),e.ha=t?Number(qe(t,"PART-HOLD-BACK")):0):(e.m=Math.min(n,e.m),n=t?t.getAttribute("HOLD-BACK"):null,e.Aa=n?Number(n.value):0),e.ua=Math.max(i,e.ua)}function mv(e,t){if(e.g.defaultPresentationDelay)t=e.g.defaultPresentationDelay;else if(e.ha)t=e.ha;else if(e.Aa)t=e.Aa;else{t=t.segments.length;var n=e.g.hls.liveSegmentsDelay;n>t-2&&(n=Math.max(1,t-2)),t=e.ua*n}e.l.og(0),e.l.oh(t),e.l.Vc(!1)}function vv(e,t,n,i,r){var o=At(n,"EXT-X-MAP");if(!o)return null;var s=qe(o,"URI"),u=rr(i(),s,r);if(s=[u.toString(),Q(o,"BYTERANGE","")].join("-"),!e.W.has(s)){var a=void 0,l=null;n=g(n);for(var c=n.next();!c.done;c=n.next())c=c.value,c.name=="EXT-X-KEY"?qe(c,"METHOD")=="AES-128"&&c.id<o.id&&(a=gv(e,c,t,i,r)):c.name=="EXT-X-BYTERANGE"&&c.id<o.id&&(l=c);t=$4(u,o,l,a),e.W.set(s,t)}return e.W.get(s)}function $4(e,t,n,i){var r=0,o=null;return t=Q(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(r=t.split("@"),o=Number(r[0]),r=Number(r[1]),o=r+o-1,i&&(n=o+1-r,n%16&&(o+=16-n%16))),new rn(function(){return e},r,o,null,null,null,i)}function Q4(e,t,n,i,r,o,s,u,a){var l=i.g,c=At(l,"EXTINF"),d=0,f=0,p=null;i.Bb.length&&!e.D&&Ae("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var m=null;if(!e.g.hls.ignoreManifestProgramDateTime){var v=At(l,"EXT-X-PROGRAM-DATE-TIME");v&&v.value&&(m=Lf(v.value))}var E=Ci;if(At(l,"EXT-X-GAP")&&(E=2),!c){if(i.Bb.length==0)throw new M(2,4,4024,"EXTINF");if(!e.D)return null}var w=[];v=!1;var T=null,x=!1,S=!1;if(e.D&&i.Bb.length){d=(s.mimeType=="video/mp4"||s.mimeType=="audio/mp4")&&I.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var C=m,D={},b=0;b<i.Bb.length;D={hd:D.hd,Ud:D.Ud},b++){var P=i.Bb[b],N=b==0?n:w[w.length-1],U=b==0?r:N.endTime,B=Number(Q(P,"DURATION"))||e.M;if(B){var V=U+B,W=0,ee=null;if(P.name=="EXT-X-PRELOAD-HINT"?(W=(W=Q(P,"BYTERANGE-START"))?Number(W):0,(N=Q(P,"BYTERANGE-LENGTH"))?ee=W+Number(N)-1:W&&(ee=Number.MAX_SAFE_INTEGER)):(W=Q(P,"BYTERANGE"),ee=g(yv(N,W)),W=ee.next().value,ee=ee.next().value),D.Ud=Q(P,"URI"),D.Ud){N=Ci,Q(P,"GAP")=="YES"&&(N=2,x=!0),D.hd=null;var ne=function(Y){return function(){return Y.hd==null&&(Y.hd=rr(u(),Y.Ud,o)),Y.hd}}(D);d&&0<=W&&ee!=null&&(T=ne,v=!0),U=new oe(U,V,ne,W,ee,t,0,0,1/0,[],"",null,C,N,a),P.name=="EXT-X-PRELOAD-HINT"&&(U.Tf(),S=!0),Q(P,"INDEPENDENT")!="YES"&&0<b&&U.xe(),w.push(U),C&&(C+=B)}}}}if(c){if(c=Number(c.value.split(",")[0]),c==0)return null;d=r+c}else if(w.length)d=w[w.length-1].endTime;else return null;v&&(x||w[0].hb!=0?(v=!1,T=null):w=[]),(c=At(l,"EXT-X-BYTERANGE"))?(p=g(yv(n,c.value)),f=p.next().value,p=p.next().value):w.length&&(f=w[0].hb,p=w[w.length-1].Na),n="",c=null,s.type=="image"&&(n="1x1",s=At(l,"EXT-X-TILES"))&&(n=qe(s,"LAYOUT"),(s=Q(s,"DURATION"))&&(c=Number(s)));var he=null;return t=new oe(r,d,function(){return T?T():(he==null&&(he=rr(u(),i.h,o)),he||[])},f,p,t,0,0,1/0,w,n,c,m,E,a,0<w.length&&!!i.h),v&&(e.Wa=!0,t.bh(),S&&t.Tf()),t}function yv(e,t){var n=0,i=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.Na+1,i=n+t-1),[n,i]}function Ev(e,t,n,i,r,o){var s=t.segments,u=void 0,a=ao(t.g,"EXT-X-DISCONTINUITY-SEQUENCE",0),l=ao(t.g,"EXT-X-MEDIA-SEQUENCE",0),c=At(t.g,"EXT-X-SKIP"),d=c?Number(Q(c,"SKIPPED-SEGMENTS")):0,f=l+d,p=0;Wt(e)&&i.has(f)&&(p=i.get(f)),p===0&&e.aa==Ma&&0<i.size&&!i.has(f)&&(p=e.l.Ab());var m=[],v=null;c=[];for(var E=0;E<s.length;E++){var w=s[E],T=E==0?p:v.endTime;f=l+d+E,At(w.g,"EXT-X-DISCONTINUITY")&&a++;for(var x=g(w.g),S=x.next();!S.done;S=x.next())S=S.value,S.name=="EXT-X-KEY"&&(qe(S,"METHOD")=="AES-128"?u=gv(e,S,t,o,r):u=void 0);i.set(f,T),x=vv(e,t,w.g,o,r),!e.D&&e.i.isAutoLowLatencyMode()&&(e.i.enableLowLatencyMode(),e.D=e.i.isLowLatencyMode()),(T=Q4(e,x,v,w,T,r,n,o,u))&&((v=ao(w.g,"EXT-X-BITRATE"))?c.push({bitrate:v,duration:T.endTime-T.startTime}):c.length&&(v=c.pop(),v.duration+=T.endTime-T.startTime,c.push(v)),v=T,T.i=a,e.g.hls.ignoreManifestProgramDateTime&&e.K!=null&&f<e.K||m.push(T))}if(t=void 0,c.length&&(t=c.reduce(function(C,D){return C+D.duration},0),t=Math.round(c.reduce(function(C,D){return C+D.bitrate*D.duration},0)/t*1e3)),c=m.some(function(C){return C.oa!=null})){for(n={},i=0;i<m.length;n={Zc:n.Zc,Yc:n.Yc,Qd:n.Qd,Vb:n.Vb,Xc:n.Xc},i++)if(n.Vb=m[i],n.Vb.oa==null)for(n.Yc=0,n.Zc=i,r=function(C){return function(){var D=m[C.Zc];if(D){if(D.oa!=null)return D.oa+C.Yc;C.Yc-=D.endTime-D.startTime,C.Zc+=1}return null}}(n),n.Xc=0,n.Qd=i,o=function(C){return function(){var D=m[C.Qd];if(D){if(D!=C.Vb&&(C.Xc+=D.endTime-D.startTime),D.oa!=null)return D.oa+C.Xc;--C.Qd}return null}}(n);n.Vb.oa==null;)n.Vb.oa=o(),n.Vb.oa==null&&(n.Vb.oa=r())}if(c)for(n=g(m),i=n.next();!i.done;i=n.next())for(r=i.value,i=r.oa,r=g(r.g),o=r.next();!o.done;o=r.next())o=o.value,o.oa=i,i+=o.endTime-o.startTime;if(e=e.V,c&&e!=1/0)for(c=g(m),i=c.next();!i.done;i=c.next())i.value.sg(e);return{segments:m,bandwidth:t}}function jh(e,t){if(e==Ce){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function Bh(e){return e==Ce?"text/vtt":Av[e].mp4}function J4(e,t,n,i,r,o){var s,u,a,l,c,d,f,p,m,v,E,w,T;return k(function(x){switch(x.g){case 1:return s=bn,u=Math.trunc((i.segments.length-1)/2),a=rr(o(),i.segments[u].h,r),l=new Je(a[0]),c=l.Ya.split(".").pop(),d=Av[t],(f=d[c])||(f=wv[c])||(f=jh(t,n))?x.return(f):(m=1,v=dt(a,e.g.retryParameters),le(x,2),v.method="HEAD",y(x,co(e,v,s,{type:m}),4));case 4:E=x.h,p=E.headers["content-type"],Ee(x,3);break;case 2:if(w=ce(x),!w||w.code!=1002&&w.code!=1001){x.F(3);break}return v.method="GET",y(x,co(e,v,s,{type:m}),6);case 6:T=x.h,p=T.headers["content-type"];case 3:return p?x.return(p.split(";")[0]):x.return(Bh(t))}})}function Tv(e,t,n,i,r,o){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(i)||void 0,e.hdr=r||void 0,e.videoLayout=o||void 0)}function Fh(e,t,n){return co(e,dt(t,e.g.retryParameters),0,{type:n?2:3})}function Z4(e){var t,n,i,r,o,s;k(function(u){switch(u.g){case 1:return e.i?(le(u,2),t=Date.now(),y(u,e.update(),4)):u.return();case 4:n=Date.now(),Wt(e)&&(i=(n-t)/1e3,e.Ra.sample(1,i),r=e.m,o=Math.max(0,r-ou(e.Ra)),e.u.S(o)),Ee(u,3);break;case 2:if(s=ce(u),!e.i)return u.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.i.onError(s),u.return();s.severity=1,e.i.onError(s),e.u.S(.1);case 3:if(!e.i)return u.return();e.i.onManifestUpdated(),K(u)}})}function Wt(e){return e.aa!=Ca}function Ia(e,t){e.aa=t,e.l&&e.l.Vc(!Wt(e)),Wt(e)||e.u.stop()}function co(e,t,n,i){if(!e.N)throw new M(2,7,7001);return t=e.i.networkingEngine.request(n,t,i),Wi(e.N,t),t.promise}O("shaka.hls.HlsParser",Sa);var wv={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},Av={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},Sv={"com.apple.streamingkeydelivery":function(e,t){if(t=="video/mp2t")throw new M(2,4,4040);if(I.shakaMediaKeysPolyfill)throw new M(2,4,4041);return wi("com.apple.fps",[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=qe(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?(t=qe(e,"URI"),t=Nh(t),t=ge(t.data),t=wi("com.widevine.alpha",[{initDataType:"cenc",initData:t}]),(e=Q(e,"KEYID"))&&(t.keyIds=new Set([e.toLowerCase().substr(2)])),t):null},"com.microsoft.playready":function(e){var t=qe(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?(e=qe(e,"URI"),e=Nh(e),e=ge(e.data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),e=xu(e,t,new Set,0),wi("com.microsoft.playready",[{initDataType:"cenc",initData:e}])):null},identity:function(e,t){if(t=="video/mp2t")throw new M(2,4,4040);if(I.shakaMediaKeysPolyfill)throw new M(2,4,4041);return e=qe(e,"METHOD"),["SAMPLE-AES","SAMPLE-AES-CTR"].includes(e)?wi("org.w3.clearkey",null):null}},Ca="VOD",xv="EVENT",Ma="LIVE",e2={Fh:Ca,Hj:xv,Pj:Ma};xn["application/x-mpegurl"]=function(){return new Sa},xn["application/vnd.apple.mpegurl"]=function(){return new Sa};function t2(e){var t=0,n=Ut(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){i=n.getUint16(e,!0),e+=2;var r=n.getUint16(e,!0);if(e+=2,r&1||r+e>n.byteLength){n=[];break e}var o=ge(n,e,r);t.push({type:i,value:o}),e+=r}n=t}return n}function ka(e){if(e=Iv(e))e:{e=g(e.getElementsByTagName("DATA"));for(var t=e.next();!t.done;t=e.next())if(t=Sn(t.value,"LA_URL")){e=t.textContent;break e}e=""}else e="";return e}function Iv(e){return e=An(e.textContent),e=t2(e).filter(function(t){return t.type===n2})[0],e?(e=oi(e.value,!0),(e=Br(e,"WRMHEADER"))?e:null):null}var n2=1,i2=new Map().set("com.microsoft.playready",ka).set("com.microsoft.playready.recommendation",ka).set("com.microsoft.playready.software",ka).set("com.microsoft.playready.hardware",ka);function ho(e){if(!Lv){Lv=!0;var t=new Uint8Array([105,115,111,109]),n=new Uint8Array([97,118,99,49]),i=new Uint8Array([0,0,0,1]);Da=we("ftyp",t,i,t,n),t=we("dref",f2),Gh=we("dinf",t)}this.g=e}function po(e){for(var t=[],n=g(e.g),i=n.next();!i.done;i=n.next()){var r=t,o=r.push,s=i.value;i=we;var u=s.id+1,a=s.stream.width||0,l=s.stream.height||0;s.type=="audio"&&(l=a=0);var c=s.duration*s.timescale,d=Math.floor(c/(Pi+1));switch(c=Math.floor(c%(Pi+1)),u=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(F(We(u,4)),[0,0,0,0],F(We(d,4)),F(We(c,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],F(We(a,2)),[0,0],F(We(l,2)),[0,0])),u=we("tkhd",u),a=we,d=s.duration*s.timescale,l=Math.floor(d/(Pi+1)),d=Math.floor(d%(Pi+1)),c=s.stream.language,c=c.charCodeAt(0)-96<<10|c.charCodeAt(1)-96<<5|c.charCodeAt(2)-96,l=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(F(We(s.timescale,4)),F(We(l,4)),F(We(d,4)),F(We(c,2)),[0,0])),l=we("mdhd",l),d=s,c=new Uint8Array([]),d.type){case"video":c=o2;break;case"audio":c=s2}d=we("hdlr",c);e:{switch(s.type){case"video":s=we("minf",we("vmhd",h2),Gh,Cv(s));break e;case"audio":s=we("minf",we("smhd",d2),Gh,Cv(s));break e}s=new Uint8Array([])}s=a("mdia",l,d,s),i=i("trak",u,s),o.call(r,i)}for(t=Ye.apply(xt,F(t)),o=e.g[0],n=we,i=o.duration*o.timescale,r=Math.floor(i/(Pi+1)),i=Math.floor(i%(Pi+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(F(We(o.timescale,4)),F(We(r,4)),F(We(i,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),r=we("mvhd",r),i=[],e=g(e.g),a=e.next();!a.done;a=e.next())s=i,u=s.push,a=new Uint8Array([0,0,0,0].concat(F(We(a.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1])),a=we("trex",a),u.call(s,a);if(e=Ye.apply(xt,F(i)),e=we("mvex",e),i=[],o.encrypted){for(o=g(o.stream.drmInfos),s=o.next();!s.done;s=o.next())if(s=s.value,s.initData)for(s=g(s.initData),u=s.next();!u.done;u=s.next())i.push(u.value.initData);o=Ye.apply(xt,F(i))}else o=new Uint8Array([]);return e=n("moov",r,t,e,o),t=new Uint8Array(Da.byteLength+e.byteLength),t.set(Da),t.set(e,Da.byteLength),t}function Cv(e){var t=we,n=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){n=e.stream.width||0;var i=e.stream.height||0;if(0<e.Ca.byteLength)var r=we("avcC",e.Ca);else{r=we;for(var o=7,s=[],u=[],a=0,l=0,c=0,d=0;d<e.ib.length;d++){var f=kv(e.ib[d]);switch(f[0]&31){case 7:s.push(f),o+=f.length+2;break;case 8:u.push(f),o+=f.length+2}}for(0<s.length&&(a=s[0][1],c=s[0][2],l=s[0][3]),o=new Uint8Array(o),d=0,o[d++]=1,o[d++]=a,o[d++]=c,o[d++]=l,o[d++]=255,o[d++]=224|s.length,a=0;a<s.length;a++)o[d++]=(s[a].length&65280)>>8,o[d++]=s[a].length&255,o.set(s[a],d),d+=s[a].length;for(o[d++]=u.length,s=0;s<u.length;s++)o[d++]=(u[s].length&65280)>>8,o[d++]=u[s].length&255,o.set(u[s],d),d+=u[s].length;r=r("avcC",o)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(F(We(n,2)),F(We(i,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),i="avc1",u=Mv(e),s=new Uint8Array([]),e.encrypted&&(s=Ms(e),i="encv"),n=we(i,n,r,u,s)}else e.codecs.includes("hvc1")&&(i=e.stream.width||0,r=e.stream.height||0,n=new Uint8Array([]),0<e.Ca.byteLength&&(n=we("hvcC",e.Ca)),i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(F(We(i,2)),F(We(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="hvc1",u=Mv(e),s=new Uint8Array([]),e.encrypted&&(s=Ms(e),r="encv"),n=we(r,i,n,u,s));break;case"audio":e.codecs.includes("mp3")?e=we(".mp3",La(e)):e.codecs.includes("ac-3")?(n=we("dac3",e.qa),i="ac-3",r=new Uint8Array([]),e.encrypted&&(r=Ms(e),i="enca"),e=we(i,La(e),n,r)):e.codecs.includes("ec-3")?(n=we("dec3",e.qa),i="ec-3",r=new Uint8Array([]),e.encrypted&&(r=Ms(e),i="enca"),e=we(i,La(e),n,r)):(0<e.qa.byteLength?n=we("esds",e.qa):(n=we,i=e.id+1,r=e.stream.channelsCount||2,s=e.stream.audioSamplingRate||44100,a=mr("audio",e.codecs.split(",")),l={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},u=l[s],(a==="mp4a.40.5"||a==="mp4a.40.29")&&(u=l[2*s]),s=parseInt(a.split(".").pop(),10),i=new Uint8Array([0,0,0,0,3,25].concat(F(We(i,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,s<<3|u>>>1,u<<7|r<<3,6,1,2])),n=n("esds",i)),i="mp4a",r=new Uint8Array([]),e.encrypted&&(r=Ms(e),i="enca"),e=we(i,La(e),n,r)),n=e}return e=we("stsd",p2,n),t("stbl",e,we("stts",u2),we("stsc",a2),we("stsz",c2),we("stco",l2))}function Mv(e){if(!e.Ja&&!e.La)return new Uint8Array([]);var t=e.La;return e=new Uint8Array([].concat(F(We(e.Ja,4)),F(We(t,4)))),we("pasp",e)}function La(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(F(We(e.stream.audioSamplingRate||44100,2)),[0,0]))}function Ms(e){for(var t=we,n=e.codecs.substring(0,e.codecs.indexOf(".")),i=0,r=0;r<n.length;r+=1)i|=n.charCodeAt(r)<<8*(n.length-r-1);n=new Uint8Array([].concat(F(We(i,4)))),n=we("frma",n),i=new Uint8Array([0,0,0,0,99,101,110,99,0,1,0,0]),i=we("schm",i),r=we;var o=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=g(e.stream.drmInfos);for(var s=e.next();!s.done;s=e.next())if((s=s.value)&&s.keyIds&&s.keyIds.size){s=g(s.keyIds);for(var u=s.next();!u.done;u=s.next())o=kv(u.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),o=we("tenc",e,o),t("sinf",n,i,r("schi",o))}function ks(e){var t=[];e=g(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=t.push,r=i.apply,o=we,s=new Uint8Array([0,0,0,0].concat(F(We(n.data?n.data.Cb:0,4))));s=we("mfhd",s);var u,a=n.data?n.data.fb:[],l=new Uint8Array(4+a.length);for(u=0;u<a.length;u++){var c=a[u].flags;l[u+4]=c.$a<<4|c.bb<<2|c.ab}a=we("sdtp",l);var d=a.length+92;l=we,u=new Uint8Array([0,0,0,58].concat(F(We(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),u=we("tfhd",u),c=n.data?n.data.baseMediaDecodeTime:0;var f=Math.floor(c%(Pi+1));c=new Uint8Array([1,0,0,0].concat(F(We(Math.floor(c/(Pi+1)),4)),F(We(f,4)))),c=we("tfdt",c);var p=d;d=n.data?n.data.fb:[],f=d.length;var m=12+16*f,v=new Uint8Array(m);for(p+=8+m,v.set([n.type==="video"?1:0,0,15,1].concat(F(We(f,4)),F(We(p,4))),0),p=0;p<f;p++){var E=d[p];m=We(E.duration,4);var w=We(E.size,4),T=E.flags;E=We(E.kb,4),v.set([].concat(F(m),F(w),[T.ob<<2|T.$a,T.bb<<6|T.ab<<4|T.pb,T.Za&61440,T.Za&15],F(E)),12+16*p)}d=we("trun",v),a=l("traf",u,c,d,a),o=o("moof",s,a),r.call(i,t,[o,r2(n)])}return Ye.apply(xt,F(t))}function r2(e){return e=(e.data?e.data.fb:[]).map(function(t){return t.data}),e=Ye.apply(xt,F(e)),we("mdat",e)}function We(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function kv(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function we(e){var t=vn.apply(1,arguments),n=Dv[e];n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],Dv[e]=n);for(var i=8,r=t.length-1;0<=r;r--)i+=t[r].byteLength;for(r=new Uint8Array(i),r[0]=i>>24&255,r[1]=i>>16&255,r[2]=i>>8&255,r[3]=i&255,r.set(n,4),n=0,i=8;n<t.length;n++)r.set(t[n],i),i+=t[n].byteLength;return r}var Lv=!1,Pi=Math.pow(2,32)-1,Dv={},o2=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),s2=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),u2=new Uint8Array([0,0,0,0,0,0,0,0]),a2=new Uint8Array([0,0,0,0,0,0,0,0]),l2=new Uint8Array([0,0,0,0,0,0,0,0]),c2=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),h2=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),d2=new Uint8Array([0,0,0,0,0,0,0,0]),p2=new Uint8Array([0,0,0,0,0,0,0,1]),Da=new Uint8Array([]),f2=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Gh=new Uint8Array([]);function Vh(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.u=1,this.i=null,this.D=new yr(5),this.s=new fe(function(){g2(e)}),this.C=new br,this.m=new Map}h=Vh.prototype,h.configure=function(e){this.g=e},h.start=function(e,t){var n=this;return k(function(i){if(i.g==1)return n.l=[e],n.h=t,y(i,zh(n),2);if(!n.h)throw new M(2,7,7001);return i.return(n.j)})};function g2(e){var t;k(function(n){switch(n.g){case 1:return le(n,2),y(n,zh(e),4);case 4:Ee(n,3);break;case 2:t=ce(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();K(n)}})}h.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.s!=null&&(this.s.stop(),this.s=null),this.m.clear(),this.C.destroy()},h.update=function(){var e=this,t;return k(function(n){if(n.g==1)return le(n,2),y(n,zh(e),4);if(n.g!=2)return Ee(n,0);if(t=ce(n),!e.h||!t)return n.return();e.h.onError(t),K(n)})},h.onExpirationUpdated=function(){},h.onInitialVariantChosen=function(){},h.banLocation=function(){};function zh(e){var t,n,i,r,o,s,u;return k(function(a){if(a.g==1)return t=dt(e.l,e.g.retryParameters),n=e.h.networkingEngine,i=Date.now(),r=n.request(0,t,{type:5}),Wi(e.C,r),y(a,r.promise,2);if(o=a.h,!e.h)return a.return();o.uri&&!e.l.includes(o.uri)&&e.l.unshift(o.uri);var l=o.uri,c=nc(o.data,"SmoothStreamingMedia");if(!c)throw new M(2,4,4046,l);if((l=e.g.mss.manifestPreprocessor)&&l(c),e.i||(e.i=new de(null,0)),l=Se(c,"IsLive",tc,!1))throw new M(2,4,4047);e.i.Vc(!l);var d=Se(c,"TimeScale",Dt,1e7),f=Se(c,"DVRWindowLength",Dt);l&&(f===0||isNaN(f))&&(f=1/0);var p=Se(c,"CanSeek",tc,!1);f===0&&p&&(f=1/0),p=null,f&&0<f&&(p=f/d),l&&!isNaN(e.g.availabilityWindowOverride)&&(p=e.g.availabilityWindowOverride),p==null&&(p=1/0),e.i.Ne(p),f=Se(c,"Duration",Dt,1/0),l||e.i.gb(f/d),l={variants:[],textStreams:[],timescale:d,duration:f/d},p=Ke(c,"Protection");var m;for(d=e.g.mss.keySystemsBySystemId,f=[],p=g(p),m=p.next();!m.done;m=p.next())f=f.concat(Ke(m.value,"ProtectionHeader"));if(f.length){for(p=[],m=0;m<f.length;m++){var v=f[m],E=v.getAttribute("SystemID").toLowerCase(),w=d[E];if(w){var T=Iv(v);if(T)e:{T=g(T.getElementsByTagName("DATA"));for(var x=T.next();!x.done;x=T.next())if(x=Sn(x.value,"KID")){T=An(x.textContent),T=new Uint8Array([T[3],T[2],T[1],T[0],T[5],T[4],T[7],T[6]].concat(F(T.slice(8)))),T=jr(T);break e}T=null}else T=null;x=An(v.textContent),E=$i(E.replace(/-/g,"")),E=[{initData:xu(x,E,new Set,0),initDataType:"cenc",keyId:T}],E=wi(w,E),T&&E.keyIds.add(T),(w=i2.get(w))&&(E.licenseServerUri=w(v)),p.push(E)}}d=p}else d=[];for(m=d,p=[],d=[],f=[],c=Ke(c,"StreamIndex"),c=g(c),v=c.next();!v.done;v=c.next()){v=v.value,w=Ke(v,"QualityLevel"),E=l.timescale,T=l.duration,x=Ke(v,"c");for(var S=[],C=0,D=0;D<x.length;++D){var b=x[D],P=x[D+1],N=Se(b,"t",Dt),U=Se(b,"d",Dt);if(b=Se(b,"r",Cu),!U)break;if(N=N??C,b=b||0,0>b)if(P){if(P=Se(P,"t",Dt),P==null)break;if(N>=P)break;b=Math.ceil((P-N)/U)-1}else{if(T==1/0)break;if(N/E>=T)break;b=Math.ceil((T*E-N)/U)-1}for(P=0;P<=b;++P)C=N+U,S.push({start:N/E,end:C/E,zg:N}),N=C}for(E=S,w=g(w),T=w.next();!T.done;T=w.next())(T=m2(e,v,T.value,E,m,l))&&(T.type!="audio"||e.g.disableAudio?T.type!="video"||e.g.disableVideo?T.type!=Ce||e.g.disableText||f.push(T):d.push(T):p.push(T))}for(c=[],p=g(0<p.length?p:[null]),m=p.next();!m.done;m=p.next())for(m=m.value,v=g(0<d.length?d:[null]),T=v.next();!T.done;T=v.next())w=c,E=w.push,T=T.value,x=0,m&&m.bandwidth&&0<m.bandwidth&&(x+=m.bandwidth),T&&T.bandwidth&&0<T.bandwidth&&(x+=T.bandwidth),T={id:e.u++,language:m?m.language:"und",disabledUntilTime:0,primary:!!m&&m.primary||!!T&&T.primary,audio:m,video:T,bandwidth:x,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},E.call(w,T);l.variants=c,l.textStreams=f,e.j?(e.j.variants=l.variants,e.j.textStreams=l.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:l.variants,textStreams:l.textStreams,imageStreams:[],offlineSessionIds:[],minBufferTime:0,sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null},e.i.ve()),Promise.resolve(),s=Date.now(),u=(s-i)/1e3,e.D.sample(1,u),K(a)})}function m2(e,t,n,i,r,o){var s=t.getAttribute("Type");if(s!=="audio"&&s!=="video"&&s!=="text")return Ae("Ignoring unrecognized type:",s),null;var u=t.getAttribute("Language"),a=e.u++,l=Se(n,"Bitrate",ci),c=Se(n,"MaxWidth",ci),d=Se(n,"MaxHeight",ci),f=Se(n,"Channels",ci),p=Se(n,"SamplingRate",ci),m=o.duration;i.length&&(m=i[i.length-1].end-i[0].start);var v=e.i.getDuration();e.i.gb(Math.min(m,v));var E={id:a,originalId:t.getAttribute("Name")||String(a),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:l||0,width:c||void 0,height:d||void 0,kind:"",encrypted:0<r.length,drmInfos:r,keyIds:new Set,language:Le(u||"und"),originalLanguage:u,label:"",type:"",primary:!1,trickModeVideo:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:f,audioSamplingRate:p,spatialAudio:!1,closedCaptions:null,hdr:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:m,timescale:o.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1};if((r=t.getAttribute("Subtype"))&&((r=A2[r])&&E.roles.push(r),r==="main"&&(E.primary=!0)),r=n.getAttribute("FourCC"),(r===null||r==="")&&(r=t.getAttribute("FourCC")),!r){if(s==="audio")r="AAC";else if(s==="video")return Ae('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!w2.includes(r.toUpperCase()))return Ae("Codec not supported:",r),null;switch(n=v2(n,s,r,E),E.mssPrivateData.codecPrivateData=n,s){case"audio":if(!n)return Ae("Quality unsupported without CodecPrivateData",s),null;E.type="audio",E.mimeType="mss/audio/mp4",E.codecs=y2(r,n);break;case"video":if(!n)return Ae("Quality unsupported without CodecPrivateData",s),null;E.type="video",E.mimeType="mss/video/mp4",E.codecs=E2(n);break;case"text":E.type=Ce,E.mimeType="application/mp4",(r==="TTML"||r==="DFXP")&&(E.codecs="stpp")}return E.createSegmentIndex=function(){if(E.segmentIndex)return Promise.resolve();if(e.m.has(E.id))var w=e.m.get(E.id);else w=[],E.type=="video"&&(w=E.mssPrivateData.codecPrivateData.split("00000001").slice(1)),w={id:E.id,type:E.type,codecs:E.codecs,encrypted:E.encrypted,timescale:E.mssPrivateData.timescale,duration:E.mssPrivateData.duration,ib:w,qa:new Uint8Array([]),Ca:new Uint8Array([]),Ja:0,La:0,data:null,stream:E},w=po(new ho([w])),e.m.set(E.id,w);return w=T2(e,new rn(function(){return[]},0,null,null,void 0,w),E,t,i),E.segmentIndex=new De(w),Promise.resolve()},E.closeSegmentIndex=function(){E.segmentIndex&&(E.segmentIndex.release(),E.segmentIndex=null)},E}function v2(e,t,n,i){if(e=e.getAttribute("CodecPrivateData"))return e;if(t!=="audio")return null;t=i.channelsCount||2,e=i.audioSamplingRate||44100;var r={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return i=r[e],n==="AACH"?(n=new Uint8Array(4),e=r[2*e],n[0]=40|i>>1,n[1]=i<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|i>>1,n[1]=i<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function y2(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function E2(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function T2(e,t,n,i,r){var o=i.getAttribute("Url").replace("{bitrate}",String(n.bandwidth));i=[];var s={};r=g(r);for(var u=r.next();!u.done;s={gd:s.gd},u=r.next())s.gd=u.value,i.push(new oe(s.gd.start,s.gd.end,function(a){return function(){return Tt(e.l,[o.replace("{start time}",String(a.gd.zg))])}}(s),0,null,t,0,0,n.mssPrivateData.duration));return i}O("shaka.mss.MssParser",Vh);var w2="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),A2={CAPT:"main",SUBT:"alternate",DESC:"main"};xn["application/vnd.ms-sstr+xml"]=function(){return new Vh};function Rv(e,t,n,i,r,o){if(200<=n&&299>=n&&n!=202)return{uri:r||i,originalUri:i,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"]};r=null;try{r=Ii(t)}catch{}throw new M(n==401||n==403?2:1,1,1001,i,n,r,e,o)}function Kh(){}function Ra(e,t,n,i,r){var o=new M2;Wo(t.headers).forEach(function(l,c){o.append(c,l)});var s=new I2,u={Hg:!1,xh:!1};if(e=S2(e,n,{body:t.body||void 0,headers:o,method:t.method,signal:s.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},u,i,r,t.streamDataCallback),e=new $e(e,function(){return u.Hg=!0,s.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var a=new fe(function(){u.xh=!0,s.abort()});a.S(t/1e3),e.finally(function(){a.stop()})}return e}function S2(e,t,n,i,r,o,s){var u,a,l,c,d,f,p,m,v,E,w,T,x;return k(function(S){switch(S.g){case 1:return u=x2,a=C2,f=d=0,p=Date.now(),le(S,2),y(S,u(e,n),4);case 4:if(l=S.h,o(Pv(l.headers)),n.method=="HEAD"){S.F(5);break}return m=l.clone().body.getReader(),E=(v=l.headers.get("Content-Length"))?parseInt(v,10):0,w=function(C){function D(){var b,P;return k(function(N){switch(N.g){case 1:return le(N,2),y(N,m.read(),4);case 4:b=N.h,Ee(N,3);break;case 2:return ce(N),N.return();case 3:if(b.done){N.F(5);break}if(d+=b.value.byteLength,!s){N.F(5);break}return y(N,s(b.value),5);case 5:P=Date.now(),(100<P-p||b.done)&&(r(P-p,d-f,E-d),f=d,p=P),b.done?C.close():(C.enqueue(b.value),D()),K(N)}})}D()},new a({start:w}),y(S,l.arrayBuffer(),6);case 6:c=S.h;case 5:Ee(S,3);break;case 2:throw T=ce(S),i.Hg?new M(1,1,7001,e,t):i.xh?new M(1,1,1003,e,t):new M(1,1,1002,e,T,t);case 3:return x=Pv(l.headers),S.return(Rv(x,c,l.status,e,l.url,t))}})}function Pv(e){var t={};return e.forEach(function(n,i){t[i.trim()]=n}),t}function Nv(){if(I.ReadableStream)try{new ReadableStream({})}catch{return!1}else return!1;if(I.Response){if(!new Response("").body)return!1}else return!1;return!(!I.fetch||!I.AbortController)}O("shaka.net.HttpFetchPlugin",Kh),Kh.isSupported=Nv,Kh.parse=Ra;var x2=I.fetch,I2=I.AbortController,C2=I.ReadableStream,M2=I.Headers;Nv()&&(ri("http",Ra,2,!0),ri("https",Ra,2,!0),ri("blob",Ra,2,!0));function bv(){}function Pa(e,t,n,i,r){var o=new k2,s=Date.now(),u=0,a=new Promise(function(l,c){o.open(t.method,e,!0),o.responseType="arraybuffer",o.timeout=t.retryParameters.timeout,o.withCredentials=t.allowCrossSiteCredentials,o.onabort=function(){c(new M(1,1,7001,e,n))};var d=!1;o.onreadystatechange=function(){if(o.readyState==2&&!d){var p=_v(o);r(p),d=!0}},o.onload=function(){var p=_v(o),m=o.response;try{var v=Rv(p,m,o.status,e,o.responseURL,n);l(v)}catch(E){c(E)}},o.onerror=function(p){c(new M(1,1,1002,e,p,n))},o.ontimeout=function(){c(new M(1,1,1003,e,n))},o.onprogress=function(p){var m=Date.now();(100<m-s||p.lengthComputable&&p.loaded==p.total)&&(i(m-s,p.loaded-u,p.total-p.loaded),u=p.loaded,s=m)};for(var f in t.headers)o.setRequestHeader(f.toLowerCase(),t.headers[f]);o.send(t.body)});return new $e(a,function(){return o.abort(),Promise.resolve()})}function _v(e){var t=e.getAllResponseHeaders().trim().split(`\r
`);e={},t=g(t);for(var n=t.next();!n.done;n=t.next())n=n.value.split(": "),e[n[0].toLowerCase()]=n.slice(1).join(": ");return e}O("shaka.net.HttpXHRPlugin",bv),bv.parse=Pa;var k2=I.XMLHttpRequest;ri("http",Pa,1,!0),ri("https",Pa,1,!0),ri("blob",Pa,1,!0);function Uv(e,t,n,i){this.g=e,this.i=t,this.groupId=n,this.h=i}function Hh(e){return e.ba().map(function(t){return"{"+encodeURI(t)+"}"}).join("")+":"+e.hb+":"+e.Na}function L2(e,t){return ns(e.g.ba(),e.g.hb,e.g.Na,t.streaming.retryParameters)}function Ov(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function jv(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}Ov.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g.delete(e),this.j+=n,this.h+=t}};function Bv(e){var t=this;this.s=e,this.j=new Map,this.i=new _r(function(){return Wh(t).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new Ov}Bv.prototype.destroy=function(){return this.i.destroy()};function D2(e,t,n){e.m=t,e.l=n}function Wh(e){var t=e.h.map(function(n){return n()});return e.h=[],Promise.all(t)}function R2(e,t,n,i,r,o){Ne(e.i);var s=(e.j.get(t)||Promise.resolve()).then(function(){var u,a,l,c,d,f,p;return k(function(m){if(m.g==1)return y(m,N2(e,n),2);if(u=m.h,e.i.g)throw new M(2,9,7001);if(r)for(c in a=ge(u),l=new Mf(a),l.data)d=Number(c),f=l.data[d],p=l.g[d],e.l(f,p);e.g.close(i,u.byteLength);var v=e.g;return e.m(v.i==0?0:v.j/v.i,e.g.h),m.return(o(u))})});e.j.set(t,s)}function P2(e){return k(function(t){return t.g==1?y(t,Promise.all(e.j.values()),2):t.return(e.g.h)})}function N2(e,t){var n,i,r,o;return k(function(s){return s.g==1?(n=bn,i=e.s.request(n,t),r=function(){return i.abort()},e.h.push(r),y(s,i.promise,2)):(o=s.h,Rn(e.h,r),s.return(o.data))})}function Na(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Ve,e.onabort=function(i){i.preventDefault(),n.g.reject()},e.onerror=function(i){i.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}Na.prototype.abort=function(){var e=this;return k(function(t){if(t.g==1){try{e.i.abort()}catch{}return le(t,2),y(t,e.g,4)}if(t.g!=2)return Ee(t,0);ce(t),K(t)})};function Xh(e,t){return new Promise(function(n,i){var r=e.h.openCursor();r.onerror=i,r.onsuccess=function(){var o;return k(function(s){if(s.g==1)return r.result==null?(n(),s.return()):(o=r.result,y(s,t(o.key,o.value,o),2));o.continue(),K(s)})}})}Na.prototype.store=function(){return this.h},Na.prototype.promise=function(){return this.g};function Yh(e){this.h=e,this.g=[]}Yh.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function ur(e,t){return ba(e,t,"readwrite")}function ba(e,t,n){n=e.h.transaction([t],n);var i=new Na(n,t);return e.g.push(i),i.promise().then(function(){Rn(e.g,i)},function(){Rn(e.g,i)}),i}function ar(e,t,n){this.h=new Yh(e),this.i=t,this.g=n}h=ar.prototype,h.destroy=function(){return this.h.destroy()},h.hasFixedKeySpace=function(){return!0},h.addSegments=function(){return Fv(this.i)},h.removeSegments=function(e,t){return Gv(this,this.i,e,t)},h.getSegments=function(e){var t=this,n;return k(function(i){return i.g==1?y(i,Vv(t,t.i,e),2):(n=i.h,i.return(n.map(function(r){return t.Lg(r)})))})},h.addManifests=function(){return Fv(this.g)},h.updateManifest=function(){return Promise.reject(new M(2,9,9016,"Cannot modify values in "+this.g))};function b2(e,t,n){e=ur(e.h,e.g);var i=e.store();return i.get(t).onsuccess=function(){i.put(n,t)},e.promise()}h.updateManifestExpiration=function(e,t){var n=ur(this.h,this.g),i=n.store();return i.get(e).onsuccess=function(r){(r=r.target.result)&&(r.expiration=t,i.put(r,e))},n.promise()},h.removeManifests=function(e,t){return Gv(this,this.g,e,t)},h.getManifests=function(e){var t=this,n;return k(function(i){return i.g==1?y(i,Vv(t,t.g,e),2):(n=i.h,i.return(Promise.all(n.map(function(r){return t.qd(r)}))))})},h.getAllManifests=function(){var e=this,t,n;return k(function(i){return i.g==1?(t=ba(e.h,e.g,"readonly"),n=new Map,y(i,Xh(t,function(r,o){var s;return k(function(u){if(u.g==1)return y(u,e.qd(o),2);s=u.h,n.set(r,s),K(u)})}),2)):i.g!=3?y(i,t.promise(),3):i.return(n)})},h.Lg=function(e){return e},h.qd=function(e){return Promise.resolve(e)};function Fv(e){return Promise.reject(new M(2,9,9011,"Cannot add new value to "+e))}h.add=function(e,t){var n=this,i,r,o,s,u,a,l;return k(function(c){if(c.g==1){for(i=ur(n.h,e),r=i.store(),o=[],s={},u=g(t),a=u.next();!a.done;s={Vd:s.Vd},a=u.next())l=a.value,s.Vd=r.add(l),s.Vd.onsuccess=function(d){return function(){o.push(d.Vd.result)}}(s);return y(c,i.promise(),2)}return c.return(o)})};function Gv(e,t,n,i){e=ur(e.h,t),t=e.store();var r={};n=g(n);for(var o=n.next();!o.done;r={Td:r.Td},o=n.next())r.Td=o.value,t.delete(r.Td).onsuccess=function(s){return function(){return i(s.Td)}}(r);return e.promise()}function Vv(e,t,n){var i,r,o,s,u,a,l;return k(function(c){if(c.g==1){for(i=ba(e.h,t,"readonly"),r=i.store(),o={},s=[],u={},a=g(n),l=a.next();!l.done;u={ed:u.ed,bd:u.bd},l=a.next())u.bd=l.value,u.ed=r.get(u.bd),u.ed.onsuccess=function(d){return function(){d.ed.result==null&&s.push(d.bd),o[d.bd]=d.ed.result}}(u);return y(c,i.promise(),2)}if(s.length)throw new M(2,9,9012,"Could not find values for "+s);return c.return(n.map(function(d){return o[d]}))})}function Ls(e){this.g=new Yh(e)}Ls.prototype.destroy=function(){return this.g.destroy()},Ls.prototype.getAll=function(){var e=this,t,n;return k(function(i){return i.g==1?(t=ba(e.g,"session-ids","readonly"),n=[],y(i,Xh(t,function(r,o){n.push(o)}),2)):i.g!=3?y(i,t.promise(),3):i.return(n)})},Ls.prototype.add=function(e){var t=ur(this.g,"session-ids"),n=t.store();e=g(e);for(var i=e.next();!i.done;i=e.next())n.add(i.value);return t.promise()},Ls.prototype.remove=function(e){var t=this,n;return k(function(i){return i.g==1?(n=ur(t.g,"session-ids"),y(i,Xh(n,function(r,o,s){e.includes(o.sessionId)&&s.delete()}),2)):y(i,n.promise(),0)})};function Pt(){this.g=new Map}Pt.prototype.destroy=function(){for(var e=[],t=g(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},Pt.prototype.init=function(){var e=this;Ds.forEach(function(r,o){(r=r())&&e.g.set(o,r)});for(var t=[],n=g(this.g.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)};function zv(e){var t=null;if(e.g.forEach(function(n,i){n.getCells().forEach(function(r,o){r.hasFixedKeySpace()||t||(t={path:{qb:i,Ma:o},Ma:r})})}),t)return t;throw new M(2,9,9013,"Could not find a cell that supports add-operations")}function _2(e,t){e.g.forEach(function(n,i){n.getCells().forEach(function(r,o){t({qb:i,Ma:o},r)})})}function _a(e,t,n){if(e=e.g.get(t),!e)throw new M(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new M(2,9,9013,"Could not find cell with name "+n);return t}function U2(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function O2(e){var t=Array.from(e.g.keys());if(!t.length)throw new M(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function j2(e){var t,n,i;return k(function(r){return r.g==1?(t=Array.from(e.g.values()),n=0<t.length,n||(i=Ds,i.forEach(function(o){(o=o())&&t.push(o)})),y(r,Promise.all(t.map(function(o){return o.erase()})),2)):n?r.F(0):y(r,Promise.all(t.map(function(o){return o.destroy()})),0)})}function Kv(e,t){Ds.set(e,t)}O("shaka.offline.StorageMuxer",Pt),Pt.unregister=function(e){Ds.delete(e)},Pt.register=Kv,Pt.prototype.destroy=Pt.prototype.destroy;var Ds=new Map;function Rs(){ar.apply(this,arguments)}pe(Rs,ar),Rs.prototype.updateManifestExpiration=function(e,t){var n=this,i,r,o;return k(function(s){return i=ur(n.h,n.g),r=i.store(),o=new Ve,r.get(e).onsuccess=function(u){(u=u.target.result)?(u.expiration=t,r.put(u),o.resolve()):o.reject(new M(2,9,9012,"Could not find values for "+e))},y(s,Promise.all([i.promise(),o]),0)})},Rs.prototype.qd=function(e){var t,n,i,r,o,s;return k(function(u){if(u.g==1){for(t=[],n=0;n<e.periods.length;++n)i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime,o=B2(e.periods[n],r),t.push(o);return y(u,Rm(t),2)}return s=u.h,u.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:s,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function B2(e,t){G2(e);for(var n=g(e.streams),i=n.next();!i.done;i=n.next());return e.streams.map(function(r){return F2(r,e.startTime,t)})}function F2(e,t,n){var i=e.initSegmentUri?Hv(e.initSegmentUri):null,r=t+e.presentationTimeOffset,o=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:i,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(s){var u=Hv(s.uri);return{startTime:t+s.startTime,endTime:t+s.endTime,dataKey:u,initSegmentKey:i,appendWindowStart:t,appendWindowEnd:o,timestampOffset:r,tilesLayout:""}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}Rs.prototype.Lg=function(e){return{data:e.data}};function Hv(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new M(2,9,9004,"Could not parse uri "+e)}function G2(e){var t=e.streams.filter(function(u){return u.contentType=="audio"});if(e=e.streams.filter(function(u){return u.contentType=="video"}),!t.every(function(u){return u.variantIds})||!e.every(function(u){return u.variantIds})){for(var n=g(t),i=n.next();!i.done;i=n.next())i.value.variantIds=[];for(n=g(e),i=n.next();!i.done;i=n.next())i.value.variantIds=[];if(n=0,e.length&&!t.length){var r=n++,o=g(e);for(i=o.next();!i.done;i=o.next())i.value.variantIds.push(r)}if(!e.length&&t.length)for(r=n++,o=g(t),i=o.next();!i.done;i=o.next())i.value.variantIds.push(r);if(e.length&&t.length)for(t=g(t),i=t.next();!i.done;i=t.next())for(i=i.value,r=g(e),o=r.next();!o.done;o=r.next()){o=o.value;var s=n++;i.variantIds.push(s),o.variantIds.push(s)}}}function Ua(){ar.apply(this,arguments)}pe(Ua,ar),Ua.prototype.qd=function(e){var t,n,i,r,o,s;return k(function(u){if(u.g==1){for(t=[],n=0;n<e.periods.length;++n){i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime;for(var a=e.periods[n],l=[],c=g(a.streams),d=c.next();!d.done;d=c.next())d=d.value,d.variantIds.length!=0&&l.push(V2(d,a.startTime,a.startTime+r));o=l,t.push(o)}return y(u,Rm(t),2)}return s=u.h,u.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:s,sequenceMode:!1})})};function V2(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(i){return{startTime:t+i.startTime,endTime:t+i.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:i.dataKey,tilesLayout:""}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1}}function qh(){ar.apply(this,arguments)}pe(qh,ar),h=qh.prototype,h.hasFixedKeySpace=function(){return!1},h.addSegments=function(e){return this.add(this.i,e)},h.addManifests=function(e){return this.add(this.g,e)},h.updateManifest=function(e,t){return b2(this,e,t)},h.qd=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function Wv(){this.m=this.j=this.i=this.h=this.g=this.l=null}h=Wv.prototype,h.init=function(){var e=this,t=new Ve,n=!1,i=new fe(function(){n=!0,t.reject(new M(2,9,9017))});i.S(5);var r=I.indexedDB.open("shaka_offline_db",5);return r.onsuccess=function(){if(!n){var o=r.result;e.l=o;var s=o.objectStoreNames;s=s.contains("manifest")&&s.contains("segment")?new Rs(o,"segment","manifest"):null,e.g=s,s=o.objectStoreNames,s=s.contains("manifest-v2")&&s.contains("segment-v2")?new Ua(o,"segment-v2","manifest-v2"):null,e.h=s,s=o.objectStoreNames,s=s.contains("manifest-v3")&&s.contains("segment-v3")?new Ua(o,"segment-v3","manifest-v3"):null,e.i=s,s=o.objectStoreNames,s=s.contains("manifest-v5")&&s.contains("segment-v5")?new qh(o,"segment-v5","manifest-v5"):null,e.j=s,o=o.objectStoreNames.contains("session-ids")?new Ls(o):null,e.m=o,i.stop(),t.resolve()}},r.onupgradeneeded=function(){for(var o=r.result,s=g(["segment-v5","manifest-v5","session-ids"]),u=s.next();!u.done;u=s.next())u=u.value,o.objectStoreNames.contains(u)||o.createObjectStore(u,{autoIncrement:!0})},r.onerror=function(o){n||(t.reject(new M(2,9,9001,r.error)),i.stop(),o.preventDefault())},t},h.destroy=function(){var e=this;return k(function(t){switch(t.g){case 1:if(!e.g){t.F(2);break}return y(t,e.g.destroy(),2);case 2:if(!e.h){t.F(4);break}return y(t,e.h.destroy(),4);case 4:if(!e.i){t.F(6);break}return y(t,e.i.destroy(),6);case 6:if(!e.j){t.F(8);break}return y(t,e.j.destroy(),8);case 8:if(!e.m){t.F(10);break}return y(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),K(t)}})},h.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},h.getEmeSessionCell=function(){return this.m},h.erase=function(){var e=this;return k(function(t){switch(t.g){case 1:if(!e.g){t.F(2);break}return y(t,e.g.destroy(),2);case 2:if(!e.h){t.F(4);break}return y(t,e.h.destroy(),4);case 4:if(!e.i){t.F(6);break}return y(t,e.i.destroy(),6);case 6:if(!e.j){t.F(8);break}return y(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),y(t,z2(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,y(t,e.init(),0)}})};function z2(){var e=new Ve,t=I.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new M(2,9,9001,t.error)),n.preventDefault()},e}Kv("idb",function(){return Cr()||zo()||!I.indexedDB?null:new Wv});function Xn(e,t,n,i){this.g=e,this.i=t,this.h=n,this.l=i,this.j=["offline:",e,"/",t,"/",n,"/",i].join("")}Xn.prototype.qb=function(){return this.i},Xn.prototype.Ma=function(){return this.h},Xn.prototype.key=function(){return this.l},Xn.prototype.toString=function(){return this.j};function $h(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var i=e[3];return i&&t!=null?new Xn(t,n,i,Number(e[4])):null}function Xv(e,t){this.h=e,this.g=t}function Yv(e,t){var n=new de(null,0);n.gb(t.duration);var i=t.streams.filter(function(l){return l.type=="audio"}),r=t.streams.filter(function(l){return l.type=="video"});i=K2(e,i,r,n),r=t.streams.filter(function(l){return l.type==Ce}).map(function(l){return Oa(e,l,n)});var o=t.streams.filter(function(l){return l.type=="image"}).map(function(l){return Oa(e,l,n)}),s=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var u=g(i.values()),a=u.next();!a.done;a=u.next())a=a.value,a.audio&&a.audio.encrypted&&(a.audio.drmInfos=s),a.video&&a.video.encrypted&&(a.video.drmInfos=s);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(i.values()),textStreams:r,imageStreams:o,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null}}function K2(e,t,n,i){for(var r=new Set,o=g(t),s=o.next();!s.done;s=o.next()){var u=g(s.value.variantIds);for(s=u.next();!s.done;s=u.next())r.add(s.value)}for(o=g(n),s=o.next();!s.done;s=o.next())for(u=g(s.value.variantIds),s=u.next();!s.done;s=u.next())r.add(s.value);for(o=new Map,r=g(r),s=r.next();!s.done;s=r.next())s=s.value,o.set(s,{id:s,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=g(t),r=t.next();!r.done;r=t.next())for(r=r.value,s=Oa(e,r,i),u=g(r.variantIds),r=u.next();!r.done;r=u.next())r=o.get(r.value),r.language=s.language,r.primary=r.primary||s.primary,r.audio=s;for(n=g(n),t=n.next();!t.done;t=n.next())for(r=t.value,t=Oa(e,r,i),s=g(r.variantIds),r=s.next();!r.done;r=s.next())r=o.get(r.value),r.primary=r.primary||t.primary,r.video=t;return o}function Oa(e,t,n){var i=t.segments.map(function(r){return H2(e,r)});return n.Dd(i),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new De(i),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching}}function H2(e,t){var n=new Xn("segment",e.h,e.g,t.dataKey);return new oe(t.startTime,t.endTime,function(){return[n.toString()]},0,null,t.initSegmentKey!=null?W2(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||"")}function W2(e,t){var n=new Xn("segment",e.h,e.g,t);return new rn(function(){return[n.toString()]},0,null)}function qv(){this.g=null}h=qv.prototype,h.configure=function(){},h.start=function(e,t){var n=this,i,r,o,s,u,a,l;return k(function(c){switch(c.g){case 1:if(i=$h(e),n.g=i,i==null||i.g!="manifest")throw new M(2,1,9004,e);return r=new Pt,Zn(c,2),y(c,r.init(),4);case 4:return y(c,_a(r,i.qb(),i.Ma()),5);case 5:return o=c.h,y(c,o.getManifests([i.key()]),6);case 6:return s=c.h,u=s[0],a=new Xv(i.qb(),i.Ma()),l=Yv(a,u),t.makeTextStreamsForClosedCaptions(l),c.return(l);case 2:return Zt(c),y(c,r.destroy(),7);case 7:en(c,0)}})},h.stop=function(){return Promise.resolve()},h.update=function(){},h.onExpirationUpdated=function(e,t){var n=this,i,r,o,s,u,a,l;return k(function(c){switch(c.g){case 1:return i=n.g,r=new Pt,le(c,2,3),y(c,r.init(),5);case 5:return y(c,_a(r,i.qb(),i.Ma()),6);case 6:return o=c.h,y(c,o.getManifests([i.key()]),7);case 7:if(s=c.h,u=s[0],a=u.sessionIds.includes(e),l=u.expiration==null||u.expiration>t,!a||!l){c.F(3);break}return y(c,o.updateManifestExpiration(i.key(),t),3);case 3:return Zt(c),y(c,r.destroy(),10);case 10:en(c,0);break;case 2:ce(c),c.F(3)}})},h.onInitialVariantChosen=function(){},h.banLocation=function(){},xn["application/x-offline-manifest"]=function(){return new qv};function $v(){}function Qv(e){var t=$h(e);return t&&t.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=Nr(e)):e=t&&t.g=="segment"?X2(t.key(),t):Hi(new M(2,1,9004,e)),e}function X2(e,t){var n=new Pt;return Nr(void 0).Fa(function(){return n.init()}).Fa(function(){return _a(n,t.qb(),t.Ma())}).Fa(function(i){return i.getSegments([t.key()])}).Fa(function(i){return{uri:t,data:i[0].data,headers:{}}}).finally(function(){return n.destroy()})}O("shaka.offline.OfflineScheme",$v),$v.plugin=Qv,ri("offline",Qv);function Jv(e,t,n){var i,r,o,s,u,a;return k(function(l){switch(l.g){case 1:i=[];for(var c=[],d=g(n),f=d.next();!f.done;f=d.next()){f=f.value;for(var p=!1,m=g(c),v=m.next();!v.done;v=m.next())if(v=v.value,q2(v.info,f)){v.sessionIds.push(f.sessionId),p=!0;break}p||c.push({info:f,sessionIds:[f.sessionId]})}r=g(c),o=r.next();case 2:if(o.done){l.F(4);break}return s=o.value,u=Y2(e,t,s),y(l,u,5);case 5:a=l.h,i=i.concat(a),o=r.next(),l.F(2);break;case 4:return l.return(i)}})}function Y2(e,t,n){var i,r;return k(function(o){switch(o.g){case 1:return i=new Mu({zc:t,onError:function(){},Fe:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),le(o,2),i.configure(e),y(o,IT(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:Ee(o,3);break;case 2:return ce(o),y(o,i.destroy(),5);case 5:return o.return([]);case 3:return r=[],y(o,Promise.all(n.sessionIds.map(function(s){return k(function(u){if(u.g==1)return le(u,2),y(u,kT(i,s),4);if(u.g!=2)return r.push(s),Ee(u,0);ce(u),K(u)})})),6);case 6:return y(o,i.destroy(),7);case 7:return o.return(r)}})}function q2(e,t){function n(i,r){return i.robustness==r.robustness&&i.contentType==r.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&Pp(e.audioCapabilities,t.audioCapabilities,n)&&Pp(e.videoCapabilities,t.videoCapabilities,n)}function $2(e,t,n){var i=t.presentationTimeline.getDuration();return t=Zv(t),{offlineUri:null,originalManifestUri:e,duration:i,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function Qh(e,t){var n=Yv(new Xv(e.qb(),e.Ma()),t),i=t.appMetadata||{};return n=Zv(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i,isIncomplete:t.isIncomplete||!1}}function Zv(e){var t=[],n=Wl(e.variants);n=g(n);for(var i=n.next();!i.done;i=n.next())t.push(Dr(i.value));for(e=g(e.textStreams),n=e.next();!n.done;n=e.next())t.push(gu(n.value));return t}function Q2(){this.g={}}function J2(e,t){var n=t.audio,i=t.video;if(n&&!i&&(e.g[n.id]=n.bandwidth||t.bandwidth),!n&&i&&(e.g[i.id]=i.bandwidth||t.bandwidth),n&&i){var r=n.bandwidth||393216,o=i.bandwidth||t.bandwidth-r;0>=o&&(o=t.bandwidth),e.g[n.id]=r,e.g[i.id]=o}}function Z2(e,t){e.g[t.id]=t.bandwidth||2048}function ey(e,t){return e=e.g[t],e==null&&(e=0),e}function ct(e){var t=this;if(e&&e.constructor!=_)throw new M(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.Zb()):(this.h=Yr(),this.g=new Be),this.i=[],this.j=[];var n=!e;this.l=new _r(function(){var i,r,o,s,u;return k(function(a){switch(a.g){case 1:return y(a,Promise.all(t.j.map(function(l){return Wh(l)})),2);case 2:for(i=function(){},r=[],o=g(t.i),s=o.next();!s.done;s=o.next())u=s.value,r.push(u.then(i,i));return y(a,Promise.all(r),3);case 3:if(!n){a.F(4);break}return y(a,t.g.destroy(),4);case 4:t.h=null,t.g=null,K(a)}})})}function Jh(){if(Nn())e:{for(var e=g(Ds.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}h=ct.prototype,h.destroy=function(){return this.l.destroy()},h.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=Ku(e,t)),qr(this.h,e)},h.getConfiguration=function(){var e=Yr();return qr(e,this.h,Yr()),e},h.Zb=function(){return this.g},h.store=function(e,t,n){var i=this,r=this.getConfiguration(),o=new Bv(this.g);return this.j.push(o),t=ex(this,e,t||{},function(){var s;return k(function(u){return u.g==1?n?u.F(2):y(u,Rc(e,i.g,r.manifest.retryParameters),3):(u.g!=2&&(n=u.h),s=Kf(e,n||null),u.return(s()))})},r,o),t=new $e(t,function(){return Wh(o)}),t.finally(function(){Rn(i.j,o)}),fx(this,t)};function ex(e,t,n,i,r,o){var s,u,a,l,c,d,f,p,m,v,E,w,T,x;return k(function(S){switch(S.g){case 1:return ja(),u=s=null,a=new Pt,d=c=l=null,le(S,2,3),y(S,i(),5);case 5:return s=S.h,y(S,lx(e,t,s,r),6);case 6:if(f=S.h,mt(e),p=!f.presentationTimeline.R()&&!f.presentationTimeline.wc(),!p)throw new M(2,9,9005,t);return y(S,cx(e,f,function(C){d=d||C},r),7);case 7:if(u=S.h,mt(e),d)throw d;return y(S,nx(f,u,r),8);case 8:return y(S,a.init(),9);case 9:return mt(e),y(S,zv(a),10);case 10:return l=S.h,mt(e),m=ix(u,f,t,n,r,o),v=m.Si,E=m.vg,y(S,l.Ma.addManifests([v]),11);case 11:if(w=S.h,mt(e),c=w[0],mt(e),d)throw d;return y(S,tx(e,E,c,v,o,r,l.Ma,f,u),12);case 12:return mt(e),ry(f,v,u,r),y(S,l.Ma.updateManifest(c,v),13);case 13:return mt(e),T=new Xn("manifest",l.path.qb,l.path.Ma,c),S.return(Qh(T,v));case 3:return Zt(S),y(S,a.destroy(),14);case 14:if(!s){S.F(15);break}return y(S,s.stop(),15);case 15:if(!u){S.F(17);break}return y(S,u.destroy(),17);case 17:en(S,0);break;case 2:if(x=ce(S),c==null){S.F(19);break}return y(S,ty(c),19);case 19:throw d||x}})}function tx(e,t,n,i,r,o,s,u,a){var l,c,d,f,p,m,v,E,w,T;return k(function(x){switch(x.g){case 1:if(l={},c=0,d=function(S,C){var D,b,P,N,U,B,V;return k(function(W){if(W.g==1){for(D={},b=g(S),P=b.next();!P.done;D={kc:D.kc},P=b.next())D.kc=P.value,N=L2(D.kc,o),U=D.kc.i,B=D.kc.h,V=function(ee){return function(ne){var he,Y,tt;return k(function(ft){if(ft.g==1)return y(ft,s.addSegments([{data:ne}]),2);he=ft.h,mt(e),Y=ee.kc.g,tt=Hh(Y),l[tt]=he[0],c+=ne.byteLength,K(ft)})}}(D),R2(r,D.kc.groupId,N,U,B,V);return y(W,P2(r),2)}return C?(mt(e),ry(u,i,a,o),y(W,s.updateManifest(n,i),0)):W.F(0)})},f=!1,le(x,2),!Zh(u)||!f||iy(u)){x.F(4);break}return y(x,d(t.filter(function(S){return S.h}),!0),5);case 5:return mt(e),t=t.filter(function(S){return!S.h}),p=l,m=c,l={},c=0,y(x,ny(s,n,i,p,m,function(){return mt(e)}),6);case 6:mt(e);case 4:if(f){x.F(7);break}return y(x,d(t,!1),8);case 8:return mt(e),v=l,E=c,l={},c=0,y(x,ny(s,n,i,v,E,function(){return mt(e)}),9);case 9:mt(e);case 7:Ee(x,0);break;case 2:return w=ce(x),T=Object.values(l),y(x,s.removeSegments(T,function(){}),10);case 10:throw w}})}function ty(e){var t,n,i,r;return k(function(o){switch(o.g){case 1:return t=new Pt,y(o,t.init(),2);case 2:return y(o,zv(t),3);case 3:return n=o.h,i=new Xn("manifest",n.path.qb,n.path.Ma,e),y(o,t.destroy(),4);case 4:return r=new ct,y(o,r.remove(i.toString()),0)}})}function ny(e,t,n,i,r,o){var s,u,a,l,c,d,f,p,m,v,E;return k(function(w){switch(w.g){case 1:for(s=!1,le(w,2),u=!0,a=g(n.streams),l=a.next();!l.done;l=a.next())for(c=l.value,d=g(c.segments),f=d.next();!f.done;f=d.next())p=f.value,m=p.pendingSegmentRefId?i[p.pendingSegmentRefId]:null,m!=null&&(p.dataKey=m,p.pendingSegmentRefId=void 0),m=p.pendingInitSegmentRefId?i[p.pendingInitSegmentRefId]:null,m!=null&&(p.initSegmentKey=m,p.pendingInitSegmentRefId=void 0),p.pendingSegmentRefId&&(u=!1),p.pendingInitSegmentRefId&&(u=!1);return n.size+=r,u&&(n.isIncomplete=!1),y(w,e.updateManifest(t,n),4);case 4:s=!0,o(),Ee(w,0);break;case 2:return v=ce(w),y(w,ty(t),5);case 5:if(s){w.F(6);break}return E=Object.values(i),y(w,e.removeSegments(E,function(){}),6);case 6:throw v}})}function nx(e,t,n){var i,r,o,s,u,a,l,c,d,f,p,m,v,E,w,T,x,S,C,D,b,P,N,U,B,V,W,ee;return k(function(ne){switch(ne.g){case 1:return i={width:1/0,height:1/0},WE(e,n.restrictions,i),y(ne,$p(t,e,n.offline.usePersistentLicense),2);case 2:for(r=[],o=n.preferredDecodingAttributes,s=n.preferredVideoCodecs,u=n.preferredAudioCodecs,Yp(e,s,u,o),a=g(e.variants),l=a.next();!l.done;l=a.next())c=l.value,r.push(Dr(c));for(d=g(e.textStreams),f=d.next();!f.done;f=d.next())p=f.value,r.push(gu(p));for(m=g(e.imageStreams),v=m.next();!v.done;v=m.next())E=v.value,r.push(zl(E));return y(ne,n.offline.trackSelectionCallback(r),3);case 3:for(w=ne.h,T=e.presentationTimeline.getDuration(),x=0,S=g(w),C=S.next();!C.done;C=S.next())D=C.value,b=D.bandwidth*T/8,x+=b;return le(ne,4),y(ne,n.offline.downloadSizeCallback(x),6);case 6:if(P=ne.h,!P)throw new M(2,9,9014);Ee(ne,5);break;case 4:throw N=ce(ne),N instanceof M?N:new M(2,9,9015);case 5:for(U=new Set,B=new Set,V=new Set,W=g(w),C=W.next();!C.done;C=W.next())ee=C.value,ee.type=="variant"&&U.add(ee.id),ee.type=="text"&&B.add(ee.id),ee.type=="image"&&V.add(ee.id);e.variants=e.variants.filter(function(he){return U.has(he.id)}),e.textStreams=e.textStreams.filter(function(he){return B.has(he.id)}),e.imageStreams=e.imageStreams.filter(function(he){return V.has(he.id)}),vx(e),K(ne)}})}function ix(e,t,n,i,r,o){var s=$2(n,t,i),u=r.offline.progressCallback;D2(o,function(p,m){s.size=m,u(s,p)},function(p,m){a&&r.offline.usePersistentLicense&&l==m&&qo(e,"cenc",p)});var a=Zh(t)&&!iy(t),l=null;a&&(l=yx.get(e.g.keySystem));for(var c=new Q2,d=g(t.textStreams),f=d.next();!f.done;f=d.next())c.g[f.value.id]=52;for(d=g(t.imageStreams),f=d.next();!f.done;f=d.next())Z2(c,f.value);for(f=g(t.variants),d=f.next();!d.done;d=f.next())J2(c,d.value);return c=hx(o,c,t,r),o=c.streams,c=c.vg,f=e.g,d=r.offline.usePersistentLicense,f&&d&&(f.initData=[]),{Si:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.td(),streams:o,sessionIds:d?_f(e):[],drmInfo:f,appMetadata:i,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},vg:c}}function Zh(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function iy(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function ry(e,t,n,i){if(t.expiration=n.td(),n=_f(n),t.sessionIds=i.offline.usePersistentLicense?n:[],Zh(e)&&i.offline.usePersistentLicense&&!n.length)throw new M(2,9,9007)}h.remove=function(e){return ed(this,rx(this,e))};function rx(e,t){var n,i,r,o,s,u;return k(function(a){switch(a.g){case 1:if(ja(),n=$h(t),n==null||n.g!="manifest")throw new M(2,9,9004,t);return i=n,r=new Pt,Zn(a,2),y(a,r.init(),4);case 4:return y(a,_a(r,i.qb(),i.Ma()),5);case 5:return o=a.h,y(a,o.getManifests([i.key()]),6);case 6:return s=a.h,u=s[0],y(a,Promise.all([ox(e,u,r),sx(o,i,u)]),2);case 2:return Zt(a),y(a,r.destroy(),8);case 8:en(a,0)}})}function oy(e,t){for(var n=[],i=g(e.streams),r=i.next();!r.done;r=i.next())r=r.value,t&&r.type=="video"?n.push({contentType:Kt(r.mimeType,r.codecs),robustness:e.drmInfo.videoRobustness}):t||r.type!="audio"||n.push({contentType:Kt(r.mimeType,r.codecs),robustness:e.drmInfo.audioRobustness});return n}function ox(e,t,n){return k(function(i){return y(i,mx(e.g,e.h.drm,n,t),0)})}function sx(e,t,n){function i(){}var r=gx(n);return Qh(t,n),Promise.all([e.removeSegments(r,i),e.removeManifests([t.key()],i)])}h.fj=function(){return ed(this,ux(this))};function ux(e){var t,n,i,r,o,s,u,a,l,c;return k(function(d){switch(d.g){case 1:return ja(),t=e.g,n=e.h.drm,i=new Pt,r=!1,Zn(d,2),y(d,i.init(),4);case 4:o=[],U2(i,function(f){return o.push(f)}),s=g(o),u=s.next();case 5:if(u.done){d.F(2);break}return a=u.value,y(d,a.getAll(),8);case 8:return l=d.h,y(d,Jv(n,t,l),9);case 9:return c=d.h,y(d,a.remove(c),10);case 10:c.length!=l.length&&(r=!0),u=s.next(),d.F(5);break;case 2:return Zt(d),y(d,i.destroy(),11);case 11:en(d,3);break;case 3:return d.return(!r)}})}h.list=function(){return ed(this,ax())};function ax(){var e,t,n;return k(function(i){switch(i.g){case 1:return ja(),e=[],t=new Pt,Zn(i,2),y(i,t.init(),4);case 4:return n=Promise.resolve(),_2(t,function(r,o){n=n.then(function(){var s;return k(function(u){if(u.g==1)return y(u,o.getAllManifests(),2);s=u.h,s.forEach(function(a,l){a=Qh(new Xn("manifest",r.qb,r.Ma,l),a),e.push(a)}),K(u)})})}),y(i,n,2);case 2:return Zt(i),y(i,t.destroy(),6);case 6:en(i,3);break;case 3:return i.return(e)}})}function lx(e,t,n,i){var r,o,s,u,a;return k(function(l){if(l.g==1)return r=null,o=e.g,s={networkingEngine:o,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(c){r=c},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return i.abr.defaultBandwidthEstimate}},n.configure(i.manifest),mt(e),y(l,n.start(t,s),2);if(l.g!=3)return u=l.h,mt(e),a=sy(u),y(l,Promise.all(Sl(a,function(c){return c.createSegmentIndex()})),3);if(mt(e),r)throw r;return l.return(u)})}function cx(e,t,n,i){var r;return k(function(o){return o.g==1?(r=new Mu({zc:e.g,onError:n,Fe:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),r.configure(i.drm),y(o,xT(r,t.variants,i.offline.usePersistentLicense),2)):o.g!=3?y(o,Nf(r),3):o.return(r)})}function hx(e,t,n,i){var r=new Map,o=sy(n),s=new Map;o=g(o);for(var u=o.next();!u.done;u=o.next()){u=u.value;var a=dx(e,t,n,u,i,r);s.set(u.id,a)}for(e=g(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&s.get(t.audio.id).variantIds.push(t.id),t.video&&s.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(s.values()),vg:Array.from(r.values())}}function dx(e,t,n,i,r,o){var s={id:i.id,originalId:i.originalId,groupId:i.groupId,primary:i.primary,type:i.type,mimeType:i.mimeType,codecs:i.codecs,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,videoLayout:i.videoLayout,kind:i.kind,language:i.language,originalLanguage:i.originalLanguage,label:i.label,width:i.width||null,height:i.height||null,encrypted:i.encrypted,keyIds:i.keyIds,segments:[],variantIds:[],roles:i.roles,forced:i.forced,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,closedCaptions:i.closedCaptions,tilesLayout:i.tilesLayout,external:i.external,fastSwitching:i.fastSwitching},u=r.offline.numberOfParallelDownloads,a=0;return px(i,n.presentationTimeline.Ab(),function(l){var c=Hh(l),d=void 0;if(!o.has(c)){var f=l.endTime-l.startTime;f=ey(t,i.id)*f,f=jv(e.g,f),o.set(c,new Uv(l,f,a,!1))}l.ka&&(d=Hh(l.ka),o.has(d)||(f=.5*ey(t,i.id),f=jv(e.g,f),o.set(d,new Uv(l.ka,f,a,!0)))),s.segments.push({pendingInitSegmentRefId:d,initSegmentKey:d?0:null,startTime:l.startTime,endTime:l.endTime,appendWindowStart:l.appendWindowStart,appendWindowEnd:l.appendWindowEnd,timestampOffset:l.timestampOffset,tilesLayout:l.tilesLayout,pendingSegmentRefId:c,dataKey:0}),a=(a+1)%u}),s}function px(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var i=e.segmentIndex.get(t);i;)n(i),i=e.segmentIndex.get(++t)}function mt(e){if(e.l.g)throw new M(2,9,7001)}function ja(){if(!Jh())throw new M(2,9,9e3)}function ed(e,t){return k(function(n){return n.g==1?(e.i.push(t),Zn(n,2),y(n,t,4)):n.g!=2?n.return(n.h):(Zt(n),Rn(e.i,t),en(n,0))})}function fx(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){Rn(e.i,n)})}function gx(e){var t=new Set;e=g(e.streams);for(var n=e.next();!n.done;n=e.next()){n=g(n.value.segments);for(var i=n.next();!i.done;i=n.next())i=i.value,i.initSegmentKey!=null&&t.add(i.initSegmentKey),t.add(i.dataKey)}return Array.from(t)}function mx(e,t,n,i){var r,o,s;return k(function(u){return u.g==1?i.drmInfo?(r=O2(n),o=i.sessionIds.map(function(a){return{sessionId:a,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:oy(i,!1),videoCapabilities:oy(i,!0)}}),y(u,Jv(t,e,o),2)):u.return():u.g!=3?(s=u.h,y(u,r.remove(s),3)):y(u,r.add(o.filter(function(a){return!s.includes(a.sessionId)})),0)})}function sy(e){for(var t=new Set,n=g(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(n=g(e.imageStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(e=g(e.variants),n=e.next();!n.done;n=e.next())n=n.value,n.audio&&t.add(n.audio),n.video&&t.add(n.video);return t}function vx(e){e.variants.map(function(o){return o.video});var t=new Set(e.variants.map(function(o){return o.audio}));e=e.textStreams;for(var n=g(t),i=n.next();!i.done;i=n.next()){i=g(t);for(var r=i.next();!r.done;r=i.next());}for(t=g(e),n=t.next();!n.done;n=t.next())for(n=g(e),i=n.next();!i.done;i=n.next());}O("shaka.offline.Storage",ct),ct.deleteAll=function(){var e;return k(function(t){return t.g==1?(e=new Pt,Zn(t,2),y(t,j2(e),2)):t.g!=5?(Zt(t),y(t,e.destroy(),5)):en(t,0)})},ct.prototype.list=ct.prototype.list,ct.prototype.removeEmeSessions=ct.prototype.fj,ct.prototype.remove=ct.prototype.remove,ct.prototype.store=ct.prototype.store,ct.prototype.getNetworkingEngine=ct.prototype.Zb,ct.prototype.getConfiguration=ct.prototype.getConfiguration,ct.prototype.configure=ct.prototype.configure,ct.prototype.destroy=ct.prototype.destroy,ct.support=Jh;var yx=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");eh.offline=Jh;function pt(){}function uy(){for(var e=g(Ps),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){Ae("Error installing polyfill!",n)}}}function Ct(e,t){for(e={priority:t||0,callback:e},t=0;t<Ps.length;t++)if(Ps[t].priority<e.priority){Ps.splice(t,0,e);return}Ps.push(e)}O("shaka.polyfill",pt),pt.register=Ct,pt.installAll=uy;var Ps=[];function Ns(){this.g=new Ba}function ay(){I.AbortController||(I.AbortController=Ns,I.AbortSignal=Ba)}Ns.prototype.abort=function(e){var t=this.g;t.h||(t.h=!0,t.g=e,t.g===void 0&&(t.g=new DOMException("signal is aborted without reason","AbortError")),e=new X("abort"),t.onabort&&t.onabort(e),t.dispatchEvent(e))},xe.Object.defineProperties(Ns.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),pt.AbortController=Ns,Ns.install=ay;function Ba(){Ie.call(this),this.h=!1,this.g=void 0,this.onabort=null}pe(Ba,Ie),xe.Object.defineProperties(Ba.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Ct(ay);function ly(){}function cy(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=g(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())Ex(t.value)}function Ex(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(n){n==null||n==null?this.removeAttribute(t):this.setAttribute(t,n)}})}pt.Aria=ly,ly.install=cy,Ct(cy);function hy(){}function dy(){L1()}pt.EncryptionScheme=hy,hy.install=dy,Ct(dy,-2);function py(){}function fy(){if(I.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",fo),document.addEventListener("webkitfullscreenerror",fo),document.addEventListener("mozfullscreenchange",fo),document.addEventListener("mozfullscreenerror",fo),document.addEventListener("MSFullscreenChange",fo),document.addEventListener("MSFullscreenError",fo)}}function fo(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}pt.Fullscreen=py,py.install=fy,Ct(fy);function Fa(){}function gy(){var e=!0;(Ko()||Xe("PlayStation 5")||Mr()||Xe("Web0S")||Ki()||Cr()||Xe("PC=EOS")||Xe("Hisense")||Xe("VIDAA"))&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),my=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=Tx)}function Tx(e){var t,n,i,r,o,s,u,a,l,c,d,f,p,m,v,E,w,T,x;return k(function(S){switch(S.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},!e)return S.return(t);if(n=e.video,i=e.audio,e.type=="media-source"){if(!Nn())return S.return(t);if(n){if(Cr())if(I.cast&&cast.__platform__&&cast.__platform__.canDisplayType){var C=n.contentType;n.width&&n.height&&(C+="; width="+n.width+"; height="+n.height),n.framerate&&(C+="; framerate="+n.framerate),n.transferFunction==="pq"&&(C+="; eotf=smpte2084"),r=cast.__platform__.canDisplayType(C)}else r=nt(n.contentType);else Ki()?(o=n.contentType,n.width&&n.height&&(o+="; width="+n.width,o+="; height="+n.height),n.framerate&&(o+="; framerate="+n.framerate),n.bitrate&&(o+="; bitrate="+n.bitrate),r=nt(o)):r=nt(n.contentType);if(!r)return S.return(t)}if(i&&(Cr()&&i.spatialRendering?(u=i.contentType+"; spatialRendering=true",s=nt(u)):s=nt(i.contentType),!s))return S.return(t)}else if(e.type=="file"){if(n&&(a=n.contentType,l=Vo(a),!l)||i&&(c=i.contentType,d=Vo(c),!d))return S.return(t)}else return S.return(t);if(!e.keySystemConfiguration)return t.supported=!0,S.return(Promise.resolve(t));if(f=e.keySystemConfiguration,p=[],m=[],f.audio&&(v={robustness:f.audio.robustness||"",contentType:e.audio.contentType},Ki()&&e.audio.contentType.includes('codecs="ac-3"')&&(v={robustness:v.robustness,contentType:'audio/mp4; codecs="ec-3"'}),p.push(v)),f.video&&(E={robustness:f.video.robustness||"",contentType:e.video.contentType},m.push(E)),w={initDataTypes:[f.initDataType],distinctiveIdentifier:f.distinctiveIdentifier,persistentState:f.persistentState,sessionTypes:f.sessionTypes},p.length&&(w.audioCapabilities=p),m.length&&(w.videoCapabilities=m),T=(e.video?e.video.contentType:"")+"#"+(e.audio?e.audio.contentType:"")+"#"+e.keySystemConfiguration.keySystem,le(S,3),T in Ga){x=Ga[T],S.F(5);break}return y(S,navigator.requestMediaKeySystemAccess(f.keySystem,[w]),6);case 6:x=S.h,Ga[T]=x;case 5:Ee(S,4);break;case 3:ce(S);case 4:x&&(t.supported=!0,t.keySystemAccess=x);case 2:return S.return(t)}})}pt.MediaCapabilities=Fa,Fa.install=gy;var my=null;Fa.originalMcap=my;var Ga={};Fa.memoizedMediaKeySystemAccessRequests_=Ga,Ct(gy,-1);function vy(){}function yy(){var e=kr();I.MediaSource&&(Cr()?Ty():e?10>=e?I.MediaSource=null:12>=e?(Ey(),wx()):15>=e&&Ey():Fl()?Ty():(hu()||cu()||Xe("Tizen 4"))&&Ax()),I.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&Sx()}function Ey(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,vn.apply(0,arguments));return t.abort=function(){},t}}function wx(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function Ty(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return t.split(";")[0].split("/")[1]!="mp2t"&&e(t)}}function Ax(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return Pn(t)!="opus"&&e(t)}}function Sx(){var e=MediaSource.isTypeSupported;Xe("Web0S")||(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),i=n.findIndex(function(s){return s.startsWith("codecs=")});if(0>i)return e(t);var r=n[i].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),o=r.findIndex(function(s){return s.startsWith("vp09")});return 0<=o&&(r[o]="vp9",n[i]='codecs="'+r.join(",")+'"',t=n.join("; ")),e(t)})}pt.MediaSource=vy,vy.install=yy,Ct(yy);function wy(){}function Ay(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?xx():I.orientation!=null&&Ix())}function xx(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function Ix(){function e(){switch(I.orientation){case-90:t.type="landscape-secondary",t.angle=270;break;case 0:t.type="portrait-primary",t.angle=0;break;case 90:t.type="landscape-primary",t.angle=90;break;case 180:t.type="portrait-secondary",t.angle=180}}var t=new Va;screen.orientation=t,e(),I.addEventListener("orientationchange",function(){e();var n=new X("change");t.dispatchEvent(n)})}pt.Orientation=wy,wy.install=Ay;function Va(){Ie.call(this),this.type="",this.angle=0}pe(Va,Ie),Va.prototype.lock=function(e){function t(i){return screen.lockOrientation?screen.lockOrientation(i):screen.mozLockOrientation?screen.mozLockOrientation(i):screen.msLockOrientation?screen.msLockOrientation(i):!1}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},Va.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},Ct(Ay);function td(){}var nd,id,rd,od,sd,ud;function Cx(e,t){try{var n=new za(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function Mx(e){var t=this.mediaKeys;return t&&t!=e&&Sy(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Sy(e,this):Promise.resolve()}function kx(e){if(e=ge(e.initData),Ut(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=oi(e.subarray(4),!0),e=si(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=tn(e),this.dispatchEvent(t)}pt.PatchedMediaKeysApple=td,td.uninstall=function(){nd&&(nd=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",id),HTMLMediaElement.prototype.setMediaKeys=rd,I.MediaKeys=od,I.MediaKeySystemAccess=sd,navigator.requestMediaKeySystemAccess=ud,id=ud=rd=sd=od=null,I.shakaMediaKeysPolyfill=!1)},td.install=function(e){I.HTMLVideoElement&&I.WebKitMediaKeys&&(e!==void 0&&e&&(nd=!0,id=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),rd=HTMLMediaElement.prototype.setMediaKeys,od=I.MediaKeys,sd=I.MediaKeySystemAccess,ud=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Mx,I.MediaKeys=bs,I.MediaKeySystemAccess=za,navigator.requestMediaKeySystemAccess=Cx,I.shakaMediaKeysPolyfill=!0)};function za(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=g(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var i=!1,r=!1;if(n.audioCapabilities)for(var o=g(n.audioCapabilities),s=o.next();!s.done;s=o.next())s=s.value,s.contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,s.contentType.split(";")[0])&&(t.audioCapabilities.push(s),r=!0));if(n.videoCapabilities)for(n=g(n.videoCapabilities),s=n.next();!s.done;s=n.next())o=s.value,o.contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,o.contentType.split(";")[0])&&(t.videoCapabilities.push(o),r=!0));i||(r=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=r?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}za.prototype.createMediaKeys=function(){var e=new bs(this.keySystem);return Promise.resolve(e)},za.prototype.getConfiguration=function(){return this.g};function bs(e){this.h=new WebKitMediaKeys(e),this.g=new _e}bs.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new ad(this.h)},bs.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function Sy(e,t){if(e.g.ub(),!t)return Promise.resolve();e.g.o(t,"webkitneedkey",kx);try{return Kr(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}bs.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function ad(e){Ie.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new _e,this.sessionId="",this.expiration=NaN,this.closed=new Ve,this.keyStatuses=new xy}pe(ad,Ie),h=ad.prototype,h.generateRequest=function(e,t){var n=this;this.h=new Ve;try{var i=this.l.createSession("video/mp4",ge(t));this.i=i,this.sessionId=i.sessionId||"",this.j.o(this.i,"webkitkeymessage",function(r){n.h&&(n.h.resolve(),n.h=null),r=new Map().set("messageType",n.keyStatuses.sc()==null?"license-request":"license-renewal").set("message",tn(r.message)),r=new X("message",r),n.dispatchEvent(r)}),this.j.o(i,"webkitkeyadded",function(){n.g&&(Ka(n,"usable"),n.g.resolve(),n.g=null)}),this.j.o(i,"webkitkeyerror",function(){var r=Error("EME PatchedMediaKeysApple key error");if(r.errorCode=n.i.error,n.h!=null)n.h.reject(r),n.h=null;else if(n.g!=null)n.g.reject(r),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Ka(n,"output-not-allowed");break;default:Ka(n,"internal-error")}}),Ka(this,"status-pending")}catch(r){this.h.reject(r)}return this.h},h.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},h.update=function(e){this.g=new Ve;try{this.i.update(ge(e))}catch(t){this.g.reject(t)}return this.g},h.close=function(){try{this.i.close(),this.closed.resolve(),this.j.ub()}catch(e){this.closed.reject(e)}return this.closed},h.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function Ka(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new X("keystatuseschange"),e.dispatchEvent(t)}function xy(){this.size=0,this.g=void 0}h=xy.prototype,h.sc=function(){return this.g},h.forEach=function(e){this.g&&e(this.g,ku.value())},h.get=function(e){if(this.has(e))return this.g},h.has=function(e){var t=ku.value();return!!(this.g&&Ai(e,t))},h.entries=function(){},h.keys=function(){},h.values=function(){};function Iy(){}function Cy(){!I.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=Lx,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Dx,I.MediaKeys=Ha,I.MediaKeySystemAccess=ld,I.shakaMediaKeysPolyfill=!0)}function Lx(){return Promise.reject(Error("The key system specified is not supported."))}function Dx(e){return e==null?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}pt.PatchedMediaKeysNop=Iy,Iy.install=Cy;function Ha(){throw new TypeError("Illegal constructor.")}Ha.prototype.createSession=function(){},Ha.prototype.setServerCertificate=function(){},Ha.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function ld(){throw this.keySystem="",new TypeError("Illegal constructor.")}ld.prototype.getConfiguration=function(){},ld.prototype.createMediaKeys=function(){},Ct(Cy,-10);function My(){}function ky(){if(!(!I.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)fd="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=Rx,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Px,I.MediaKeys=_s,I.MediaKeySystemAccess=Wa,I.shakaMediaKeysPolyfill=!0}}function cd(e){var t=fd;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function Rx(e,t){try{var n=new Wa(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function Px(e){var t=this.mediaKeys;return t&&t!=e&&Ly(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Ly(e,this),Promise.resolve()}pt.PatchedMediaKeysWebkit=My,My.install=ky;function Wa(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var i=!1,r=document.getElementsByTagName("video");r=r.length?r[0]:document.createElement("video"),t=g(t);for(var o=t.next();!o.done;o=t.next()){o=o.value;var s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:o.initDataTypes,sessionTypes:["temporary"],label:o.label},u=!1;if(o.audioCapabilities)for(var a=g(o.audioCapabilities),l=a.next();!l.done;l=a.next())l=l.value,l.contentType&&(u=!0,r.canPlayType(l.contentType.split(";")[0],this.g)&&(s.audioCapabilities.push(l),i=!0));if(o.videoCapabilities)for(a=g(o.videoCapabilities),l=a.next();!l.done;l=a.next())l=l.value,l.contentType&&(u=!0,r.canPlayType(l.contentType,this.g)&&(s.videoCapabilities.push(l),i=!0));if(u||(i=r.canPlayType("video/mp4",this.g)||r.canPlayType("video/webm",this.g)),o.persistentState=="required"&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):i=!1),i){this.h=s;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Wa.prototype.createMediaKeys=function(){var e=new _s(this.g);return Promise.resolve(e)},Wa.prototype.getConfiguration=function(){return this.h};function _s(e){this.l=e,this.h=null,this.g=new _e,this.i=[],this.j=new Map}function Ly(e,t){e.h=t,e.g.ub();var n=fd;t&&(e.g.o(t,n+"needkey",function(i){var r=new CustomEvent("encrypted");r.initDataType="cenc",r.initData=tn(i.initData),e.h.dispatchEvent(r)}),e.g.o(t,n+"keymessage",function(i){var r=hd(e,i.sessionId);r&&(i=new Map().set("messageType",r.keyStatuses.sc()==null?"licenserequest":"licenserenewal").set("message",i.message),i=new X("message",i),r.h&&(r.h.resolve(),r.h=null),r.dispatchEvent(i))}),e.g.o(t,n+"keyadded",function(i){(i=hd(e,i.sessionId))&&(Xa(i,"usable"),i.g&&i.g.resolve(),i.g=null)}),e.g.o(t,n+"keyerror",function(i){var r=hd(e,i.sessionId);if(r){var o=Error("EME v0.1b key error"),s=i.errorCode;s.systemCode=i.systemCode,o.errorCode=s,!i.sessionId&&r.h?(i.systemCode==45&&(o.message="Unsupported session type."),r.h.reject(o),r.h=null):i.sessionId&&r.g?(r.g.reject(o),r.g=null):(o=i.systemCode,i.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Xa(r,"output-restricted"):o==1?Xa(r,"expired"):Xa(r,"internal-error"))}}))}_s.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new dd(t,this.l,e),this.i.push(e),e},_s.prototype.setServerCertificate=function(){return Promise.resolve(!1)},_s.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function hd(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function dd(e,t,n){Ie.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Ve,this.keyStatuses=new Ry}pe(dd,Ie);function Dy(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var i=ge(si("LOAD_SESSION|"+n));else{var r=si("PERSISTENT|");i=Ye(r,t)}else i=ge(t)}catch(s){return Promise.reject(s)}e.h=new Ve;var o=cd("generateKeyRequest");try{e.j[o](e.i,i)}catch(s){if(s.name!="InvalidStateError")return e.h=null,Promise.reject(s);new fe(function(){try{e.j[o](e.i,i)}catch(u){e.h.reject(u),e.h=null}}).S(.01)}return e.h}function pd(e,t,n){if(e.g)e.g.then(function(){return pd(e,t,n)}).catch(function(){return pd(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var i=ze(n),r=JSON.parse(i);r.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),i=An(r.keys[0].k),r=An(r.keys[0].kid)}else i=ge(n),r=null;var o=cd("addKey");try{e.j[o](e.i,i,r,e.sessionId)}catch(s){e.g.reject(s),e.g=null}}}function Xa(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new X("keystatuseschange"),e.dispatchEvent(t)}h=dd.prototype,h.generateRequest=function(e,t){return Dy(this,t,null)},h.load=function(e){return this.l=="persistent-license"?Dy(this,null,e):Promise.reject(Error("Not a persistent session."))},h.update=function(e){var t=new Ve;return pd(this,t,e),t},h.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=cd("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch{}}return this.closed.resolve(),this.closed},h.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function Ry(){this.size=0,this.g=void 0}h=Ry.prototype,h.sc=function(){return this.g},h.forEach=function(e){this.g&&e(this.g,ku.value())},h.get=function(e){if(this.has(e))return this.g},h.has=function(e){var t=ku.value();return!!(this.g&&Ai(e,t))},h.entries=function(){},h.keys=function(){},h.values=function(){};var fd="";Ct(ky);function Py(){}function Ny(){if(I.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=bx,Object.defineProperty(e,"disablePictureInPicture",{get:Ux,set:Ox,enumerable:!0,configurable:!0}),document.exitPictureInPicture=_x,document.addEventListener("webkitpresentationmodechanged",Nx,!0))}}function Nx(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function bx(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function _x(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function Ux(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function Ox(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}pt.PiPWebkit=Py,Py.install=Ny,Ct(Ny);function by(){}function _y(){I.crypto&&("randomUUID"in I.crypto||(I.crypto.randomUUID=jx))}function jx(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}pt.RandomUUID=by,by.install=_y,Ct(_y);function Uy(){}function Oy(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=Bx)}function Bx(){return new Promise(function(e,t){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(n,i){e({usage:n,quota:i})},t)})}pt.StorageEstimate=Uy,Uy.install=Oy,Ct(Oy);function jy(){}function By(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:Fx})}function Fx(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}pt.Symbol=jy,jy.install=By,Ct(By);function Fy(){}function Gy(){if(I.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}pt.VideoPlayPromise=Fy,Fy.install=Gy,Ct(Gy);function Vy(){}function zy(){if(I.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||Gl())&&(e.getVideoPlaybackQuality=Gx)}}function Gx(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}pt.VideoPlaybackQuality=Vy,Vy.install=zy,Ct(zy);function Ky(){}function Hy(){if(!I.VTTCue&&I.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=gd;else if(t==6)e=Vx;else{try{var n=!!gd(1,2,"")}catch{n=!1}n&&(e=gd)}e&&(I.VTTCue=function(i,r,o){return e(i,r,o)})}}function gd(e,t,n){return new I.TextTrackCue(e,t,n)}function Vx(e,t,n){return new I.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}pt.VTTCue=Ky,Ky.install=Hy,Ct(Hy);function Xt(){}Xt.prototype.parseInit=function(){},Xt.prototype.setSequenceMode=function(){},Xt.prototype.setManifestType=function(){},Xt.prototype.parseMedia=function(e,t){var n=null,i=[];e=ze(e).split(/\r?\n/),e=g(e);for(var r=e.next();!r.done;r=e.next())if((r=r.value)&&!/^\s+$/.test(r)&&(r=zx.exec(r))){var o=Kx.exec(r[1]);o=60*parseInt(o[1],10)+parseFloat(o[2].replace(",",".")),r=new je(o,t.segmentEnd?t.segmentEnd:o+2,r[2]),n&&(n.endTime=o,i.push(n)),n=r}return n&&i.push(n),i},O("shaka.text.LrcTextParser",Xt),Xt.prototype.parseMedia=Xt.prototype.parseMedia,Xt.prototype.setManifestType=Xt.prototype.setManifestType,Xt.prototype.setSequenceMode=Xt.prototype.setSequenceMode,Xt.prototype.parseInit=Xt.prototype.parseInit;var zx=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,Kx=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;ht["application/x-subtitle-lrc"]=function(){return new Xt};function Bt(){}Bt.prototype.parseInit=function(){},Bt.prototype.setSequenceMode=function(){},Bt.prototype.setManifestType=function(){},Bt.prototype.parseMedia=function(e,t,n){var i=ze(e);if(e=[],i=="")return e;var r=Br(i,"tt");if(!r)throw new M(2,2,2005,"Failed to parse TTML.");if(i=r.getElementsByTagName("body")[0],!i)return[];var o=Hn(r,Us,"frameRate"),s=Hn(r,Us,"subFrameRate"),u=Hn(r,Us,"frameRateMultiplier"),a=Hn(r,Us,"tickRate"),l=Hn(r,Us,"cellResolution"),c=r.getAttribute("xml:space")||"default",d=Hn(r,$a,"extent");if(c!="default"&&c!="preserve")throw new M(2,2,2005,"Invalid xml:space value: "+c);c=c=="default",o=new Xx(o,s,u,a),l=l&&(l=/^(\d+) (\d+)$/.exec(l))?{mc:parseInt(l[1],10),rows:parseInt(l[2],10)}:null,s=(s=r.getElementsByTagName("metadata")[0])?TT(s):[],u=Array.from(r.getElementsByTagName("style")),r=Array.from(r.getElementsByTagName("region")),a=[];for(var f=g(r),p=f.next();!p.done;p=f.next()){var m=p.value;p=new Gi;var v=m.getAttribute("xml:id");if(v){p.id=v;var E=null;d&&(E=Ed.exec(d)||Td.exec(d)),v=E?Number(E[1]):null,E=E?Number(E[2]):null;var w,T=Ya(m,u,"extent");if(T){var x=(w=Ed.exec(T))||Td.exec(T);x!=null&&(p.width=Number(x[1]),p.height=Number(x[2]),w||(v!=null&&(p.width=100*p.width/v),E!=null&&(p.height=100*p.height/E)),p.widthUnits=w||v!=null?nn:0,p.heightUnits=w||E!=null?nn:0)}(m=Ya(m,u,"origin"))&&(x=(w=Ed.exec(m))||Td.exec(m),x!=null&&(p.viewportAnchorX=Number(x[1]),p.viewportAnchorY=Number(x[2]),w?T||(p.width=100-p.viewportAnchorX,p.widthUnits=nn,p.height=100-p.viewportAnchorY,p.heightUnits=nn):(E!=null&&(p.viewportAnchorY=100*p.viewportAnchorY/E),v!=null&&(p.viewportAnchorX=100*p.viewportAnchorX/v)),p.viewportAnchorUnits=w||v!=null?nn:0))}else p=null;p&&a.push(p)}if(Ke(i,"p").length)throw new M(2,2,2001,"<p> can only be inside <div> in TTML");for(d=g(Ke(i,"div")),f=d.next();!f.done;f=d.next())if(Ke(f.value,"span").length)throw new M(2,2,2001,"<span> can only be inside <p> in TTML");return(t=Wy(i,t,o,s,u,r,a,c,l,null,!1,n))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function Wy(e,t,n,i,r,o,s,u,a,l,c,d){var f=e.parentNode;if(e.nodeType==Node.COMMENT_NODE)return null;if(e.nodeType==Node.TEXT_NODE){if(!c)return null;var p=document.createElement("span");p.textContent=e.textContent}else p=e;for(var m=null,v=g(n1),E=v.next();!E.done&&!(m=qa(p,"backgroundImage",i,"#",E.value)[0]);E=v.next());v=null;var w=Hn(p,n1,"backgroundImage");if(d&&w&&!w.startsWith("#")&&(E=new Je(d),w=new Je(w),(E=E.resolve(w).toString())&&(v=E)),(e.nodeName=="p"||m||v)&&(c=!0),e=c,E=(p.getAttribute("xml:space")||(u?"default":"preserve"))=="default",w=Array.from(p.childNodes).every(function(C){return C.nodeType==Node.TEXT_NODE}),u=[],!w)for(var T=g(p.childNodes),x=T.next();!x.done;x=T.next())(x=Wy(x.value,t,n,i,r,o,s,E,a,p,c,d))&&u.push(x);if(i=l!=null,d=/\S/.test(p.textContent),x=p.hasAttribute("begin")||p.hasAttribute("end")||p.hasAttribute("dur"),!(x||d||p.tagName=="br"||u.length!=0||i&&!E))return null;for(T=qy(p,n),d=T.start,T=T.end;f&&f.nodeType==Node.ELEMENT_NODE&&f.tagName!="tt";)T=Wx(f,n,d,T),d=T.start,T=T.end,f=f.parentNode;if(d==null&&(d=0),d+=t.periodStart,T=T==null?1/0:T+t.periodStart,d=Math.max(d,t.segmentStart),T=Math.min(T,t.segmentEnd),!x&&0<u.length)for(d=1/0,T=0,t=g(u),n=t.next();!n.done;n=t.next())n=n.value,d=Math.min(d,n.startTime),T=Math.max(T,n.endTime);if(p.tagName=="br")return r=new je(d,T,""),r.lineBreak=!0,r;if(t="",w&&(t=p.textContent,E&&(t=t.trim(),t=t.replace(/\s+/g," "))),t=new je(d,T,t),t.nestedCues=u,c||(t.isContainer=!0),a&&(t.cellResolution=a),a=qa(p,"region",o,"")[0],p.hasAttribute("region")&&a&&a.getAttribute("xml:id")){var S=a.getAttribute("xml:id");t.region=s.filter(function(C){return C.id==S})[0]}return s=a,l&&i&&!p.getAttribute("region")&&!p.getAttribute("style")&&(s=qa(l,"region",o,"")[0]),Hx(t,p,s,m,v,r,e,u.length==0),t}function Hx(e,t,n,i,r,o,s,u){if(s=s||u,vt(t,n,o,"direction",s)=="rtl"&&(e.direction="rtl"),u=vt(t,n,o,"writingMode",s),u=="tb"||u=="tblr"?e.writingMode="vertical-lr":u=="tbrl"?e.writingMode="vertical-rl":u=="rltb"||u=="rl"?e.direction="rtl":u&&(e.direction=Bo),(u=vt(t,n,o,"textAlign",!0))?(e.positionAlign=$x[u],e.lineAlign=qx[u],e.textAlign=Nl[u.toUpperCase()]):e.textAlign=ei,(u=vt(t,n,o,"displayAlign",!0))&&(e.displayAlign=bp[u.toUpperCase()]),(u=vt(t,n,o,"color",s))&&(e.color=u),(u=vt(t,n,o,"backgroundColor",s))&&(e.backgroundColor=u),(u=vt(t,n,o,"border",s))&&(e.border=u),u=vt(t,n,o,"fontFamily",s))switch(u){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=u}switch((u=vt(t,n,o,"fontWeight",s))&&u=="bold"&&(e.fontWeight=700),u=vt(t,n,o,"wrapOption",s),e.wrapLine=!(u&&u=="noWrap"),(u=vt(t,n,o,"lineHeight",s))&&u.match(go)&&(e.lineHeight=u),(u=vt(t,n,o,"fontSize",s))&&(u.match(go)||u.match(Yx))&&(e.fontSize=u),(u=vt(t,n,o,"fontStyle",s))&&(e.fontStyle=jp[u.toUpperCase()]),i?(r=i.getAttribute("imageType")||i.getAttribute("imagetype"),u=i.getAttribute("encoding"),i=i.textContent.trim(),r=="PNG"&&u=="Base64"&&i&&(e.backgroundImage="data:image/png;base64,"+i)):r&&(e.backgroundImage=r),(i=vt(t,n,o,"textOutline",s))&&(i=i.split(" "),i[0].match(go)?e.textStrokeColor=e.color:(e.textStrokeColor=i[0],i.shift()),i[0]&&i[0].match(go)?e.textStrokeWidth=i[0]:e.textStrokeColor=""),(i=vt(t,n,o,"letterSpacing",s))&&i.match(go)&&(e.letterSpacing=i),(i=vt(t,n,o,"linePadding",s))&&i.match(go)&&(e.linePadding=i),(i=vt(t,n,o,"opacity",s))&&(e.opacity=parseFloat(i)),(i=Ya(n,o,"textDecoration"))&&Xy(e,i),(i=md(t,o,"textDecoration"))&&Xy(e,i),(i=vt(t,n,o,"textCombine",s))&&(e.textCombineUpright=i),vt(t,n,o,"ruby",s)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function Xy(e,t){t=g(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&Rn(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Rn(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Rn(e.textDecoration,"overline")}}function vt(e,t,n,i,r){return r=r===void 0?!0:r,(e=md(e,n,i))?e:r?Ya(t,n,i):null}function Ya(e,t,n){if(!e)return null;var i=Hn(e,$a,n);return i||Yy(e,t,n)}function md(e,t,n){var i=Hn(e,$a,n);return i||Yy(e,t,n)}function Yy(e,t,n){e=qa(e,"style",t,"");for(var i=null,r=0;r<e.length;r++){var o=Qi(e[r],"urn:ebu:tt:style",n);o||(o=Hn(e[r],$a,n)),o||(o=md(e[r],t,n)),o&&(i=o)}return i}function qa(e,t,n,i,r){var o=[];if(!e||1>n.length)return o;var s=e;for(e=null;s&&!(e=r?Qi(s,r,t):s.getAttribute(t))&&(s=s.parentNode,s instanceof Element););if(t=e){for(t=g(t.split(" ")),r=t.next();!r.done;r=t.next())for(r=r.value,e=g(n),s=e.next();!s.done;s=e.next())if(s=s.value,i+s.getAttribute("xml:id")==r){o.push(s);break}}return o}function Wx(e,t,n,i){return e=qy(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),i==null?i=e.end:e.start!=null&&(i+=e.start),{start:n,end:i}}function qy(e,t){var n=vd(e.getAttribute("begin"),t),i=vd(e.getAttribute("end"),t);return e=vd(e.getAttribute("dur"),t),i==null&&e!=null&&(i=n+e),{start:n,end:i}}function vd(e,t){var n=null;if($y.test(e)){e=$y.exec(e),n=Number(e[1]);var i=Number(e[2]),r=Number(e[3]),o=Number(e[4]);o+=(Number(e[5])||0)/t.h,r+=o/t.frameRate,n=r+60*i+3600*n}else if(Qy.test(e))n=yd(Qy,e);else if(Jy.test(e))n=yd(Jy,e);else if(Zy.test(e))e=Zy.exec(e),n=Number(e[1])/t.frameRate;else if(e1.test(e))e=e1.exec(e),n=Number(e[1])/t.g;else if(t1.test(e))n=yd(t1,e);else if(e)throw new M(2,2,2001,"Could not parse cue time range in TTML");return n}function yd(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}O("shaka.text.TtmlTextParser",Bt),Bt.prototype.parseMedia=Bt.prototype.parseMedia,Bt.prototype.setManifestType=Bt.prototype.setManifestType,Bt.prototype.setSequenceMode=Bt.prototype.setSequenceMode,Bt.prototype.parseInit=Bt.prototype.parseInit;function Xx(e,t,n,i){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(i),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var Ed=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,Yx=/^(\d{1,2}(?:\.\d+)?|100)%$/,go=/^(\d+px|\d+em|\d*\.?\d+c)$/,Td=/^(\d+)px (\d+)px$/,$y=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Qy=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Jy=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Zy=/^(\d*(?:\.\d*)?)f$/,e1=/^(\d*(?:\.\d*)?)t$/,t1=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),qx={left:Fi,center:"center",right:"end",start:Fi,end:"end"},$x={left:"line-left",center:"center",right:"line-right"},Us=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],$a=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],n1=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];ht["application/ttml+xml"]=function(){return new Bt};function Mt(){this.g=new Bt}Mt.prototype.parseInit=function(e){var t=!1;if(new Ue().box("moov",Re).box("trak",Re).box("mdia",Re).box("minf",Re).box("stbl",Re).T("stsd",Or).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new M(2,2,2007)},Mt.prototype.setSequenceMode=function(){},Mt.prototype.setManifestType=function(){},Mt.prototype.parseMedia=function(e,t,n){var i=this,r=!1,o=[];if(new Ue().box("mdat",Yi(function(s){r=!0,o=o.concat(i.g.parseMedia(s,t,n))})).parse(e,!1),!r)throw new M(2,2,2007);return o},O("shaka.text.Mp4TtmlParser",Mt),Mt.prototype.parseMedia=Mt.prototype.parseMedia,Mt.prototype.setManifestType=Mt.prototype.setManifestType,Mt.prototype.setSequenceMode=Mt.prototype.setSequenceMode,Mt.prototype.parseInit=Mt.prototype.parseInit,ht['application/mp4; codecs="stpp"']=function(){return new Mt},ht['application/mp4; codecs="stpp.ttml"']=function(){return new Mt},ht['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Mt},ht['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Mt};function kt(){this.h=!1,this.g="UNKNOWN"}kt.prototype.parseInit=function(){},kt.prototype.setSequenceMode=function(e){this.h=e},kt.prototype.setManifestType=function(e){this.g=e},kt.prototype.parseMedia=function(e,t){e=ze(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`);var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new M(2,2,2e3);if(e=t.vttOffset,n[0].includes("X-TIMESTAMP-MAP")&&this.h){var i=n[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=n[0].match(/MPEGTS:(\d+)/m);if(i&&r){if(e=Qa(new or(i[1])),e==null)throw new M(2,2,2e3);for(r=Number(r[1]),i=t.segmentStart-t.periodStart;95443.7176888889<=i;)i-=95443.7176888889,r+=8589934592;e=t.periodStart+r/9e4-e}}else n[0].includes("X-TIMESTAMP-MAP")&&this.g=="HLS"&&(e=t.segmentStart);for(t=[],r=g(n[0].split(`
`)),i=r.next();!i.done;i=r.next())if(i=i.value,/^Region:/.test(i)){i=new or(i);var o=new Gi;sr(i),lo(i);for(var s=sr(i);s;){var u=o,a=s;(s=/^id=(.*)$/.exec(a))?u.id=s[1]:(s=/^width=(\d{1,2}|100)%$/.exec(a))?u.width=Number(s[1]):(s=/^lines=(\d+)$/.exec(a))?(u.height=Number(s[1]),u.heightUnits=2):(s=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(a))?(u.regionAnchorX=Number(s[1]),u.regionAnchorY=Number(s[2])):(s=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(a))?(u.viewportAnchorX=Number(s[1]),u.viewportAnchorY=Number(s[2])):/^scroll=up$/.exec(a)&&(u.scroll="up"),lo(i),s=sr(i)}t.push(o)}for(r=new Map,i1(r),i=[],n=g(n.slice(1)),o=n.next();!o.done;o=n.next()){if(o=o.value.split(`
`),(o.length!=1||o[0])&&!/^NOTE($|[ \t])/.test(o[0])&&o[0]=="STYLE"){for(u=[],s=-1,a=1;a<o.length;a++)o[a].includes("::cue")&&(u.push([]),s=u.length-1),s!=-1&&(u[s].push(o[a]),o[a].includes("}")&&(s=-1));for(u=g(u),s=u.next();!s.done;s=u.next()){var l=s.value;s="global",(a=l[0].match(/\((.*)\)/))&&(s=a.pop()),a=l.slice(1,-1),l[0].includes("}")&&(l=/\{(.*?)\}/.exec(l[0]))&&(a=l[1].split(";")),(l=r.get(s))||(l=new je(0,0,""));for(var c=!1,d=0;d<a.length;d++){var f=/^\s*([^:]+):\s*(.*)/.exec(a[d]);if(f){var p=f[2].trim().replace(";","");switch(f[1].trim()){case"background-color":case"background":c=!0,l.backgroundColor=p;break;case"color":c=!0,l.color=p;break;case"font-family":c=!0,l.fontFamily=p;break;case"font-size":c=!0,l.fontSize=p;break;case"font-weight":(700<=parseInt(p,10)||p=="bold")&&(c=!0,l.fontWeight=700);break;case"font-style":switch(p){case"normal":c=!0,l.fontStyle=_l;break;case"italic":c=!0,l.fontStyle="italic";break;case"oblique":c=!0,l.fontStyle="oblique"}break;case"opacity":c=!0,l.opacity=parseFloat(p);break;case"text-combine-upright":c=!0,l.textCombineUpright=p;break;case"text-shadow":c=!0,l.textShadow=p;break;case"white-space":c=!0,l.wrapLine=p!="noWrap"}}}c&&r.set(s,l)}}if(c=e,o.length==1&&!o[0]||/^NOTE($|[ \t])/.test(o[0])||o[0]=="STYLE"||o[0]=="REGION")o=null;else if(u=null,o[0].includes("-->")||(u=o[0],o.splice(0,1)),s=new or(o[0]),a=Qa(s),d=Ri(s,/[ \t]+--\x3e[ \t]+/g),l=Qa(s),a==null||d==null||l==null)Ae("Failed to parse VTT time code. Cue skipped:",u,o),o=null;else{for(a+=c,l+=c,o=o.slice(1).join(`
`).trim(),r.has("global")?(c=r.get("global").clone(),c.startTime=a,c.endTime=l,c.payload=""):c=new je(a,l,""),lo(s),a=sr(s);a;)s1(c,a,t),lo(s),a=sr(s);r1(o,c,r),u!=null&&(c.id=u),o=c}o&&i.push(o)}return i};function i1(e){for(var t=g(Object.entries(_p)),n=t.next();!n.done;n=t.next()){var i=g(n.value);n=i.next().value,i=i.next().value;var r=new je(0,0,"");r.color=i,e.set("."+n,r)}for(t=g(Object.entries(Up)),n=t.next();!n.done;n=t.next())i=g(n.value),n=i.next().value,i=i.next().value,r=new je(0,0,""),r.backgroundColor=i,e.set("."+n,r)}function r1(e,t,n){if(e.includes("<")){n.size===0&&i1(n);e:{for(var i=[],r=-1,o="",s=0;s<e.length;s++)if(e[s]==="/"&&0<s&&e[s-1]==="<"){var u=e.indexOf(">",s);if(u<=s)break e;if((u=e.substring(s+1,u))&&u==="c"){var a=i.pop();a?a===u?(o+="/"+u+">",s+=u.length+1):a.startsWith("c.")?(s+=u.length+1,o+="/"+a+">"):o+=e[s]:o+=e[s]}else o+=e[s]}else e[s]==="<"?(r=s+1,e[r]!="c"&&(r=-1)):e[s]===">"&&0<r&&(i.push(e.substr(r,s-r)),r=-1),o+=e[s];e=o}for(i=e,e=[],o=-1,r=0;r<i.length;r++)i[r]==="<"?o=r+1:i[r]===">"&&0<o&&(o=i.substr(o,r-o),o.match(u1)&&e.push(o),o=-1);for(e=g(e),r=e.next();!r.done;r=e.next())r=r.value,i=i.replace("<"+r+">",'<div time="'+r+'">'),i+="</div>";e=i;e:{for(r=e,o=[],s=-1,e="",i=!1,u=0;u<r.length;u++)if(r[u]==="/"){if(a=r.indexOf(">",u),a===-1){e=r;break e}if((a=r.substring(u+1,a))&&a=="v"){i=!0;var l=null;if(o.length&&(l=o[o.length-1]),l){if(l===a)e+="/"+a+">";else{if(!l.startsWith("v")){e+=r[u];continue}e+="/"+l+">"}u+=a.length+1}else e+=r[u]}else e+=r[u]}else r[u]==="<"?(s=u+1,r[s]!="v"&&(s=-1)):r[u]===">"&&0<s&&(o.push(r.substr(s,u-s)),s=-1),e+=r[u];for(r=g(o),o=r.next();!o.done;o=r.next())o=o.value,s=o.replace(" ",".voice-"),e=e.replace("<"+o+">","<"+s+">"),e=e.replace("</"+o+">","</"+s+">"),i||(e+="</"+s+">")}if(i=Br("<span>"+e+"</span>","span")){if(i=i.childNodes,i.length==1&&(r=i[0],r.nodeType==Node.TEXT_NODE||r.nodeType==Node.CDATA_SECTION_NODE)){t.payload=Ja(e);return}for(e=g(i),i=e.next();!i.done;i=e.next())o1(i.value,t,n)}else t.payload=Ja(e)}else t.payload=Ja(e)}function Os(e,t){return e&&0<e.length?e:t}function o1(e,t,n){var i=t.clone();if(i.nestedCues=[],i.payload="",i.rubyTag="",i.line=null,i.region=new Gi,i.position=null,i.size=0,e.nodeType===Node.ELEMENT_NODE&&e.nodeName)for(var r=g(e.nodeName.split(/(?=[ .])+/g)),o=r.next();!o.done;o=r.next()){var s=o=o.value;if(s.startsWith(".voice-")){var u=s.split("-").pop();s='v[voice="'+u+'"]',n.has(s)||(s="v[voice="+u+"]")}switch(n.has(s)&&(s=n.get(s))&&(i.backgroundColor=Os(s.backgroundColor,i.backgroundColor),i.color=Os(s.color,i.color),i.fontFamily=Os(s.fontFamily,i.fontFamily),i.fontSize=Os(s.fontSize,i.fontSize),i.textShadow=Os(s.textShadow,i.textShadow),i.fontWeight=s.fontWeight,i.fontStyle=s.fontStyle,i.opacity=s.opacity,i.rubyTag=s.rubyTag,i.textCombineUpright=s.textCombineUpright,i.wrapLine=s.wrapLine),o){case"br":i=Np(i.startTime,i.endTime),t.nestedCues.push(i);return;case"b":i.fontWeight=700;break;case"i":i.fontStyle="italic";break;case"u":i.textDecoration.push("underline");break;case"font":(o=e.getAttribute("color"))&&(i.color=o);break;case"div":if(o=e.getAttribute("time"),!o)break;(o=Qa(new or(o)))&&(i.startTime=o);break;case"ruby":case"rp":case"rt":i.rubyTag=o}}if(r=e.childNodes,ec(e)||r.length==1&&ec(r[0]))for(r=!0,n=g(e.textContent.split(`
`)),e=n.next();!e.done;e=n.next())e=e.value,r||(r=Np(i.startTime,i.endTime),t.nestedCues.push(r)),0<e.length&&(r=i.clone(),r.payload=Ja(e),t.nestedCues.push(r)),r=!1;else for(t.nestedCues.push(i),t=g(r),e=t.next();!e.done;e=t.next())o1(e.value,i,n)}function s1(e,t,n){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=i[1],t=="middle"?e.textAlign=ei:e.textAlign=Nl[t.toUpperCase()]):(i=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=i[1]=="lr"?"vertical-lr":"vertical-rl":(i=/^size:([\d.]+)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":uu)):(i=/^region:(.*)$/.exec(t))?(t=Qx(n,i[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=bl[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=au,e.line=Number(n[1]),n[2]&&(e.lineAlign=bl[n[2].toUpperCase()]))}function Qx(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}function Qa(e){if(e=Ri(e,u1),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function Ja(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":"","&lrm;":"","&rlm;":""},n=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,function(r){return t[r]||"'"}):e||""}O("shaka.text.VttTextParser",kt),kt.prototype.parseMedia=kt.prototype.parseMedia,kt.prototype.setManifestType=kt.prototype.setManifestType,kt.prototype.setSequenceMode=kt.prototype.setSequenceMode,kt.prototype.parseInit=kt.prototype.parseInit;var u1=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;ht["text/vtt"]=function(){return new kt},ht['text/vtt; codecs="vtt"']=function(){return new kt},ht['text/vtt; codecs="wvtt"']=function(){return new kt};function Yt(){this.g=null}Yt.prototype.parseInit=function(e){var t=this,n=!1;if(new Ue().box("moov",Re).box("trak",Re).box("mdia",Re).T("mdhd",function(i){i=Lu(i.reader,i.version),t.g=i.timescale}).box("minf",Re).box("stbl",Re).T("stsd",Or).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new M(2,2,2008);if(!n)throw new M(2,2,2008)},Yt.prototype.setSequenceMode=function(){},Yt.prototype.setManifestType=function(){},Yt.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new M(2,2,2008);var n=0,i=[],r,o=[],s=!1,u=!1,a=!1,l=null;if(new Ue().box("moof",Re).box("traf",Re).T("tfdt",function(x){s=!0,n=hc(x.reader,x.version).baseMediaDecodeTime}).T("tfhd",function(x){l=Qf(x.reader,x.flags).Og}).T("trun",function(x){u=!0,i=Jf(x.reader,x.version,x.flags).lh}).box("mdat",Yi(function(x){a=!0,r=x})).parse(e,!1),!a&&!s&&!u)throw new M(2,2,2008);e=n;for(var c=new be(r,0),d=g(i),f=d.next();!f.done;f=d.next()){f=f.value;var p=f.gg||l,m=f.Ke?n+f.Ke:e;e=m+(p||0);var v=0;do{var E=c.O();v+=E;var w=c.O(),T=null;Su(w)=="vttc"?8<E&&(T=c.Sb(E-8)):c.skip(E-8),p&&T&&(E=Jx(T,t.periodStart+m/this.g,t.periodStart+e/this.g),o.push(E))}while(f.sampleSize&&v<f.sampleSize)}return o.filter(Ir)};function Jx(e,t,n){var i,r,o;return new Ue().box("payl",Yi(function(s){i=ze(s)})).box("iden",Yi(function(s){r=ze(s)})).box("sttg",Yi(function(s){o=ze(s)})).parse(e),i?Zx(i,r,o,t,n):null}function Zx(e,t,n,i,r){if(i=new je(i,r,""),r1(e,i,new Map),t&&(i.id=t),n)for(e=new or(n),t=sr(e);t;)s1(i,t,[]),lo(e),t=sr(e);return i}O("shaka.text.Mp4VttParser",Yt),Yt.prototype.parseMedia=Yt.prototype.parseMedia,Yt.prototype.setManifestType=Yt.prototype.setManifestType,Yt.prototype.setSequenceMode=Yt.prototype.setSequenceMode,Yt.prototype.parseInit=Yt.prototype.parseInit,ht['application/mp4; codecs="wvtt"']=function(){return new Yt};function qt(){}qt.prototype.parseInit=function(){},qt.prototype.setSequenceMode=function(){},qt.prototype.setManifestType=function(){},qt.prototype.parseMedia=function(e){var t=ze(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=g(t.split(`

`));for(var n=t.next();!n.done;n=t.next()){n=n.value.split(`
`);var i=new or(n[0]),r=a1(i),o=Ri(i,/,/g);if(i=a1(i),r==null||o==null||i==null)throw new M(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new je(r,i,n.slice(1).join(`
`).trim()))}return e};function a1(e){if(e=Ri(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}O("shaka.text.SbvTextParser",qt),qt.prototype.parseMedia=qt.prototype.parseMedia,qt.prototype.setManifestType=qt.prototype.setManifestType,qt.prototype.setSequenceMode=qt.prototype.setSequenceMode,qt.prototype.parseInit=qt.prototype.parseInit,ht["text/x-subviewer"]=function(){return new qt};function Ft(){this.g=new kt}Ft.prototype.parseInit=function(){},Ft.prototype.setSequenceMode=function(){},Ft.prototype.setManifestType=function(){},Ft.prototype.parseMedia=function(e,t,n){return e=ze(e),e=l1(e),e=ge(si(e)),this.g.parseMedia(e,t,n)};function l1(e){var t=`WEBVTT

`;if(e=="")return t;e=e.replace(/\r+/g,""),e=e.trim(),e=g(e.split(`

`));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join(`
`).replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+`

`;return t}O("shaka.text.SrtTextParser",Ft),Ft.srt2webvtt=l1,Ft.prototype.parseMedia=Ft.prototype.parseMedia,Ft.prototype.setManifestType=Ft.prototype.setManifestType,Ft.prototype.setSequenceMode=Ft.prototype.setSequenceMode,Ft.prototype.parseInit=Ft.prototype.parseInit,ht["text/srt"]=function(){return new Ft};function $t(){}$t.prototype.parseInit=function(){},$t.prototype.setSequenceMode=function(){},$t.prototype.setManifestType=function(){},$t.prototype.parseMedia=function(e){var t="",n="";e=ze(e).split(/\r?\n\s*\r?\n/),e=g(e);for(var i=e.next();!i.done;i=e.next()){var r=tI.exec(i.value);r&&(i=r[1],r=r[2],i=="V4 Styles"||i=="V4+ Styles"?t=r:i=="Events"&&(n=r))}e=[],i=null,t=g(t.split(/\r?\n/));for(var o=t.next();!o.done;o=t.next())if(r=o.value,!/^\s*;/.test(r)&&(o=d1.exec(r))){if(r=o[1].trim(),o=o[2].trim(),r=="Format")i=o.split(Za);else if(r=="Style"){r=o.split(Za),o={};for(var s=0;s<i.length&&s<r.length;s++)o[i[s]]=r[s];e.push(o)}}for(i=[],t=null,r={},n=g(n.split(/\r?\n/)),o=n.next();!o.done;r={Ze:r.Ze},o=n.next())if(o=o.value,!/^\s*;/.test(o)&&(s=d1.exec(o))){if(o=s[1].trim(),s=s[2].trim(),o=="Format")t=s.split(Za);else if(o=="Dialogue"){s=s.split(Za),o={};for(var u=0;u<t.length&&u<s.length;u++)o[t[u]]=s[u];u=h1(o.Start);var a=h1(o.End);s=new je(u,a,s.slice(t.length-1).join(",").replace(/\\N/g,`
`).replace(/\{[^}]+\}/g,"")),r.Ze=o.Style,(o=e.find(function(l){return function(c){return c.Name==l.Ze}}(r)))&&eI(s,o),i.push(s)}}return i};function eI(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=c1(n))&&(e.color=n),(n=t.BackColour)&&(n=c1(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=jo,e.textAlign="start";break;case 2:e.displayAlign=jo,e.textAlign=ei;break;case 3:e.displayAlign=jo,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=ei;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=ei;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function c1(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function h1(e){return e=nI.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}O("shaka.text.SsaTextParser",$t),$t.prototype.parseMedia=$t.prototype.parseMedia,$t.prototype.setManifestType=$t.prototype.setManifestType,$t.prototype.setSequenceMode=$t.prototype.setSequenceMode,$t.prototype.parseInit=$t.prototype.parseInit;var tI=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,d1=/^\s*([^:]+):\s*(.*)/,Za=/\s*,\s*/,nI=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;ht["text/x-ssa"]=function(){return new $t};function p1(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,0<e)?{me:n,X:e}:null}function f1(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],i=(e[t+2]&60)>>>2;if(i>n.length-1)return null;var r=((e[t+2]&192)>>>6)+1,o=(e[t+2]&1)<<2;return o|=(e[t+3]&192)>>>6,{sampleRate:n[i],channelCount:o,wa:"mp4a.40."+r}}function iI(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var i=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return i<=n?!1:(t+=i,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function rI(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function cn(e){this.i=e,this.h=0,this.g=new Map}h=cn.prototype,h.destroy=function(){this.g.clear()},h.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?nt(this.convertCodecs("audio",e)):!1},h.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(Tn(t)||"mp4a.40.2")+'"':t},h.getOriginalMimeType=function(){return this.i},h.transmux=function(e,t,n,i){for(var r=ge(e),o=Qo(r),s=o.length;s<r.length&&!iI(r,s);s++);if(e=1e3*n.endTime,o=Zi(o),o.length&&n&&(n=o.find(function(l){return l.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=n.data),n=f1(r,s),!n)return Promise.reject(new M(2,3,3018));for(t.audioSamplingRate=n.sampleRate,t.channelsCount=n.channelCount,o=[];s<r.length;){var u=p1(r,s);if(!u)return Promise.reject(new M(2,3,3018));var a=u.me+u.X;s+a<=r.length&&o.push({data:r.subarray(s+u.me,s+a),size:u.X,duration:1024,kb:0,flags:{ob:0,bb:0,ab:0,Za:0,$a:2,pb:0}}),s+=a}return r=n.sampleRate,e=Math.floor(e*r/1e3),i={id:t.id,type:"audio",codecs:n.wa,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:r,duration:i,ib:[],qa:new Uint8Array([]),Ca:new Uint8Array([]),Ja:0,La:0,data:{Cb:this.h,baseMediaDecodeTime:e,fb:o},stream:t},e=new ho([i]),this.g.has(t.id)?i=this.g.get(t.id):(i=po(e),this.g.set(t.id,i)),t=ks(e),this.h++,t=Ye(i,t),Promise.resolve(t)},O("shaka.transmuxer.AacTransmuxer",cn),cn.prototype.transmux=cn.prototype.transmux,cn.prototype.getOriginalMimeType=cn.prototype.getOriginalMimeType,cn.prototype.convertCodecs=cn.prototype.convertCodecs,cn.prototype.isSupported=cn.prototype.isSupported,cn.prototype.destroy=cn.prototype.destroy,ti("audio/aac",function(){return new cn("audio/aac")},xi);function g1(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(3<=n)return null;var i=e[t+4]&63,r=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*i+n];if(t+r>e.length)return null;var o=e[t+6]>>5,s=0;o===2?s+=2:(o&1&&o!==1&&(s+=2),o&4&&(s+=2)),s=(e[t+6]<<8|e[t+7])>>12-s&1;var u=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|u>>2,(u&3)<<6|o<<3|s<<2|i>>4,i<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][o]+s,qa:e,X:r}}function oI(e,t){if(e[t]===11&&e[t+1]===119){var n=0,i=5;t+=i;for(var r,o;0<i;){o=e[t];var s=Math.min(i,8),u=8-s;r=4278190080>>>24+u<<u,r=(o&r)>>u,n=n?n<<s|r:r,t+=1,i-=s}if(16>n)return!0}return!1}function hn(e){this.i=e,this.h=0,this.g=new Map}h=hn.prototype,h.destroy=function(){this.g.clear()},h.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?nt(this.convertCodecs("audio",e)):!1},h.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?'audio/mp4; codecs="ac-3"':t},h.getOriginalMimeType=function(){return this.i},h.transmux=function(e,t,n,i){e=ge(e);for(var r=Qo(e),o=r.length;o<e.length&&!oI(e,o);o++);var s=1e3*n.endTime;r=Zi(r),r.length&&n&&(n=r.find(function(l){return l.description==="com.apple.streaming.transportStreamTimestamp"}))&&(s=n.data),n=0,r=new Uint8Array([]);for(var u=[];o<e.length;){var a=g1(e,o);if(!a)return Promise.reject(new M(2,3,3018));t.audioSamplingRate=a.sampleRate,t.channelsCount=a.channelCount,n=a.sampleRate,r=a.qa,u.push({data:e.subarray(o,o+a.X),size:a.X,duration:1536,kb:0,flags:{ob:0,bb:0,ab:0,Za:0,$a:2,pb:0}}),o+=a.X}return e=Math.floor(s*n/1e3),i={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:i,ib:[],qa:r,Ca:new Uint8Array([]),Ja:0,La:0,data:{Cb:this.h,baseMediaDecodeTime:e,fb:u},stream:t},e=new ho([i]),this.g.has(t.id)?i=this.g.get(t.id):(i=po(e),this.g.set(t.id,i)),t=ks(e),this.h++,t=Ye(i,t),Promise.resolve(t)},O("shaka.transmuxer.Ac3Transmuxer",hn),hn.prototype.transmux=hn.prototype.transmux,hn.prototype.getOriginalMimeType=hn.prototype.getOriginalMimeType,hn.prototype.convertCodecs=hn.prototype.convertCodecs,hn.prototype.isSupported=hn.prototype.isSupported,hn.prototype.destroy=hn.prototype.destroy,ti("audio/ac3",function(){return new hn("audio/ac3")},xi);function m1(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new hi(e.subarray(t+2));Ot(n,2),Ot(n,3);var i=Te(n,11)+1<<1,r=Te(n,2);if(r==3){r=Te(n,2),r=[24e3,22060,16e3][r];var o=3}else r=[48e3,44100,32e3][r],o=Te(n,2);var s=Te(n,3),u=Te(n,1);return n=Te(n,5),t+i>e.byteLength?null:(e=Math.floor(i*r/(16*[1,2,3,6][o])),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,r<<6|n<<1|0,0|s<<1|u<<0,0]),{sampleRate:r,channelCount:[2,1,2,3,3,4,4,5][s]+u,qa:e,X:i})}function dn(e){this.i=e,this.h=0,this.g=new Map}h=dn.prototype,h.destroy=function(){this.g.clear()},h.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?nt(this.convertCodecs("audio",e)):!1},h.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},h.getOriginalMimeType=function(){return this.i},h.transmux=function(e,t,n,i){e=ge(e);for(var r=Qo(e),o=r.length;o<e.length&&(e[o]<<8|e[o+1]<<0)!==2935;o++);var s=1e3*n.endTime;r=Zi(r),r.length&&n&&(n=r.find(function(l){return l.description==="com.apple.streaming.transportStreamTimestamp"}))&&(s=n.data),n=0,r=new Uint8Array([]);for(var u=[];o<e.length;){var a=m1(e,o);if(!a)return Promise.reject(new M(2,3,3018));t.audioSamplingRate=a.sampleRate,t.channelsCount=a.channelCount,n=a.sampleRate,r=a.qa,u.push({data:e.subarray(o,o+a.X),size:a.X,duration:1536,kb:0,flags:{ob:0,bb:0,ab:0,Za:0,$a:2,pb:0}}),o+=a.X}return e=Math.floor(s*n/1e3),i={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:n,duration:i,ib:[],qa:r,Ca:new Uint8Array([]),Ja:0,La:0,data:{Cb:this.h,baseMediaDecodeTime:e,fb:u},stream:t},e=new ho([i]),this.g.has(t.id)?i=this.g.get(t.id):(i=po(e),this.g.set(t.id,i)),t=ks(e),this.h++,t=Ye(i,t),Promise.resolve(t)},O("shaka.transmuxer.Ec3Transmuxer",dn),dn.prototype.transmux=dn.prototype.transmux,dn.prototype.getOriginalMimeType=dn.prototype.getOriginalMimeType,dn.prototype.convertCodecs=dn.prototype.convertCodecs,dn.prototype.isSupported=dn.prototype.isSupported,dn.prototype.destroy=dn.prototype.destroy,ti("audio/ec3",function(){return new dn("audio/ec3")},xi);function sI(e){if(!e.length)return null;var t=e.find(function(v){return v.type==7});if(e=e.find(function(v){return v.type==8}),!t||!e)return null;var n=new hi(t.data),i=Me(n);if(Me(n),Me(n),Rt(n),aI.includes(i)&&(i=z(n),i===3&&Ot(n,1),Rt(n),Rt(n),Ot(n,1),$(n))){i=i!==3?8:12;for(var r=0;r<i;r++)$(n)&&(6>r?Du(n,16):Du(n,64))}if(Rt(n),i=z(n),i===0)z(n);else if(i===1)for(Ot(n,1),Rt(n),Rt(n),i=z(n),r=0;r<i;r++)Rt(n);Rt(n),Ot(n,1);var o=z(n),s=z(n),u=Te(n,1);u===0&&Ot(n,1),Ot(n,1);var a=0,l=0,c=0,d=0;if($(n)&&(a=z(n),l=z(n),c=z(n),d=z(n)),r=i=1,$(n)&&$(n)){var f=Me(n),p=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],m=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<f&&16>f?(i=p[f-1],r=m[f-1]):f===255&&(i=Te(n,16),r=Te(n,16))}return n=(2-u)*(s+1)*16-2*c-2*d,o=16*(o+1)-2*a-2*l,a=[],t=t.fullData,a.push(t.byteLength>>>8&255),a.push(t.byteLength&255),a=a.concat.apply(a,F(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,F(e)),e=new Uint8Array([1,a[3],a[4],a[5],255,225].concat(a,[1],t)),{height:n,width:o,Ca:e,Ja:i,La:r}}function uI(e){var t=!1,n=[],i=e.find(function(a){return a.type==7}),r=!1;e=g(e);for(var o=e.next();!o.done;o=e.next()){o=o.value;var s=!1;switch(o.type){case 1:s=r=!0;var u=o.data;i&&4<u.length&&(u=qT(new hi(u)),u===2||u===4||u===7||u===9)&&(t=!0);break;case 5:t=s=r=!0;break;case 6:s=!0;break;case 7:s=!0;break;case 8:s=!0;break;case 9:r=s=!0;break;case 12:s=!0;break;default:s=!1}r&&s&&(s=o.fullData.byteLength,u=new Uint8Array(4),u[0]=s>>24&255,u[1]=s>>16&255,u[2]=s>>8&255,u[3]=s&255,n.push(Ye(u,o.fullData)))}return n.length?{data:Ye.apply(xt,F(n)),Bd:t}:null}var aI=[100,110,122,244,44,83,86,118,128,138,139,134];function lI(e){if(!e.length)return null;var t=e.find(function(s){return s.type==32}),n=e.find(function(s){return s.type==33}),i=e.find(function(s){return s.type==34});if(!t||!n||!i)return null;var r=cI(t.fullData);e=hI(n.fullData);var o=dI(i.fullData);return t=pI(t.fullData,n.fullData,i.fullData,{Xf:r.Xf,ug:r.ug,Df:e.Df,Ef:e.Ef,xf:e.xf,Cf:e.Cf,yf:e.yf,zf:e.zf,Af:e.Af,Bf:e.Bf,qf:e.qf,rf:e.rf,tf:e.tf,uf:e.uf,vf:e.vf,wf:e.wf,mf:e.mf,Ae:e.Ae,lf:e.lf,jf:e.jf,hf:e.hf,$f:o.$f}),{height:e.height,width:e.width,Ca:t,Ja:e.mj,La:e.lj}}function cI(e){var t=new hi(e,!0);return Me(t),Me(t),Te(t,4),Te(t,2),Te(t,6),e=Te(t,3),t=$(t),{Xf:e+1,ug:t}}function hI(e){e=new hi(e,!0),Me(e),Me(e);var t=0,n=0,i=0,r=0;Te(e,4);var o=Te(e,3);$(e);for(var s=Te(e,2),u=Te(e,1),a=Te(e,5),l=Me(e),c=Me(e),d=Me(e),f=Me(e),p=Me(e),m=Me(e),v=Me(e),E=Me(e),w=Me(e),T=Me(e),x=Me(e),S=[],C=[],D=0;D<o;D++)S.push($(e)),C.push($(e));if(0<o)for(D=o;8>D;D++)Te(e,2);for(D=0;D<o;D++)S[D]&&Te(e,88),C[D]&&Me(e);z(e),S=z(e),S==3&&Te(e,1),C=z(e),D=z(e),$(e)&&(t+=z(e),n+=z(e),i+=z(e),r+=z(e));var b=z(e),P=z(e),N=z(e);if($(e))for(var U=0;U<=o;U++)z(e),z(e),z(e);else z(e),z(e),z(e);if(z(e),z(e),z(e),z(e),z(e),z(e),$(e)&&$(e))for(U=0;4>U;U++)for(var B=0;B<(U===3?2:6);B++)if($(e)){var V=Math.min(64,1<<4+(U<<1));1<U&&Fr(e);for(var W=0;W<V;W++)Fr(e)}else z(e);for($(e),$(e),$(e)&&(Me(e),z(e),z(e),$(e)),U=z(e),V=B=0;V<U;V++)if(W=!1,V!==0&&(W=$(e)),W){V===U&&z(e),$(e),z(e);for(var ee=W=0;ee<=B;ee++){var ne=$(e),he=!1;ne||(he=$(e)),(ne||he)&&W++}B=W}else{for(ee=z(e),W=z(e),B=ee+W,ne=0;ne<ee;ne++)z(e),$(e);for(ee=0;ee<W;ee++)z(e),$(e)}if($(e))for(U=z(e),B=0;B<U;B++){for(V=0;V<N+4;V++)Te(e,1);Te(e,1)}if(U=N=1,B=0,$(e),$(e),$(e)){if($(e)&&(V=Me(e),W=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],ee=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<V&&16>V?(N=W[V-1],U=ee[V-1]):V===255&&(N=Te(e,16),U=Te(e,16))),$(e)&&$(e),$(e)&&(Te(e,3),$(e),$(e)&&(Me(e),Me(e),Me(e))),$(e)&&(z(e),z(e)),$(e),$(e),$(e),(V=$(e))&&(z(e),z(e),z(e),z(e)),$(e)&&(Te(e,32),Te(e,32),$(e)&&z(e),$(e)))for(ee=!1,V=$(e),W=$(e),(V||W)&&((ee=$(e))&&(Me(e),Te(e,5),$(e),Te(e,5)),Te(e,4),Te(e,4),ee&&Te(e,4),Te(e,5),Te(e,5),Te(e,5)),ne=0;ne<=o;ne++){var Y=!0;he=1,$(e)||(Y=$(e));var tt=!1;if(Y?z(e):tt=$(e),tt||(he=z(e)+1),V){for(Y=0;Y<he;Y++)z(e),z(e),ee&&(z(e),z(e));$(e)}if(W){for(Y=0;Y<he;Y++)z(e),z(e),ee&&(z(e),z(e));$(e)}}$(e)&&($(e),$(e),$(e),B=z(e),z(e),z(e),z(e),z(e))}return{xf:x,Df:s,Ef:u,Cf:a,yf:l,zf:c,Af:d,Bf:f,qf:p,rf:m,tf:v,uf:E,vf:w,wf:T,Ae:B,mf:0,lf:S,jf:b,hf:P,width:C-(t+n)*(S===1||S===2?2:1),height:D-(i+r)*(S===1?2:1),mj:N,lj:U}}function dI(e){var t=new hi(e,!0);Me(t),Me(t),z(t),z(t),$(t),$(t),Te(t,3),$(t),$(t),z(t),z(t),Fr(t),$(t),$(t),$(t)&&z(t),Fr(t),Fr(t),$(t),$(t),$(t),$(t),e=$(t),t=$(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{$f:n}}function pI(e,t,n,i){var r=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return r[0]=1,r[1]=(i.Df&3)<<6|(i.Ef?1:0)<<5|i.Cf&31,r[2]=i.yf,r[3]=i.zf,r[4]=i.Af,r[5]=i.Bf,r[6]=i.qf,r[7]=i.rf,r[8]=i.tf,r[9]=i.uf,r[10]=i.vf,r[11]=i.wf,r[12]=i.xf,r[13]=240|(i.Ae&3840)>>8,r[14]=i.Ae&255,r[15]=252|i.$f&3,r[16]=252|i.lf&3,r[17]=248|i.jf&7,r[18]=248|i.hf&7,r[19]=0,r[20]=0,r[21]=(i.mf&3)<<6|(i.Xf&7)<<3|(i.ug?1:0)<<2|3,r[22]=3,r[23]=160,r[24]=0,r[25]=1,r[26]=(e.byteLength&65280)>>8,r[27]=(e.byteLength&255)>>0,r.set(e,28),r[23+(5+e.byteLength)]=161,r[e.byteLength+29]=0,r[e.byteLength+30]=1,r[e.byteLength+31]=(t.byteLength&65280)>>8,r[e.byteLength+32]=(t.byteLength&255)>>0,r.set(t,e.byteLength+33),r[23+(e.byteLength+10+t.byteLength)]=162,r[e.byteLength+10+t.byteLength+24]=0,r[e.byteLength+10+t.byteLength+25]=1,r[e.byteLength+10+t.byteLength+26]=(n.byteLength&65280)>>8,r[e.byteLength+10+t.byteLength+27]=(n.byteLength&255)>>0,r.set(n,e.byteLength+10+t.byteLength+28),r}function el(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,r=e[t+2]>>4&15,o=e[t+2]>>2&3;if(n!==1&&r!==0&&r!==15&&o!==3){var s=e[t+3]>>6;r=1e3*fI[14*(n===3?3-i:i===3?3:4)+r-1],o=gI[3*(n===3?0:n===2?1:2)+o],n=mI[n][i];var u=vI[i],a=Math.floor(n*r/o+(e[t+2]>>1&1))*u,l=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(l=l?parseInt(l[1],10):0)&&87>=l&&i===2&&224e3<=r&&s===0&&(e[t+3]|=128),{sampleRate:o,channelCount:s===3?1:2,X:a,kj:8*n*u}}return null}function v1(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}var fI=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],gI=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],mI=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],vI=[0,1,1,4];function pn(e){this.i=e,this.h=0,this.g=new Map}h=pn.prototype,h.destroy=function(){this.g.clear()},h.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?nt(this.convertCodecs("audio",e)):!1},h.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},h.getOriginalMimeType=function(){return this.i},h.transmux=function(e,t,n,i){for(e=ge(e),n=Qo(e).length;n<e.length;n++){var r=n;if(r+1<e.length&&v1(e,r)){var o=el(e,r),s=4;o&&o.X&&(s=o.X),r+=s,r=r===e.length||r+1<e.length&&v1(e,r)}else r=!1;if(r)break}var u;for(r=[];n<e.length;){if(o=el(e,n),!o)return Promise.reject(new M(2,3,3018));u||(u=o),n+o.X<=e.length&&r.push({data:e.subarray(n,n+o.X),size:o.X,duration:1152,kb:0,flags:{ob:0,bb:0,ab:0,Za:0,$a:2,pb:0}}),n+=o.X}return u?(e=9e4*u.kj/u.sampleRate*this.h,i={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:u.sampleRate,duration:i,ib:[],qa:new Uint8Array([]),Ca:new Uint8Array([]),Ja:0,La:0,data:{Cb:this.h,baseMediaDecodeTime:e,fb:r},stream:t},u=new ho([i]),this.g.has(t.id)?i=this.g.get(t.id):(i=po(u),this.g.set(t.id,i)),t=ks(u),this.h++,t=Ye(i,t),Promise.resolve(t)):Promise.reject(new M(2,3,3018))},O("shaka.transmuxer.Mp3Transmuxer",pn),pn.prototype.transmux=pn.prototype.transmux,pn.prototype.getOriginalMimeType=pn.prototype.getOriginalMimeType,pn.prototype.convertCodecs=pn.prototype.convertCodecs,pn.prototype.isSupported=pn.prototype.isSupported,pn.prototype.destroy=pn.prototype.destroy,ti("audio/mpeg",function(){return new pn("audio/mpeg")},xi);function fn(e){this.h=e,this.g=null}h=fn.prototype,h.destroy=function(){},h.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=Tn(e).split(","),n=_t("audio",t);return t=_t("video",t),!n||t||En(n)!="mp3"?!1:nt(this.convertCodecs("audio",e))},h.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},h.getOriginalMimeType=function(){return this.h},h.transmux=function(e,t,n,i,r){if(this.g?this.g.clearData():this.g=new Oe,e=ge(e),e=this.g.parse(e),e.sd().audio!="mp3"||r!="audio")return Promise.reject(new M(2,3,3018));for(r=new Uint8Array([]),e=g(e.qc()),t=e.next();!t.done;t=e.next())if(t=t.value.data)for(n=0;n<t.length;)(i=el(t,n))?(n+i.X<=t.length&&(r=Ye(r,t.subarray(n,n+i.X))),n+=i.X):n++;return Promise.resolve(r)},O("shaka.transmuxer.MpegTsTransmuxer",fn),fn.prototype.transmux=fn.prototype.transmux,fn.prototype.getOriginalMimeType=fn.prototype.getOriginalMimeType,fn.prototype.convertCodecs=fn.prototype.convertCodecs,fn.prototype.isSupported=fn.prototype.isSupported,fn.prototype.destroy=fn.prototype.destroy,ti("video/mp2t",function(){return new fn("video/mp2t")},Ol);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function Qt(e){this.h=e,(this.g=Lh.get("ISOBoxer")())&&yI(this)}function yI(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(i){this._procEntryField(i,"BytesOfClearData","uint",16),this._procEntryField(i,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,i=0;16>i;i++)this.usertype[i]!==EI[i]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}h=Qt.prototype,h.destroy=function(){},h.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?nt(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),nt(t)||nt(e))},h.convertCodecs=function(e,t){return t.replace("mss/","")},h.getOriginalMimeType=function(){return this.h},h.transmux=function(e,t,n){if(!n)return Promise.resolve(ge(e));if(!t.mssPrivateData)return Promise.reject(new M(2,3,3020));try{var i,r=this.g.parseBuffer(e),o=r.fetch("tfhd");o.track_ID=t.id+1;var s=r.fetch("tfdt"),u=r.fetch("traf");s===null&&(s=this.g.createFullBox("tfdt",u,o),s.version=1,s.flags=0,s.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var a=r.fetch("trun"),l=r.fetch("tfxd");l&&l._parent.boxes.splice(l._parent.boxes.indexOf(l),1);var c=r.fetch("tfrf");c&&c._parent.boxes.splice(c._parent.boxes.indexOf(c),1);var d=r.fetch("sepiff");if(d!==null){d.type="senc",d.usertype=void 0;var f=r.fetch("saio");if(f===null){f=this.g.createFullBox("saio",u),f.version=0,f.flags=0,f.entry_count=1,f.offset=[0];var p=this.g.createFullBox("saiz",u);if(p.version=0,p.flags=0,p.sample_count=d.sample_count,p.default_sample_info_size=0,p.sample_info_size=[],d.flags&2)for(i=0;i<d.sample_count;i+=1)p.sample_info_size[i]=10+6*d.entry[i].NumberOfEntries;else p.default_sample_info_size=8}}o.flags&=16777214,o.flags|=131072,a.flags|=1;var m=r.fetch("moof");a.data_offset=m.getLength()+8;var v=r.fetch("saio");v!==null&&(v.offset[0]=y1(m,"traf")+y1(u,"senc")+16);var E=ge(r.write());return Promise.resolve(E)}catch(w){return w instanceof M?Promise.reject(w):Promise.reject(new M(2,3,3022))}};function y1(e,t){for(var n=8,i=0;i<e.boxes.length&&e.boxes[i].type!==t;i++)n+=e.boxes[i].size;return n}O("shaka.transmuxer.MssTransmuxer",Qt),Qt.prototype.transmux=Qt.prototype.transmux,Qt.prototype.getOriginalMimeType=Qt.prototype.getOriginalMimeType,Qt.prototype.convertCodecs=Qt.prototype.convertCodecs,Qt.prototype.isSupported=Qt.prototype.isSupported,Qt.prototype.destroy=Qt.prototype.destroy;var EI=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);ti("mss/audio/mp4",function(){return new Qt("mss/audio/mp4")},xi),ti("mss/video/mp4",function(){return new Qt("mss/video/mp4")},xi);function gn(e){this.j=e,this.g=0,this.h=new Map,this.i=null}h=gn.prototype,h.destroy=function(){this.h.clear()},h.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var i=Tn(n).split(",");return n=_t("audio",i),i=_t("video",i),n&&(n=En(n),!TI.includes(n))||i&&(n=En(i),!wI.includes(n))?!1:t?nt(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),nt(t)||nt(e))},h.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=Tn(t).replace("mp4a.40.34","mp3").split(",").map(this.ai).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},h.ai=function(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}return e},h.getOriginalMimeType=function(){return this.j},h.transmux=function(e,t,n,i,r){this.i?this.i.clearData():this.i=new Oe,e=ge(e);var o=this.i.parse(e);e=[];var s=o.sd();try{var u=null;if(r=="video"){switch(s.video){case"avc":var a=[],l=null,c=[],d=o.Oc();if(!d.length)throw new M(2,3,3023);for(var f=0;f<d.length;f++){var p=d[f],m=p.nalus;c.push.apply(c,F(m));var v=uI(m);if(v){l==null&&(l=p.dts);var E=void 0;E=f+1<d.length?(d[f+1].dts||0)-(p.dts||0):1<d.length?(p.dts||0)-(d[f-1].dts||0):9e4*(n.endTime-n.startTime),a.push({data:v.data,size:v.data.byteLength,duration:E,kb:Math.round((p.pts||0)-(p.dts||0)),flags:{ob:0,bb:0,ab:0,Za:0,$a:v.Bd?2:1,pb:v.Bd?0:1}})}}var w=sI(c);if(!w||l==null)throw new M(2,3,3018);t.height=w.height,t.width=w.width,u={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:i,ib:[],qa:new Uint8Array([]),Ca:w.Ca,Ja:w.Ja,La:w.La,data:{Cb:this.g,baseMediaDecodeTime:l,fb:a},stream:t};break;case"hvc":if(d=[],p=null,m=[],a=o.Oc(),!a.length)throw new M(2,3,3023);for(v=0;v<a.length;v++){l=a[v],c=l.nalus,m.push.apply(m,F(c)),w=!1;var T=[],x=!1;for(f=g(c),E=f.next();!E.done;E=f.next()){var S=E.value;switch(S.type){case 1:case 0:var C=x=!0;break;case 19:case 20:case 21:w=C=x=!0;break;case 32:C=!0;break;case 33:C=!0;break;case 34:C=!0;break;case 35:x=C=!0;break;case 39:case 40:C=!0;break;default:C=!1}if(x&&C){var D=S.fullData.byteLength,b=new Uint8Array(4);b[0]=D>>24&255,b[1]=D>>16&255,b[2]=D>>8&255,b[3]=D&255,T.push(Ye(b,S.fullData))}}var P=T.length?{data:Ye.apply(xt,F(T)),Bd:w}:null;P&&(p==null&&l.dts!=null&&(p=l.dts),w=void 0,w=v+1<a.length?(a[v+1].dts||0)-(l.dts||0):1<a.length?(l.dts||0)-(a[v-1].dts||0):9e4*(n.endTime-n.startTime),d.push({data:P.data,size:P.data.byteLength,duration:w,kb:Math.round((l.pts||0)-(l.dts||0)),flags:{ob:0,bb:0,ab:0,Za:0,$a:P.Bd?2:1,pb:P.Bd?0:1}}))}var N=lI(m);if(!N||p==null)throw new M(2,3,3018);t.height=N.height,t.width=N.width,u={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:i,ib:[],qa:new Uint8Array([]),Ca:N.Ca,Ja:N.Ja,La:N.La,data:{Cb:this.g,baseMediaDecodeTime:p,fb:d},stream:t}}u&&(e.push(u),u=null)}if(r=="audio"){switch(s.audio){case"aac":for(var U=[],B,V=null,W=g(o.qc()),ee=W.next();!ee.done;ee=W.next()){var ne=ee.value,he=ne.data;if(he){var Y=0;if(B=f1(he,Y),!B)throw new M(2,3,3018);for(t.audioSamplingRate=B.sampleRate,t.channelsCount=B.channelCount,V==null&&ne.pts!==null&&(V=ne.pts);Y<he.length;){var tt=p1(he,Y);if(tt){var ft=tt.me+tt.X;Y+ft<=he.length&&U.push({data:he.subarray(Y+tt.me,Y+ft),size:tt.X,duration:1024,kb:0,flags:{ob:0,bb:0,ab:0,Za:0,$a:2,pb:0}}),Y+=ft}else Y++}}}if(!B||V==null){if(!o.Oc().length)throw new M(2,3,3018);V=9e4*n.startTime;var kn=_t("audio",t.codecs.split(","));if(!kn||!t.channelsCount||!t.audioSamplingRate)throw new M(2,3,3018);B={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,wa:kn};var Nt=rI(kn,t.channelsCount);if(!Nt)throw new M(2,3,3018);var Gn=V+9e4*(n.endTime-n.startTime);for(o=V;o<Gn;)U.push({data:Nt,size:Nt.byteLength,duration:1024,kb:0,flags:{ob:0,bb:0,ab:0,Za:0,$a:2,pb:0}}),o+=1024/B.sampleRate*9e4}var Pe=B.sampleRate;o=V/9e4*Pe,u={id:t.id,type:"audio",codecs:B.wa,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Pe,duration:i,ib:[],qa:new Uint8Array([]),Ca:new Uint8Array([]),Ja:0,La:0,data:{Cb:this.g,baseMediaDecodeTime:o,fb:U},stream:t};break;case"ac3":B=[],Pe=0,U=new Uint8Array([]),V=null,Y=g(o.qc());for(var Gt=Y.next();!Gt.done;Gt=Y.next()){var bt=Gt.value,Jt=bt.data;for(V==null&&bt.pts!==null&&(V=bt.pts),o=0;o<Jt.length;){var it=g1(Jt,o);it?(t.audioSamplingRate=it.sampleRate,t.channelsCount=it.channelCount,Pe=it.sampleRate,U=it.qa,B.push({data:Jt.subarray(o,o+it.X),size:it.X,duration:1536,kb:0,flags:{ob:0,bb:0,ab:0,Za:0,$a:2,pb:0}}),o+=it.X):o++}}if(Pe==0||U.byteLength==0||V==null)throw new M(2,3,3018);o=V/9e4*Pe,u={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Pe,duration:i,ib:[],qa:U,Ca:new Uint8Array([]),Ja:0,La:0,data:{Cb:this.g,baseMediaDecodeTime:o,fb:B},stream:t};break;case"ec3":B=[],Pe=0,V=new Uint8Array([]),U=null;for(var Ao=g(o.qc()),Ni=Ao.next();!Ni.done;Ni=Ao.next()){var dr=Ni.value,So=dr.data;for(U==null&&dr.pts!==null&&(U=dr.pts),o=0;o<So.length;){var Vn=m1(So,o);Vn?(t.audioSamplingRate=Vn.sampleRate,t.channelsCount=Vn.channelCount,Pe=Vn.sampleRate,V=Vn.qa,B.push({data:So.subarray(o,o+Vn.X),size:Vn.X,duration:1536,kb:0,flags:{ob:0,bb:0,ab:0,Za:0,$a:2,pb:0}}),o+=Vn.X):o++}}if(Pe==0||V.byteLength==0||U==null)throw new M(2,3,3018);o=U/9e4*Pe,u={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Pe,duration:i,ib:[],qa:V,Ca:new Uint8Array([]),Ja:0,La:0,data:{Cb:this.g,baseMediaDecodeTime:o,fb:B},stream:t};break;case"mp3":B=[];var pr;Pe=null;for(var xo=g(o.qc()),bi=xo.next();!bi.done;bi=xo.next()){var Io=bi.value,_i=Io.data;if(_i)for(Pe==null&&Io.pts!==null&&(Pe=Io.pts),o=0;o<_i.length;){var $n=el(_i,o);$n?(pr||(pr=$n),o+$n.X<=_i.length&&B.push({data:_i.subarray(o,o+$n.X),size:$n.X,duration:1152,kb:0,flags:{ob:0,bb:0,ab:0,Za:0,$a:2,pb:0}}),o+=$n.X):o++}}if(!pr||Pe==null)throw new M(2,3,3018);var qs=pr.sampleRate;o=Pe/9e4*qs,u={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:qs,duration:i,ib:[],qa:new Uint8Array([]),Ca:new Uint8Array([]),Ja:0,La:0,data:{Cb:this.g,baseMediaDecodeTime:o,fb:B},stream:t}}u&&e.push(u)}}catch(Co){return Co&&Co.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(Co)}return e.length?(e=new ho(e),this.h.has(t.id)?i=this.h.get(t.id):(i=po(e),this.h.set(t.id,i)),t=ks(e),this.g++,t=Ye(i,t),Promise.resolve(t)):Promise.reject(new M(2,3,3018))},O("shaka.transmuxer.TsTransmuxer",gn),gn.prototype.transmux=gn.prototype.transmux,gn.prototype.getOriginalMimeType=gn.prototype.getOriginalMimeType,gn.prototype.convertCodecs=gn.prototype.convertCodecs,gn.prototype.isSupported=gn.prototype.isSupported,gn.prototype.destroy=gn.prototype.destroy;var TI=["aac","ac-3","ec-3","mp3"],wI=["avc","hevc"];ti("video/mp2t",function(){return new gn("video/mp2t")},jl);/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function E1(){}var js;function T1(){js?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(js=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=AI):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function AI(e,t){var n=this,i;return k(function(r){return r.g==1?(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),y(r,js.call(n,e,t),2)):(i=r.h,k1(i)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=js,r.return(i)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=w1,r.return(w1.call(n,e,t))))})}function w1(e,t){var n=this,i,r,o,s,u,a,l,c,d,f;return k(function(p){if(p.g==1){for(console.assert(n==navigator,'bad "this" for requestMediaKeySystemAccess'),i=M1(e),r=[],o=g(t),s=o.next();!s.done;s=o.next())u=s.value,a=A1(u.videoCapabilities,i),l=A1(u.audioCapabilities,i),u.videoCapabilities&&u.videoCapabilities.length&&!a.length||u.audioCapabilities&&u.audioCapabilities.length&&!l.length||(c=Object.assign({},u),c.videoCapabilities=a,c.audioCapabilities=l,r.push(c));if(!r.length)throw d=Error("Unsupported keySystem or supportedConfigurations."),d.name="NotSupportedError",d.code=DOMException.NOT_SUPPORTED_ERR,d;return y(p,js.call(n,e,r),2)}return f=p.h,p.return(new tl(f,i))})}function A1(e,t){return e&&e.filter(function(n){return!n.encryptionScheme||n.encryptionScheme==t})}O("EmeEncryptionSchemePolyfill",E1),E1.install=T1;function S1(){}var Bs;function x1(){Bs?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Bs=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=SI):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function SI(e){var t=this,n,i,r;return k(function(o){switch(o.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),y(o,Bs.call(t,e),2);case 2:if(n=o.h,!e.keySystemConfiguration)return o.return(n);if((i=n.keySystemAccess)&&k1(i))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Bs,o.return(n);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=I1,i){o.F(3);break}return r=n,y(o,C1(e),4);case 4:return r.keySystemAccess=o.h,o.return(n);case 3:return o.return(I1.call(t,e))}})}function I1(e){var t=this,n,i,r,o,s,u,a,l;return k(function(c){switch(c.g){case 1:return console.assert(t==navigator.mediaCapabilities,'bad "this" for decodingInfo'),n=null,e.keySystemConfiguration&&(i=e.keySystemConfiguration,r=i.keySystem,o=i.audio&&i.audio.encryptionScheme,s=i.video&&i.video.encryptionScheme,n=M1(r),u={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},o&&o!=n||s&&s!=n)?c.return(u):y(c,Bs.call(t,e),2);case 2:if(a=c.h,a.keySystemAccess){a.keySystemAccess=new tl(a.keySystemAccess,n),c.F(3);break}if(!e.keySystemConfiguration){c.F(3);break}return l=a,y(c,C1(e),5);case 5:l.keySystemAccess=c.h;case 3:return c.return(a)}})}function C1(e){var t,n;return k(function(i){if(i.g==1){var r=e.keySystemConfiguration,o=[],s=[];return r.audio&&o.push({robustness:r.audio.robustness||"",contentType:e.audio.contentType}),r.video&&s.push({robustness:r.video.robustness||"",contentType:e.video.contentType}),r={initDataTypes:r.initDataType?[r.initDataType]:[],distinctiveIdentifier:r.distinctiveIdentifier,persistentState:r.persistentState,sessionTypes:r.sessionTypes},o.length&&(r.audioCapabilities=o),s.length&&(r.videoCapabilities=s),t=r,y(i,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=i.h,i.return(n)})}O("McEncryptionSchemePolyfill",S1),S1.install=x1;function tl(e,t){this.h=e,this.g=t,this.keySystem=e.keySystem}tl.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=g(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(t=g(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e},tl.prototype.createMediaKeys=function(){return this.h.createMediaKeys()};function M1(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function k1(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function wd(){}function L1(){T1(),x1()}O("EncryptionSchemePolyfills",wd),wd.install=L1,typeof H<"u"&&H.exports&&(H.exports=wd);/*
	 @license
	 Copyright 2013 Ali Al Dallal

	 Licensed under the MIT license.

	 Permission is hereby granted, free of charge, to any person obtaining a copy
	 of this software and associated documentation files (the "Software"), to deal
	 in the Software without restriction, including without limitation the rights
	 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	 copies of the Software, and to permit persons to whom the Software is
	 furnished to do so, subject to the following conditions:

	 The above copyright notice and this permission notice shall be included in
	 all copies or substantial portions of the Software.

	 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
	 SOFTWARE.
	*/for(var lr={ach:{A:"Lwo",B:"Acholi"},ady:{A:"",B:"Adyghe"},af:{A:"Afrikaans",B:"Afrikaans"},"af-NA":{A:"Afrikaans (Namibia)",B:"Afrikaans (Namibia)"},"af-ZA":{A:"Afrikaans (South Africa)",B:"Afrikaans (South Africa)"},ak:{A:"Ti",B:"Akan"},ar:{A:"",B:"Arabic"},"ar-AR":{A:"",B:"Arabic"},"ar-MA":{A:"",B:"Arabic (Morocco)"},"ar-SA":{A:" ()",B:"Arabic (Saudi Arabia)"},"ay-BO":{A:"Aymar aru",B:"Aymara"},az:{A:"Azrbaycan dili",B:"Azerbaijani"},"az-AZ":{A:"Azrbaycan dili",B:"Azerbaijani"},"be-BY":{A:"",B:"Belarusian"},bg:{A:"",B:"Bulgarian"},"bg-BG":{A:"",B:"Bulgarian"},bn:{A:"",B:"Bengali"},"bn-IN":{A:" ()",B:"Bengali (India)"},"bn-BD":{A:"()",B:"Bengali (Bangladesh)"},"bs-BA":{A:"Bosanski",B:"Bosnian"},ca:{A:"Catal",B:"Catalan"},"ca-ES":{A:"Catal",B:"Catalan"},cak:{A:"Maya Kaqchikel",B:"Kaqchikel"},"ck-US":{A:" (tsalagi)",B:"Cherokee"},cs:{A:"etina",B:"Czech"},"cs-CZ":{A:"etina",B:"Czech"},cy:{A:"Cymraeg",B:"Welsh"},"cy-GB":{A:"Cymraeg",B:"Welsh"},da:{A:"Dansk",B:"Danish"},"da-DK":{A:"Dansk",B:"Danish"},de:{A:"Deutsch",B:"German"},"de-AT":{A:"Deutsch (sterreich)",B:"German (Austria)"},"de-DE":{A:"Deutsch (Deutschland)",B:"German (Germany)"},"de-CH":{A:"Deutsch (Schweiz)",B:"German (Switzerland)"},dsb:{A:"Dolnoserbina",B:"Lower Sorbian"},el:{A:"",B:"Greek"},"el-GR":{A:"",B:"Greek (Greece)"},en:{A:"English",B:"English"},"en-GB":{A:"English (UK)",B:"English (UK)"},"en-AU":{A:"English (Australia)",B:"English (Australia)"},"en-CA":{A:"English (Canada)",B:"English (Canada)"},"en-IE":{A:"English (Ireland)",B:"English (Ireland)"},"en-IN":{A:"English (India)",B:"English (India)"},"en-PI":{A:"English (Pirate)",B:"English (Pirate)"},"en-UD":{A:"English (Upside Down)",B:"English (Upside Down)"},"en-US":{A:"English (US)",B:"English (US)"},"en-ZA":{A:"English (South Africa)",B:"English (South Africa)"},"en@pirate":{A:"English (Pirate)",B:"English (Pirate)"},eo:{A:"Esperanto",B:"Esperanto"},"eo-EO":{A:"Esperanto",B:"Esperanto"},es:{A:"Espaol",B:"Spanish"},"es-AR":{A:"Espaol (Argentine)",B:"Spanish (Argentina)"},"es-419":{A:"Espaol (Latinoamrica)",B:"Spanish (Latin America)"},"es-CL":{A:"Espaol (Chile)",B:"Spanish (Chile)"},"es-CO":{A:"Espaol (Colombia)",B:"Spanish (Colombia)"},"es-EC":{A:"Espaol (Ecuador)",B:"Spanish (Ecuador)"},"es-ES":{A:"Espaol (Espaa)",B:"Spanish (Spain)"},"es-LA":{A:"Espaol (Latinoamrica)",B:"Spanish (Latin America)"},"es-NI":{A:"Espaol (Nicaragua)",B:"Spanish (Nicaragua)"},"es-MX":{A:"Espaol (Mxico)",B:"Spanish (Mexico)"},"es-US":{A:"Espaol (Estados Unidos)",B:"Spanish (United States)"},"es-VE":{A:"Espaol (Venezuela)",B:"Spanish (Venezuela)"},et:{A:"eesti keel",B:"Estonian"},"et-EE":{A:"Eesti (Estonia)",B:"Estonian (Estonia)"},eu:{A:"Euskara",B:"Basque"},"eu-ES":{A:"Euskara",B:"Basque"},fa:{A:"",B:"Persian"},"fa-IR":{A:"",B:"Persian"},"fb-LT":{A:"Leet Speak",B:"Leet"},ff:{A:"Fulah",B:"Fulah"},fi:{A:"Suomi",B:"Finnish"},"fi-FI":{A:"Suomi",B:"Finnish"},"fo-FO":{A:"Froyskt",B:"Faroese"},fr:{A:"Franais",B:"French"},"fr-CA":{A:"Franais (Canada)",B:"French (Canada)"},"fr-FR":{A:"Franais (France)",B:"French (France)"},"fr-BE":{A:"Franais (Belgique)",B:"French (Belgium)"},"fr-CH":{A:"Franais (Suisse)",B:"French (Switzerland)"},"fy-NL":{A:"Frysk",B:"Frisian (West)"},ga:{A:"Gaeilge",B:"Irish"},"ga-IE":{A:"Gaeilge (Gaelic)",B:"Irish (Gaelic)"},gl:{A:"Galego",B:"Galician"},"gl-ES":{A:"Galego",B:"Galician"},"gn-PY":{A:"Avae'",B:"Guarani"},"gu-IN":{A:"",B:"Gujarati"},"gx-GR":{A:" ",B:"Classical Greek"},he:{A:"",B:"Hebrew"},"he-IL":{A:"",B:"Hebrew"},hi:{A:"",B:"Hindi"},"hi-IN":{A:"",B:"Hindi"},hr:{A:"Hrvatski",B:"Croatian"},"hr-HR":{A:"Hrvatski",B:"Croatian"},hsb:{A:"Hornjoserbina",B:"Upper Sorbian"},ht:{A:"Kreyl",B:"Haitian Creole"},hu:{A:"Magyar",B:"Hungarian"},"hu-HU":{A:"Magyar",B:"Hungarian"},"hy-AM":{A:"",B:"Armenian"},id:{A:"Bahasa Indonesia",B:"Indonesian"},"id-ID":{A:"Bahasa Indonesia",B:"Indonesian"},is:{A:"slenska",B:"Icelandic"},"is-IS":{A:"slenska (Iceland)",B:"Icelandic (Iceland)"},it:{A:"Italiano",B:"Italian"},"it-IT":{A:"Italiano",B:"Italian"},ja:{A:"",B:"Japanese"},"ja-JP":{A:"",B:"Japanese"},"jv-ID":{A:"Basa Jawa",B:"Javanese"},"ka-GE":{A:"",B:"Georgian"},"kk-KZ":{A:"",B:"Kazakh"},km:{A:"",B:"Khmer"},"km-KH":{A:"",B:"Khmer"},kab:{A:"Taqbaylit",B:"Kabyle"},kn:{A:"",B:"Kannada"},"kn-IN":{A:" (India)",B:"Kannada (India)"},ko:{A:"",B:"Korean"},"ko-KR":{A:" ()",B:"Korean (Korea)"},ku:{A:"Kurd",B:"Kurdish"},"ku-TR":{A:"Kurd",B:"Kurdish"},la:{A:"Latin",B:"Latin"},"la-VA":{A:"Latin",B:"Latin"},lb:{A:"Ltzebuergesch",B:"Luxembourgish"},"li-NL":{A:"Lmbrgs",B:"Limburgish"},lt:{A:"Lietuvi",B:"Lithuanian"},"lt-LT":{A:"Lietuvi",B:"Lithuanian"},lv:{A:"Latvieu",B:"Latvian"},"lv-LV":{A:"Latvieu",B:"Latvian"},mai:{A:", ",B:"Maithili"},"mg-MG":{A:"Malagasy",B:"Malagasy"},mk:{A:"",B:"Macedonian"},"mk-MK":{A:" ()",B:"Macedonian (Macedonian)"},ml:{A:"",B:"Malayalam"},"ml-IN":{A:"",B:"Malayalam"},"mn-MN":{A:"",B:"Mongolian"},mr:{A:"",B:"Marathi"},"mr-IN":{A:"",B:"Marathi"},ms:{A:"Bahasa Melayu",B:"Malay"},"ms-MY":{A:"Bahasa Melayu",B:"Malay"},mt:{A:"Malti",B:"Maltese"},"mt-MT":{A:"Malti",B:"Maltese"},my:{A:"",B:"Burmese"},nb:{A:"Norsk (bokml)",B:"Norwegian (bokmal)"},"nb-NO":{A:"Norsk (bokml)",B:"Norwegian (bokmal)"},ne:{A:"",B:"Nepali"},"ne-NP":{A:"",B:"Nepali"},nl:{A:"Nederlands",B:"Dutch"},"nl-BE":{A:"Nederlands (Belgi)",B:"Dutch (Belgium)"},"nl-NL":{A:"Nederlands (Nederland)",B:"Dutch (Netherlands)"},"nn-NO":{A:"Norsk (nynorsk)",B:"Norwegian (nynorsk)"},no:{A:"Norsk",B:"Norwegian"},oc:{A:"Occitan",B:"Occitan"},"or-IN":{A:"",B:"Oriya"},pa:{A:"",B:"Punjabi"},"pa-IN":{A:" ( )",B:"Punjabi (India)"},pl:{A:"Polski",B:"Polish"},"pl-PL":{A:"Polski",B:"Polish"},"ps-AF":{A:"",B:"Pashto"},pt:{A:"Portugus",B:"Portuguese"},"pt-BR":{A:"Portugus (Brasil)",B:"Portuguese (Brazil)"},"pt-PT":{A:"Portugus (Portugal)",B:"Portuguese (Portugal)"},"qu-PE":{A:"Qhichwa",B:"Quechua"},"rm-CH":{A:"Rumantsch",B:"Romansh"},ro:{A:"Romn",B:"Romanian"},"ro-RO":{A:"Romn",B:"Romanian"},ru:{A:"",B:"Russian"},"ru-RU":{A:"",B:"Russian"},"sa-IN":{A:"",B:"Sanskrit"},"se-NO":{A:"Davvismegiella",B:"Northern Smi"},"si-LK":{A:"",B:"Sinhala (Sri Lanka)"},sk:{A:"Slovenina",B:"Slovak"},"sk-SK":{A:"Slovenina (Slovakia)",B:"Slovak (Slovakia)"},sl:{A:"Slovenina",B:"Slovenian"},"sl-SI":{A:"Slovenina",B:"Slovenian"},"so-SO":{A:"Soomaaliga",B:"Somali"},sq:{A:"Shqip",B:"Albanian"},"sq-AL":{A:"Shqip",B:"Albanian"},sr:{A:"",B:"Serbian"},"sr-RS":{A:" (Serbia)",B:"Serbian (Serbia)"},su:{A:"Basa Sunda",B:"Sundanese"},sv:{A:"Svenska",B:"Swedish"},"sv-SE":{A:"Svenska",B:"Swedish"},sw:{A:"Kiswahili",B:"Swahili"},"sw-KE":{A:"Kiswahili",B:"Swahili (Kenya)"},ta:{A:"",B:"Tamil"},"ta-IN":{A:"",B:"Tamil"},te:{A:"",B:"Telugu"},"te-IN":{A:"",B:"Telugu"},tg:{A:" ",B:"Tajik"},"tg-TJ":{A:"",B:"Tajik"},th:{A:"",B:"Thai"},"th-TH":{A:" ()",B:"Thai (Thailand)"},tl:{A:"Filipino",B:"Filipino"},"tl-PH":{A:"Filipino",B:"Filipino"},tlh:{A:"tlhIngan-Hol",B:"Klingon"},tr:{A:"Trke",B:"Turkish"},"tr-TR":{A:"Trke",B:"Turkish"},"tt-RU":{A:"",B:"Tatar"},uk:{A:"",B:"Ukrainian"},"uk-UA":{A:"",B:"Ukrainian"},ur:{A:"",B:"Urdu"},"ur-PK":{A:"",B:"Urdu"},uz:{A:"O'zbek",B:"Uzbek"},"uz-UZ":{A:"O'zbek",B:"Uzbek"},vi:{A:"Ting Vit",B:"Vietnamese"},"vi-VN":{A:"Ting Vit",B:"Vietnamese"},"xh-ZA":{A:"isiXhosa",B:"Xhosa"},yi:{A:"",B:"Yiddish"},"yi-DE":{A:" (German)",B:"Yiddish (German)"},zh:{A:"",B:"Chinese"},"zh-HANS":{A:"",B:"Chinese Simplified"},"zh-HANT":{A:"",B:"Chinese Traditional"},"zh-CN":{A:"",B:"Chinese Simplified (China)"},"zh-HK":{A:"",B:"Chinese Traditional (Hong Kong)"},"zh-SG":{A:"",B:"Chinese Simplified (Singapore)"},"zh-TW":{A:"",B:"Chinese Traditional (Taiwan)"},"zu-ZA":{A:"isiZulu",B:"Zulu"}},D1=g(Object.keys(lr)),Ad=D1.next();!Ad.done;Ad=D1.next()){var R1=Ad.value;lr[R1.toLowerCase()]=lr[R1]}function ve(e,t){var n=this;this.parent=e,this.controls=t,this.eventManager=new _e,this.localization=this.controls.va,this.player=this.controls.Mc(),this.video=this.controls.cc(),this.adManager=this.player.ee(),this.ad=t.getAd(),this.eventManager.o(this.adManager,"ad-started",function(i){n.ad=i.ad}),this.eventManager.o(this.adManager,"ad-stopped",function(){n.ad=null})}ve.prototype.release=function(){this.eventManager.release(),this.ad=this.adManager=this.video=this.player=this.localization=this.eventManager=this.controls=this.parent=null},O("shaka.ui.Element",ve),ve.prototype.release=ve.prototype.release;function P1(e){return Sd(e,"shaka-back-to-overflow-button")}function Sd(e,t){return e=e.getElementsByClassName(t),e.length?e[0]:null}function Fs(e){e&&(e=Sd(e,"shaka-chosen-item"))&&e.parentElement.focus()}function mo(){var e=q("i");return e.classList.add("material-icons-round"),e.classList.add("shaka-chosen-item"),e.textContent="done",e.ariaHidden="true",e}function ye(e,t){e&&(t?e.classList.remove("shaka-hidden"):e.classList.add("shaka-hidden"))}function vo(e,t){var n=Math.floor(e/3600),i=Math.floor(e/60%60);return e=Math.floor(e%60),10>e&&(e="0"+e),e=i+":"+e,t&&(10>i&&(e="0"+e),e=n+":"+e),e}function nl(e,t){ve.call(this,e,t);var n=this;this.i=q("div"),this.i.classList.add("shaka-ad-counter"),this.parent.appendChild(this.i),this.h=q("span"),this.h.classList.add("shaka-ad-counter-span"),this.i.appendChild(this.h),this.g=new fe(function(){var i=Math.round(n.ad.getRemainingTime()),r=n.ad.getDuration();i!=-1&&r!=-1&&(0<i?(i=vo(r-i,!1)+" / "+vo(r,!1),1<n.ad.getSequenceLength()?n.h.textContent=i:(r=n.localization.resolve("AD_TIME"),n.h.textContent=r.replace("[AD_TIME]",i))):(n.g.stop(),n.h.textContent=""))}),this.eventManager.o(this.localization,"locale-updated",function(){}),this.eventManager.o(this.localization,"locale-changed",function(){}),this.eventManager.o(this.adManager,"ad-started",function(){n.g.Qa(),n.g.za(.5)}),this.eventManager.o(this.adManager,"ad-stopped",function(){n.g.stop(),n.h.textContent=""}),this.ad&&(this.g.Qa(),this.g.za(.5))}pe(nl,ve),nl.prototype.release=function(){this.g.stop(),this.g=null,ve.prototype.release.call(this)},O("shaka.ui.AdCounter",nl);function xd(e,t){ve.call(this,e,t);var n=this;this.g=q("div"),this.g.classList.add("shaka-ad-position"),ye(this.g,!1),this.parent.appendChild(this.g),this.h=q("span"),this.h.classList.add("shaka-ad-position-span"),this.g.appendChild(this.h),this.eventManager.o(this.localization,"locale-updated",function(){n.ad&&il(n)}),this.eventManager.o(this.localization,"locale-changed",function(){n.ad&&il(n)}),this.eventManager.o(this.adManager,"ad-started",function(){il(n)}),this.eventManager.o(this.adManager,"ad-stopped",function(){n.h.textContent="",ye(n.g,!1)}),this.ad&&il(this)}pe(xd,ve);function il(e){var t=e.ad.getSequenceLength();if(1<t){var n=e.ad.getPositionInSequence();e.h.textContent=e.localization.resolve("AD_PROGRESS").replace("[AD_ON]",String(n)).replace("[NUM_ADS]",String(t)),ye(e.g,!0)}}O("shaka.ui.AdPosition",xd);function Yn(e,t){ve.call(this,e,t);var n=this;this.button=st(),this.parent.appendChild(this.button),this.eventManager.o(this.localization,"locale-updated",function(){n.g()}),this.eventManager.o(this.localization,"locale-changed",function(){n.g()}),this.eventManager.o(this.video,"play",function(){n.g(),n.h()}),this.eventManager.o(this.video,"pause",function(){n.g(),n.h()}),this.eventManager.o(this.video,"seeking",function(){n.g(),n.h()}),this.eventManager.o(this.adManager,"ad-paused",function(){n.g(),n.h()}),this.eventManager.o(this.adManager,"ad-resumed",function(){n.g(),n.h()}),this.eventManager.o(this.adManager,"ad-started",function(){n.g(),n.h()}),this.eventManager.o(this.adManager,"ad-stopped",function(){n.g(),n.h()}),this.eventManager.o(this.button,"click",function(){n.ad&&n.ad.isLinear()?V1(n.controls):G1(n.controls)}),this.ad&&(this.g(),this.h())}pe(Yn,ve),Yn.prototype.isPaused=function(){if(this.ad&&this.ad.isLinear())var e=this.ad.isPaused();else e=this.controls,e=e.u.paused&&!e.W;return e},Yn.prototype.isEnded=function(){return this.ad&&this.ad.isLinear()?!1:this.video.ended},Yn.prototype.g=function(){},Yn.prototype.h=function(){},O("shaka.ui.PlayButton",Yn);function Gs(e,t){Yn.call(this,e,t),this.button.classList.add("shaka-play-button"),this.button.classList.add("shaka-no-propagation"),this.h(),this.g()}pe(Gs,Yn),Gs.prototype.h=function(){this.isPaused()?this.button.setAttribute("icon","play"):this.button.setAttribute("icon","pause")},Gs.prototype.g=function(){var e=this.isPaused()?"PLAY":"PAUSE";this.button.ariaLabel=this.localization.resolve(e)},O("shaka.ui.BigPlayButton",Gs);function Vs(e,t){ve.call(this,e,t);var n=this;this.j=this.controls.g,this.h=this.controls.h,this.i=[],this.g=q("div"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("shaka-context-menu"),this.g.classList.add("shaka-hidden"),this.h.appendChild(this.g),this.eventManager.o(this.h,"contextmenu",function(i){if(n.g.classList.contains("shaka-hidden")){i.preventDefault();var r=n.h.getBoundingClientRect();n.g.style.left=i.clientX-r.left+"px",n.g.style.top=i.clientY-r.top+"px",ye(n.g,!0)}else ye(n.g,!1)}),this.eventManager.o(I,"click",function(){ye(n.g,!1)}),xI(this)}pe(Vs,ve),Vs.prototype.release=function(){this.h=null;for(var e=g(this.i),t=e.next();!t.done;t=e.next())t.value.release();this.i=[],ve.prototype.release.call(this)};function rl(e,t){N1.set(e,t)}function xI(e){for(var t=g(e.j.contextMenuElements),n=t.next();!n.done;n=t.next()){n=n.value;var i=N1.get(n);i?e.i.push(i.create(e.g,e.controls)):Ae("Unrecognized context menu element:",n)}}O("shaka.ui.ContextMenu",Vs),Vs.registerElement=rl;var N1=new Map;function yo(e,t){ve.call(this,e,t);var n=this;this.m=null,this.s=!1,this.j=new fe(function(){parseInt(n.h.textContent,10)!=0&&(n.video.currentTime=n.controls.Hf()+parseInt(n.h.textContent,10)),n.g.style.opacity="0",n.s=!1,n.h.textContent="0s"}),this.g=q("div"),this.parent.appendChild(this.g),this.eventManager.o(this.g,"touchend",function(i){n.controls.dc()&&(n.controls.nd()?(i.preventDefault(),n.controls.uc()):0<n.controls.g.tapSeekDistance&&(i.preventDefault(),i=n.controls.g.tapSeekDistance,n.s?n.m+1e3>Date.now()&&(n.j.stop(),n.m=Date.now(),n.h.textContent=(n.l?parseInt(n.h.textContent,10)-i:parseInt(n.h.textContent,10)+i).toString()+"s",n.g.style.opacity="1",n.j.S(1)):(n.s=!0,n.m=Date.now(),n.j.S(1))))}),this.h=q("span"),this.h.textContent="0s",this.g.appendChild(this.h),this.i=q("span"),this.i.classList.add("shaka-forward-rewind-container-icon"),this.g.appendChild(this.i),this.l=!1}pe(yo,ve),O("shaka.ui.HiddenSeekButton",yo);function Id(e,t){yo.call(this,e,t),this.g.classList.add("shaka-fast-foward-container"),this.i.textContent="fast_forward",this.l=!1}pe(Id,yo),O("shaka.ui.HiddenFastForwardButton",Id);function Cd(e,t){yo.call(this,e,t),this.g.classList.add("shaka-rewind-container"),this.i.textContent="fast_rewind",this.l=!0}pe(Cd,yo),O("shaka.ui.HiddenRewindButton",Cd);function ut(e,t,n,i){ve.call(this,e,t);var r=this;this.container=q("div"),this.container.classList.add("shaka-range-container"),this.container.classList.add.apply(this.container.classList,F(n)),this.h=!1,this.bar=document.createElement("input"),this.G=new fe(function(){r.onChangeEnd(),r.h=!1}),this.bar.classList.add("shaka-range-element"),this.bar.classList.add.apply(this.bar.classList,F(i)),this.bar.type="range",this.bar.step="any",this.bar.min="0",this.bar.max="1",this.bar.value="0",this.container.appendChild(this.bar),this.parent.appendChild(this.container),this.eventManager.o(this.bar,"mousedown",function(){r.controls.dc()&&(r.h=!0,r.onChangeStart())}),this.eventManager.o(this.bar,"touchstart",function(o){r.controls.dc()&&(r.h=!0,ol(r,o),r.onChangeStart())}),this.eventManager.o(this.bar,"input",function(){r.onChange()}),this.eventManager.o(this.bar,"touchmove",function(o){r.h&&(ol(r,o),r.onChange())}),this.eventManager.o(this.bar,"touchend",function(o){r.h&&(r.h=!1,ol(r,o),r.onChangeEnd())}),this.eventManager.o(this.bar,"touchcancel",function(o){r.h&&(r.h=!1,ol(r,o),r.onChangeEnd())}),this.eventManager.o(this.bar,"mouseup",function(){r.h&&(r.h=!1,r.onChangeEnd())}),this.eventManager.o(this.bar,"blur",function(){r.h&&(r.h=!1,r.onChangeEnd())}),this.eventManager.o(this.bar,"contextmenu",function(o){o.preventDefault(),o.stopPropagation()})}pe(ut,ve),h=ut.prototype,h.release=function(){this.G&&(this.G.stop(),this.G=null),ve.prototype.release.call(this)},h.setRange=function(e,t){this.bar.min=e,this.bar.max=t},h.onChangeStart=function(){},h.onChange=function(){},h.onChangeEnd=function(){},h.changeTo=function(e){this.h||(this.h=!0,this.onChangeStart());var t=parseFloat(this.bar.min),n=parseFloat(this.bar.max);this.bar.value=e>n?n:e<t?t:e,this.onChange(),this.G.S(.5)},h.getValue=function(){return parseFloat(this.bar.value)},h.setValue=function(e){this.h||(this.bar.value=e)};function ol(e,t){t.preventDefault();var n=t.changedTouches[0],i=e.bar.getBoundingClientRect();t=parseFloat(e.bar.min);var r=parseFloat(e.bar.max);n=t+(r-t)/i.width*(n.clientX-i.left),n<t?n=t:n>r&&(n=r),e.bar.value=n}O("shaka.ui.RangeElement",ut),ut.prototype.setValue=ut.prototype.setValue,ut.prototype.getValue=ut.prototype.getValue,ut.prototype.changeTo=ut.prototype.changeTo,ut.prototype.onChangeEnd=ut.prototype.onChangeEnd,ut.prototype.onChange=ut.prototype.onChange,ut.prototype.onChangeStart=ut.prototype.onChangeStart,ut.prototype.setRange=ut.prototype.setRange;function zs(e,t){ut.call(this,e,t,["shaka-seek-bar-container"],["shaka-seek-bar","shaka-no-propagation","shaka-show-controls-on-mouse-over"]);var n=this;this.D=q("div"),this.D.classList.add("shaka-ad-markers"),this.container.insertBefore(this.D,this.container.childNodes[0]),this.H=this.controls.g,this.s=new fe(function(){var i=n.getValue();n.player.R()||i==n.video.duration&&(i-=.001),n.video.currentTime=i}),this.I=new fe(function(){b1(n)}),this.K=!1,this.i=q("div"),this.i.id="shaka-player-ui-thumbnail-container",this.g=q("img"),this.g.id="shaka-player-ui-thumbnail-image",this.g.draggable=!1,this.u=q("div"),this.u.id="shaka-player-ui-thumbnail-time",this.i.appendChild(this.g),this.i.appendChild(this.u),this.container.appendChild(this.i),this.j=this.l=null,this.J=!1,this.m=new fe(function(){Eo(n)}),this.C=[],this.eventManager.o(this.localization,"locale-updated",function(){return kd(n)}),this.eventManager.o(this.localization,"locale-changed",function(){return kd(n)}),this.eventManager.o(this.adManager,"ad-started",function(){Md(n)||ye(n.container,!1)}),this.eventManager.o(this.adManager,"ad-stopped",function(){Md(n)&&ye(n.container,!0)}),this.eventManager.o(this.adManager,"ad-cue-points-changed",function(i){n.C=i.cuepoints,_1(n)}),this.eventManager.o(this.player,"unloading",function(){n.C=[],_1(n),n.j&&(n.j.abort(),n.j=null),n.l=null,Eo(n)}),this.eventManager.o(this.bar,"mousemove",function(i){if(n.player.fe().length){var r=n.bar.getBoundingClientRect(),o=parseFloat(n.bar.min);i=i.clientX-r.left,U1(n,i,Math.round(o+(parseFloat(n.bar.max)-o)/r.width*i))}else Eo(n)}),this.eventManager.o(this.container,"mouseleave",function(){n.m.stop(),n.m.S(.25)}),this.setValue(this.video.currentTime),this.update(),kd(this),this.ad&&ye(this.container,!1)}pe(zs,ut),h=zs.prototype,h.release=function(){this.s&&(this.s.stop(),this.s=null,this.I.stop(),this.I=null),ut.prototype.release.call(this)},h.onChangeStart=function(){this.K=!this.video.paused,this.controls.qg(!0),this.video.pause(),this.m.stop(),this.J=!0},h.onChange=function(){if(this.video.duration)if(this.update(),this.s.S(.125),this.player.fe().length){var e=parseFloat(this.bar.min),t=parseFloat(this.bar.max),n=this.bar.getBoundingClientRect(),i=Math.round(this.getValue());U1(this,(i-e)/((t-e)/n.width),i)}else Eo(this)},h.onChangeEnd=function(){this.s.Qa(),this.controls.qg(!1),this.K&&this.video.play(),this.J&&(this.J=!1,this.m.stop(),this.m.S(.25))},h.isShowing=function(){return!this.container.classList.contains("shaka-hidden")},h.update=function(){var e=this.H.seekBarColors,t=this.getValue(),n=this.video.buffered.length,i=n?this.video.buffered.start(0):0,r=n?this.video.buffered.end(n-1):0,o=this.player.Ha(),s=o.end-o.start;this.setRange(o.start,o.end),Md(this)?(ye(this.container,!0),n==0?this.container.style.background=e.base:(n=(Math.max(i,o.start)-o.start)/s||0,r=(Math.min(r,o.end)-o.start)/s||0,t=(Math.min(Math.max(t,o.start),o.end)-o.start)/s||0,this.container.style.background="linear-gradient("+["to right",(this.H.showUnbufferedStart?e.base:e.played)+" "+100*n+"%",e.played+" "+100*n+"%",e.played+" "+100*t+"%",e.buffered+" "+100*t+"%",e.buffered+" "+100*r+"%",e.base+" "+100*r+"%"].join()+")")):ye(this.container,!1)};function b1(e){if(e.C.length){for(var t=e.player.Ha(),n=t.end-t.start,i=["to right"],r=[],o=e.H.seekBarColors.adBreaks,s=!1,u=g(e.C),a=u.next();!a.done;a=u.next())if(a=a.value,a.start!=-1||a.end||(s=!0),a.start>=t.start&&a.start<t.end&&!(a.end&&a.end>t.end)){var l=(a.start-t.start)/n||0,c=l+.01;a.end&&(c=(a.end-t.start)/n||0),r.push({start:l,end:c})}for(t=g(r),a=t.next();!a.done;a=t.next())n=a.value,i.push("transparent "+100*n.start+"%"),i.push(o+" "+100*n.start+"%"),i.push(o+" "+100*n.end+"%"),i.push("transparent "+100*n.end+"%");s&&(i.push("transparent 99%"),i.push(o+" 99%")),e.D.style.background="linear-gradient("+i.join(",")+")"}else e.D.style.background="transparent"}function _1(e){b1(e);var t=e.player.Ha();t=t.end-t.start,e.player.R()&&5<t&&e.I.za(1)}function Md(e){var t=e.player.Ha();return t=t.end-t.start,e.player.R()&&5>t?!1:e.ad==null||!e.ad.isLinear()}function kd(e){e.bar.ariaLabel=e.localization.resolve("SEEK")}function U1(e,t,n){var i,r,o,s,u,a,l,c,d,f,p,m,v,E,w,T,x,S;k(function(C){switch(C.g){case 1:return i=II(e),i?(0>n&&(n=0),r=e.player.Ha(),o=Math.max(Math.ceil(r.start),Math.min(Math.floor(r.end),n)),y(C,e.player.Kf(i.id,o),2)):(Eo(e),C.return());case 2:if(s=C.h,!s||!s.uris.length)return Eo(e),C.return();if(e.player.R()?(u=r.end-n,e.u.textContent=1>u?e.localization.resolve("LIVE"):"-"+O1(u)):e.u.textContent=O1(n),a=-10,l=e.i.clientWidth,c=Math.floor(9*l/16),e.i.style.height=c+"px",e.i.style.top=-(c-a)+"px",d=Math.min(e.bar.offsetWidth-l,Math.max(0,t-l/2)),e.i.style.left=d+"px",e.i.style.visibility="visible",f=s.uris[0].split("#xywh=")[0],e.l&&f===e.l.uris[0].split("#xywh=")[0]&&s.segment.Pb()==e.l.segment.Pb()&&s.segment.Mb()==e.l.segment.Mb()){C.F(3);break}if(e.l=s,e.j&&(e.j.abort(),e.j=null),i.codecs!="mjpg"&&!f.startsWith("offline:")){C.F(4);break}return e.g.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',le(C,5),p=bn,m=ns(s.segment.ba(),s.segment.Pb(),s.segment.Mb(),e.player.getConfiguration().streaming.retryParameters),e.j=e.player.Zb().request(p,m,{type:1}),y(C,e.j.promise,7);case 7:v=C.h,e.j=null,i.codecs=="mjpg"?(E=new Ue().box("mdat",Yi(function(D){f=URL.createObjectURL(new Blob([D],{type:"image/jpeg"}))})),E.parse(v.data,!1)):(w=i.mimeType||"image/jpeg",T=new Blob([v.data],{type:w}),f=URL.createObjectURL(T)),Ee(C,4);break;case 5:if(x=ce(C),x.code==7001)return C.return();throw x;case 4:try{e.i.removeChild(e.g)}catch{}e.g=q("img"),e.g.id="shaka-player-ui-thumbnail-image",e.g.draggable=!1,e.g.src=f,e.g.onload=function(){f.startsWith("blob:")&&URL.revokeObjectURL(f)},e.i.insertBefore(e.g,e.i.firstChild);case 3:S=l/s.width,s.imageHeight?e.g.height=s.imageHeight:s.sprite||(e.g.style.height="100%",e.g.style.objectFit="contain"),s.imageWidth?e.g.width=s.imageWidth:s.sprite||(e.g.style.width="100%",e.g.style.objectFit="contain"),e.g.style.left="-"+S*s.positionX+"px",e.g.style.top="-"+S*s.positionY+"px",e.g.style.transform="scale("+S+")",e.g.style.transformOrigin="left top",c=Math.floor(l*s.height/s.width),e.i.style.height=c+"px",e.i.style.top=-(c-a)+"px",K(C)}})}function II(e){var t=e.player.fe();if(!t.length)return null;for(var n={},i=g(["image/avif","image/webp","image/jpeg","image/png","image/svg+xml"]),r=i.next();!r.done;n={Ve:n.Ve,Te:n.Te},r=i.next())if(n.Ve=r.value,n.Te=e.player.getStats().estimatedBandwidth,(r=t.filter(function(o){return function(s){return s.mimeType.toLowerCase()===o.Ve&&s.bandwidth<.01*o.Te}}(n)).sort(function(o,s){return s.bandwidth-o.bandwidth}))&&r.length)return r[0];return t.find(function(o){return o.mimeType=="application/mp4"&&o.codecs=="mjpg"})||t[0]}function Eo(e){e.i.style.visibility="hidden",e.u.textContent=""}function O1(e){var t=Math.round(e);e=Math.floor(t/3600);var n=Math.floor((t-3600*e)/60);return t=t-3600*e-60*n,10>t&&(t="0"+t),0<e?(10>n&&(n="0"+n),e+":"+n+":"+t):n+":"+t}O("shaka.ui.SeekBar",zs);function Ld(){}Ld.prototype.create=function(e,t){return new zs(e,t)},zs.Factory=Ld;function J(e,t,n,i){Ie.call(this);var r=this;this.N=!0,this.g=i,this.C=new Qe(n,e,this.g.castReceiverAppId,this.g.castAndroidReceiverCompatible),this.ua=!0,this.u=this.C.cc(),this.s=n,this.G=this.C.Mc(),this.sa=e,this.j=t,this.Wa=this.G.ee(),this.l=this.m=null,this.W=!1,this.H=[],this.Xb=[],this.Ib=!1,this.Z=new fe(function(){r.j.style.cursor="none",r.Ib=!1,Bn(r)}),this.aa=new fe(function(){r.h.removeAttribute("shown"),r.I.S(2)}),this.I=new fe(function(){for(var o=g(r.H),s=o.next();!s.done;s=o.next())ye(s.value,!1)}),this.Ra=new fe(function(){r.dc()&&sl(r)}),this.J=null,this.D=[],this.va=zI(),this.i=new _e,this.configure(this.g),jI(this),this.ha=new Set,Dd(this),this.Ra.za(.125),this.i.o(this.va,"locale-changed",function(o){r.Wa.setLocale(o.locales[0])})}pe(J,Ie),h=J.prototype,h.destroy=function(){var e=this;return k(function(t){switch(t.g){case 1:if(document.pictureInPictureElement!=e.s){t.F(2);break}return y(t,document.exitPictureInPicture(),2);case 2:if(e.i&&(e.i.release(),e.i=null),e.Z&&(e.Z.stop(),e.Z=null),e.aa&&(e.aa.stop(),e.aa=null),e.I&&(e.I.stop(),e.I=null),e.Ra&&(e.Ra.stop(),e.Ra=null),j1(e),e.h&&(e.j.removeChild(e.h),e.h=null),!e.C){t.F(4);break}return y(t,e.C.destroy(),5);case 5:e.C=null;case 4:if(!e.sa){t.F(6);break}return y(t,e.sa.destroy(),7);case 7:e.sa=null;case 6:e.G=null,e.s=null,e.u=null,e.va=null,e.ha.clear(),Ie.prototype.release.call(e),K(t)}})};function j1(e){for(var t=g(e.D),n=t.next();!n.done;n=t.next())n.value.release();e.D=[]}function yt(e,t){Rd.set(e,t)}h.Kh=function(e){this.ua=e,Dd(this)},h.Ri=function(){Bn(this)},h.configure=function(e){this.g=e,this.C.Jg(e.castReceiverAppId,e.castAndroidReceiverCompatible),this.l&&(this.l=null),this.Fb&&(this.Fb=null),this.Xa&&(this.Xa=null),this.h?(ki(this.h),j1(this)):(kI(this),OI(this)),this.j.classList.add("shaka-video-container"),this.s.classList.add("shaka-video"),DI(this),this.g.addBigPlayButton&&LI(this),this.g.customContextMenu&&(this.Xa=new Vs(this.V,this),this.D.push(this.Xa)),this.$||PI(this),this.g.seekOnTaps&&(NI(this),bI(this)),this.xb=q("div"),this.xb.classList.add("shaka-server-side-ad-container"),this.h.appendChild(this.xb),_I(this),this.H=Array.from(this.j.getElementsByClassName("shaka-settings-menu")),this.H.push.apply(this.H,F(Array.from(this.j.getElementsByClassName("shaka-overflow-menu")))),UI(this),this.Xb=Array.from(this.j.getElementsByClassName("shaka-show-controls-on-mouse-over")),Bn(this),e=g(this.j.getElementsByClassName("shaka-no-propagation"));for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=function(i){return i.stopPropagation()};this.i.o(t,"click",n),this.i.o(t,"dblclick",n)}},h.lg=function(e){(this.N=e)?(this.j.setAttribute("shaka-controls","true"),this.s.tabIndex=-1,this.s.controls=!1):this.j.removeAttribute("shaka-controls"),Bn(this)},h.ph=function(e){this.s.controls=e,this.s.tabIndex=e?0:-1,e&&this.lg(!1)},h.getAd=function(){return this.m},h.Vh=function(){return this.C},h.ji=function(){return this.va},h.Di=function(){return this.j},h.cc=function(){return this.u},h.ii=function(){return this.s},h.Mc=function(){return this.G},h.gi=function(){return this.sa},h.$h=function(){return this.h},h.ti=function(){return this.xb},h.Xh=function(){return this.M},h.Yh=function(){return this.g},h.Oi=function(){return this.W},h.qg=function(e){this.W=e},h.Ii=function(){return this.ua},h.Hf=function(){return this.l?this.l.getValue():this.u.currentTime},h.qh=function(e){this.J=e},h.nd=function(){return this.H.some(function(e){return!e.classList.contains("shaka-hidden")})},h.uc=function(){this.I.Qa()},h.zd=function(){return!!(document.fullscreenEnabled||this.s.webkitSupportsFullscreen)},h.Qc=function(){if(document.fullscreenEnabled)return!!document.fullscreenElement;var e=this.s;return e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1};function B1(e){var t,n,i;return k(function(r){switch(r.g){case 1:if(le(r,2),!document.fullscreenEnabled){t=e.s,t.webkitSupportsFullscreen&&t.webkitEnterFullscreen(),r.F(4);break}if(!document.pictureInPictureElement){r.F(5);break}return y(r,document.exitPictureInPicture(),5);case 5:return n=e.g.fullScreenElement,y(r,n.requestFullscreen({navigationUI:"hide"}),7);case 7:if(!e.g.forceLandscapeOnFullscreen||!screen.orientation){r.F(4);break}return le(r,9),y(r,screen.orientation.lock("landscape"),11);case 11:Ee(r,4,2);break;case 9:ce(r,2);case 4:Ee(r,0);break;case 2:i=ce(r),e.dispatchEvent(new X("error",new Map().set("detail",i))),K(r)}})}function F1(e){var t;return k(function(n){return document.fullscreenEnabled?(screen.orientation&&screen.orientation.unlock(),y(n,document.exitFullscreen(),0)):(t=e.s,t.webkitSupportsFullscreen&&t.webkitExitFullscreen(),n.F(0))})}h.Pe=function(){var e=this;return k(function(t){return e.Qc()?y(t,F1(e),0):y(t,B1(e),0)})},h.qe=function(){return this.C.Ba()?!1:"documentPictureInPicture"in I&&this.g.preferDocumentPictureInPicture||document.pictureInPictureEnabled?!this.s.disablePictureInPicture:!1},h.re=function(){return"documentPictureInPicture"in I&&this.g.preferDocumentPictureInPicture?!!I.documentPictureInPicture.window:!!document.pictureInPictureElement},h.Od=function(){var e=this,t,n;return k(function(i){if(i.g==1)return le(i,2),"documentPictureInPicture"in I&&e.g.preferDocumentPictureInPicture?y(i,CI(e),5):document.pictureInPictureElement?y(i,document.exitPictureInPicture(),5):(document.fullscreenElement&&document.exitFullscreen(),t=e.s,y(i,t.requestPictureInPicture(),5));if(i.g!=2)return Ee(i,0);n=ce(i),e.dispatchEvent(new X("error",new Map().set("detail",n))),K(i)})};function CI(e){var t,n,i,r,o,s;return k(function(u){if(u.g==1)return I.documentPictureInPicture.window?(I.documentPictureInPicture.window.close(),u.return()):(t=e.j,n=t.getBoundingClientRect(),y(u,I.documentPictureInPicture.requestWindow({width:n.width,height:n.height}),2));i=u.h,MI(i),r=t.parentNode||document.body,o=e.j.cloneNode(!0),o.style.visibility="hidden",o.style.height=getComputedStyle(t).height,r.appendChild(o),s=document.createElement("style"),s.append(`[data-shaka-player-container] {
      width: 100% !important; max-height: 100%}`),i.document.head.append(s),i.document.body.append(t),e.i.na(i,"pagehide",function(){o.replaceWith(t)}),K(u)})}function MI(e){var t=[].concat(F(document.styleSheets)).map(function(i){try{return[].concat(F(i.cssRules)).map(function(o){return o.cssText}).join("")}catch{var r=document.createElement("link");r.rel="stylesheet",r.type=i.type,r.media=i.media,r.href=i.href,e.document.head.appendChild(r)}return""}).filter(Boolean).join(`
`),n=document.createElement("style");n.textContent=t,e.document.head.appendChild(n)}h.uh=function(){ye(this.K,!0),ye(this.M,!0),this.h.setAttribute("ad-active","true")},h.Wg=function(){ye(this.K,!1),ye(this.M,!1),this.h.removeAttribute("ad-active")};function G1(e){e.N&&e.u.duration&&(e.G.od(),e.u.paused&&!e.W?e.u.play():e.u.pause())}function V1(e){e.m&&e.m.isPaused()?e.m.play():e.m&&e.m.pause()}function kI(e){e.h=q("div"),e.h.classList.add("shaka-controls-container"),e.j.appendChild(e.h),e.j.setAttribute("shaka-controls","true"),e.i.o(e.h,"touchstart",function(t){e.u.duration&&(e.dc()?e.J=Date.now():(Ks(e,t),t.cancelable&&t.preventDefault()))},{passive:!1}),e.i.o(e.h,"click",function(){z1(e)}),e.i.o(e.h,"dblclick",function(){e.g.doubleClickForFullscreen&&e.zd()&&e.Pe()})}function LI(e){var t=q("div");t.classList.add("shaka-play-button-container"),e.h.appendChild(t),e.Fb=new Gs(t,e),e.D.push(e.Fb)}function DI(e){var t=q("div");t.classList.add("shaka-scrim-container"),e.h.appendChild(t)}function RI(e){e.K=q("div"),e.K.classList.add("shaka-ad-controls");var t=e.m!=null&&e.m.isLinear();ye(e.K,t),e.L.appendChild(e.K),t=new xd(e.K,e),e.D.push(t),t=new nl(e.K,e),e.D.push(t)}function PI(e){e.$=q("div"),e.$.classList.add("shaka-spinner-container"),e.j.appendChild(e.$);var t=q("div");t.classList.add("shaka-spinner"),e.$.appendChild(t),e=document.createElementNS("http://www.w3.org/2000/svg","svg"),e.classList.add("shaka-spinner-svg"),e.setAttribute("viewBox","0 0 30 30"),t.appendChild(e),t=document.createElementNS("http://www.w3.org/2000/svg","circle"),t.classList.add("shaka-spinner-path"),t.setAttribute("cx","15"),t.setAttribute("cy","15"),t.setAttribute("r","14.5"),t.setAttribute("fill","none"),t.setAttribute("stroke-width","1"),t.setAttribute("stroke-miterlimit","10"),e.appendChild(t)}function NI(e){var t=q("div");t.classList.add("shaka-hidden-fast-forward-container"),e.h.appendChild(t),e.nc=new Id(t,e),e.D.push(e.nc)}function bI(e){var t=q("div");t.classList.add("shaka-hidden-rewind-container"),e.h.appendChild(t),e.tc=new Cd(t,e),e.D.push(e.tc)}function _I(e){e.L=q("div"),e.L.classList.add("shaka-bottom-controls"),e.L.classList.add("shaka-no-propagation"),e.h.appendChild(e.L),e.i.o(e.L,"click",function(i){i.target.closest(".shaka-overflow-button")||e.uc()}),RI(e),e.V=q("div"),e.V.classList.add("shaka-controls-button-panel"),e.V.classList.add("shaka-show-controls-on-mouse-over"),e.g.enableTooltips&&e.V.classList.add("shaka-tooltips-on"),e.L.appendChild(e.V);for(var t=g(e.g.controlPanelElements),n=t.next();!n.done;n=t.next())n=n.value,Rd.get(n)?(n=Rd.get(n).create(e.V,e),e.D.push(n)):Ae("Unrecognized control panel element requested:",n)}function UI(e){if(e.g.addSeekBar)e.l=H1.create(e.L,e),e.D.push(e.l);else{e=g(e.H);for(var t=e.next();!t.done;t=e.next())t.value.classList.add("shaka-low-position")}}function OI(e){e.M=q("div"),e.M.classList.add("shaka-client-side-ad-container"),ye(e.M,!1),e.i.o(e.M,"click",function(){z1(e)}),e.j.appendChild(e.M)}function jI(e){e.i.o(e.G,"buffering",function(){e.N&&ye(e.$,e.G.yd())}),e.N&&ye(e.$,e.G.yd()),e.i.o(I,"keydown",function(t){GI(e,t)}),e.i.o(I,"click",function(){return e.uc()}),e.i.o(e,"submenuopen",function(){e.uc()}),e.i.o(e.u,"play",function(){Bn(e)}),e.i.o(e.u,"pause",function(){Bn(e)}),e.i.o(e.j,"mousemove",function(t){Ks(e,t)}),e.i.o(e.j,"touchmove",function(t){Ks(e,t)},{passive:!0}),e.i.o(e.j,"touchend",function(t){Ks(e,t)},{passive:!0}),e.i.o(e.j,"mouseleave",function(){e.J||e.Z.Qa()}),e.i.o(e.C,"caststatuschanged",function(){Dd(e)}),e.i.o(e.j,"keydown",function(t){var n=document.activeElement,i=n&&n.classList?n.classList.contains("shaka-volume-bar"):!1,r=n&&n.classList&&n.classList.contains("shaka-seek-bar");if(e.h.contains(n)&&Ks(e,t),e.g.enableKeyboardPlaybackControls){n=e.g.keyboardSeekDistance;var o=e.g.keyboardLargeSeekDistance;switch(t.key){case"ArrowLeft":e.l&&!i&&0<n&&(t.preventDefault(),To(e,e.l.getValue()-n));break;case"ArrowRight":e.l&&!i&&0<n&&(t.preventDefault(),To(e,e.l.getValue()+n));break;case"PageDown":e.l&&r&&0<n&&(t.preventDefault(),To(e,e.l.getValue()-o));break;case"PageUp":e.l&&r&&0<n&&(t.preventDefault(),To(e,e.l.getValue()+o));break;case"Home":e.l&&To(e,e.G.Ha().start);break;case"End":e.l&&To(e,e.G.Ha().end);break;case"f":e.zd()&&e.Pe();break;case"m":e.m&&e.m.isLinear()?e.m.setMuted(!e.m.isMuted()):e.s.muted=!e.s.muted;break;case"p":e.qe()&&e.Od();break;case" ":r&&K1(e)}}}),e.i.o(e.j,"keyup",function(t){e.ha.delete(t.key)}),e.i.o(e.Wa,"ad-started",function(t){e.m=t.ad,e.uh()}),e.i.o(e.Wa,"ad-stopped",function(){e.m=null,e.Wg()}),screen.orientation&&e.i.o(screen.orientation,"change",function(){return k(function(t){return y(t,BI(e),0)})})}function BI(e){return k(function(t){return e.u&&e.u.readyState!=0&&!e.C.Ba()&&e.g.enableFullscreenOnRotation&&e.zd()?screen.orientation.type.includes("landscape")&&!e.Qc()?y(t,B1(e),0):screen.orientation.type.includes("portrait")&&e.Qc()?y(t,F1(e),0):t.F(0):t.return()})}function Ks(e,t){t.type=="mousemove"&&(e.h.classList.remove("shaka-keyboard-navigation"),Bn(e)),t.type=="touchstart"||t.type=="touchmove"||t.type=="touchend"||t.type=="keyup"?e.J=Date.now():e.J+1e3<Date.now()&&(e.J=null),e.J&&t.type=="mousemove"||(e.j.style.cursor="",e.Ib=!0,e.I.stop(),e.dc()||(sl(e),Bn(e)),e.Z.stop(),t.type!="touchend"&&t.type!="keyup"&&e.J||e.Z.S(3))}function FI(e){return I.matchMedia("hover: hover").matches?e.Xb.some(function(t){return t.matches(":hover")}):!1}function Bn(e){var t=e.m?e.m.isPaused():!1,n=e.u.paused&&!e.W,i=e.h.classList.contains("shaka-keyboard-navigation");t||(!e.m||!e.m.isLinear())&&n||e.Ib||i||FI(e)?(sl(e),e.h.setAttribute("shown","true"),e.aa.stop()):e.aa.S(e.g.fadeDelay)}function z1(e){e.N&&(e.nd()?e.I.Qa():e.g.singleClickForPlayAndPause&&K1(e))}function K1(e){e.m&&e.m.isLinear()?V1(e):G1(e)}function Dd(e){var t=e.C.Ba();e.dispatchEvent(new X("caststatuschanged",new Map().set("newStatus",t))),t?e.h.setAttribute("casting","true"):e.h.removeAttribute("casting")}h.dc=function(){return this.N?this.h.getAttribute("shown")!=null||this.h.getAttribute("casting")!=null:!1};function To(e,t){e.l.changeTo(t),e.dc()&&sl(e)}function sl(e){if(e.l)if(e.l.setValue(e.u.currentTime),e.l.update(),e.l.isShowing())for(var t=g(e.H),n=t.next();!n.done;n=t.next())n.value.classList.remove("shaka-low-position");else for(t=g(e.H),n=t.next();!n.done;n=t.next())n.value.classList.add("shaka-low-position");e.dispatchEvent(new X("timeandseekrangeupdated"))}function GI(e,t){e.ha.add(t.key);var n=e.nd();t.key=="Tab"&&(e.h.classList.add("shaka-keyboard-navigation"),Bn(e),e.i.o(I,"mousedown",function(){e.i.hc(I,"mousedown")})),t.key=="Escape"&&e.I.Qa(),n&&e.ha.has("Tab")&&VI(e,t)}function VI(e,t){var n=e.H.filter(function(o){return!o.classList.contains("shaka-hidden")});if(n.length){var i=n[0];if(i.childNodes.length){for(n=i.firstElementChild;n&&n.classList.contains("shaka-hidden");)n=n.nextElementSibling;for(i=i.lastElementChild;i&&i.classList.contains("shaka-hidden");)i=i.previousElementSibling;var r=document.activeElement;e.ha.has("Shift")?r==n&&(t.preventDefault(),i.focus()):r==i&&(t.preventDefault(),n.focus())}}}function zI(){var e=new rt("en");return e.ya("ar",new Map([["AD_DURATION"," "],["AD_PROGRESS"," [AD_ON]  [NUM_ADS]"],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS"," "],["CAST","..."],["ENTER_LOOP_MODE","  "],["ENTER_PICTURE_IN_PICTURE",'   "  "'],["EXIT_FULL_SCREEN","   "],["EXIT_LOOP_MODE","   "],["EXIT_PICTURE_IN_PICTURE",'   "  "'],["FAST_FORWARD"," "],["FULL_SCREEN"," "],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS","  "],["MULTIPLE_LANGUAGES"," "],["MUTE"," "],["NOT_APPLICABLE"," "],["OFF",""],["ON",""],["PAUSE"," "],["PICTURE_IN_PICTURE","  "],["PLAY",""],["PLAYBACK_RATE"," "],["RESOLUTION"," "],["REWIND",""],["SEEK"," "],["SKIP_AD"," "],["SKIP_TO_LIVE","   "],["UNDETERMINED_LANGUAGE"," "],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE"," "],["VOLUME"," "]])),e.ya("de",new Map([["AD_DURATION","Dauer der Werbeanzeige"],["AD_PROGRESS","Werbung[AD_ON] von[NUM_ADS]"],["AD_TIME","Werbeanzeige: [AD_TIME]"],["AUTO_QUALITY","Automatisch"],["BACK","Zurck"],["CAPTIONS","Untertitel"],["CAST","Streamen..."],["ENTER_LOOP_MODE","In Endlosschleife spielen"],["ENTER_PICTURE_IN_PICTURE","Bild-im-Bild-Modus aktivieren"],["EXIT_FULL_SCREEN","Vollbildmodus beenden"],["EXIT_LOOP_MODE","Endlosschleife stoppen"],["EXIT_PICTURE_IN_PICTURE","Bild-im-Bild-Modus beenden"],["FAST_FORWARD","Vorspulen"],["FULL_SCREEN","Vollbildmodus"],["LANGUAGE","Sprache"],["LIVE","Live"],["LOOP","Schleife"],["MORE_SETTINGS","Weitere Einstellungen"],["MULTIPLE_LANGUAGES","Mehrere Sprachen"],["MUTE","Stummschalten"],["NOT_APPLICABLE","Nicht zutreffend"],["OFF","Aus"],["ON","Ein"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Bild im Bild"],["PLAY","Wiedergabe"],["PLAYBACK_RATE","Geschwindigkeit"],["RESOLUTION","Auflsung"],["REWIND","Zurckspulen"],["SEEK","Suche"],["SKIP_AD","berspringen"],["SKIP_TO_LIVE","Zum Live-Videostream wechseln"],["UNDETERMINED_LANGUAGE","Unbestimmt"],["UNMUTE","Stummschaltung aufheben"],["UNRECOGNIZED_LANGUAGE","Unbekannt"],["VOLUME","Lautstrke"]])),e.ya("en",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_TIME","Ad: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter Picture-in-Picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit Picture-in-Picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["QUALITY","Quality"],["REPLAY","Replay"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip Ad"],["SKIP_TO_LIVE","Skip ahead to live"],["STATISTICS","Statistics"],["SUBTITLE_FORCED","Forced"],["SURROUND","Surround"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognized"],["VOLUME","Volume"]])),e.ya("en-GB",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_TIME","Ad: [AD_TIME]"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter picture-in-picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit picture-in-picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip ad"],["SKIP_TO_LIVE","Skip ahead to live"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognised"],["VOLUME","volume"]])),e.ya("es",new Map([["AD_DURATION","Duracin del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anuncio: [AD_TIME]"],["AUTO_QUALITY","Automtico"],["BACK","Atrs"],["CAPTIONS","Subttulos"],["CAST","Enviar..."],["ENTER_LOOP_MODE","Reproducir en bucle el vdeo actual"],["ENTER_PICTURE_IN_PICTURE","Activar el modo imagen en imagen"],["EXIT_FULL_SCREEN","Salir del modo de pantalla completa"],["EXIT_LOOP_MODE","Dejar de reproducir en bucle el vdeo actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo imagen en imagen"],["FAST_FORWARD","Avanzar rpidamente"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Reproducir en bucle"],["MORE_SETTINGS","Ms ajustes"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Imagen en imagen"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproduccin"],["RESOLUTION","Resolucin"],["REWIND","Rebobinar"],["SEEK","Buscar"],["SKIP_AD","Saltar anuncio"],["SKIP_TO_LIVE","Ir al vdeo en directo"],["SUBTITLE_FORCED","Forzado"],["SURROUND","Envolvente"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Activar sonido"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),e.ya("es-419",new Map([["AD_DURATION","Duracin del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anuncio: [AD_TIME]"],["AUTO_QUALITY","Automtico"],["BACK","Atrs"],["CAPTIONS","Subttulos"],["CAST","Transmitir..."],["ENTER_LOOP_MODE","Repetir indefinidamente el video actual"],["ENTER_PICTURE_IN_PICTURE","Ingresar al modo de pantalla en pantalla"],["EXIT_FULL_SCREEN","Salir de pantalla completa"],["EXIT_LOOP_MODE","Detener la repeticin indefinida del video actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo de pantalla en pantalla"],["FAST_FORWARD","Avanzar"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Repetir indefinidamente"],["MORE_SETTINGS","Ms opciones de configuracin"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Detener"],["PICTURE_IN_PICTURE","Pantalla en pantalla"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproduccin"],["RESOLUTION","Resolucin"],["REWIND","Retroceder"],["SEEK","Buscar"],["SKIP_AD","Omitir anuncio"],["SKIP_TO_LIVE","Adelantar hasta la transmisin en vivo"],["SUBTITLE_FORCED","Forzado"],["SURROUND","Envolvente"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Dejar de silenciar"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),e.ya("fr",new Map([["AD_DURATION","Dure de l'annonce"],["AD_PROGRESS","Annonce[AD_ON] sur[NUM_ADS]"],["AD_TIME","Annonce: [AD_TIME]"],["AUTO_QUALITY","Automatique"],["BACK","Retour"],["CAPTIONS","Sous-titres"],["CAST","Caster"],["ENTER_LOOP_MODE","Lire en boucle la vido en cours"],["ENTER_PICTURE_IN_PICTURE","Utiliser le mode Picture-in-Picture"],["EXIT_FULL_SCREEN","Quitter le mode plein cran"],["EXIT_LOOP_MODE","Arrter la lecture en boucle de la vido en cours"],["EXIT_PICTURE_IN_PICTURE","Quitter le modePIP (Picture-in-picture)"],["FAST_FORWARD","Avance rapide"],["FULL_SCREEN","Plein cran"],["LANGUAGE","Langue"],["LIVE","En direct"],["LOOP","Rpter"],["MORE_SETTINGS","Plus de paramtres"],["MULTIPLE_LANGUAGES","Plusieurs langues"],["MUTE","Couper le son"],["NOT_APPLICABLE","Non applicable"],["OFF","Dsactive"],["ON","Active"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Visionner"],["PLAYBACK_RATE","Vitesse de lecture"],["RESOLUTION","Rsolution"],["REWIND","Retour arrire"],["SEEK","Chercher"],["SKIP_AD","Passer l'annonce"],["SKIP_TO_LIVE","Accder  la partie la plus rcente du direct"],["UNDETERMINED_LANGUAGE","Langue indtermine"],["UNMUTE","Ractiver le son"],["UNRECOGNIZED_LANGUAGE","Non reconnu"],["VOLUME","Volume"]])),e.ya("it",new Map([["AD_DURATION","Durata dell'annuncio"],["AD_PROGRESS","Annuncio [AD_ON] di [NUM_ADS]"],["AD_TIME","Annuncio: [AD_TIME]"],["AUTO_QUALITY","Automatica"],["BACK","Indietro"],["CAPTIONS","Sottotitoli"],["CAST","Trasmetti..."],["ENTER_LOOP_MODE","Riproduci in loop il video corrente"],["ENTER_PICTURE_IN_PICTURE","Attiva Picture in picture"],["EXIT_FULL_SCREEN","Esci da schermo intero"],["EXIT_LOOP_MODE","Interrompi riproduzione in loop del video corrente"],["EXIT_PICTURE_IN_PICTURE","Esci da Picture in picture"],["FAST_FORWARD","Avanti veloce"],["FULL_SCREEN","Schermo intero"],["LANGUAGE","Lingua"],["LIVE","Dal vivo"],["LOOP","Riproduci in loop"],["MORE_SETTINGS","Altre impostazioni"],["MULTIPLE_LANGUAGES","Pi lingue"],["MUTE","Disattiva audio"],["NOT_APPLICABLE","Non applicabile"],["OFF","Disattivo"],["ON","Attivo"],["PAUSE","Metti in pausa"],["PICTURE_IN_PICTURE","Picture in picture"],["PLAY","Riproduci"],["PLAYBACK_RATE","Velocit di riproduzione"],["RESOLUTION","Risoluzione"],["REWIND","Riavvolgi"],["SEEK","Cerca"],["SKIP_AD","Salta annuncio"],["SKIP_TO_LIVE","Passa alla trasmissione dal vivo"],["UNDETERMINED_LANGUAGE","Indeterminata"],["UNMUTE","Riattiva audio"],["UNRECOGNIZED_LANGUAGE","Non riconosciuto"],["VOLUME","Volume"]])),e.ya("ja",new Map([["AD_DURATION",""],["AD_PROGRESS","[AD_ON]  [NUM_ADS] "],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE","  "],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE","  "],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","  "],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.ya("ko",new Map([["AD_DURATION"," "],["AD_PROGRESS"," [AD_ON]/[NUM_ADS]"],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE","   "],["ENTER_PICTURE_IN_PICTURE","PIP  "],["EXIT_FULL_SCREEN"," "],["EXIT_LOOP_MODE","    "],["EXIT_PICTURE_IN_PICTURE","PIP  "],["FAST_FORWARD"," "],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP"," "],["MORE_SETTINGS"," "],["MULTIPLE_LANGUAGES"," "],["MUTE",""],["NOT_APPLICABLE","  "],["OFF"," "],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","PIP "],["PLAY",""],["PLAYBACK_RATE"," "],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD"," "],["SKIP_TO_LIVE","  "],["UNDETERMINED_LANGUAGE",""],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE","  "],["VOLUME",""]])),e.ya("nl",new Map([["AD_DURATION","Advertentieduur"],["AD_PROGRESS","Advertentie [AD_ON] van [NUM_ADS]"],["AD_TIME","Advertentie: [AD_TIME]"],["AUTO_QUALITY","Automatisch"],["BACK","Terug"],["CAPTIONS","Ondertiteling"],["CAST","Casten..."],["ENTER_LOOP_MODE","De huidige video lussen"],["ENTER_PICTURE_IN_PICTURE","Scherm-in-scherm openen"],["EXIT_FULL_SCREEN","Volledig scherm sluiten"],["EXIT_LOOP_MODE","De huidige video niet meer lussen"],["EXIT_PICTURE_IN_PICTURE","Scherm-in-scherm afsluiten"],["FAST_FORWARD","Vooruitspoelen"],["FULL_SCREEN","Volledig scherm"],["LANGUAGE","Taal"],["LIVE","Live"],["LOOP","Lussen"],["MORE_SETTINGS","Meer instellingen"],["MULTIPLE_LANGUAGES","Meerdere talen"],["MUTE","Dempen"],["NOT_APPLICABLE","Niet van toepassing"],["OFF","Uit"],["ON","Aan"],["PAUSE","Onderbreken"],["PICTURE_IN_PICTURE","Scherm-in-scherm"],["PLAY","Afspelen"],["PLAYBACK_RATE","Afspeelsnelheid"],["RESOLUTION","Resolutie"],["REWIND","Terugspoelen"],["SEEK","Zoeken"],["SKIP_AD","Advertentie overslaan"],["SKIP_TO_LIVE","Doorgaan naar live"],["UNDETERMINED_LANGUAGE","Onbepaald"],["UNMUTE","Dempen opheffen"],["UNRECOGNIZED_LANGUAGE","Onbekend"],["VOLUME","Volume"]])),e.ya("pl",new Map([["AD_DURATION","Czas trwania reklamy"],["AD_PROGRESS","Reklama[AD_ON] z[NUM_ADS]"],["AD_TIME","Reklama: [AD_TIME]"],["AUTO_QUALITY","Automatycznie"],["BACK","Wstecz"],["CAPTIONS","Napisy"],["CAST","Przesyaj..."],["ENTER_LOOP_MODE","Odtwarzaj biecy film wptli"],["ENTER_PICTURE_IN_PICTURE","Wcz tryb obrazu wobrazie"],["EXIT_FULL_SCREEN","Zamknij peny ekran"],["EXIT_LOOP_MODE","Wycz odtwarzanie biecego filmu wptli"],["EXIT_PICTURE_IN_PICTURE","Wycz tryb obrazu wobrazie"],["FAST_FORWARD","Przewi do przodu"],["FULL_SCREEN","Peny ekran"],["LANGUAGE","Jzyk"],["LIVE","Na ywo"],["LOOP","Odtwarzaj wptli"],["MORE_SETTINGS","Wicej ustawie"],["MULTIPLE_LANGUAGES","Wiele jzykw"],["MUTE","Wycisz"],["NOT_APPLICABLE","Nie dotyczy"],["OFF","Wyczone"],["ON","Wczone"],["PAUSE","Wstrzymaj"],["PICTURE_IN_PICTURE","Obraz wobrazie"],["PLAY","Odtwrz"],["PLAYBACK_RATE","Szybko odtwarzania"],["RESOLUTION","Rozdzielczo"],["REWIND","Przewi do tyu"],["SEEK","Szukaj"],["SKIP_AD","Pomi reklam"],["SKIP_TO_LIVE","Przejd do transmisji na ywo"],["UNDETERMINED_LANGUAGE","Nie okrelono"],["UNMUTE","Wycz wyciszenie"],["UNRECOGNIZED_LANGUAGE","Nierozpoznany"],["VOLUME","Gono"]])),e.ya("pt-BR",new Map([["AD_DURATION","Durao do anncio"],["AD_PROGRESS","Anncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anncio: [AD_TIME]"],["AUTO_QUALITY","Automtica"],["BACK","Voltar"],["CAPTIONS","Legendas"],["CAST","Transmitir..."],["ENTER_LOOP_MODE","Repetir o vdeo atual"],["ENTER_PICTURE_IN_PICTURE","Entrar no modo picture-in-picture"],["EXIT_FULL_SCREEN","Sair do modo tela cheia"],["EXIT_LOOP_MODE","Parar repetio do vdeo atual"],["EXIT_PICTURE_IN_PICTURE","Sair de picture-in-picture"],["FAST_FORWARD","Avanar"],["FULL_SCREEN","Tela cheia"],["LANGUAGE","Idioma"],["LIVE","Ao vivo"],["LOOP","Repetir"],["MORE_SETTINGS","Mais definies"],["MULTIPLE_LANGUAGES","Vrios idiomas"],["MUTE","Desativar som"],["NOT_APPLICABLE","No relevante"],["OFF","Desativado"],["ON","Ativado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Reproduzir"],["PLAYBACK_RATE","Velocidade da reproduo"],["RESOLUTION","Resoluo"],["REWIND","Retroceder"],["SEEK","Procurar"],["SKIP_AD","Pular anncio"],["SKIP_TO_LIVE","Pular para transmisso ao vivo"],["UNDETERMINED_LANGUAGE","Indeterminado"],["UNMUTE","Ativar som"],["UNRECOGNIZED_LANGUAGE","No reconhecido"],["VOLUME","Volume"]])),e.ya("ru",new Map([["AD_DURATION"," "],["AD_PROGRESS"," [AD_ON]  [NUM_ADS]"],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE","  "],["ENTER_PICTURE_IN_PICTURE",'   "  "'],["EXIT_FULL_SCREEN"," "],["EXIT_LOOP_MODE","   "],["EXIT_PICTURE_IN_PICTURE",'   "  "'],["FAST_FORWARD"," "],["FULL_SCREEN"," "],["LANGUAGE",""],["LIVE"," "],["LOOP",""],["MORE_SETTINGS"," "],["MULTIPLE_LANGUAGES"," "],["MUTE"," "],["NOT_APPLICABLE",""],["OFF","."],["ON","."],["PAUSE",""],["PICTURE_IN_PICTURE","  "],["PLAY",""],["PLAYBACK_RATE"," "],["RESOLUTION",""],["REWIND"," "],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE","     "],["UNDETERMINED_LANGUAGE"," "],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE"," "],["VOLUME",""]])),e.ya("th",new Map([["AD_DURATION",""],["AD_PROGRESS"," [AD_ON]  [NUM_ADS] "],["AD_TIME",": [AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.ya("tr",new Map([["AD_DURATION","Reklam sresi"],["AD_PROGRESS","[AD_ON]/[NUM_ADS] reklam"],["AD_TIME","Reklam: [AD_TIME]"],["AUTO_QUALITY","Otomatik"],["BACK","Geri"],["CAPTIONS","Altyazlar"],["CAST","Yaynla..."],["ENTER_LOOP_MODE","Mevcut videoyu dngye al"],["ENTER_PICTURE_IN_PICTURE","Pencere iinde Pencere moduna gir"],["EXIT_FULL_SCREEN","Tam ekrandan k"],["EXIT_LOOP_MODE","Mevcut videonun dngsn durdur"],["EXIT_PICTURE_IN_PICTURE","Pencere inde Pencereden k"],["FAST_FORWARD","leri sar"],["FULL_SCREEN","Tam ekran"],["LANGUAGE","Dil"],["LIVE","Canl"],["LOOP","Dng"],["MORE_SETTINGS","Daha fazla ayar"],["MULTIPLE_LANGUAGES","Birden ok dil"],["MUTE","Sesi kapat"],["NOT_APPLICABLE","Geerli deil"],["OFF","Kapal"],["ON","Ak"],["PAUSE","Duraklat"],["PICTURE_IN_PICTURE","Pencere inde Pencere"],["PLAY","Oynat"],["PLAYBACK_RATE","alma hz"],["RESOLUTION","znrlk"],["REWIND","Geri sar"],["SEEK","Ara"],["SKIP_AD","Reklam Atla"],["SKIP_TO_LIVE","Canl yayna atla"],["UNDETERMINED_LANGUAGE","Belirsiz"],["UNMUTE","Sesi a"],["UNRECOGNIZED_LANGUAGE","Tannmayan"],["VOLUME","Ses"]])),e.ya("zh",new Map([["AD_DURATION",""],["AD_PROGRESS"," [AD_ON]/[NUM_ADS]"],["AD_TIME","[AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST",""],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.ya("zh-TW",new Map([["AD_DURATION",""],["AD_PROGRESS"," [AD_ON]/[NUM_ADS]"],["AD_TIME","[AD_TIME]"],["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_LOOP_MODE",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_LOOP_MODE",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["LOOP",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["PLAYBACK_RATE",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_AD",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),e.Ig(navigator.languages||[]),e}O("shaka.ui.Controls",J),J.prototype.isOpaque=J.prototype.dc,J.prototype.hideAdUI=J.prototype.Wg,J.prototype.showAdUI=J.prototype.uh,J.prototype.togglePiP=J.prototype.Od,J.prototype.isPiPEnabled=J.prototype.re,J.prototype.isPiPAllowed=J.prototype.qe,J.prototype.toggleFullScreen=J.prototype.Pe,J.prototype.isFullScreenEnabled=J.prototype.Qc,J.prototype.isFullScreenSupported=J.prototype.zd,J.prototype.hideSettingsMenus=J.prototype.uc,J.prototype.anySettingsMenusAreOpen=J.prototype.nd,J.prototype.setLastTouchEventTime=J.prototype.qh,J.prototype.getDisplayTime=J.prototype.Hf,J.prototype.isCastAllowed=J.prototype.Ii,J.prototype.setSeeking=J.prototype.qg,J.prototype.isSeeking=J.prototype.Oi,J.prototype.getConfig=J.prototype.Yh,J.prototype.getClientSideAdContainer=J.prototype.Xh,J.prototype.getServerSideAdContainer=J.prototype.ti,J.prototype.getControlsContainer=J.prototype.$h,J.prototype.getLocalPlayer=J.prototype.gi,J.prototype.getPlayer=J.prototype.Mc,J.prototype.getLocalVideo=J.prototype.ii,J.prototype.getVideo=J.prototype.cc,J.prototype.getVideoContainer=J.prototype.Di,J.prototype.getLocalization=J.prototype.ji,J.prototype.getCastProxy=J.prototype.Vh,J.prototype.getAd=J.prototype.getAd,J.prototype.setEnabledNativeControls=J.prototype.ph,J.prototype.setEnabledShakaControls=J.prototype.lg,J.prototype.configure=J.prototype.configure,J.prototype.loadComplete=J.prototype.Ri,J.prototype.allowCast=J.prototype.Kh,J.registerSeekBar=function(e){H1=e},J.registerElement=yt,J.prototype.destroy=J.prototype.destroy;var Rd=new Map,H1=new Ld;function Hs(e,t){ve.call(this,e,t);var n=this;this.l=this.controls.g,this.j=this.controls.h,this.i=[],this.g=st(),this.g.classList.add("shaka-overflow-menu-button"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-tooltip"),this.g.textContent="more_vert",this.parent.appendChild(this.g),this.h=q("div"),this.h.classList.add("shaka-overflow-menu"),this.h.classList.add("shaka-no-propagation"),this.h.classList.add("shaka-show-controls-on-mouse-over"),this.h.classList.add("shaka-hidden"),this.j.appendChild(this.h),KI(this),this.eventManager.o(this.localization,"locale-updated",function(){Pd(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Pd(n)}),this.eventManager.o(this.adManager,"ad-started",function(){n.ad&&n.ad.isLinear()&&ye(n.g,!1)}),this.eventManager.o(this.adManager,"ad-stopped",function(){ye(n.g,!0)}),this.eventManager.o(this.controls,"submenuopen",function(){ye(n.h,!1)}),this.eventManager.o(this.h,"touchstart",function(i){n.controls.qh(Date.now()),i.stopPropagation()}),this.eventManager.o(this.g,"click",function(){HI(n)}),Pd(this),this.ad&&this.ad.isLinear()&&ye(this.g,!1)}pe(Hs,ve),Hs.prototype.release=function(){this.j=null;for(var e=g(this.i),t=e.next();!t.done;t=e.next())t.value.release();this.i=[],ve.prototype.release.call(this)};function Fn(e,t){Nd.set(e,t)}function KI(e){for(var t=g(e.l.overflowMenuButtons),n=t.next();!n.done;n=t.next())n=n.value,Nd.get(n)?(n=Nd.get(n),e.i.push(n.create(e.h,e.controls))):Ae("Unrecognized overflow menu element requested:",n)}function HI(e){if(e.controls.nd())e.controls.uc();else{ye(e.h,!0),Bn(e.controls);var t=function(n){return n.classList.contains("shaka-hidden")==0};xp(e.h.childNodes,t)&&gr(e.h.childNodes,t)[0].focus()}}function Pd(e){e.g.ariaLabel=e.localization.resolve("MORE_SETTINGS")}O("shaka.ui.OverflowMenu",Hs),Hs.registerElement=Fn;function W1(){}W1.prototype.create=function(e,t){return new Hs(e,t)},yt("overflow_menu",new W1);var Nd=new Map;function bd(e,t){ve.call(this,e,t);var n=this;this.g=st(),this.g.classList.add("shaka-airplay-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.h=q("i"),this.h.classList.add("material-icons-round"),this.h.textContent="airplay",this.g.appendChild(this.h),I.WebKitPlaybackTargetAvailabilityEvent||this.g.classList.add("shaka-hidden"),e=q("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.j=q("span"),e.appendChild(this.j),this.i=q("span"),this.i.classList.add("shaka-current-selection-span"),e.appendChild(this.i),this.g.appendChild(e),this.parent.appendChild(this.g),_d(this),X1(this),this.eventManager.o(this.localization,"locale-updated",function(){_d(n)}),this.eventManager.o(this.localization,"locale-changed",function(){_d(n)}),this.eventManager.o(this.g,"click",function(){n.controls.cc().webkitShowPlaybackTargetPicker()}),e=this.controls.cc(),this.eventManager.o(e,"webkitplaybacktargetavailabilitychanged",function(i){var r=n.player.ie()==wt;ye(n.g,i.availability=="available"&&r)}),this.eventManager.o(e,"webkitcurrentplaybacktargetiswirelesschanged",function(){X1(n)})}pe(bd,ve);function X1(e){var t=e.controls.cc();e.g.ariaPressed=t&&t.webkitCurrentPlaybackTargetIsWireless?"true":"false"}function _d(e){e.g.ariaLabel=e.localization.resolve("AIRPLAY"),e.j.textContent=e.localization.resolve("AIRPLAY")}O("shaka.ui.AirPlayButton",bd);function Ud(){}Ud.prototype.create=function(e,t){return new bd(e,t)},Fn("airplay",new Ud),yt("airplay",new Ud);function Lt(e,t,n){this.i=e,this.j=t,this.h=ul(this),t.dataset.shakaPlayerContainer="",t.ui=this,this.Nf()&&t.classList.add("shaka-mobile"),this.g=new J(e,t,n,this.h),this.configure({}),n.controls||e.rg(t),t.ui=this,n.ui=this}h=Lt.prototype,h.destroy=function(){var e=this;return k(function(t){if(t.g==1)return e.g?y(t,e.g.destroy(),2):t.F(2);if(t.g!=4)return e.g=null,e.i?y(t,e.i.destroy(),4):t.F(4);e.i=null,K(t)})},h.Nf=function(){return/(?:iPhone|iPad|iPod|Android)/.test(navigator.userAgent)?!0:Ko()&&1<navigator.maxTouchPoints},h.getConfiguration=function(){var e=ul(this);return us(e,this.h,ul(this),{},""),e},h.configure=function(e,t){arguments.length==2&&typeof e=="string"&&(e=Ku(e,t)),us(this.h,e,ul(this),{},""),this.h.castReceiverAppId&&!this.h.overflowMenuButtons.includes("cast")&&this.h.overflowMenuButtons.push("cast"),this.g.configure(this.h),this.g.dispatchEvent(new X("uiupdated"))},h.Zh=function(){return this.g},h.tj=function(e){this.g.lg(e)};function ul(e){var t={controlPanelElements:"play_pause time_and_duration spacer mute volume fullscreen overflow_menu".split(" "),overflowMenuButtons:"captions quality language picture_in_picture cast playback_rate".split(" "),statisticsList:"width height corruptedFrames decodedFrames droppedFrames drmTimeSeconds licenseTime liveLatency loadLatency bufferingTime manifestTimeSeconds estimatedBandwidth streamBandwidth maxSegmentDuration pauseTime playTime completionPercent".split(" "),contextMenuElements:["loop","picture_in_picture","statistics"],playbackRates:[.5,.75,1,1.25,1.5,1.75,2],fastForwardRates:[2,4,8,1],rewindRates:[-1,-2,-4,-8],addSeekBar:!0,addBigPlayButton:!1,customContextMenu:!1,castReceiverAppId:"",castAndroidReceiverCompatible:!1,clearBufferOnQualityChange:!0,showUnbufferedStart:!1,seekBarColors:{base:"rgba(255, 255, 255, 0.3)",buffered:"rgba(255, 255, 255, 0.54)",played:"rgb(255, 255, 255)",adBreaks:"rgb(255, 204, 0)"},volumeBarColors:{base:"rgba(255, 255, 255, 0.54)",level:"rgb(255, 255, 255)"},trackLabelFormat:jd,fadeDelay:0,doubleClickForFullscreen:!0,singleClickForPlayAndPause:!0,enableKeyboardPlaybackControls:!0,enableFullscreenOnRotation:!0,forceLandscapeOnFullscreen:!0,enableTooltips:!1,keyboardSeekDistance:5,keyboardLargeSeekDistance:60,fullScreenElement:e.j,preferDocumentPictureInPicture:!0,showAudioChannelCountVariants:!0,seekOnTaps:!0,tapSeekDistance:10};return"remote"in HTMLMediaElement.prototype?t.overflowMenuButtons.push("remote"):I.WebKitPlaybackTargetAvailabilityEvent&&t.overflowMenuButtons.push("airplay"),e.Nf()&&(t.addBigPlayButton=!0,t.controlPanelElements=t.controlPanelElements.filter(function(n){return n!="play_pause"&&n!="volume"})),t}function Y1(){var e,t,n,i,r,o,s,u,a,l,c,d,f,p,m,v,E,w,T,x,S;return k(function(C){switch(C.g){case 1:if(uy(),!Z0())return Od("shaka-ui-load-failed",$1),C.return();if(e=document.querySelectorAll("[data-shaka-player-container]"),t=document.querySelectorAll("[data-shaka-player]"),n=document.querySelectorAll("[data-shaka-player-canvas]"),!t.length&&!e.length){C.F(2);break}if(t.length&&!e.length){for(i=g(t),r=i.next();!r.done;r=i.next())if(o=r.value,!o.ui){for(s=document.createElement("div"),u=o.parentElement,u.replaceChild(s,o),s.appendChild(o),a=null,l=g(n),c=l.next();!c.done;c=l.next())if(d=c.value,d.parentElement==s){a=d;break}a||(a=document.createElement("canvas"),a.classList.add("shaka-canvas-container"),s.appendChild(a)),q1(s,o,a)}C.F(2);break}f=g(e),p=f.next();case 4:if(p.done){C.F(2);break}if(m=p.value,m.ui){C.F(5);break}for(v=null,E=g(t),r=E.next();!r.done;r=E.next())if(w=r.value,w.parentElement==m){v=w;break}for(v||(v=document.createElement("video"),v.setAttribute("playsinline",""),m.appendChild(v)),T=null,x=g(n),c=x.next();!c.done;c=x.next())if(S=c.value,S.parentElement==m){T=S;break}return T||(T=document.createElement("canvas"),T.classList.add("shaka-canvas-container"),m.appendChild(T)),le(C,7),y(C,q1(m,v,T),9);case 9:Ee(C,5);break;case 7:return ce(C),Od("shaka-ui-load-failed",Q1),C.return();case 5:p=f.next(),C.F(4);break;case 2:Od("shaka-ui-loaded"),K(C)}})}function Od(e,t){var n=null;t!=null&&(n={reasonCode:t}),e=new CustomEvent(e,{detail:n}),document.dispatchEvent(e)}function q1(e,t,n){var i,r,o,s,u,a,l,c,d;return k(function(f){switch(f.g){case 1:i=new _,r=new Lt(i,e,t),i.Eg(n),o="",s=!1,e.dataset&&e.dataset.shakaPlayerCastReceiverId?(o=e.dataset.shakaPlayerCastReceiverId,s=e.dataset.shakaPlayerCastAndroidReceiverCompatible==="true"):t.dataset&&t.dataset.shakaPlayerCastReceiverId&&(o=t.dataset.shakaPlayerCastReceiverId,s=t.dataset.shakaPlayerCastAndroidReceiverCompatible==="true"),o.length&&r.configure({castReceiverAppId:o,castAndroidReceiverCompatible:s}),t.controls&&r.g.ph(!0),(u=t.getAttribute("src"))&&(a=document.createElement("source"),a.setAttribute("src",u),t.appendChild(a),t.removeAttribute("src")),l=g(t.querySelectorAll("source")),c=l.next();case 2:if(c.done){f.F(4);break}return d=c.value,le(f,5),y(f,r.g.Mc().load(d.getAttribute("src")),7);case 7:f.F(4);break;case 5:ce(f);case 3:c=l.next(),f.F(2);break;case 4:return y(f,i.Gc(t),0)}})}O("shaka.ui.Overlay",Lt),Lt.prototype.setEnabled=Lt.prototype.tj,Lt.prototype.getControls=Lt.prototype.Zh,Lt.prototype.configure=Lt.prototype.configure,Lt.prototype.getConfiguration=Lt.prototype.getConfiguration,Lt.prototype.isMobile=Lt.prototype.Nf,Lt.prototype.destroy=Lt.prototype.destroy;var jd=0;Lt.TrackLabelFormat={LANGUAGE:jd,ROLE:1,LANGUAGE_ROLE:2,LABEL:3};var $1=0,Q1=1;Lt.FailReasonCode={NO_BROWSER_SUPPORT:$1,PLAYER_FAILED_TO_LOAD:Q1},document.readyState=="complete"?k(function(e){if(e.g==1)return y(e,Promise.resolve(),2);Y1(),K(e)}):I.addEventListener("load",Y1);function J1(e,t,n,i,r,o,s,u){function a(b){var P="";return 5<=b&&(P=" "+o.resolve("SURROUND")),P}function l(b,P,N,U){return b=[b,P],u&&U!=null&&b.push(U),N&&s==3&&b.push(N),b.join(": ")}function c(b){return b.type=="variant"?b.audioRoles?b.audioRoles.join(", "):void 0:b.roles.join(", ")}var d=e.find(function(b){return b.active==1}),f=P1(t);ki(t),t.appendChild(f),f=new Map;for(var p=g(e),m=p.next();!m.done;m=p.next())m=m.value,f.has(m.language)||f.set(m.language,new Set),f.get(m.language).add(c(m));for(f=new Set,d=d?l(d.language,c(d),d.label,d.channelsCount):"",p={},e=g(e),m=e.next();!m.done;p={vb:p.vb},m=e.next()){p.vb=m.value,m=p.vb.language;var v=p.vb.forced,E=o.resolve("SUBTITLE_FORCED"),w=c(p.vb),T=p.vb.label,x=p.vb.channelsCount,S=l(m,w,T,x);if(!f.has(S)){f.add(S);var C=st();C.addEventListener("click",function(b){return function(){n(b.vb)}}(p));var D=q("span");switch(C.appendChild(D),D.textContent=WI(m,o),s){case jd:u&&(D.textContent+=a(x)),v&&(D.textContent+=" ("+E+")");break;case 1:u&&(D.textContent+=a(x)),w?D.textContent=w:(Ae("Track #"+p.vb.id+" does not have a role, but the UI is configured to only show role."),D.textContent="?"),v&&(D.textContent+=" ("+E+")");break;case 2:u&&(D.textContent+=a(x)),w&&(D.textContent+=": "+w),v&&(D.textContent+=" ("+E+")");break;case 3:T?D.textContent=T:(Ae("Track #"+p.vb.id+" does not have a label, but the UI is configured to only show labels."),D.textContent="?")}i&&S==d&&(C.appendChild(mo()),D.classList.add("shaka-chosen-item"),C.ariaSelected="true",r.textContent=D.textContent),t.appendChild(C)}}}function WI(e,t){if(!e&&!t)return"";switch(e){case"mul":return t.resolve("MULTIPLE_LANGUAGES");case"und":return t.resolve("UNDETERMINED_LANGUAGE");case"zxx":return t.resolve("NOT_APPLICABLE")}var n=vr(e);return e in lr?lr[e].A:n in lr?lr[n].A+" ("+e+")":t.resolve("UNRECOGNIZED_LANGUAGE")+" ("+e+")"}function qn(e,t,n){ve.call(this,e,t);var i=this;XI(this,n),YI(this),qI(this),this.eventManager.o(this.button,"click",function(){i.menu.classList.contains("shaka-hidden")?(i.controls.dispatchEvent(new X("submenuopen")),ye(i.menu,!0),Fs(i.menu)):ye(i.menu,!1)})}pe(qn,ve);function XI(e,t){e.button=st(),e.button.classList.add("shaka-overflow-button"),e.icon=q("i"),e.icon.classList.add("material-icons-round"),e.icon.textContent=t,e.button.appendChild(e.icon),t=q("label"),t.classList.add("shaka-overflow-button-label"),t.classList.add("shaka-overflow-menu-only"),e.nameSpan=q("span"),t.appendChild(e.nameSpan),e.currentSelection=q("span"),e.currentSelection.classList.add("shaka-current-selection-span"),t.appendChild(e.currentSelection),e.button.appendChild(t),e.parent.appendChild(e.button)}function YI(e){e.menu=q("div"),e.menu.classList.add("shaka-no-propagation"),e.menu.classList.add("shaka-show-controls-on-mouse-over"),e.menu.classList.add("shaka-settings-menu"),e.menu.classList.add("shaka-hidden"),e.backButton=st(),e.backButton.classList.add("shaka-back-to-overflow-button"),e.menu.appendChild(e.backButton),e.eventManager.o(e.backButton,"click",function(){e.controls.uc()});var t=q("i");t.classList.add("material-icons-round"),t.textContent="close",e.backButton.appendChild(t),e.backSpan=q("span"),e.backButton.appendChild(e.backSpan),e.controls.h.appendChild(e.menu)}function qI(e){e.parent.classList.contains("shaka-overflow-menu")&&(e.backButton.firstChild.textContent="arrow_back",e.eventManager.o(e.backButton,"click",function(){function t(n){return n.classList.contains("shaka-hidden")==0}ye(e.parent,!0),xp(e.parent.childNodes,t)&&gr(e.parent.childNodes,t)[0].focus(),Bn(e.controls)}))}O("shaka.ui.SettingsMenu",qn);function Bd(e,t){qn.call(this,e,t,"language");var n=this;this.button.classList.add("shaka-language-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-audio-languages"),this.eventManager.o(this.localization,"locale-updated",function(){Gd(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Gd(n)}),this.eventManager.o(this.player,"trackschanged",function(){var i=0<n.player.mb().length;ye(n.button,i),Fd(n)}),this.eventManager.o(this.player,"variantchanged",function(){Fd(n)}),Gd(this),Fd(this)}pe(Bd,qn);function Fd(e){var t=e.player.mb();J1(t,e.menu,function(n){n.channelsCount&&e.controls.g.showAudioChannelCountVariants?e.player.Le(n.language,n.roles[0],n.channelsCount):e.player.Le(n.language,n.roles[0])},!0,e.currentSelection,e.localization,e.controls.g.trackLabelFormat,e.controls.g.showAudioChannelCountVariants),Fs(e.menu),e.controls.dispatchEvent(new X("languageselectionupdated")),e.button.setAttribute("shaka-status",e.currentSelection.innerText),ye(e.button,2<e.menu.getElementsByTagName("button").length)}function Gd(e){e.backButton.ariaLabel=e.localization.resolve("BACK"),e.button.ariaLabel=e.localization.resolve("LANGUAGE"),e.nameSpan.textContent=e.localization.resolve("LANGUAGE"),e.backSpan.textContent=e.localization.resolve("LANGUAGE")}O("shaka.ui.AudioLanguageSelection",Bd);function Vd(){}Vd.prototype.create=function(e,t){return new Bd(e,t)},Fn("language",new Vd),yt("language",new Vd);function zd(e,t){ve.call(this,e,t);var n=this;this.h=this.controls.C,this.g=st(),this.g.classList.add("shaka-cast-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.i=q("i"),this.i.classList.add("material-icons-round"),this.i.textContent="cast",this.g.appendChild(this.i),e=q("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.l=q("span"),e.appendChild(this.l),this.j=q("span"),this.j.classList.add("shaka-current-selection-span"),e.appendChild(this.j),this.g.appendChild(e),this.parent.appendChild(this.g),Kd(this),Z1(this),this.eventManager.o(this.localization,"locale-updated",function(){Kd(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Kd(n)}),this.eventManager.o(this.g,"click",function(){$I(n)}),this.eventManager.o(this.controls,"caststatuschanged",function(){Z1(n)})}pe(zd,ve);function $I(e){var t;k(function(n){if(n.g==1)return e.h.Ba()?(e.h.vh(),n.F(0)):(le(n,3),e.g.disabled=!0,y(n,e.h.cast(),5));if(n.g!=3)return e.g.disabled=!1,Ee(n,0);t=ce(n),e.g.disabled=!1,t.code!=8004&&e.controls.dispatchEvent(new X("error",new Map().set("detail",t))),K(n)})}function Z1(e){var t=e.h.kf()&&e.controls.ua,n=e.h.Ba();ye(e.g,t),e.i.textContent=n?"cast_connected":"cast",t&&(e.g.ariaPressed=n?"true":"false"),eE(e)}function eE(e){e.j.textContent=e.h.Ba()?e.h.Je():e.localization.resolve("OFF")}function Kd(e){e.g.ariaLabel=e.localization.resolve("CAST"),e.l.textContent=e.localization.resolve("CAST"),eE(e)}O("shaka.ui.CastButton",zd);function Hd(){}Hd.prototype.create=function(e,t){return new zd(e,t)},Fn("cast",new Hd),yt("cast",new Hd);function Wd(e,t){ve.call(this,e,t);var n=this;this.g=st(),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-fast-forward-button"),this.g.classList.add("shaka-tooltip-status"),this.g.setAttribute("shaka-status","1x"),this.g.textContent="fast_forward",this.parent.appendChild(this.g),Xd(this),this.h=this.controls.g.fastForwardRates,this.eventManager.o(this.localization,"locale-updated",function(){Xd(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Xd(n)}),this.eventManager.o(this.g,"click",function(){if(n.video.duration){var i=n.h.indexOf(n.player.Nb())+1;i=i!=n.h.length?n.h[i]:n.h[0],n.player.Pd(i),n.g.setAttribute("shaka-status",i+"x")}})}pe(Wd,ve);function Xd(e){e.g.ariaLabel=e.localization.resolve("FAST_FORWARD")}O("shaka.ui.FastForwardButton",Wd);function tE(){}tE.prototype.create=function(e,t){return new Wd(e,t)},yt("fast_forward",new tE);function Yd(e,t){ve.call(this,e,t);var n=this;this.h=this.controls.s,this.g=st(),this.g.classList.add("shaka-fullscreen-button"),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-tooltip"),qd(this),this.g.textContent="fullscreen",this.parent.appendChild(this.g),al(this),this.eventManager.o(this.localization,"locale-updated",function(){al(n)}),this.eventManager.o(this.localization,"locale-changed",function(){al(n)}),this.eventManager.o(this.g,"click",function(){return k(function(i){return y(i,n.controls.Pe(),0)})}),this.eventManager.o(document,"fullscreenchange",function(){n.g.textContent=n.controls.Qc()?"fullscreen_exit":"fullscreen",al(n)}),this.eventManager.o(this.h,"loadedmetadata",function(){qd(n)}),this.eventManager.o(this.h,"loadeddata",function(){qd(n)})}pe(Yd,ve);function qd(e){e.controls.zd()?e.g.classList.remove("shaka-hidden"):e.g.classList.add("shaka-hidden")}function al(e){e.g.ariaLabel=e.localization.resolve(e.controls.Qc()?"EXIT_FULL_SCREEN":"FULL_SCREEN")}O("shaka.ui.FullscreenButton",Yd);function nE(){}nE.prototype.create=function(e,t){return new Yd(e,t)},yt("fullscreen",new nE);function ll(e,t){ve.call(this,e,t);var n=this;this.g=st(),this.g.classList.add("shaka-loop-button"),this.g.classList.add("shaka-tooltip"),this.i=q("i"),this.i.classList.add("material-icons-round"),this.i.textContent="repeat",this.g.appendChild(this.i),e=q("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.j=q("span"),this.j.textContent=this.localization.resolve("LOOP"),e.appendChild(this.j),this.l=q("span"),this.l.classList.add("shaka-current-selection-span"),e.appendChild(this.l),this.g.appendChild(e),cl(this),this.parent.appendChild(this.g),this.eventManager.o(this.localization,"locale-updated",function(){cl(n)}),this.eventManager.o(this.localization,"locale-changed",function(){cl(n)}),this.eventManager.o(this.g,"click",function(){n.video.loop=!n.video.loop,n.h.Qa(),n.h.za(1)}),this.m=this.video.loop,this.h=new fe(function(){n.m!=n.video.loop&&(cl(n),n.m=n.video.loop)}),this.h.za(1)}pe(ll,ve),ll.prototype.release=function(){this.h.stop(),this.h=null,ve.prototype.release.call(this)};function cl(e){e.j.textContent=e.localization.resolve("LOOP"),e.l.textContent=e.localization.resolve(e.video.loop?"ON":"OFF"),e.i.textContent=e.video.loop?"repeat_on":"repeat",e.g.ariaLabel=e.localization.resolve(e.video.loop?"EXIT_LOOP_MODE":"ENTER_LOOP_MODE")}O("shaka.ui.LoopButton",ll);function hl(){}hl.prototype.create=function(e,t){return new ll(e,t)},Fn("loop",new hl),yt("loop",new hl),rl("loop",new hl);function $d(e,t){ve.call(this,e,t);var n=this;this.g=st(),this.g.classList.add("shaka-mute-button"),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-tooltip"),this.parent.appendChild(this.g),cr(this),Ws(this),this.eventManager.o(this.localization,"locale-updated",function(){cr(n)}),this.eventManager.o(this.localization,"locale-changed",function(){cr(n)}),this.eventManager.o(this.g,"click",function(){n.ad&&n.ad.isLinear()?n.ad.setMuted(!n.ad.isMuted()):n.video.muted=!n.video.muted}),this.eventManager.o(this.video,"volumechange",function(){cr(n),Ws(n)}),this.eventManager.o(this.adManager,"ad-volume-changed",function(){cr(n),Ws(n)}),this.eventManager.o(this.adManager,"ad-muted",function(){cr(n),Ws(n)}),this.eventManager.o(this.adManager,"ad-stopped",function(){n.ad=null,cr(n),Ws(n)})}pe($d,ve);function cr(e){var t=e.ad?e.ad.isMuted()?"UNMUTE":"MUTE":e.video.muted?"UNMUTE":"MUTE";e.g.ariaLabel=e.localization.resolve(t)}function Ws(e){var t=e.ad?e.ad.isMuted()?"volume_off":"volume_up":e.video.muted?"volume_off":"volume_up";e.g.textContent=t}O("shaka.ui.MuteButton",$d);function iE(){}iE.prototype.create=function(e,t){return new $d(e,t)},yt("mute",new iE);function Qd(e,t){ve.call(this,e,t);var n=this;this.l=this.controls.s,this.g=st(),this.g.classList.add("shaka-pip-button"),this.g.classList.add("shaka-tooltip"),this.i=q("i"),this.i.classList.add("material-icons-round"),this.i.textContent="picture_in_picture_alt",this.g.appendChild(this.i),e=q("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.j=q("span"),this.j.textContent=this.localization.resolve("PICTURE_IN_PICTURE"),e.appendChild(this.j),this.h=q("span"),this.h.classList.add("shaka-current-selection-span"),e.appendChild(this.h),this.g.appendChild(e),Jd(this),this.parent.appendChild(this.g),this.controls.qe()||ye(this.g,!1),this.eventManager.o(this.localization,"locale-updated",function(){Jd(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Jd(n)}),this.eventManager.o(this.g,"click",function(){n.controls.Od()}),this.eventManager.o(this.l,"enterpictureinpicture",function(){rE(n)}),this.eventManager.o(this.l,"leavepictureinpicture",function(){oE(n)}),this.eventManager.o(this.controls,"caststatuschanged",function(){sE(n)}),this.eventManager.o(this.player,"trackschanged",function(){sE(n)}),"documentPictureInPicture"in I&&this.eventManager.o(I.documentPictureInPicture,"enter",function(i){rE(n),n.eventManager.na(i.window,"pagehide",function(){oE(n)})})}pe(Qd,ve);function rE(e){e.i.textContent="branding_watermark",e.g.ariaLabel=e.localization.resolve("EXIT_PICTURE_IN_PICTURE"),e.h.textContent=e.localization.resolve("ON")}function oE(e){e.i.textContent="picture_in_picture_alt",e.g.ariaLabel=e.localization.resolve("ENTER_PICTURE_IN_PICTURE"),e.h.textContent=e.localization.resolve("OFF")}function Jd(e){e.j.textContent=e.localization.resolve("PICTURE_IN_PICTURE");var t=e.controls.re();e.g.ariaLabel=e.localization.resolve(t?"EXIT_PICTURE_IN_PICTURE":"ENTER_PICTURE_IN_PICTURE"),e.h.textContent=e.localization.resolve(t?"ON":"OFF")}function sE(e){k(function(t){return e.controls.qe()&&(!e.player||!e.player.Pc())?(ye(e.g,!0),t.F(0)):(ye(e.g,!1),e.controls.re()?y(t,e.controls.Od(),0):t.F(0))})}O("shaka.ui.PipButton",Qd);function dl(){}dl.prototype.create=function(e,t){return new Qd(e,t)},Fn("picture_in_picture",new dl),yt("picture_in_picture",new dl),rl("picture_in_picture",new dl);function Zd(e,t){qn.call(this,e,t,"slow_motion_video");var n=this;this.button.classList.add("shaka-playbackrate-button"),this.menu.classList.add("shaka-playback-rates"),this.button.classList.add("shaka-tooltip-status"),this.eventManager.o(this.localization,"locale-updated",function(){ep(n)}),this.eventManager.o(this.localization,"locale-changed",function(){ep(n)}),this.eventManager.o(this.player,"loaded",function(){tp(n,n.player.Nb())}),this.eventManager.o(this.player,"ratechange",function(){tp(n,n.player.Nb())}),this.g=new Map(this.controls.g.playbackRates.map(function(i){return[i+"x",i]})),ep(this),QI(this),tp(this,this.player.Nb())}pe(Zd,qn);function ep(e){e.backButton.ariaLabel=e.localization.resolve("BACK"),e.button.ariaLabel=e.localization.resolve("PLAYBACK_RATE"),e.nameSpan.textContent=e.localization.resolve("PLAYBACK_RATE"),e.backSpan.textContent=e.localization.resolve("PLAYBACK_RATE")}function tp(e,t){var n=Sd(e.menu,"material-icons-round shaka-chosen-item");if(n){var i=n.parentElement;i.removeAttribute("aria-selected"),i.getElementsByTagName("span")[0].classList.remove("shaka-chosen-item"),i.removeChild(n)}(n=Array.from(e.menu.querySelectorAll("span")).find(function(r){return e.g.get(r.textContent)==t}))&&(i=n.parentElement,i.appendChild(mo()),i.ariaSelected="true",n.classList.add("shaka-chosen-item")),e.currentSelection.textContent=t+"x",e.button.setAttribute("shaka-status",t+"x")}function QI(e){for(var t={},n=g(e.g.keys()),i=n.next();!i.done;t={cd:t.cd},i=n.next()){t.cd=i.value,i=st();var r=q("span");r.textContent=t.cd,i.appendChild(r),e.eventManager.o(i,"click",function(o){return function(){e.video.playbackRate=e.g.get(o.cd),e.video.defaultPlaybackRate=e.g.get(o.cd)}}(t)),e.menu.appendChild(i)}Fs(e.menu)}O("shaka.ui.PlaybackRateSelection",Zd);function np(){}np.prototype.create=function(e,t){return new Zd(e,t)},Fn("playback_rate",new np),yt("playback_rate",new np);function ip(e,t){ve.call(this,e,t);var n=this;this.g=st(),this.g.classList.add("shaka-current-time"),pl(this,"0:00"),this.parent.appendChild(this.g),this.eventManager.o(this.g,"click",function(){n.player.R()&&(n.video.currentTime=n.player.Ha().end)}),this.eventManager.o(this.controls,"timeandseekrangeupdated",function(){var i=n.controls.W,r=n.controls.Hf(),o=n.player.Ha(),s=o.end-o.start;n.player.R()?(r=Math.max(0,Math.floor(o.end-r)),s=3600<=s,1<=r||i?(pl(n,"- "+vo(r,s)),n.g.disabled=!1):(pl(n,n.localization.resolve("LIVE")),n.g.disabled=!0)):(i=3600<=s,r=vo(Math.max(0,r-o.start),i),s&&(r+=" / "+vo(s,i)),pl(n,r),n.g.disabled=!0)}),this.eventManager.o(this.player,"trackschanged",function(){n.player.R()&&(n.g.ariaLabel=n.localization.resolve("SKIP_TO_LIVE"))})}pe(ip,ve);function pl(e,t){t!=e.g.textContent&&(e.g.textContent=t)}O("shaka.ui.PresentationTimeTracker",ip);function uE(){}uE.prototype.create=function(e,t){return new ip(e,t)},yt("time_and_duration",new uE);function fl(e,t){ve.call(this,e,t);var n=this;this.g=st(),this.g.classList.add("shaka-remote-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.i=q("i"),this.i.classList.add("material-icons-round"),e="cast",(t=kr())&&13<=t&&(e="airplay"),this.i.textContent=e,this.g.appendChild(this.i),e=q("label"),e.classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.l=q("span"),e.appendChild(this.l),this.j=q("span"),this.j.classList.add("shaka-current-selection-span"),e.appendChild(this.j),this.g.appendChild(e),this.parent.appendChild(this.g),this.h=-1,rp(this),ye(this.g,!1),!this.video.remote||this.video.disableRemotePlayback?this.g.classList.add("shaka-hidden"):(this.eventManager.o(this.localization,"locale-updated",function(){rp(n)}),this.eventManager.o(this.localization,"locale-changed",function(){rp(n)}),this.eventManager.o(this.controls,"caststatuschanged",function(){wo(n)}),this.eventManager.o(this.g,"click",function(){n.video.remote.prompt()}),this.eventManager.o(this.video.remote,"connect",function(){wo(n)}),this.eventManager.o(this.video.remote,"connecting",function(){wo(n)}),this.eventManager.o(this.video.remote,"disconnect",function(){wo(n)}),this.eventManager.o(this.player,"loaded",function(){wo(n)}),wo(this))}pe(fl,ve),fl.prototype.release=function(){this.video.remote&&this.h!=-1&&this.video.remote.cancelWatchAvailability(this.h).catch(function(){}),ve.prototype.release.call(this)};function wo(e){var t,n;k(function(i){switch(i.g){case 1:if(e.controls.C.kf()&&e.controls.ua){ye(e.g,!1),e.h!=-1&&(e.video.remote.cancelWatchAvailability(e.h),e.h=-1),i.F(0);break}if(e.video.remote.state=="disconnected"){if(t=function(r){e.player?ye(e.g,e.player.ie()==wt&&r):ye(e.g,!1)},le(i,7),e.h==-1){i.F(9);break}return y(i,e.video.remote.cancelWatchAvailability(e.h),10)}if(e.h==-1){i.F(0);break}return y(i,e.video.remote.cancelWatchAvailability(e.h),6);case 6:e.h=-1,i.F(0);break;case 10:e.h=-1;case 9:Ee(i,8);break;case 7:ce(i);case 8:return le(i,11),y(i,e.video.remote.watchAvailability(t),13);case 13:n=i.h,e.h=n,Ee(i,0);break;case 11:ce(i),t(!0),K(i)}})}function rp(e){var t=e.localization.resolve("CAST"),n=kr();n&&13<=n&&(t=e.localization.resolve("AIRPLAY")),e.g.ariaLabel=t,e.l.textContent=t}O("shaka.ui.RemoteButton",fl);function op(){}op.prototype.create=function(e,t){return new fl(e,t)},Fn("remote",new op),yt("remote",new op);function sp(e,t){qn.call(this,e,t,"settings");var n=this;this.button.classList.add("shaka-resolution-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-resolutions"),this.eventManager.o(this.localization,"locale-updated",function(){up(n)}),this.eventManager.o(this.localization,"locale-changed",function(){up(n)}),this.eventManager.o(this.player,"variantchanged",function(){Xs(n)}),this.eventManager.o(this.player,"trackschanged",function(){Xs(n)}),this.eventManager.o(this.player,"abrstatuschanged",function(){Xs(n)}),Xs(this)}pe(sp,qn);function Xs(e){var t=[];e.player.ie()!=wt&&(t=e.player.mb());var n=t.find(function(a){return a.active});n&&(t=t.filter(function(a){return a.language==n.language&&a.channelsCount==n.channelsCount})),t=t.filter(function(a,l){var c=-1;return c=e.player.Pc()?t.findIndex(function(d){return d.bandwidth==a.bandwidth}):t.findIndex(function(d){return d.height==a.height&&d.frameRate==a.frameRate&&d.hdr==a.hdr&&d.videoLayout==a.videoLayout}),c==l}),e.player.Pc()?t.sort(function(a,l){return l.bandwidth-a.bandwidth}):t.sort(function(a,l){return l.height-a.height});var i=P1(e.menu);ki(e.menu),e.menu.appendChild(i),i=e.player.getConfiguration().abr.enabled;for(var r={},o=g(t),s=o.next();!s.done;r={Hb:r.Hb},s=o.next()){r.Hb=s.value,s=st(),s.classList.add("explicit-resolution"),e.eventManager.o(s,"click",function(a){return function(){var l=a.Hb;e.player.configure({abr:{enabled:!1}}),e.player.Me(l,e.controls.g.clearBufferOnQualityChange)}}(r));var u=q("span");u.textContent=e.player.Pc()&&r.Hb.bandwidth?Math.round(r.Hb.bandwidth/1e3)+" kbits/s":r.Hb.height&&r.Hb.width?JI(r.Hb):"Unknown",s.appendChild(u),i||r.Hb!=n||(s.ariaSelected="true",s.appendChild(mo()),u.classList.add("shaka-chosen-item"),e.currentSelection.textContent=u.textContent),e.menu.appendChild(s)}r=st(),r.classList.add("shaka-enable-abr-button"),e.eventManager.o(r,"click",function(){e.player.configure({abr:{enabled:!0}}),Xs(e)}),e.g=q("span"),e.g.classList.add("shaka-auto-span"),e.g.textContent=e.localization.resolve("AUTO_QUALITY"),r.appendChild(e.g),i&&(r.ariaSelected="true",r.appendChild(mo()),e.g.classList.add("shaka-chosen-item"),e.currentSelection.textContent=e.localization.resolve("AUTO_QUALITY")),e.button.setAttribute("shaka-status",e.currentSelection.textContent),e.menu.appendChild(r),Fs(e.menu),e.controls.dispatchEvent(new X("resolutionselectionupdated")),up(e),ye(e.button,0<t.length)}function JI(e){var t=e.height||0,n=e.width||0,i=t;return n/t>16/9&&(i=Math.round(9*n/16)),t=i+"p",i==2160&&(t="4K"),(i=e.frameRate)&&(50<=i||20>=i)&&(t+=Math.round(e.frameRate)),(e.hdr=="PQ"||e.hdr=="HLG")&&(t+=" (HDR)"),e.videoLayout=="CH-STEREO"&&(t+=" (3D)"),t}function up(e){var t=e.player.Pc()?"QUALITY":"RESOLUTION";e.button.ariaLabel=e.localization.resolve(t),e.backButton.ariaLabel=e.localization.resolve(t),e.backSpan.textContent=e.localization.resolve(t),e.nameSpan.textContent=e.localization.resolve(t),e.g.textContent=e.localization.resolve("AUTO_QUALITY"),e.player.getConfiguration().abr.enabled&&(e.currentSelection.textContent=e.localization.resolve("AUTO_QUALITY"))}O("shaka.ui.ResolutionSelection",sp);function ap(){}ap.prototype.create=function(e,t){return new sp(e,t)},Fn("quality",new ap),yt("quality",new ap);function lp(e,t){ve.call(this,e,t);var n=this;this.g=st(),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-rewind-button"),this.g.classList.add("shaka-tooltip-status"),this.g.setAttribute("shaka-status",this.localization.resolve("OFF")),this.g.textContent="fast_rewind",this.parent.appendChild(this.g),cp(this),this.h=this.controls.g.rewindRates,this.eventManager.o(this.localization,"locale-updated",function(){cp(n)}),this.eventManager.o(this.localization,"locale-changed",function(){cp(n)}),this.eventManager.o(this.g,"click",function(){if(n.video.duration){var i=n.h.indexOf(n.player.Nb())+1;i=i!=n.h.length?n.h[i]:n.h[0],n.player.Pd(i),n.g.setAttribute("shaka-status",i+"x")}})}pe(lp,ve);function cp(e){e.g.ariaLabel=e.localization.resolve("REWIND")}O("shaka.ui.RewindButton",lp);function aE(){}aE.prototype.create=function(e,t){return new lp(e,t)},yt("rewind",new aE);function hp(e,t){ve.call(this,e,t);var n=this;this.j=q("div"),this.j.classList.add("shaka-skip-ad-container"),this.parent.appendChild(this.j),this.h=q("div"),this.h.classList.add("shaka-skip-ad-counter"),ye(this.h,!1),this.j.appendChild(this.h),this.g=st(),this.g.classList.add("shaka-skip-ad-button"),this.g.disabled=!0,ye(this.g,!1),this.g.classList.add("shaka-no-propagation"),this.j.appendChild(this.g),dp(this),this.i=new fe(function(){var i=Math.round(n.ad.getTimeUntilSkippable());0<i?n.h.textContent=i:(n.i.stop(),ye(n.h,!1))}),this.eventManager.o(this.localization,"locale-updated",function(){dp(n)}),this.eventManager.o(this.localization,"locale-changed",function(){dp(n)}),this.eventManager.o(this.adManager,"ad-started",function(){lE(n)}),this.eventManager.o(this.adManager,"ad-skip-state-changed",function(){n.ad.canSkipNow()&&(n.g.disabled=!1,n.i.stop(),ye(n.h,!1))}),this.eventManager.o(this.adManager,"ad-stopped",function(){n.i.stop(),n.g.disabled=!0,ye(n.g,!1),ye(n.h,!1)}),this.eventManager.o(this.g,"click",function(){n.ad.skip()}),this.ad&&lE(this)}pe(hp,ve),hp.prototype.release=function(){this.i.stop(),this.i=null,ve.prototype.release.call(this)};function dp(e){e.g.textContent=e.localization.resolve("SKIP_AD")}function lE(e){e.ad.isSkippable()&&(ye(e.g,!0),ye(e.h,!0),e.h.textContent="",e.i.Qa(),e.i.za(.5))}O("shaka.ui.SkipAdButton",hp);function Ys(e,t){Yn.call(this,e,t),this.button.classList.add("shaka-small-play-button"),this.button.classList.add("material-icons-round"),this.button.classList.add("shaka-tooltip"),this.h(),this.g()}pe(Ys,Yn),Ys.prototype.h=function(){this.isEnded()?this.button.textContent="replay":this.button.textContent=this.isPaused()?"play_arrow":"pause"},Ys.prototype.g=function(){if(this.isEnded())this.button.ariaLabel=this.localization.resolve("REPLAY");else{var e=this.isPaused()?"PLAY":"PAUSE";this.button.ariaLabel=this.localization.resolve(e)}},O("shaka.ui.SmallPlayButton",Ys);function cE(){}cE.prototype.create=function(e,t){return new Ys(e,t)},yt("play_pause",new cE);function pp(e,t){ve.call(this,e,t),e=q("div"),e.classList.add("shaka-spacer"),e.ariaHidden="true",this.parent.appendChild(e)}pe(pp,ve),O("shaka.ui.Spacer",pp);function hE(){}hE.prototype.create=function(e,t){return new pp(e,t)},yt("spacer",new hE);function gl(e,t){function n(a){return vo(u.h[a],!1)+" (m)"}function i(a){return Math.round(u.h[a]/1e3)+" (kbits/s)"}function r(a){return u.h[a].toFixed(2)+" (s)"}function o(a){return u.h[a]+" (frames)"}function s(a){return u.h[a]+" (px)"}ve.call(this,e,t);var u=this;this.i=st(),this.i.classList.add("shaka-statistics-button"),this.j=q("i"),this.j.classList.add("material-icons-round"),this.j.textContent="insert_chart_outlined",this.i.appendChild(this.j),e=q("label"),e.classList.add("shaka-overflow-button-label"),this.s=q("span"),e.appendChild(this.s),this.m=q("span"),this.m.classList.add("shaka-current-selection-span"),e.appendChild(this.m),this.i.appendChild(e),this.parent.appendChild(this.i),this.g=q("div"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("shaka-show-controls-on-mouse-over"),this.g.classList.add("shaka-statistics-container"),this.g.classList.add("shaka-hidden"),this.controls.h.appendChild(this.g),this.D=[],this.G=["stateHistory","switchHistory"],this.h=this.player.getStats(),this.u={},this.C={width:s,height:s,completionPercent:function(a){return u.h[a]+" (%)"},bufferingTime:r,drmTimeSeconds:r,licenseTime:r,liveLatency:r,loadLatency:r,manifestTimeSeconds:r,estimatedBandwidth:i,streamBandwidth:i,maxSegmentDuration:n,pauseTime:n,playTime:n,corruptedFrames:o,decodedFrames:o,droppedFrames:o,stallsDetected:function(a){return u.h[a]+" (stalls)"},gapsJumped:function(a){return u.h[a]+" (gaps)"}},this.l=new fe(function(){u.h=u.player.getStats();for(var a=g(u.D),l=a.next();!l.done;l=a.next())l=l.value,u.u[l].textContent=u.C[l](l)}),ml(this),ZI(this),this.eventManager.o(this.localization,"locale-updated",function(){ml(u)}),this.eventManager.o(this.localization,"locale-changed",function(){ml(u)}),this.eventManager.o(this.i,"click",function(){ye(u.parent,!1),u.g.classList.contains("shaka-hidden")?(u.j.textContent="insert_chart",u.l.za(.1),ye(u.g,!0)):(u.j.textContent="insert_chart_outlined",u.l.stop(),ye(u.g,!1)),ml(u)})}pe(gl,ve);function ml(e){e.s.textContent=e.localization.resolve("STATISTICS"),e.i.ariaLabel=e.localization.resolve("STATISTICS"),e.m.textContent=e.localization.resolve(e.g.classList.contains("shaka-hidden")?"OFF":"ON")}function ZI(e){for(var t=g(e.controls.g.statisticsList),n=t.next();!n.done;n=t.next())if(n=n.value,n in e.h&&!e.G.includes(n)){var i=e.g,r=i.appendChild,o=e,s=q("div"),u=q("label");u.textContent=n+":",s.appendChild(u),u=q("span"),u.textContent=o.C[n](n),s.appendChild(u),o.u[n]=u,r.call(i,s),e.D.push(n)}else Ae("Unrecognized statistic element:",n)}gl.prototype.release=function(){this.l.stop(),this.l=null,ve.prototype.release.call(this)},O("shaka.ui.StatisticsButton",gl);function fp(){}fp.prototype.create=function(e,t){return new gl(e,t)},Fn("statistics",new fp),rl("statistics",new fp);function gp(e,t){qn.call(this,e,t,"closed_caption");var n=this;this.button.classList.add("shaka-caption-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-text-languages"),this.player&&this.player.xc()?this.button.ariaPressed="true":this.button.ariaPressed="false",eC(this),this.eventManager.o(this.localization,"locale-updated",function(){mp(n),hr(n)}),this.eventManager.o(this.localization,"locale-changed",function(){mp(n),hr(n)}),this.eventManager.o(this.player,"texttrackvisibility",function(){dE(n),hr(n)}),this.eventManager.o(this.player,"textchanged",function(){hr(n)}),this.eventManager.o(this.player,"trackschanged",function(){pE(n)}),dE(this),mp(this),hr(this),pE(this)}pe(gp,qn);function eC(e){var t=st();t.ariaSelected="true",e.menu.appendChild(t),t.appendChild(mo()),e.g=q("span"),e.g.classList.add("shaka-auto-span"),t.appendChild(e.g)}function dE(e){e.player.xc()?(e.icon.textContent="closed_caption",e.button.ariaPressed="true"):(e.icon.textContent="closed_caption_disabled",e.button.ariaPressed="false"),e.controls.dispatchEvent(new X("captionselectionupdated"))}function hr(e){var t=e.player.bc();J1(t,e.menu,function(n){return tC(e,n)},e.player.xc(),e.currentSelection,e.localization,e.controls.g.trackLabelFormat,e.controls.g.showAudioChannelCountVariants),t=st(),t.classList.add("shaka-turn-captions-off-button"),e.eventManager.o(t,"click",function(){e.player.Oe(!1),hr(e)}),t.appendChild(e.g),e.menu.appendChild(t),e.player.xc()||(t.ariaSelected="true",t.appendChild(mo()),e.g.classList.add("shaka-chosen-item"),e.currentSelection.textContent=e.localization.resolve("OFF")),e.button.setAttribute("shaka-status",e.currentSelection.textContent),Fs(e.menu),e.controls.dispatchEvent(new X("captionselectionupdated"))}function tC(e,t){return k(function(n){return e.player.jg(t),y(n,e.player.Oe(!0),0)})}function mp(e){e.button.ariaLabel=e.localization.resolve("CAPTIONS"),e.backButton.ariaLabel=e.localization.resolve("BACK"),e.nameSpan.textContent=e.localization.resolve("CAPTIONS"),e.backSpan.textContent=e.localization.resolve("CAPTIONS"),e.g.textContent=e.localization.resolve("OFF")}function pE(e){var t=0<e.player.bc().length;ye(e.button,t),hr(e)}O("shaka.ui.TextSelection",gp);function vp(){}vp.prototype.create=function(e,t){return new gp(e,t)},Fn("captions",new vp),yt("captions",new vp);function vl(e,t){ut.call(this,e,t,["shaka-volume-bar-container"],["shaka-volume-bar"]);var n=this;this.g=this.controls.g,this.setRange(0,100),this.eventManager.o(this.video,"volumechange",function(){return yp(n)}),this.eventManager.o(this.adManager,"ad-volume-changed",function(){return fE(n)}),this.eventManager.o(this.adManager,"ad-muted",function(){return fE(n)}),this.eventManager.o(this.adManager,"ad-stopped",function(){return yp(n)}),this.eventManager.o(this.localization,"locale-updated",function(){return Ep(n)}),this.eventManager.o(this.localization,"locale-changed",function(){return Ep(n)}),yp(this),Ep(this),this.ad&&this.onChange()}pe(vl,ut),vl.prototype.onChange=function(){this.ad&&this.ad.isLinear()?this.ad.setVolume(this.getValue()/100):(this.video.volume=this.getValue()/100,this.video.muted=this.video.volume==0)};function yp(e){e.video.muted?e.setValue(0):e.setValue(100*e.video.volume),gE(e)}function fE(e){var t=e.ad.getVolume();e.setValue(100*t),gE(e)}function gE(e){var t=e.g.volumeBarColors,n=["to right"];n.push(t.level+e.getValue()+"%"),n.push(t.base+e.getValue()+"%"),n.push(t.base+"100%"),e.container.style.background="linear-gradient("+n.join(",")+")"}function Ep(e){e.bar.ariaLabel=e.localization.resolve("VOLUME")}O("shaka.ui.VolumeBar",vl);function mE(){}mE.prototype.create=function(e,t){return new vl(e,t)},yt("volume",new mE)}).call(L,A,A,void 0);for(var R in L.shaka)j[R]=L.shaka[R]})()})(AE);const Tp=uC(AE);function vE(j,A){if(Tp.Player.isBrowserSupported()){const L=document.createElement("div");L.className="w-full h-full",j.replaceWith(L),L.appendChild(j);const R=new Tp.Player;R.attach(j).then(()=>{const I=new Tp.ui.Overlay(R,L,j),G={addSeekBar:!0,addBigPlayButton:!0};I.configure(G),R.load(A).then(()=>{aC(R)}).catch(H=>{console.error("Error setting up Shaka Player:",H),console.error("Failed to load video URL:",A);const h=document.createElement("div");h.textContent="Failed to load video. Please try again later.",h.style.position="absolute",h.style.top="50%",h.style.left="50%",h.style.transform="translate(-50%, -50%)",h.style.color="white",h.style.backgroundColor="rgba(0, 0, 0, 0.7)",h.style.padding="10px",h.style.borderRadius="5px",h.style.textAlign="center",L.appendChild(h)})})}else console.error("Browser not supported for Shaka Player")}function aC(j){j.configure({streaming:{rebufferingGoal:5,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!0,alwaysStreamText:!0}})}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Et(j,A,L,R){return new(L||(L=Promise))(function(I,G){function H(re){try{me(R.next(re))}catch(Z){G(Z)}}function h(re){try{me(R.throw(re))}catch(Z){G(Z)}}function me(re){var Z;re.done?I(re.value):(Z=re.value,Z instanceof L?Z:new L(function(xe){xe(Z)})).then(H,h)}me((R=R.apply(j,A||[])).next())})}class Qs{constructor(){this.listeners={}}on(A,L,R){if(this.listeners[A]||(this.listeners[A]=new Set),this.listeners[A].add(L),R==null?void 0:R.once){const I=()=>{this.un(A,I),this.un(A,L)};return this.on(A,I),I}return()=>this.un(A,L)}un(A,L){var R;(R=this.listeners[A])===null||R===void 0||R.delete(L)}once(A,L){return this.on(A,L,{once:!0})}unAll(){this.listeners={}}emit(A,...L){this.listeners[A]&&this.listeners[A].forEach(R=>R(...L))}}const yE={decode:function(j,A){return Et(this,void 0,void 0,function*(){const L=new AudioContext({sampleRate:A});return L.decodeAudioData(j).finally(()=>L.close())})},createBuffer:function(j,A){return typeof j[0]=="number"&&(j=[j]),function(L){const R=L[0];if(R.some(I=>I>1||I<-1)){const I=R.length;let G=0;for(let H=0;H<I;H++){const h=Math.abs(R[H]);h>G&&(G=h)}for(const H of L)for(let h=0;h<I;h++)H[h]/=G}}(j),{duration:A,length:j[0].length,sampleRate:j[0].length/A,numberOfChannels:j.length,getChannelData:L=>j==null?void 0:j[L],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function SE(j,A){const L=A.xmlns?document.createElementNS(A.xmlns,j):document.createElement(j);for(const[R,I]of Object.entries(A))if(R==="children")for(const[G,H]of Object.entries(A))typeof H=="string"?L.appendChild(document.createTextNode(H)):L.appendChild(SE(G,H));else R==="style"?Object.assign(L.style,I):R==="textContent"?L.textContent=I:L.setAttribute(R,I.toString());return L}function EE(j,A,L){const R=SE(j,A||{});return L==null||L.appendChild(R),R}var lC=Object.freeze({__proto__:null,createElement:EE,default:EE});const cC={fetchBlob:function(j,A,L){return Et(this,void 0,void 0,function*(){const R=yield fetch(j,L);if(R.status>=400)throw new Error(`Failed to fetch ${j}: ${R.status} (${R.statusText})`);return function(I,G){Et(this,void 0,void 0,function*(){if(!I.body||!I.headers)return;const H=I.body.getReader(),h=Number(I.headers.get("Content-Length"))||0;let me=0;const re=xe=>Et(this,void 0,void 0,function*(){me+=(xe==null?void 0:xe.length)||0;const ie=Math.round(me/h*100);G(ie)}),Z=()=>Et(this,void 0,void 0,function*(){let xe;try{xe=yield H.read()}catch{return}xe.done||(re(xe.value),yield Z())});Z()})}(R.clone(),A),R.blob()})}};class hC extends Qs{constructor(A){super(),this.isExternalMedia=!1,A.media?(this.media=A.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),A.mediaControls&&(this.media.controls=!0),A.autoplay&&(this.media.autoplay=!0),A.playbackRate!=null&&this.onMediaEvent("canplay",()=>{A.playbackRate!=null&&(this.media.playbackRate=A.playbackRate)},{once:!0})}onMediaEvent(A,L,R){return this.media.addEventListener(A,L,R),()=>this.media.removeEventListener(A,L,R)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const A=this.getSrc();A.startsWith("blob:")&&URL.revokeObjectURL(A)}canPlayType(A){return this.media.canPlayType(A)!==""}setSrc(A,L){if(this.getSrc()===A)return;this.revokeSrc();const R=L instanceof Blob&&this.canPlayType(L.type)?URL.createObjectURL(L):A;this.media.src=R}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(A){this.media=A}play(){return Et(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(A){this.media.currentTime=A}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(A){this.media.volume=A}getMuted(){return this.media.muted}setMuted(A){this.media.muted=A}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(A,L){L!=null&&(this.media.preservesPitch=L),this.media.playbackRate=A}getMediaElement(){return this.media}setSinkId(A){return this.media.setSinkId(A)}}class El extends Qs{constructor(A,L){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.options=A;const R=this.parentFromOptionsContainer(A.container);this.parent=R;const[I,G]=this.initHtml();R.appendChild(I),this.container=I,this.scrollContainer=G.querySelector(".scroll"),this.wrapper=G.querySelector(".wrapper"),this.canvasWrapper=G.querySelector(".canvases"),this.progressWrapper=G.querySelector(".progress"),this.cursor=G.querySelector(".cursor"),L&&G.appendChild(L),this.initEvents()}parentFromOptionsContainer(A){let L;if(typeof A=="string"?L=document.querySelector(A):A instanceof HTMLElement&&(L=A),!L)throw new Error("Container not found");return L}initEvents(){const A=R=>{const I=this.wrapper.getBoundingClientRect(),G=R.clientX-I.left,H=R.clientX-I.left;return[G/I.width,H/I.height]};this.wrapper.addEventListener("click",R=>{const[I,G]=A(R);this.emit("click",I,G)}),this.wrapper.addEventListener("dblclick",R=>{const[I,G]=A(R);this.emit("dblclick",I,G)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:R,scrollWidth:I,clientWidth:G}=this.scrollContainer,H=R/I,h=(R+G)/I;this.emit("scroll",H,h)});const L=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{L().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}onContainerResize(){const A=this.parent.clientWidth;A===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=A,this.reRender())}initDrag(){(function(A,L,R,I,G=3,H=0){if(!A)return()=>{};let h=()=>{};const me=re=>{if(re.button!==H)return;re.preventDefault(),re.stopPropagation();let Z=re.clientX,xe=re.clientY,ie=!1;const Fe=ke=>{ke.preventDefault(),ke.stopPropagation();const mn=ke.clientX,Vt=ke.clientY,zn=mn-Z,pe=Vt-xe;if(ie||Math.abs(zn)>G||Math.abs(pe)>G){const Ln=A.getBoundingClientRect(),{left:Qn,top:Jn}=Ln;ie||(R==null||R(Z-Qn,xe-Jn),ie=!0),L(zn,pe,mn-Qn,Vt-Jn),Z=mn,xe=Vt}},g=ke=>{if(ie){const mn=ke.clientX,Vt=ke.clientY,zn=A.getBoundingClientRect(),{left:pe,top:Ln}=zn;I==null||I(mn-pe,Vt-Ln)}h()},F=ke=>{ke.relatedTarget&&ke.relatedTarget!==document.documentElement||g(ke)},St=ke=>{ie&&(ke.stopPropagation(),ke.preventDefault())},et=ke=>{ie&&ke.preventDefault()};document.addEventListener("pointermove",Fe),document.addEventListener("pointerup",g),document.addEventListener("pointerout",F),document.addEventListener("pointercancel",F),document.addEventListener("touchmove",et,{passive:!1}),document.addEventListener("click",St,{capture:!0}),h=()=>{document.removeEventListener("pointermove",Fe),document.removeEventListener("pointerup",g),document.removeEventListener("pointerout",F),document.removeEventListener("pointercancel",F),document.removeEventListener("touchmove",et),setTimeout(()=>{document.removeEventListener("click",St,{capture:!0})},10)}};A.addEventListener("pointerdown",me)})(this.wrapper,(A,L,R)=>{this.emit("drag",Math.max(0,Math.min(1,R/this.wrapper.getBoundingClientRect().width)))},A=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,A/this.wrapper.getBoundingClientRect().width)))},A=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,A/this.wrapper.getBoundingClientRect().width)))})}getHeight(A){return A==null?128:isNaN(Number(A))?A==="auto"&&this.parent.clientHeight||128:Number(A)}initHtml(){const A=document.createElement("div"),L=A.attachShadow({mode:"open"});return L.innerHTML=`
      <style>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[A,L]}setOptions(A){if(this.options.container!==A.container){const L=this.parentFromOptionsContainer(A.container);L.appendChild(this.container),this.parent=L}A.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=A,this.reRender()}getWrapper(){return this.wrapper}getScroll(){return this.scrollContainer.scrollLeft}setScroll(A){this.scrollContainer.scrollLeft=A}setScrollPercentage(A){const{scrollWidth:L}=this.scrollContainer,R=L*A;this.setScroll(R)}destroy(){var A;this.container.remove(),(A=this.resizeObserver)===null||A===void 0||A.disconnect()}createDelay(A=10){let L,R;const I=()=>{L&&clearTimeout(L),R&&R()};return this.timeouts.push(I),()=>new Promise((G,H)=>{I(),R=H,L=setTimeout(()=>{L=void 0,R=void 0,G()},A)})}convertColorValues(A){if(!Array.isArray(A))return A||"";if(A.length<2)return A[0]||"";const L=document.createElement("canvas"),R=L.getContext("2d"),I=L.height*(window.devicePixelRatio||1),G=R.createLinearGradient(0,0,0,I),H=1/(A.length-1);return A.forEach((h,me)=>{const re=me*H;G.addColorStop(re,h)}),G}renderBarWaveform(A,L,R,I){const G=A[0],H=A[1]||A[0],h=G.length,{width:me,height:re}=R.canvas,Z=re/2,xe=window.devicePixelRatio||1,ie=L.barWidth?L.barWidth*xe:1,Fe=L.barGap?L.barGap*xe:L.barWidth?ie/2:0,g=L.barRadius||0,F=me/(ie+Fe)/h,St=g&&"roundRect"in R?"roundRect":"rect";R.beginPath();let et=0,ke=0,mn=0;for(let Vt=0;Vt<=h;Vt++){const zn=Math.round(Vt*F);if(zn>et){const Qn=Math.round(ke*Z*I),Jn=Qn+Math.round(mn*Z*I)||1;let y=Z-Qn;L.barAlign==="top"?y=0:L.barAlign==="bottom"&&(y=re-Jn),R[St](et*(ie+Fe),y,ie,Jn,g),et=zn,ke=0,mn=0}const pe=Math.abs(G[Vt]||0),Ln=Math.abs(H[Vt]||0);pe>ke&&(ke=pe),Ln>mn&&(mn=Ln)}R.fill(),R.closePath()}renderLineWaveform(A,L,R,I){const G=H=>{const h=A[H]||A[0],me=h.length,{height:re}=R.canvas,Z=re/2,xe=R.canvas.width/me;R.moveTo(0,Z);let ie=0,Fe=0;for(let g=0;g<=me;g++){const F=Math.round(g*xe);if(F>ie){const et=Z+(Math.round(Fe*Z*I)||1)*(H===0?-1:1);R.lineTo(ie,et),ie=F,Fe=0}const St=Math.abs(h[g]||0);St>Fe&&(Fe=St)}R.lineTo(ie,Z)};R.beginPath(),G(0),G(1),R.fill(),R.closePath()}renderWaveform(A,L,R){if(R.fillStyle=this.convertColorValues(L.waveColor),L.renderFunction)return void L.renderFunction(A,R);let I=L.barHeight||1;if(L.normalize){const G=Array.from(A[0]).reduce((H,h)=>Math.max(H,Math.abs(h)),0);I=G?1/G:1}L.barWidth||L.barGap||L.barAlign?this.renderBarWaveform(A,L,R,I):this.renderLineWaveform(A,L,R,I)}renderSingleCanvas(A,L,R,I,G,H,h,me){const re=window.devicePixelRatio||1,Z=document.createElement("canvas"),xe=A[0].length;Z.width=Math.round(R*(H-G)/xe),Z.height=I*re,Z.style.width=`${Math.floor(Z.width/re)}px`,Z.style.height=`${I}px`,Z.style.left=`${Math.floor(G*R/re/xe)}px`,h.appendChild(Z);const ie=Z.getContext("2d");if(this.renderWaveform(A.map(Fe=>Fe.slice(G,H)),L,ie),Z.width>0&&Z.height>0){const Fe=Z.cloneNode(),g=Fe.getContext("2d");g.drawImage(Z,0,0),g.globalCompositeOperation="source-in",g.fillStyle=this.convertColorValues(L.progressColor),g.fillRect(0,0,Z.width,Z.height),me.appendChild(Fe)}}renderChannel(A,L,R){return Et(this,void 0,void 0,function*(){const I=document.createElement("div"),G=this.getHeight(L.height);I.style.height=`${G}px`,this.canvasWrapper.style.minHeight=`${G}px`,this.canvasWrapper.appendChild(I);const H=I.cloneNode();this.progressWrapper.appendChild(H);const h=A[0].length,me=(et,ke)=>{this.renderSingleCanvas(A,L,R,G,Math.max(0,et),Math.min(ke,h),I,H)};if(!this.isScrollable)return void me(0,h);const{scrollLeft:re,scrollWidth:Z,clientWidth:xe}=this.scrollContainer,ie=h/Z;let Fe=Math.min(El.MAX_CANVAS_WIDTH,xe);if(L.barWidth||L.barGap){const et=L.barWidth||.5,ke=et+(L.barGap||et/2);Fe%ke!=0&&(Fe=Math.floor(Fe/ke)*ke)}const g=Math.floor(Math.abs(re)*ie),F=Math.floor(g+Fe*ie),St=F-g;St<=0||(me(g,F),yield Promise.all([Et(this,void 0,void 0,function*(){if(g===0)return;const et=this.createDelay();for(let ke=g;ke>=0;ke-=St)yield et(),me(Math.max(0,ke-St),ke)}),Et(this,void 0,void 0,function*(){if(F===h)return;const et=this.createDelay();for(let ke=F;ke<h;ke+=St)yield et(),me(ke,Math.min(h,ke+St))})]))})}render(A){return Et(this,void 0,void 0,function*(){this.timeouts.forEach(h=>h()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const L=window.devicePixelRatio||1,R=this.scrollContainer.clientWidth,I=Math.ceil(A.duration*(this.options.minPxPerSec||0));this.isScrollable=I>R;const G=this.options.fillParent&&!this.isScrollable,H=(G?R:I)*L;this.wrapper.style.width=G?"100%":`${I}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=A,this.emit("render");try{if(this.options.splitChannels)yield Promise.all(Array.from({length:A.numberOfChannels}).map((h,me)=>{var re;const Z=Object.assign(Object.assign({},this.options),(re=this.options.splitChannels)===null||re===void 0?void 0:re[me]);return this.renderChannel([A.getChannelData(me)],Z,H)}));else{const h=[A.getChannelData(0)];A.numberOfChannels>1&&h.push(A.getChannelData(1)),yield this.renderChannel(h,this.options,H)}}catch{return}this.emit("rendered")})}reRender(){if(!this.audioData)return;const{scrollWidth:A}=this.scrollContainer,{right:L}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&A!==this.scrollContainer.scrollWidth){const{right:R}=this.progressWrapper.getBoundingClientRect();let I=R-L;I*=2,I=I<0?Math.floor(I):Math.ceil(I),I/=2,this.scrollContainer.scrollLeft+=I}}zoom(A){this.options.minPxPerSec=A,this.reRender()}scrollIntoView(A,L=!1){const{scrollLeft:R,scrollWidth:I,clientWidth:G}=this.scrollContainer,H=A*I,h=R,me=R+G,re=G/2;if(this.isDragging)H+30>me?this.scrollContainer.scrollLeft+=30:H-30<h&&(this.scrollContainer.scrollLeft-=30);else{(H<h||H>me)&&(this.scrollContainer.scrollLeft=H-(this.options.autoCenter?re:0));const Z=H-R-re;L&&this.options.autoCenter&&Z>0&&(this.scrollContainer.scrollLeft+=Math.min(Z,10))}{const Z=this.scrollContainer.scrollLeft,xe=Z/I,ie=(Z+G)/I;this.emit("scroll",xe,ie)}}renderProgress(A,L){if(isNaN(A))return;const R=100*A;this.canvasWrapper.style.clipPath=`polygon(${R}% 0, 100% 0, 100% 100%, ${R}% 100%)`,this.progressWrapper.style.width=`${R}%`,this.cursor.style.left=`${R}%`,this.cursor.style.transform=`translateX(-${Math.round(R)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(A,L)}exportImage(A,L,R){return Et(this,void 0,void 0,function*(){const I=this.canvasWrapper.querySelectorAll("canvas");if(!I.length)throw new Error("No waveform data");if(R==="dataURL"){const G=Array.from(I).map(H=>H.toDataURL(A,L));return Promise.resolve(G)}return Promise.all(Array.from(I).map(G=>new Promise((H,h)=>{G.toBlob(me=>{me?H(me):h(new Error("Could not export image"))},A,L)})))})}}El.MAX_CANVAS_WIDTH=4e3;class dC extends Qs{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class TE extends Qs{constructor(A=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=A,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return Et(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(A){if(this.currentSrc=A,this._duration=void 0,!A)return this.buffer=null,void this.emit("emptied");fetch(A).then(L=>{if(L.status>=400)throw new Error(`Failed to fetch ${A}: ${L.status} (${L.statusText})`);return L.arrayBuffer()}).then(L=>this.currentSrc!==A?null:this.audioContext.decodeAudioData(L)).then(L=>{this.currentSrc===A&&(this.buffer=L,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var A;if(!this.paused)return;this.paused=!1,(A=this.bufferNode)===null||A===void 0||A.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let L=this.playedDuration*this._playbackRate;L>=this.duration&&(L=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,L),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var A;this.paused=!0,(A=this.bufferNode)===null||A===void 0||A.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return Et(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(A){var L,R;const I=A-this.currentTime;(L=this.bufferNode)===null||L===void 0||L.stop(this.audioContext.currentTime+I),(R=this.bufferNode)===null||R===void 0||R.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(A){return Et(this,void 0,void 0,function*(){return this.audioContext.setSinkId(A)})}get playbackRate(){return this._playbackRate}set playbackRate(A){this._playbackRate=A,this.bufferNode&&(this.bufferNode.playbackRate.value=A)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(A){const L=!this.paused;L&&this._pause(),this.playedDuration=A/this._playbackRate,L&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var A,L;return(A=this._duration)!==null&&A!==void 0?A:((L=this.buffer)===null||L===void 0?void 0:L.duration)||0}set duration(A){this._duration=A}get volume(){return this.gainNode.gain.value}set volume(A){this.gainNode.gain.value=A,this.emit("volumechange")}get muted(){return this._muted}set muted(A){this._muted!==A&&(this._muted=A,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(A){return/^(audio|video)\//.test(A)}getGainNode(){return this.gainNode}getChannelData(){const A=[];if(!this.buffer)return A;const L=this.buffer.numberOfChannels;for(let R=0;R<L;R++)A.push(this.buffer.getChannelData(R));return A}}const pC={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class $s extends hC{static create(A){return new $s(A)}constructor(A){const L=A.media||(A.backend==="WebAudio"?new TE:void 0);super({media:L,mediaControls:A.mediaControls,autoplay:A.autoplay,playbackRate:A.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.options=Object.assign({},pC,A),this.timer=new dC;const R=L?void 0:this.getMediaElement();this.renderer=new El(this.options,R),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins(),Promise.resolve().then(()=>{this.emit("init");const I=this.options.url||this.getSrc()||"";(I||this.options.peaks&&this.options.duration)&&this.load(I,this.options.peaks,this.options.duration).catch(()=>null)})}updateProgress(A=this.getCurrentTime()){return this.renderer.renderProgress(A/this.getDuration(),this.isPlaying()),A}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const A=this.updateProgress();this.emit("timeupdate",A),this.emit("audioprocess",A)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const A=this.updateProgress();this.emit("timeupdate",A)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",A=>{this.emit("error",A.error)}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(A,L)=>{this.options.interact&&(this.seekTo(A),this.emit("interaction",A*this.getDuration()),this.emit("click",A,L))}),this.renderer.on("dblclick",(A,L)=>{this.emit("dblclick",A,L)}),this.renderer.on("scroll",(A,L)=>{const R=this.getDuration();this.emit("scroll",A*R,L*R)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",A=>{this.emit("dragstart",A)}),this.renderer.on("dragend",A=>{this.emit("dragend",A)}));{let A;this.subscriptions.push(this.renderer.on("drag",L=>{if(!this.options.interact)return;let R;this.renderer.renderProgress(L),clearTimeout(A),this.isPlaying()?R=0:this.options.dragToSeek===!0?R=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(R=this.options.dragToSeek.debounceTime),A=setTimeout(()=>{this.seekTo(L)},R),this.emit("interaction",L*this.getDuration()),this.emit("drag",L)}))}}initPlugins(){var A;!((A=this.options.plugins)===null||A===void 0)&&A.length&&this.options.plugins.forEach(L=>{this.registerPlugin(L)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(A=>A()),this.mediaSubscriptions=[]}setOptions(A){this.options=Object.assign({},this.options,A),this.renderer.setOptions(this.options),A.audioRate&&this.setPlaybackRate(A.audioRate),A.mediaControls!=null&&(this.getMediaElement().controls=A.mediaControls)}registerPlugin(A){return A._init(this),this.plugins.push(A),this.subscriptions.push(A.once("destroy",()=>{this.plugins=this.plugins.filter(L=>L!==A)})),A}getWrapper(){return this.renderer.getWrapper()}getScroll(){return this.renderer.getScroll()}setScrollTime(A){const L=A/this.getDuration();this.renderer.setScrollPercentage(L)}getActivePlugins(){return this.plugins}loadAudio(A,L,R,I){return Et(this,void 0,void 0,function*(){if(this.emit("load",A),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!L&&!R){const H=h=>this.emit("loading",h);L=yield cC.fetchBlob(A,H,this.options.fetchParams)}this.setSrc(A,L);const G=I||this.getDuration()||(yield new Promise(H=>{this.onMediaEvent("loadedmetadata",()=>H(this.getDuration()),{once:!0})}));if(!A&&!L){const H=this.getMediaElement();H instanceof TE&&(H.duration=G)}if(R)this.decodedData=yE.createBuffer(R,G||0);else if(L){const H=yield L.arrayBuffer();this.decodedData=yield yE.decode(H,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(A,L,R){return Et(this,void 0,void 0,function*(){try{return yield this.loadAudio(A,void 0,L,R)}catch(I){throw this.emit("error",I),I}})}loadBlob(A,L,R){return Et(this,void 0,void 0,function*(){try{return yield this.loadAudio("blob",A,L,R)}catch(I){throw this.emit("error",I),I}})}zoom(A){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(A),this.emit("zoom",A)}getDecodedData(){return this.decodedData}exportPeaks({channels:A=2,maxLength:L=8e3,precision:R=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const I=Math.min(A,this.decodedData.numberOfChannels),G=[];for(let H=0;H<I;H++){const h=this.decodedData.getChannelData(H),me=[],re=Math.round(h.length/L);for(let Z=0;Z<L;Z++){const xe=h.slice(Z*re,(Z+1)*re);let ie=0;for(let Fe=0;Fe<xe.length;Fe++){const g=xe[Fe];Math.abs(g)>Math.abs(ie)&&(ie=g)}me.push(Math.round(ie*R)/R)}G.push(me)}return G}getDuration(){let A=super.getDuration()||0;return A!==0&&A!==1/0||!this.decodedData||(A=this.decodedData.duration),A}toggleInteraction(A){this.options.interact=A}setTime(A){super.setTime(A),this.updateProgress(A),this.emit("timeupdate",A)}seekTo(A){const L=this.getDuration()*A;this.setTime(L)}playPause(){return Et(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(A){this.setTime(this.getCurrentTime()+A)}empty(){this.load("",[[0]],.001)}setMediaElement(A){this.unsubscribePlayerEvents(),super.setMediaElement(A),this.initPlayerEvents()}exportImage(A="image/png",L=1,R="dataURL"){return Et(this,void 0,void 0,function*(){return this.renderer.exportImage(A,L,R)})}destroy(){this.emit("destroy"),this.plugins.forEach(A=>A.destroy()),this.subscriptions.forEach(A=>A()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}$s.BasePlugin=class extends Qs{constructor(j){super(),this.subscriptions=[],this.options=j}onInit(){}_init(j){this.wavesurfer=j,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(j=>j())}},$s.dom=lC;function fC(j){j.setVolume(.5)}function gC(j,A){const L=document.createElement("div");L.className="w-full h-full",j.replaceWith(L),L.appendChild(j);const R=$s.create({container:L,waveColor:"#484848",progressColor:"#f80404",cursorColor:"black",cursorWidth:0,barWidth:null,barGap:null,barRadius:null,normalize:!0,dragToSeek:!0,mediaControls:!0,autoCenter:!0,sampleRate:48e3,backend:"MediaElement",partialRender:!0});return R.load(A),R.on("ready",function(){fC(R)}),R.on("error",function(I){}),R}let Mo=null,ko=null;document.addEventListener("DOMContentLoaded",()=>{fetch("data.json").then(j=>j.json()).then(j=>{j.forEach((A,L)=>{mC(A,L+1)})}).catch(j=>console.error("Error loading JSON:",j)).catch(j=>{console.error("Error loading JSON:",j),console.log("Failed to load some videos due to the above error.")})});function mC(j,A){const L=document.getElementById(j.category.toLowerCase());if(!L){console.warn(`No container found for category: ${j.category}`);return}const R=document.createElement("section");R.className="w-3/4 mx-auto py-4 text-xs",R.id=`${j.category.toLowerCase()}_${A}`,R.setAttribute("data-title",j.title);const I=document.createElement("h2");I.textContent=j.category,I.className="text-xl font-bold",R.appendChild(I);const G=document.createElement("h2");if(G.textContent=`${j.title}`,G.className="text-xl font-bold text-center",R.appendChild(G),j.subtitle){const h=document.createElement("p");h.textContent=j.subtitle,h.className="text-base text-center",R.appendChild(h)}if(j.description){const h=document.createElement("p");h.textContent=j.description,h.className="text-base mt-4 text-center",R.appendChild(h)}if(j.videoUrls&&Array.isArray(j.videoUrls)&&j.videoUrls.forEach(h=>{const me=document.createElement("video");me.className="shaka-player w-full";const re=h.videoUrl;if(vE(me,re),R.appendChild(me),h.videoDescription){const Z=document.createElement("p");Z.textContent=h.videoDescription,Z.className="text-base text-center italic mt-3",R.appendChild(Z)}if(h.videoMoreInfo){const Z=document.createElement("p");Z.textContent=h.videoMoreInfo,Z.className="text-base text-center mt-2",R.appendChild(Z)}me.addEventListener("play",()=>{ko&&ko.pause(),Mo&&Mo!==me&&Mo.pause(),Mo=me}),vE(me,re)}),j.audioUrls&&Array.isArray(j.audioUrls)&&j.audioUrls.forEach((h,me)=>{const re=document.createElement("div");re.className="audio-player wavesurfer-container",re.id=`audio-player-${A}-${me}`,R.appendChild(re);const Z=h.audioUrl;if(Z){if(h.audioDescription){const ie=document.createElement("p");ie.textContent=h.audioDescription,ie.className="text-base",R.appendChild(ie)}if(h.audioMoreInfo){const ie=document.createElement("p");ie.textContent=h.audioMoreInfo,ie.className="text-base italic",R.appendChild(ie)}const xe=gC(re,Z);xe.on("play",function(){Mo&&Mo.pause(),ko&&ko!==xe&&ko.pause(),ko=xe})}}),j.imageUrl){const h=document.createElement("img");h.src=j.imageUrl,h.className="max-w-full h-auto",R.appendChild(h)}if(j.year){const h=document.createElement("p");h.textContent=j.year,h.className="text-base",R.appendChild(h)}if(j.text){const h=document.createElement("p");h.innerHTML=j.text,h.className="text-base",R.appendChild(h)}const H=document.createElement("hr");if(H.className="my-12 h-1 border-t-0 bg-neutral-100 dark:bg-white/10",R.appendChild(H),j.info){const h=document.createElement("div");h.className="info-container text-left",Object.entries(j.info).forEach(([me,re],Z,xe)=>{if(re&&!(Array.isArray(re)&&re.length===0)&&re!==""){const ie=document.createElement("div");ie.className="flex p-2";const Fe=document.createElement("span");Fe.innerHTML=`<strong>${me}:</strong>`,Fe.className="w-32";const g=document.createElement("span");if(Array.isArray(re)){const F=document.createElement("ul");re.forEach(St=>{const et=document.createElement("li");et.textContent=St,F.appendChild(et)}),g.appendChild(F)}else g.textContent=re;if(ie.appendChild(Fe),ie.appendChild(g),h.appendChild(ie),Z!==xe.length-1){const F=document.createElement("hr");F.className="border-black/10 my-2 w-4/5",h.appendChild(F)}}}),R.appendChild(h),R.appendChild(h)}L.appendChild(R)}var yl=document.getElementsByClassName("collapsible"),Ui;for(Ui=0;Ui<yl.length;Ui++)yl[Ui].addEventListener("click",function(){this.classList.toggle("active");var j=this.nextElementSibling;j.style.maxHeight?j.style.maxHeight=null:j.style.maxHeight=j.scrollHeight+"px"});window.addEventListener("scroll",function(){if(window.scrollY>100)for(Ui=0;Ui<yl.length;Ui++){var j=yl[Ui].nextElementSibling;j.style.maxHeight=null}});const vC=document.getElementById("dark-mode-toggle");vC.addEventListener("click",()=>{document.body.classList.toggle("dark")});
